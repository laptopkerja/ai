function GR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ql(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cj={exports:{}},Yh={},uj={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=Symbol.for("react.element"),JR=Symbol.for("react.portal"),YR=Symbol.for("react.fragment"),QR=Symbol.for("react.strict_mode"),XR=Symbol.for("react.profiler"),ZR=Symbol.for("react.provider"),eA=Symbol.for("react.context"),tA=Symbol.for("react.forward_ref"),nA=Symbol.for("react.suspense"),rA=Symbol.for("react.memo"),sA=Symbol.for("react.lazy"),D0=Symbol.iterator;function iA(e){return e===null||typeof e!="object"?null:(e=D0&&e[D0]||e["@@iterator"],typeof e=="function"?e:null)}var dj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fj=Object.assign,hj={};function Xl(e,t,n){this.props=e,this.context=t,this.refs=hj,this.updater=n||dj}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pj(){}pj.prototype=Xl.prototype;function Yy(e,t,n){this.props=e,this.context=t,this.refs=hj,this.updater=n||dj}var Qy=Yy.prototype=new pj;Qy.constructor=Yy;fj(Qy,Xl.prototype);Qy.isPureReactComponent=!0;var B0=Array.isArray,mj=Object.prototype.hasOwnProperty,Xy={current:null},gj={key:!0,ref:!0,__self:!0,__source:!0};function yj(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)mj.call(t,r)&&!gj.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xu,type:e,key:i,ref:a,props:s,_owner:Xy.current}}function aA(e,t){return{$$typeof:Xu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xu}function oA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var U0=/\/+/g;function Gp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?oA(""+e.key):t.toString(36)}function Ef(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Xu:case JR:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Gp(a,0):r,B0(s)?(n="",e!=null&&(n=e.replace(U0,"$&/")+"/"),Ef(s,t,n,"",function(u){return u})):s!=null&&(Zy(s)&&(s=aA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(U0,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",B0(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Gp(i,l);a+=Ef(i,t,n,c,s)}else if(c=iA(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Gp(i,l++),a+=Ef(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Id(e,t,n){if(e==null)return e;var r=[],s=0;return Ef(e,r,"","",function(i){return t.call(n,i,s++)}),r}function lA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tr={current:null},Nf={transition:null},cA={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:Nf,ReactCurrentOwner:Xy};function vj(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Id,forEach:function(e,t,n){Id(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Id(e,function(){t++}),t},toArray:function(e){return Id(e,function(t){return t})||[]},only:function(e){if(!Zy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kt.Component=Xl;kt.Fragment=YR;kt.Profiler=XR;kt.PureComponent=Yy;kt.StrictMode=QR;kt.Suspense=nA;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cA;kt.act=vj;kt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fj({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Xy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mj.call(t,c)&&!gj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Xu,type:e.type,key:s,ref:i,props:r,_owner:a}};kt.createContext=function(e){return e={$$typeof:eA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZR,_context:e},e.Consumer=e};kt.createElement=yj;kt.createFactory=function(e){var t=yj.bind(null,e);return t.type=e,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(e){return{$$typeof:tA,render:e}};kt.isValidElement=Zy;kt.lazy=function(e){return{$$typeof:sA,_payload:{_status:-1,_result:e},_init:lA}};kt.memo=function(e,t){return{$$typeof:rA,type:e,compare:t===void 0?null:t}};kt.startTransition=function(e){var t=Nf.transition;Nf.transition={};try{e()}finally{Nf.transition=t}};kt.unstable_act=vj;kt.useCallback=function(e,t){return Tr.current.useCallback(e,t)};kt.useContext=function(e){return Tr.current.useContext(e)};kt.useDebugValue=function(){};kt.useDeferredValue=function(e){return Tr.current.useDeferredValue(e)};kt.useEffect=function(e,t){return Tr.current.useEffect(e,t)};kt.useId=function(){return Tr.current.useId()};kt.useImperativeHandle=function(e,t,n){return Tr.current.useImperativeHandle(e,t,n)};kt.useInsertionEffect=function(e,t){return Tr.current.useInsertionEffect(e,t)};kt.useLayoutEffect=function(e,t){return Tr.current.useLayoutEffect(e,t)};kt.useMemo=function(e,t){return Tr.current.useMemo(e,t)};kt.useReducer=function(e,t,n){return Tr.current.useReducer(e,t,n)};kt.useRef=function(e){return Tr.current.useRef(e)};kt.useState=function(e){return Tr.current.useState(e)};kt.useSyncExternalStore=function(e,t,n){return Tr.current.useSyncExternalStore(e,t,n)};kt.useTransition=function(){return Tr.current.useTransition()};kt.version="18.3.1";uj.exports=kt;var y=uj.exports;const At=Ql(y),uA=GR({__proto__:null,default:At},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA=y,fA=Symbol.for("react.element"),hA=Symbol.for("react.fragment"),pA=Object.prototype.hasOwnProperty,mA=dA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gA={key:!0,ref:!0,__self:!0,__source:!0};function bj(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)pA.call(t,r)&&!gA.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:fA,type:e,key:i,ref:a,props:s,_owner:mA.current}}Yh.Fragment=hA;Yh.jsx=bj;Yh.jsxs=bj;cj.exports=Yh;var o=cj.exports,wj={exports:{}},os={},xj={exports:{}},Sj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,M){var I=T.length;T.push(M);e:for(;0<I;){var N=I-1>>>1,L=T[N];if(0<s(L,M))T[N]=M,T[I]=L,I=N;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var M=T[0],I=T.pop();if(I!==M){T[0]=I;e:for(var N=0,L=T.length,A=L>>>1;N<A;){var _=2*(N+1)-1,R=T[_],K=_+1,pe=T[K];if(0>s(R,I))K<L&&0>s(pe,R)?(T[N]=pe,T[K]=I,N=K):(T[N]=R,T[_]=I,N=_);else if(K<L&&0>s(pe,I))T[N]=pe,T[K]=I,N=K;else break e}}return M}function s(T,M){var I=T.sortIndex-M.sortIndex;return I!==0?I:T.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,g=3,p=!1,m=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=T)r(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function k(T){if(w=!1,x(T),!m)if(n(c)!==null)m=!0,ve(E);else{var M=n(u);M!==null&&Oe(k,M.startTime-T)}}function E(T,M){m=!1,w&&(w=!1,h(B),B=-1),p=!0;var I=g;try{for(x(M),f=n(c);f!==null&&(!(f.expirationTime>M)||T&&!ee());){var N=f.callback;if(typeof N=="function"){f.callback=null,g=f.priorityLevel;var L=N(f.expirationTime<=M);M=e.unstable_now(),typeof L=="function"?f.callback=L:f===n(c)&&r(c),x(M)}else r(c);f=n(c)}if(f!==null)var A=!0;else{var _=n(u);_!==null&&Oe(k,_.startTime-M),A=!1}return A}finally{f=null,g=I,p=!1}}var $=!1,P=null,B=-1,W=5,Y=-1;function ee(){return!(e.unstable_now()-Y<W)}function Q(){if(P!==null){var T=e.unstable_now();Y=T;var M=!0;try{M=P(!0,T)}finally{M?X():($=!1,P=null)}}else $=!1}var X;if(typeof v=="function")X=function(){v(Q)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,me=fe.port2;fe.port1.onmessage=Q,X=function(){me.postMessage(null)}}else X=function(){b(Q,0)};function ve(T){P=T,$||($=!0,X())}function Oe(T,M){B=b(function(){T(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,ve(E))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var I=g;g=M;try{return T()}finally{g=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,M){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var I=g;g=T;try{return M()}finally{g=I}},e.unstable_scheduleCallback=function(T,M,I){var N=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?N+I:N):I=N,T){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=I+L,T={id:d++,callback:M,priorityLevel:T,startTime:I,expirationTime:L,sortIndex:-1},I>N?(T.sortIndex=I,t(u,T),n(c)===null&&T===n(u)&&(w?(h(B),B=-1):w=!0,Oe(k,I-N))):(T.sortIndex=L,t(c,T),m||p||(m=!0,ve(E))),T},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(T){var M=g;return function(){var I=g;g=M;try{return T.apply(this,arguments)}finally{g=I}}}})(Sj);xj.exports=Sj;var yA=xj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=y,is=yA;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _j=new Set,xu={};function $o(e,t){Pl(e,t),Pl(e+"Capture",t)}function Pl(e,t){for(xu[e]=t,e=0;e<t.length;e++)_j.add(t[e])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ig=Object.prototype.hasOwnProperty,bA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z0={},V0={};function wA(e){return ig.call(V0,e)?!0:ig.call(z0,e)?!1:bA.test(e)?V0[e]=!0:(z0[e]=!0,!1)}function xA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SA(e,t,n,r){if(t===null||typeof t>"u"||xA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $r(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new $r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dr[t]=new $r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new $r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new $r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new $r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new $r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new $r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new $r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new $r(e,5,!1,e.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ev,tv);dr[t]=new $r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ev,tv);dr[t]=new $r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ev,tv);dr[t]=new $r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new $r(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new $r(e,1,!1,e.toLowerCase(),null,!0,!0)});function nv(e,t,n,r){var s=dr.hasOwnProperty(t)?dr[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SA(t,n,s,r)&&(n=null),r||s===null?wA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vi=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ld=Symbol.for("react.element"),ll=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),kj=Symbol.for("react.provider"),jj=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),og=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),ca=Symbol.for("react.lazy"),Ej=Symbol.for("react.offscreen"),H0=Symbol.iterator;function yc(e){return e===null||typeof e!="object"?null:(e=H0&&e[H0]||e["@@iterator"],typeof e=="function"?e:null)}var yn=Object.assign,Jp;function Lc(e){if(Jp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jp=t&&t[1]||""}return`
`+Jp+e}var Yp=!1;function Qp(e,t){if(!e||Yp)return"";Yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Yp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lc(e):""}function _A(e){switch(e.tag){case 5:return Lc(e.type);case 16:return Lc("Lazy");case 13:return Lc("Suspense");case 19:return Lc("SuspenseList");case 0:case 2:case 15:return e=Qp(e.type,!1),e;case 11:return e=Qp(e.type.render,!1),e;case 1:return e=Qp(e.type,!0),e;default:return""}}function cg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cl:return"Fragment";case ll:return"Portal";case ag:return"Profiler";case rv:return"StrictMode";case og:return"Suspense";case lg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jj:return(e.displayName||"Context")+".Consumer";case kj:return(e._context.displayName||"Context")+".Provider";case sv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case iv:return t=e.displayName||null,t!==null?t:cg(e.type)||"Memo";case ca:t=e._payload,e=e._init;try{return cg(e(t))}catch{}}return null}function kA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(t);case 8:return t===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ma(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jA(e){var t=Nj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Md(e){e._valueTracker||(e._valueTracker=jA(e))}function Cj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ug(e,t){var n=t.checked;return yn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function q0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ma(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tj(e,t){t=t.checked,t!=null&&nv(e,"checked",t,!1)}function dg(e,t){Tj(e,t);var n=Ma(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fg(e,t.type,n):t.hasOwnProperty("defaultValue")&&fg(e,t.type,Ma(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function K0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fg(e,t,n){(t!=="number"||eh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mc=Array.isArray;function _l(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ma(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return yn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function W0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(Mc(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ma(n)}}function $j(e,t){var n=Ma(t.value),r=Ma(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function G0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fd,Rj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fd=Fd||document.createElement("div"),Fd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Su(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EA=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(e){EA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jc[t]=Jc[e]})});function Aj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jc.hasOwnProperty(e)&&Jc[e]?(""+t).trim():t+"px"}function Pj(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Aj(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var NA=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mg(e,t){if(t){if(NA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function gg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function av(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vg=null,kl=null,jl=null;function J0(e){if(e=td(e)){if(typeof vg!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=tp(t),vg(e.stateNode,e.type,t))}}function Ij(e){kl?jl?jl.push(e):jl=[e]:kl=e}function Lj(){if(kl){var e=kl,t=jl;if(jl=kl=null,J0(e),t)for(e=0;e<t.length;e++)J0(t[e])}}function Mj(e,t){return e(t)}function Fj(){}var Xp=!1;function Dj(e,t,n){if(Xp)return e(t,n);Xp=!0;try{return Mj(e,t,n)}finally{Xp=!1,(kl!==null||jl!==null)&&(Fj(),Lj())}}function _u(e,t){var n=e.stateNode;if(n===null)return null;var r=tp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var bg=!1;if(Ii)try{var vc={};Object.defineProperty(vc,"passive",{get:function(){bg=!0}}),window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{bg=!1}function CA(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Yc=!1,th=null,nh=!1,wg=null,TA={onError:function(e){Yc=!0,th=e}};function $A(e,t,n,r,s,i,a,l,c){Yc=!1,th=null,CA.apply(TA,arguments)}function OA(e,t,n,r,s,i,a,l,c){if($A.apply(this,arguments),Yc){if(Yc){var u=th;Yc=!1,th=null}else throw Error(_e(198));nh||(nh=!0,wg=u)}}function Oo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y0(e){if(Oo(e)!==e)throw Error(_e(188))}function RA(e){var t=e.alternate;if(!t){if(t=Oo(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Y0(s),e;if(i===r)return Y0(s),t;i=i.sibling}throw Error(_e(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function Uj(e){return e=RA(e),e!==null?zj(e):null}function zj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zj(e);if(t!==null)return t;e=e.sibling}return null}var Vj=is.unstable_scheduleCallback,Q0=is.unstable_cancelCallback,AA=is.unstable_shouldYield,PA=is.unstable_requestPaint,Cn=is.unstable_now,IA=is.unstable_getCurrentPriorityLevel,ov=is.unstable_ImmediatePriority,Hj=is.unstable_UserBlockingPriority,rh=is.unstable_NormalPriority,LA=is.unstable_LowPriority,qj=is.unstable_IdlePriority,Qh=null,ui=null;function MA(e){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(Qh,e,void 0,(e.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:BA,FA=Math.log,DA=Math.LN2;function BA(e){return e>>>=0,e===0?32:31-(FA(e)/DA|0)|0}var Dd=64,Bd=4194304;function Fc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Fc(l):(i&=a,i!==0&&(r=Fc(i)))}else a=n&~s,a!==0?r=Fc(a):i!==0&&(r=Fc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qs(t),s=1<<n,r|=e[n],t&=~s;return r}function UA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-qs(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=UA(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function xg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kj(){var e=Dd;return Dd<<=1,!(Dd&4194240)&&(Dd=64),e}function Zp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qs(t),e[t]=n}function VA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-qs(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function lv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qs(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var zt=0;function Wj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gj,cv,Jj,Yj,Qj,Sg=!1,Ud=[],Na=null,Ca=null,Ta=null,ku=new Map,ju=new Map,pa=[],HA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X0(e,t){switch(e){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":ku.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(t.pointerId)}}function bc(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=td(t),t!==null&&cv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function qA(e,t,n,r,s){switch(t){case"focusin":return Na=bc(Na,e,t,n,r,s),!0;case"dragenter":return Ca=bc(Ca,e,t,n,r,s),!0;case"mouseover":return Ta=bc(Ta,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ku.set(i,bc(ku.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ju.set(i,bc(ju.get(i)||null,e,t,n,r,s)),!0}return!1}function Xj(e){var t=oo(e.target);if(t!==null){var n=Oo(t);if(n!==null){if(t=n.tag,t===13){if(t=Bj(n),t!==null){e.blockedOn=t,Qj(e.priority,function(){Jj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_g(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return t=td(n),t!==null&&cv(t),e.blockedOn=n,!1;t.shift()}return!0}function Z0(e,t,n){Cf(e)&&n.delete(t)}function KA(){Sg=!1,Na!==null&&Cf(Na)&&(Na=null),Ca!==null&&Cf(Ca)&&(Ca=null),Ta!==null&&Cf(Ta)&&(Ta=null),ku.forEach(Z0),ju.forEach(Z0)}function wc(e,t){e.blockedOn===t&&(e.blockedOn=null,Sg||(Sg=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,KA)))}function Eu(e){function t(s){return wc(s,e)}if(0<Ud.length){wc(Ud[0],e);for(var n=1;n<Ud.length;n++){var r=Ud[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Na!==null&&wc(Na,e),Ca!==null&&wc(Ca,e),Ta!==null&&wc(Ta,e),ku.forEach(t),ju.forEach(t),n=0;n<pa.length;n++)r=pa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<pa.length&&(n=pa[0],n.blockedOn===null);)Xj(n),n.blockedOn===null&&pa.shift()}var El=Vi.ReactCurrentBatchConfig,ih=!0;function WA(e,t,n,r){var s=zt,i=El.transition;El.transition=null;try{zt=1,uv(e,t,n,r)}finally{zt=s,El.transition=i}}function GA(e,t,n,r){var s=zt,i=El.transition;El.transition=null;try{zt=4,uv(e,t,n,r)}finally{zt=s,El.transition=i}}function uv(e,t,n,r){if(ih){var s=_g(e,t,n,r);if(s===null)cm(e,t,r,ah,n),X0(e,r);else if(qA(s,e,t,n,r))r.stopPropagation();else if(X0(e,r),t&4&&-1<HA.indexOf(e)){for(;s!==null;){var i=td(s);if(i!==null&&Gj(i),i=_g(e,t,n,r),i===null&&cm(e,t,r,ah,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cm(e,t,r,null,n)}}var ah=null;function _g(e,t,n,r){if(ah=null,e=av(r),e=oo(e),e!==null)if(t=Oo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ah=e,null}function Zj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IA()){case ov:return 1;case Hj:return 4;case rh:case LA:return 16;case qj:return 536870912;default:return 16}default:return 16}}var xa=null,dv=null,Tf=null;function eE(){if(Tf)return Tf;var e,t=dv,n=t.length,r,s="value"in xa?xa.value:xa.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Tf=s.slice(e,1<r?1-r:void 0)}function $f(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zd(){return!0}function ex(){return!1}function ls(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zd:ex,this.isPropagationStopped=ex,this}return yn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),t}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fv=ls(Zl),ed=yn({},Zl,{view:0,detail:0}),JA=ls(ed),em,tm,xc,Xh=yn({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xc&&(xc&&e.type==="mousemove"?(em=e.screenX-xc.screenX,tm=e.screenY-xc.screenY):tm=em=0,xc=e),em)},movementY:function(e){return"movementY"in e?e.movementY:tm}}),tx=ls(Xh),YA=yn({},Xh,{dataTransfer:0}),QA=ls(YA),XA=yn({},ed,{relatedTarget:0}),nm=ls(XA),ZA=yn({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),e1=ls(ZA),t1=yn({},Zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n1=ls(t1),r1=yn({},Zl,{data:0}),nx=ls(r1),s1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a1[e])?!!t[e]:!1}function hv(){return o1}var l1=yn({},ed,{key:function(e){if(e.key){var t=s1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$f(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(e){return e.type==="keypress"?$f(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$f(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c1=ls(l1),u1=yn({},Xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rx=ls(u1),d1=yn({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),f1=ls(d1),h1=yn({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),p1=ls(h1),m1=yn({},Xh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g1=ls(m1),y1=[9,13,27,32],pv=Ii&&"CompositionEvent"in window,Qc=null;Ii&&"documentMode"in document&&(Qc=document.documentMode);var v1=Ii&&"TextEvent"in window&&!Qc,tE=Ii&&(!pv||Qc&&8<Qc&&11>=Qc),sx=" ",ix=!1;function nE(e,t){switch(e){case"keyup":return y1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ul=!1;function b1(e,t){switch(e){case"compositionend":return rE(t);case"keypress":return t.which!==32?null:(ix=!0,sx);case"textInput":return e=t.data,e===sx&&ix?null:e;default:return null}}function w1(e,t){if(ul)return e==="compositionend"||!pv&&nE(e,t)?(e=eE(),Tf=dv=xa=null,ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tE&&t.locale!=="ko"?null:t.data;default:return null}}var x1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!x1[e.type]:t==="textarea"}function sE(e,t,n,r){Ij(r),t=oh(t,"onChange"),0<t.length&&(n=new fv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xc=null,Nu=null;function S1(e){mE(e,0)}function Zh(e){var t=hl(e);if(Cj(t))return e}function _1(e,t){if(e==="change")return t}var iE=!1;if(Ii){var rm;if(Ii){var sm="oninput"in document;if(!sm){var ox=document.createElement("div");ox.setAttribute("oninput","return;"),sm=typeof ox.oninput=="function"}rm=sm}else rm=!1;iE=rm&&(!document.documentMode||9<document.documentMode)}function lx(){Xc&&(Xc.detachEvent("onpropertychange",aE),Nu=Xc=null)}function aE(e){if(e.propertyName==="value"&&Zh(Nu)){var t=[];sE(t,Nu,e,av(e)),Dj(S1,t)}}function k1(e,t,n){e==="focusin"?(lx(),Xc=t,Nu=n,Xc.attachEvent("onpropertychange",aE)):e==="focusout"&&lx()}function j1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zh(Nu)}function E1(e,t){if(e==="click")return Zh(t)}function N1(e,t){if(e==="input"||e==="change")return Zh(t)}function C1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gs=typeof Object.is=="function"?Object.is:C1;function Cu(e,t){if(Gs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ig.call(t,s)||!Gs(e[s],t[s]))return!1}return!0}function cx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ux(e,t){var n=cx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cx(n)}}function oE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lE(){for(var e=window,t=eh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eh(e.document)}return t}function mv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function T1(e){var t=lE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oE(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ux(n,i);var a=ux(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $1=Ii&&"documentMode"in document&&11>=document.documentMode,dl=null,kg=null,Zc=null,jg=!1;function dx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jg||dl==null||dl!==eh(r)||(r=dl,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zc&&Cu(Zc,r)||(Zc=r,r=oh(kg,"onSelect"),0<r.length&&(t=new fv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dl)))}function Vd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fl={animationend:Vd("Animation","AnimationEnd"),animationiteration:Vd("Animation","AnimationIteration"),animationstart:Vd("Animation","AnimationStart"),transitionend:Vd("Transition","TransitionEnd")},im={},cE={};Ii&&(cE=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function ep(e){if(im[e])return im[e];if(!fl[e])return e;var t=fl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cE)return im[e]=t[n];return e}var uE=ep("animationend"),dE=ep("animationiteration"),fE=ep("animationstart"),hE=ep("transitionend"),pE=new Map,fx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){pE.set(e,t),$o(t,[e])}for(var am=0;am<fx.length;am++){var om=fx[am],O1=om.toLowerCase(),R1=om[0].toUpperCase()+om.slice(1);Ua(O1,"on"+R1)}Ua(uE,"onAnimationEnd");Ua(dE,"onAnimationIteration");Ua(fE,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(hE,"onTransitionEnd");Pl("onMouseEnter",["mouseout","mouseover"]);Pl("onMouseLeave",["mouseout","mouseover"]);Pl("onPointerEnter",["pointerout","pointerover"]);Pl("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function hx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,OA(r,t,void 0,e),e.currentTarget=null}function mE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;hx(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;hx(s,l,u),i=c}}}if(nh)throw e=wg,nh=!1,wg=null,e}function en(e,t){var n=t[$g];n===void 0&&(n=t[$g]=new Set);var r=e+"__bubble";n.has(r)||(gE(t,e,2,!1),n.add(r))}function lm(e,t,n){var r=0;t&&(r|=4),gE(n,e,r,t)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[Hd]){e[Hd]=!0,_j.forEach(function(n){n!=="selectionchange"&&(A1.has(n)||lm(n,!1,e),lm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hd]||(t[Hd]=!0,lm("selectionchange",!1,t))}}function gE(e,t,n,r){switch(Zj(t)){case 1:var s=WA;break;case 4:s=GA;break;default:s=uv}n=s.bind(null,t,n,e),s=void 0,!bg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function cm(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=oo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Dj(function(){var u=i,d=av(n),f=[];e:{var g=pE.get(e);if(g!==void 0){var p=fv,m=e;switch(e){case"keypress":if($f(n)===0)break e;case"keydown":case"keyup":p=c1;break;case"focusin":m="focus",p=nm;break;case"focusout":m="blur",p=nm;break;case"beforeblur":case"afterblur":p=nm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=tx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=QA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f1;break;case uE:case dE:case fE:p=e1;break;case hE:p=p1;break;case"scroll":p=JA;break;case"wheel":p=g1;break;case"copy":case"cut":case"paste":p=n1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rx}var w=(t&4)!==0,b=!w&&e==="scroll",h=w?g!==null?g+"Capture":null:g;w=[];for(var v=u,x;v!==null;){x=v;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,h!==null&&(k=_u(v,h),k!=null&&w.push($u(v,k,x)))),b)break;v=v.return}0<w.length&&(g=new p(g,m,null,n,d),f.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==yg&&(m=n.relatedTarget||n.fromElement)&&(oo(m)||m[Li]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?oo(m):null,m!==null&&(b=Oo(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(w=tx,k="onMouseLeave",h="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(w=rx,k="onPointerLeave",h="onPointerEnter",v="pointer"),b=p==null?g:hl(p),x=m==null?g:hl(m),g=new w(k,v+"leave",p,n,d),g.target=b,g.relatedTarget=x,k=null,oo(d)===u&&(w=new w(h,v+"enter",m,n,d),w.target=x,w.relatedTarget=b,k=w),b=k,p&&m)t:{for(w=p,h=m,v=0,x=w;x;x=Do(x))v++;for(x=0,k=h;k;k=Do(k))x++;for(;0<v-x;)w=Do(w),v--;for(;0<x-v;)h=Do(h),x--;for(;v--;){if(w===h||h!==null&&w===h.alternate)break t;w=Do(w),h=Do(h)}w=null}else w=null;p!==null&&px(f,g,p,w,!1),m!==null&&b!==null&&px(f,b,m,w,!0)}}e:{if(g=u?hl(u):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var E=_1;else if(ax(g))if(iE)E=N1;else{E=j1;var $=k1}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(E=E1);if(E&&(E=E(e,u))){sE(f,E,n,d);break e}$&&$(e,g,u),e==="focusout"&&($=g._wrapperState)&&$.controlled&&g.type==="number"&&fg(g,"number",g.value)}switch($=u?hl(u):window,e){case"focusin":(ax($)||$.contentEditable==="true")&&(dl=$,kg=u,Zc=null);break;case"focusout":Zc=kg=dl=null;break;case"mousedown":jg=!0;break;case"contextmenu":case"mouseup":case"dragend":jg=!1,dx(f,n,d);break;case"selectionchange":if($1)break;case"keydown":case"keyup":dx(f,n,d)}var P;if(pv)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ul?nE(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(tE&&n.locale!=="ko"&&(ul||B!=="onCompositionStart"?B==="onCompositionEnd"&&ul&&(P=eE()):(xa=d,dv="value"in xa?xa.value:xa.textContent,ul=!0)),$=oh(u,B),0<$.length&&(B=new nx(B,e,null,n,d),f.push({event:B,listeners:$}),P?B.data=P:(P=rE(n),P!==null&&(B.data=P)))),(P=v1?b1(e,n):w1(e,n))&&(u=oh(u,"onBeforeInput"),0<u.length&&(d=new nx("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=P))}mE(f,t)})}function $u(e,t,n){return{instance:e,listener:t,currentTarget:n}}function oh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_u(e,n),i!=null&&r.unshift($u(e,i,s)),i=_u(e,t),i!=null&&r.push($u(e,i,s))),e=e.return}return r}function Do(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function px(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=_u(n,i),c!=null&&a.unshift($u(n,c,l))):s||(c=_u(n,i),c!=null&&a.push($u(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var P1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function mx(e){return(typeof e=="string"?e:""+e).replace(P1,`
`).replace(I1,"")}function qd(e,t,n){if(t=mx(t),mx(e)!==t&&n)throw Error(_e(425))}function lh(){}var Eg=null,Ng=null;function Cg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,L1=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,M1=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(e){return gx.resolve(null).then(e).catch(F1)}:Tg;function F1(e){setTimeout(function(){throw e})}function um(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Eu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Eu(t)}function $a(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ec=Math.random().toString(36).slice(2),ii="__reactFiber$"+ec,Ou="__reactProps$"+ec,Li="__reactContainer$"+ec,$g="__reactEvents$"+ec,D1="__reactListeners$"+ec,B1="__reactHandles$"+ec;function oo(e){var t=e[ii];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Li]||n[ii]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yx(e);e!==null;){if(n=e[ii])return n;e=yx(e)}return t}e=n,n=e.parentNode}return null}function td(e){return e=e[ii]||e[Li],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function tp(e){return e[Ou]||null}var Og=[],pl=-1;function za(e){return{current:e}}function rn(e){0>pl||(e.current=Og[pl],Og[pl]=null,pl--)}function Xt(e,t){pl++,Og[pl]=e.current,e.current=t}var Fa={},br=za(Fa),Br=za(!1),wo=Fa;function Il(e,t){var n=e.type.contextTypes;if(!n)return Fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ur(e){return e=e.childContextTypes,e!=null}function ch(){rn(Br),rn(br)}function vx(e,t,n){if(br.current!==Fa)throw Error(_e(168));Xt(br,t),Xt(Br,n)}function yE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(_e(108,kA(e)||"Unknown",s));return yn({},n,r)}function uh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fa,wo=br.current,Xt(br,e),Xt(Br,Br.current),!0}function bx(e,t,n){var r=e.stateNode;if(!r)throw Error(_e(169));n?(e=yE(e,t,wo),r.__reactInternalMemoizedMergedChildContext=e,rn(Br),rn(br),Xt(br,e)):rn(Br),Xt(Br,n)}var _i=null,np=!1,dm=!1;function vE(e){_i===null?_i=[e]:_i.push(e)}function U1(e){np=!0,vE(e)}function Va(){if(!dm&&_i!==null){dm=!0;var e=0,t=zt;try{var n=_i;for(zt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_i=null,np=!1}catch(s){throw _i!==null&&(_i=_i.slice(e+1)),Vj(ov,Va),s}finally{zt=t,dm=!1}}return null}var ml=[],gl=0,dh=null,fh=0,vs=[],bs=0,xo=null,Ni=1,Ci="";function Xa(e,t){ml[gl++]=fh,ml[gl++]=dh,dh=e,fh=t}function bE(e,t,n){vs[bs++]=Ni,vs[bs++]=Ci,vs[bs++]=xo,xo=e;var r=Ni;e=Ci;var s=32-qs(r)-1;r&=~(1<<s),n+=1;var i=32-qs(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ni=1<<32-qs(t)+s|n<<s|r,Ci=i+e}else Ni=1<<i|n<<s|r,Ci=e}function gv(e){e.return!==null&&(Xa(e,1),bE(e,1,0))}function yv(e){for(;e===dh;)dh=ml[--gl],ml[gl]=null,fh=ml[--gl],ml[gl]=null;for(;e===xo;)xo=vs[--bs],vs[bs]=null,Ci=vs[--bs],vs[bs]=null,Ni=vs[--bs],vs[bs]=null}var ss=null,rs=null,an=!1,Us=null;function wE(e,t){var n=xs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ss=e,rs=$a(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ss=e,rs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xo!==null?{id:Ni,overflow:Ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ss=e,rs=null,!0):!1;default:return!1}}function Rg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ag(e){if(an){var t=rs;if(t){var n=t;if(!wx(e,t)){if(Rg(e))throw Error(_e(418));t=$a(n.nextSibling);var r=ss;t&&wx(e,t)?wE(r,n):(e.flags=e.flags&-4097|2,an=!1,ss=e)}}else{if(Rg(e))throw Error(_e(418));e.flags=e.flags&-4097|2,an=!1,ss=e}}}function xx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ss=e}function Kd(e){if(e!==ss)return!1;if(!an)return xx(e),an=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cg(e.type,e.memoizedProps)),t&&(t=rs)){if(Rg(e))throw xE(),Error(_e(418));for(;t;)wE(e,t),t=$a(t.nextSibling)}if(xx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rs=$a(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rs=null}}else rs=ss?$a(e.stateNode.nextSibling):null;return!0}function xE(){for(var e=rs;e;)e=$a(e.nextSibling)}function Ll(){rs=ss=null,an=!1}function vv(e){Us===null?Us=[e]:Us.push(e)}var z1=Vi.ReactCurrentBatchConfig;function Sc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function Wd(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sx(e){var t=e._init;return t(e._payload)}function SE(e){function t(h,v){if(e){var x=h.deletions;x===null?(h.deletions=[v],h.flags|=16):x.push(v)}}function n(h,v){if(!e)return null;for(;v!==null;)t(h,v),v=v.sibling;return null}function r(h,v){for(h=new Map;v!==null;)v.key!==null?h.set(v.key,v):h.set(v.index,v),v=v.sibling;return h}function s(h,v){return h=Pa(h,v),h.index=0,h.sibling=null,h}function i(h,v,x){return h.index=x,e?(x=h.alternate,x!==null?(x=x.index,x<v?(h.flags|=2,v):x):(h.flags|=2,v)):(h.flags|=1048576,v)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,v,x,k){return v===null||v.tag!==6?(v=vm(x,h.mode,k),v.return=h,v):(v=s(v,x),v.return=h,v)}function c(h,v,x,k){var E=x.type;return E===cl?d(h,v,x.props.children,k,x.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ca&&Sx(E)===v.type)?(k=s(v,x.props),k.ref=Sc(h,v,x),k.return=h,k):(k=Mf(x.type,x.key,x.props,null,h.mode,k),k.ref=Sc(h,v,x),k.return=h,k)}function u(h,v,x,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=bm(x,h.mode,k),v.return=h,v):(v=s(v,x.children||[]),v.return=h,v)}function d(h,v,x,k,E){return v===null||v.tag!==7?(v=yo(x,h.mode,k,E),v.return=h,v):(v=s(v,x),v.return=h,v)}function f(h,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=vm(""+v,h.mode,x),v.return=h,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ld:return x=Mf(v.type,v.key,v.props,null,h.mode,x),x.ref=Sc(h,null,v),x.return=h,x;case ll:return v=bm(v,h.mode,x),v.return=h,v;case ca:var k=v._init;return f(h,k(v._payload),x)}if(Mc(v)||yc(v))return v=yo(v,h.mode,x,null),v.return=h,v;Wd(h,v)}return null}function g(h,v,x,k){var E=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(h,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ld:return x.key===E?c(h,v,x,k):null;case ll:return x.key===E?u(h,v,x,k):null;case ca:return E=x._init,g(h,v,E(x._payload),k)}if(Mc(x)||yc(x))return E!==null?null:d(h,v,x,k,null);Wd(h,x)}return null}function p(h,v,x,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return h=h.get(x)||null,l(v,h,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ld:return h=h.get(k.key===null?x:k.key)||null,c(v,h,k,E);case ll:return h=h.get(k.key===null?x:k.key)||null,u(v,h,k,E);case ca:var $=k._init;return p(h,v,x,$(k._payload),E)}if(Mc(k)||yc(k))return h=h.get(x)||null,d(v,h,k,E,null);Wd(v,k)}return null}function m(h,v,x,k){for(var E=null,$=null,P=v,B=v=0,W=null;P!==null&&B<x.length;B++){P.index>B?(W=P,P=null):W=P.sibling;var Y=g(h,P,x[B],k);if(Y===null){P===null&&(P=W);break}e&&P&&Y.alternate===null&&t(h,P),v=i(Y,v,B),$===null?E=Y:$.sibling=Y,$=Y,P=W}if(B===x.length)return n(h,P),an&&Xa(h,B),E;if(P===null){for(;B<x.length;B++)P=f(h,x[B],k),P!==null&&(v=i(P,v,B),$===null?E=P:$.sibling=P,$=P);return an&&Xa(h,B),E}for(P=r(h,P);B<x.length;B++)W=p(P,h,B,x[B],k),W!==null&&(e&&W.alternate!==null&&P.delete(W.key===null?B:W.key),v=i(W,v,B),$===null?E=W:$.sibling=W,$=W);return e&&P.forEach(function(ee){return t(h,ee)}),an&&Xa(h,B),E}function w(h,v,x,k){var E=yc(x);if(typeof E!="function")throw Error(_e(150));if(x=E.call(x),x==null)throw Error(_e(151));for(var $=E=null,P=v,B=v=0,W=null,Y=x.next();P!==null&&!Y.done;B++,Y=x.next()){P.index>B?(W=P,P=null):W=P.sibling;var ee=g(h,P,Y.value,k);if(ee===null){P===null&&(P=W);break}e&&P&&ee.alternate===null&&t(h,P),v=i(ee,v,B),$===null?E=ee:$.sibling=ee,$=ee,P=W}if(Y.done)return n(h,P),an&&Xa(h,B),E;if(P===null){for(;!Y.done;B++,Y=x.next())Y=f(h,Y.value,k),Y!==null&&(v=i(Y,v,B),$===null?E=Y:$.sibling=Y,$=Y);return an&&Xa(h,B),E}for(P=r(h,P);!Y.done;B++,Y=x.next())Y=p(P,h,B,Y.value,k),Y!==null&&(e&&Y.alternate!==null&&P.delete(Y.key===null?B:Y.key),v=i(Y,v,B),$===null?E=Y:$.sibling=Y,$=Y);return e&&P.forEach(function(Q){return t(h,Q)}),an&&Xa(h,B),E}function b(h,v,x,k){if(typeof x=="object"&&x!==null&&x.type===cl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ld:e:{for(var E=x.key,$=v;$!==null;){if($.key===E){if(E=x.type,E===cl){if($.tag===7){n(h,$.sibling),v=s($,x.props.children),v.return=h,h=v;break e}}else if($.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ca&&Sx(E)===$.type){n(h,$.sibling),v=s($,x.props),v.ref=Sc(h,$,x),v.return=h,h=v;break e}n(h,$);break}else t(h,$);$=$.sibling}x.type===cl?(v=yo(x.props.children,h.mode,k,x.key),v.return=h,h=v):(k=Mf(x.type,x.key,x.props,null,h.mode,k),k.ref=Sc(h,v,x),k.return=h,h=k)}return a(h);case ll:e:{for($=x.key;v!==null;){if(v.key===$)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(h,v.sibling),v=s(v,x.children||[]),v.return=h,h=v;break e}else{n(h,v);break}else t(h,v);v=v.sibling}v=bm(x,h.mode,k),v.return=h,h=v}return a(h);case ca:return $=x._init,b(h,v,$(x._payload),k)}if(Mc(x))return m(h,v,x,k);if(yc(x))return w(h,v,x,k);Wd(h,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(h,v.sibling),v=s(v,x),v.return=h,h=v):(n(h,v),v=vm(x,h.mode,k),v.return=h,h=v),a(h)):n(h,v)}return b}var Ml=SE(!0),_E=SE(!1),hh=za(null),ph=null,yl=null,bv=null;function wv(){bv=yl=ph=null}function xv(e){var t=hh.current;rn(hh),e._currentValue=t}function Pg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nl(e,t){ph=e,bv=yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dr=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bv!==e)if(e={context:e,memoizedValue:t,next:null},yl===null){if(ph===null)throw Error(_e(308));yl=e,ph.dependencies={lanes:0,firstContext:e}}else yl=yl.next=e;return t}var lo=null;function Sv(e){lo===null?lo=[e]:lo.push(e)}function kE(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Sv(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mi(e,r)}function Mi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ua=!1;function _v(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Mt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mi(e,n)}return s=r.interleaved,s===null?(t.next=t,Sv(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mi(e,n)}function Of(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lv(e,n)}}function _x(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mh(e,t,n,r){var s=e.updateQueue;ua=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var g=l.lane,p=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,w=l;switch(g=t,p=n,w.tag){case 1:if(m=w.payload,typeof m=="function"){f=m.call(p,f,g);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,g=typeof m=="function"?m.call(p,f,g):m,g==null)break e;f=yn({},f,g);break e;case 2:ua=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);_o|=a,e.lanes=a,e.memoizedState=f}}function kx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_e(191,s));s.call(r)}}}var nd={},di=za(nd),Ru=za(nd),Au=za(nd);function co(e){if(e===nd)throw Error(_e(174));return e}function kv(e,t){switch(Xt(Au,t),Xt(Ru,e),Xt(di,nd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pg(t,e)}rn(di),Xt(di,t)}function Fl(){rn(di),rn(Ru),rn(Au)}function EE(e){co(Au.current);var t=co(di.current),n=pg(t,e.type);t!==n&&(Xt(Ru,e),Xt(di,n))}function jv(e){Ru.current===e&&(rn(di),rn(Ru))}var mn=za(0);function gh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fm=[];function Ev(){for(var e=0;e<fm.length;e++)fm[e]._workInProgressVersionPrimary=null;fm.length=0}var Rf=Vi.ReactCurrentDispatcher,hm=Vi.ReactCurrentBatchConfig,So=0,gn=null,Gn=null,Zn=null,yh=!1,eu=!1,Pu=0,V1=0;function pr(){throw Error(_e(321))}function Nv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gs(e[n],t[n]))return!1;return!0}function Cv(e,t,n,r,s,i){if(So=i,gn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rf.current=e===null||e.memoizedState===null?W1:G1,e=n(r,s),eu){i=0;do{if(eu=!1,Pu=0,25<=i)throw Error(_e(301));i+=1,Zn=Gn=null,t.updateQueue=null,Rf.current=J1,e=n(r,s)}while(eu)}if(Rf.current=vh,t=Gn!==null&&Gn.next!==null,So=0,Zn=Gn=gn=null,yh=!1,t)throw Error(_e(300));return e}function Tv(){var e=Pu!==0;return Pu=0,e}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?gn.memoizedState=Zn=e:Zn=Zn.next=e,Zn}function js(){if(Gn===null){var e=gn.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=Zn===null?gn.memoizedState:Zn.next;if(t!==null)Zn=t,Gn=e;else{if(e===null)throw Error(_e(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Zn===null?gn.memoizedState=Zn=e:Zn=Zn.next=e}return Zn}function Iu(e,t){return typeof t=="function"?t(e):t}function pm(e){var t=js(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=Gn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((So&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,gn.lanes|=d,_o|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Gs(r,t.memoizedState)||(Dr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,gn.lanes|=i,_o|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function mm(e){var t=js(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Gs(i,t.memoizedState)||(Dr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function NE(){}function CE(e,t){var n=gn,r=js(),s=t(),i=!Gs(r.memoizedState,s);if(i&&(r.memoizedState=s,Dr=!0),r=r.queue,$v(OE.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Zn!==null&&Zn.memoizedState.tag&1){if(n.flags|=2048,Lu(9,$E.bind(null,n,r,s,t),void 0,null),tr===null)throw Error(_e(349));So&30||TE(n,t,s)}return s}function TE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $E(e,t,n,r){t.value=n,t.getSnapshot=r,RE(t)&&AE(e)}function OE(e,t,n){return n(function(){RE(t)&&AE(e)})}function RE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gs(e,n)}catch{return!0}}function AE(e){var t=Mi(e,1);t!==null&&Ks(t,e,1,-1)}function jx(e){var t=ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:e},t.queue=e,e=e.dispatch=K1.bind(null,gn,e),[t.memoizedState,e]}function Lu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PE(){return js().memoizedState}function Af(e,t,n,r){var s=ei();gn.flags|=e,s.memoizedState=Lu(1|t,n,void 0,r===void 0?null:r)}function rp(e,t,n,r){var s=js();r=r===void 0?null:r;var i=void 0;if(Gn!==null){var a=Gn.memoizedState;if(i=a.destroy,r!==null&&Nv(r,a.deps)){s.memoizedState=Lu(t,n,i,r);return}}gn.flags|=e,s.memoizedState=Lu(1|t,n,i,r)}function Ex(e,t){return Af(8390656,8,e,t)}function $v(e,t){return rp(2048,8,e,t)}function IE(e,t){return rp(4,2,e,t)}function LE(e,t){return rp(4,4,e,t)}function ME(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FE(e,t,n){return n=n!=null?n.concat([e]):null,rp(4,4,ME.bind(null,t,e),n)}function Ov(){}function DE(e,t){var n=js();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function BE(e,t){var n=js();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function UE(e,t,n){return So&21?(Gs(n,t)||(n=Kj(),gn.lanes|=n,_o|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dr=!0),e.memoizedState=n)}function H1(e,t){var n=zt;zt=n!==0&&4>n?n:4,e(!0);var r=hm.transition;hm.transition={};try{e(!1),t()}finally{zt=n,hm.transition=r}}function zE(){return js().memoizedState}function q1(e,t,n){var r=Aa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VE(e))HE(t,n);else if(n=kE(e,t,n,r),n!==null){var s=Cr();Ks(n,e,r,s),qE(n,t,r)}}function K1(e,t,n){var r=Aa(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VE(e))HE(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Gs(l,a)){var c=t.interleaved;c===null?(s.next=s,Sv(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=kE(e,t,s,r),n!==null&&(s=Cr(),Ks(n,e,r,s),qE(n,t,r))}}function VE(e){var t=e.alternate;return e===gn||t!==null&&t===gn}function HE(e,t){eu=yh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lv(e,n)}}var vh={readContext:ks,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},W1={readContext:ks,useCallback:function(e,t){return ei().memoizedState=[e,t===void 0?null:t],e},useContext:ks,useEffect:Ex,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Af(4194308,4,ME.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Af(4194308,4,e,t)},useInsertionEffect:function(e,t){return Af(4,2,e,t)},useMemo:function(e,t){var n=ei();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ei();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=q1.bind(null,gn,e),[r.memoizedState,e]},useRef:function(e){var t=ei();return e={current:e},t.memoizedState=e},useState:jx,useDebugValue:Ov,useDeferredValue:function(e){return ei().memoizedState=e},useTransition:function(){var e=jx(!1),t=e[0];return e=H1.bind(null,e[1]),ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gn,s=ei();if(an){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),tr===null)throw Error(_e(349));So&30||TE(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ex(OE.bind(null,r,i,e),[e]),r.flags|=2048,Lu(9,$E.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ei(),t=tr.identifierPrefix;if(an){var n=Ci,r=Ni;n=(r&~(1<<32-qs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=V1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},G1={readContext:ks,useCallback:DE,useContext:ks,useEffect:$v,useImperativeHandle:FE,useInsertionEffect:IE,useLayoutEffect:LE,useMemo:BE,useReducer:pm,useRef:PE,useState:function(){return pm(Iu)},useDebugValue:Ov,useDeferredValue:function(e){var t=js();return UE(t,Gn.memoizedState,e)},useTransition:function(){var e=pm(Iu)[0],t=js().memoizedState;return[e,t]},useMutableSource:NE,useSyncExternalStore:CE,useId:zE,unstable_isNewReconciler:!1},J1={readContext:ks,useCallback:DE,useContext:ks,useEffect:$v,useImperativeHandle:FE,useInsertionEffect:IE,useLayoutEffect:LE,useMemo:BE,useReducer:mm,useRef:PE,useState:function(){return mm(Iu)},useDebugValue:Ov,useDeferredValue:function(e){var t=js();return Gn===null?t.memoizedState=e:UE(t,Gn.memoizedState,e)},useTransition:function(){var e=mm(Iu)[0],t=js().memoizedState;return[e,t]},useMutableSource:NE,useSyncExternalStore:CE,useId:zE,unstable_isNewReconciler:!1};function Ls(e,t){if(e&&e.defaultProps){t=yn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ig(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sp={isMounted:function(e){return(e=e._reactInternals)?Oo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Cr(),s=Aa(e),i=$i(r,s);i.payload=t,n!=null&&(i.callback=n),t=Oa(e,i,s),t!==null&&(Ks(t,e,s,r),Of(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Cr(),s=Aa(e),i=$i(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Oa(e,i,s),t!==null&&(Ks(t,e,s,r),Of(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cr(),r=Aa(e),s=$i(n,r);s.tag=2,t!=null&&(s.callback=t),t=Oa(e,s,r),t!==null&&(Ks(t,e,r,n),Of(t,e,r))}};function Nx(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Cu(n,r)||!Cu(s,i):!0}function KE(e,t,n){var r=!1,s=Fa,i=t.contextType;return typeof i=="object"&&i!==null?i=ks(i):(s=Ur(t)?wo:br.current,r=t.contextTypes,i=(r=r!=null)?Il(e,s):Fa),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Cx(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sp.enqueueReplaceState(t,t.state,null)}function Lg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},_v(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ks(i):(i=Ur(t)?wo:br.current,s.context=Il(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ig(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&sp.enqueueReplaceState(s,s.state,null),mh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Dl(e,t){try{var n="",r=t;do n+=_A(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function gm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Mg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Y1=typeof WeakMap=="function"?WeakMap:Map;function WE(e,t,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wh||(wh=!0,Wg=r),Mg(e,t)},n}function GE(e,t,n){n=$i(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Mg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mg(e,t),typeof r!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Tx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Y1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=uP.bind(null,e,t,n),t.then(e,e))}function $x(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ox(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$i(-1,1),t.tag=2,Oa(n,t,1))),n.lanes|=1),e)}var Q1=Vi.ReactCurrentOwner,Dr=!1;function Er(e,t,n,r){t.child=e===null?_E(t,null,n,r):Ml(t,e.child,n,r)}function Rx(e,t,n,r,s){n=n.render;var i=t.ref;return Nl(t,s),r=Cv(e,t,n,r,i,s),n=Tv(),e!==null&&!Dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fi(e,t,s)):(an&&n&&gv(t),t.flags|=1,Er(e,t,r,s),t.child)}function Ax(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Dv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,JE(e,t,i,r,s)):(e=Mf(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(a,r)&&e.ref===t.ref)return Fi(e,t,s)}return t.flags|=1,e=Pa(i,r),e.ref=t.ref,e.return=t,t.child=e}function JE(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Cu(i,r)&&e.ref===t.ref)if(Dr=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Dr=!0);else return t.lanes=e.lanes,Fi(e,t,s)}return Fg(e,t,n,r,s)}function YE(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(bl,Zr),Zr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xt(bl,Zr),Zr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Xt(bl,Zr),Zr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Xt(bl,Zr),Zr|=r;return Er(e,t,s,n),t.child}function QE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fg(e,t,n,r,s){var i=Ur(n)?wo:br.current;return i=Il(t,i),Nl(t,s),n=Cv(e,t,n,r,i,s),r=Tv(),e!==null&&!Dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fi(e,t,s)):(an&&r&&gv(t),t.flags|=1,Er(e,t,n,s),t.child)}function Px(e,t,n,r,s){if(Ur(n)){var i=!0;uh(t)}else i=!1;if(Nl(t,s),t.stateNode===null)Pf(e,t),KE(t,n,r),Lg(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ks(u):(u=Ur(n)?wo:br.current,u=Il(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Cx(t,a,r,u),ua=!1;var g=t.memoizedState;a.state=g,mh(t,r,a,s),c=t.memoizedState,l!==r||g!==c||Br.current||ua?(typeof d=="function"&&(Ig(t,n,d,r),c=t.memoizedState),(l=ua||Nx(t,n,l,r,g,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,jE(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ls(t.type,l),a.props=u,f=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ks(c):(c=Ur(n)?wo:br.current,c=Il(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||g!==c)&&Cx(t,a,r,c),ua=!1,g=t.memoizedState,a.state=g,mh(t,r,a,s);var m=t.memoizedState;l!==f||g!==m||Br.current||ua?(typeof p=="function"&&(Ig(t,n,p,r),m=t.memoizedState),(u=ua||Nx(t,n,u,r,g,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Dg(e,t,n,r,i,s)}function Dg(e,t,n,r,s,i){QE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&bx(t,n,!1),Fi(e,t,i);r=t.stateNode,Q1.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ml(t,e.child,null,i),t.child=Ml(t,null,l,i)):Er(e,t,l,i),t.memoizedState=r.state,s&&bx(t,n,!0),t.child}function XE(e){var t=e.stateNode;t.pendingContext?vx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vx(e,t.context,!1),kv(e,t.containerInfo)}function Ix(e,t,n,r,s){return Ll(),vv(s),t.flags|=256,Er(e,t,n,r),t.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function Ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZE(e,t,n){var r=t.pendingProps,s=mn.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Xt(mn,s&1),e===null)return Ag(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=op(a,r,0,null),e=yo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ug(n),t.memoizedState=Bg,e):Rv(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return X1(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pa(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pa(l,i):(i=yo(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ug(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Bg,r}return i=e.child,e=i.sibling,r=Pa(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rv(e,t){return t=op({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gd(e,t,n,r){return r!==null&&vv(r),Ml(t,e.child,null,n),e=Rv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function X1(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=gm(Error(_e(422))),Gd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=op({mode:"visible",children:r.children},s,0,null),i=yo(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ml(t,e.child,null,a),t.child.memoizedState=Ug(a),t.memoizedState=Bg,i);if(!(t.mode&1))return Gd(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(_e(419)),r=gm(i,r,void 0),Gd(e,t,a,r)}if(l=(a&e.childLanes)!==0,Dr||l){if(r=tr,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mi(e,s),Ks(r,e,s,-1))}return Fv(),r=gm(Error(_e(421))),Gd(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=dP.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rs=$a(s.nextSibling),ss=t,an=!0,Us=null,e!==null&&(vs[bs++]=Ni,vs[bs++]=Ci,vs[bs++]=xo,Ni=e.id,Ci=e.overflow,xo=t),t=Rv(t,r.children),t.flags|=4096,t)}function Lx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pg(e.return,t,n)}function ym(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eN(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Er(e,t,r.children,n),r=mn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lx(e,n,t);else if(e.tag===19)Lx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xt(mn,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&gh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ym(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&gh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ym(t,!0,n,null,i);break;case"together":ym(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_o|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=Pa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z1(e,t,n){switch(t.tag){case 3:XE(t),Ll();break;case 5:EE(t);break;case 1:Ur(t.type)&&uh(t);break;case 4:kv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Xt(hh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Xt(mn,mn.current&1),t.flags|=128,null):n&t.child.childLanes?ZE(e,t,n):(Xt(mn,mn.current&1),e=Fi(e,t,n),e!==null?e.sibling:null);Xt(mn,mn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return eN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xt(mn,mn.current),r)break;return null;case 22:case 23:return t.lanes=0,YE(e,t,n)}return Fi(e,t,n)}var tN,zg,nN,rN;tN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zg=function(){};nN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,co(di.current);var i=null;switch(n){case"input":s=ug(e,s),r=ug(e,r),i=[];break;case"select":s=yn({},s,{value:void 0}),r=yn({},r,{value:void 0}),i=[];break;case"textarea":s=hg(e,s),r=hg(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lh)}mg(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&en("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rN=function(e,t,n,r){n!==r&&(t.flags|=4)};function _c(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function eP(e,t,n){var r=t.pendingProps;switch(yv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(t),null;case 1:return Ur(t.type)&&ch(),mr(t),null;case 3:return r=t.stateNode,Fl(),rn(Br),rn(br),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Us!==null&&(Yg(Us),Us=null))),zg(e,t),mr(t),null;case 5:jv(t);var s=co(Au.current);if(n=t.type,e!==null&&t.stateNode!=null)nN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_e(166));return mr(t),null}if(e=co(di.current),Kd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ii]=t,r[Ou]=i,e=(t.mode&1)!==0,n){case"dialog":en("cancel",r),en("close",r);break;case"iframe":case"object":case"embed":en("load",r);break;case"video":case"audio":for(s=0;s<Dc.length;s++)en(Dc[s],r);break;case"source":en("error",r);break;case"img":case"image":case"link":en("error",r),en("load",r);break;case"details":en("toggle",r);break;case"input":q0(r,i),en("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},en("invalid",r);break;case"textarea":W0(r,i),en("invalid",r)}mg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&qd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qd(r.textContent,l,e),s=["children",""+l]):xu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&en("scroll",r)}switch(n){case"input":Md(r),K0(r,i,!0);break;case"textarea":Md(r),G0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oj(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[ii]=t,e[Ou]=r,tN(e,t,!1,!1),t.stateNode=e;e:{switch(a=gg(n,r),n){case"dialog":en("cancel",e),en("close",e),s=r;break;case"iframe":case"object":case"embed":en("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dc.length;s++)en(Dc[s],e);s=r;break;case"source":en("error",e),s=r;break;case"img":case"image":case"link":en("error",e),en("load",e),s=r;break;case"details":en("toggle",e),s=r;break;case"input":q0(e,r),s=ug(e,r),en("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=yn({},r,{value:void 0}),en("invalid",e);break;case"textarea":W0(e,r),s=hg(e,r),en("invalid",e);break;default:s=r}mg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Pj(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rj(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Su(e,c):typeof c=="number"&&Su(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&en("scroll",e):c!=null&&nv(e,i,c,a))}switch(n){case"input":Md(e),K0(e,r,!1);break;case"textarea":Md(e),G0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ma(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?_l(e,!!r.multiple,i,!1):r.defaultValue!=null&&_l(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mr(t),null;case 6:if(e&&t.stateNode!=null)rN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_e(166));if(n=co(Au.current),co(di.current),Kd(t)){if(r=t.stateNode,n=t.memoizedProps,r[ii]=t,(i=r.nodeValue!==n)&&(e=ss,e!==null))switch(e.tag){case 3:qd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ii]=t,t.stateNode=r}return mr(t),null;case 13:if(rn(mn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(an&&rs!==null&&t.mode&1&&!(t.flags&128))xE(),Ll(),t.flags|=98560,i=!1;else if(i=Kd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(_e(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[ii]=t}else Ll(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mr(t),i=!1}else Us!==null&&(Yg(Us),Us=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||mn.current&1?Yn===0&&(Yn=3):Fv())),t.updateQueue!==null&&(t.flags|=4),mr(t),null);case 4:return Fl(),zg(e,t),e===null&&Tu(t.stateNode.containerInfo),mr(t),null;case 10:return xv(t.type._context),mr(t),null;case 17:return Ur(t.type)&&ch(),mr(t),null;case 19:if(rn(mn),i=t.memoizedState,i===null)return mr(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)_c(i,!1);else{if(Yn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=gh(e),a!==null){for(t.flags|=128,_c(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xt(mn,mn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Cn()>Bl&&(t.flags|=128,r=!0,_c(i,!1),t.lanes=4194304)}else{if(!r)if(e=gh(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_c(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!an)return mr(t),null}else 2*Cn()-i.renderingStartTime>Bl&&n!==1073741824&&(t.flags|=128,r=!0,_c(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Cn(),t.sibling=null,n=mn.current,Xt(mn,r?n&1|2:n&1),t):(mr(t),null);case 22:case 23:return Mv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zr&1073741824&&(mr(t),t.subtreeFlags&6&&(t.flags|=8192)):mr(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function tP(e,t){switch(yv(t),t.tag){case 1:return Ur(t.type)&&ch(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fl(),rn(Br),rn(br),Ev(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jv(t),null;case 13:if(rn(mn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));Ll()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rn(mn),null;case 4:return Fl(),null;case 10:return xv(t.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var Jd=!1,yr=!1,nP=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function vl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_n(e,t,r)}else n.current=null}function Vg(e,t,n){try{n()}catch(r){_n(e,t,r)}}var Mx=!1;function rP(e,t){if(Eg=ih,e=lE(),mv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,g=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)g=f,f=p;for(;;){if(f===e)break t;if(g===n&&++u===s&&(l=a),g===i&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ng={focusedElem:e,selectionRange:n},ih=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){t=Ke;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,b=m.memoizedState,h=t.stateNode,v=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ls(t.type,w),b);h.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(k){_n(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}return m=Mx,Mx=!1,m}function tu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vg(t,n,i)}s=s.next}while(s!==r)}}function ip(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sN(e){var t=e.alternate;t!==null&&(e.alternate=null,sN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[Ou],delete t[$g],delete t[D1],delete t[B1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iN(e){return e.tag===5||e.tag===3||e.tag===4}function Fx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lh));else if(r!==4&&(e=e.child,e!==null))for(qg(e,t,n),e=e.sibling;e!==null;)qg(e,t,n),e=e.sibling}function Kg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kg(e,t,n),e=e.sibling;e!==null;)Kg(e,t,n),e=e.sibling}var ar=null,Fs=!1;function ea(e,t,n){for(n=n.child;n!==null;)aN(e,t,n),n=n.sibling}function aN(e,t,n){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(Qh,n)}catch{}switch(n.tag){case 5:yr||vl(n,t);case 6:var r=ar,s=Fs;ar=null,ea(e,t,n),ar=r,Fs=s,ar!==null&&(Fs?(e=ar,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ar.removeChild(n.stateNode));break;case 18:ar!==null&&(Fs?(e=ar,n=n.stateNode,e.nodeType===8?um(e.parentNode,n):e.nodeType===1&&um(e,n),Eu(e)):um(ar,n.stateNode));break;case 4:r=ar,s=Fs,ar=n.stateNode.containerInfo,Fs=!0,ea(e,t,n),ar=r,Fs=s;break;case 0:case 11:case 14:case 15:if(!yr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Vg(n,t,a),s=s.next}while(s!==r)}ea(e,t,n);break;case 1:if(!yr&&(vl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){_n(n,t,l)}ea(e,t,n);break;case 21:ea(e,t,n);break;case 22:n.mode&1?(yr=(r=yr)||n.memoizedState!==null,ea(e,t,n),yr=r):ea(e,t,n);break;default:ea(e,t,n)}}function Dx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nP),t.forEach(function(r){var s=fP.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ar=l.stateNode,Fs=!1;break e;case 3:ar=l.stateNode.containerInfo,Fs=!0;break e;case 4:ar=l.stateNode.containerInfo,Fs=!0;break e}l=l.return}if(ar===null)throw Error(_e(160));aN(i,a,s),ar=null,Fs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){_n(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oN(t,e),t=t.sibling}function oN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rs(t,e),Xs(e),r&4){try{tu(3,e,e.return),ip(3,e)}catch(w){_n(e,e.return,w)}try{tu(5,e,e.return)}catch(w){_n(e,e.return,w)}}break;case 1:Rs(t,e),Xs(e),r&512&&n!==null&&vl(n,n.return);break;case 5:if(Rs(t,e),Xs(e),r&512&&n!==null&&vl(n,n.return),e.flags&32){var s=e.stateNode;try{Su(s,"")}catch(w){_n(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Tj(s,i),gg(l,a);var u=gg(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?Pj(s,f):d==="dangerouslySetInnerHTML"?Rj(s,f):d==="children"?Su(s,f):nv(s,d,f,u)}switch(l){case"input":dg(s,i);break;case"textarea":$j(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?_l(s,!!i.multiple,p,!1):g!==!!i.multiple&&(i.defaultValue!=null?_l(s,!!i.multiple,i.defaultValue,!0):_l(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ou]=i}catch(w){_n(e,e.return,w)}}break;case 6:if(Rs(t,e),Xs(e),r&4){if(e.stateNode===null)throw Error(_e(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){_n(e,e.return,w)}}break;case 3:if(Rs(t,e),Xs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eu(t.containerInfo)}catch(w){_n(e,e.return,w)}break;case 4:Rs(t,e),Xs(e);break;case 13:Rs(t,e),Xs(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Iv=Cn())),r&4&&Dx(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(yr=(u=yr)||d,Rs(t,e),yr=u):Rs(t,e),Xs(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ke=e,d=e.child;d!==null;){for(f=Ke=d;Ke!==null;){switch(g=Ke,p=g.child,g.tag){case 0:case 11:case 14:case 15:tu(4,g,g.return);break;case 1:vl(g,g.return);var m=g.stateNode;if(typeof m.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(w){_n(r,n,w)}}break;case 5:vl(g,g.return);break;case 22:if(g.memoizedState!==null){Ux(f);continue}}p!==null?(p.return=g,Ke=p):Ux(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Aj("display",a))}catch(w){_n(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){_n(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rs(t,e),Xs(e),r&4&&Dx(e);break;case 21:break;default:Rs(t,e),Xs(e)}}function Xs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iN(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Su(s,""),r.flags&=-33);var i=Fx(e);Kg(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Fx(e);qg(e,l,a);break;default:throw Error(_e(161))}}catch(c){_n(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sP(e,t,n){Ke=e,lN(e)}function lN(e,t,n){for(var r=(e.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Jd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||yr;l=Jd;var u=yr;if(Jd=a,(yr=c)&&!u)for(Ke=s;Ke!==null;)a=Ke,c=a.child,a.tag===22&&a.memoizedState!==null?zx(s):c!==null?(c.return=a,Ke=c):zx(s);for(;i!==null;)Ke=i,lN(i),i=i.sibling;Ke=s,Jd=l,yr=u}Bx(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):Bx(e)}}function Bx(e){for(;Ke!==null;){var t=Ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yr||ip(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yr)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ls(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&kx(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kx(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Eu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}yr||t.flags&512&&Hg(t)}catch(g){_n(t,t.return,g)}}if(t===e){Ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function Ux(e){for(;Ke!==null;){var t=Ke;if(t===e){Ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function zx(e){for(;Ke!==null;){var t=Ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ip(4,t)}catch(c){_n(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){_n(t,s,c)}}var i=t.return;try{Hg(t)}catch(c){_n(t,i,c)}break;case 5:var a=t.return;try{Hg(t)}catch(c){_n(t,a,c)}}}catch(c){_n(t,t.return,c)}if(t===e){Ke=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ke=l;break}Ke=t.return}}var iP=Math.ceil,bh=Vi.ReactCurrentDispatcher,Av=Vi.ReactCurrentOwner,Ss=Vi.ReactCurrentBatchConfig,Mt=0,tr=null,Ln=null,ur=0,Zr=0,bl=za(0),Yn=0,Mu=null,_o=0,ap=0,Pv=0,nu=null,Mr=null,Iv=0,Bl=1/0,xi=null,wh=!1,Wg=null,Ra=null,Yd=!1,Sa=null,xh=0,ru=0,Gg=null,If=-1,Lf=0;function Cr(){return Mt&6?Cn():If!==-1?If:If=Cn()}function Aa(e){return e.mode&1?Mt&2&&ur!==0?ur&-ur:z1.transition!==null?(Lf===0&&(Lf=Kj()),Lf):(e=zt,e!==0||(e=window.event,e=e===void 0?16:Zj(e.type)),e):1}function Ks(e,t,n,r){if(50<ru)throw ru=0,Gg=null,Error(_e(185));Zu(e,n,r),(!(Mt&2)||e!==tr)&&(e===tr&&(!(Mt&2)&&(ap|=n),Yn===4&&ma(e,ur)),zr(e,r),n===1&&Mt===0&&!(t.mode&1)&&(Bl=Cn()+500,np&&Va()))}function zr(e,t){var n=e.callbackNode;zA(e,t);var r=sh(e,e===tr?ur:0);if(r===0)n!==null&&Q0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Q0(n),t===1)e.tag===0?U1(Vx.bind(null,e)):vE(Vx.bind(null,e)),M1(function(){!(Mt&6)&&Va()}),n=null;else{switch(Wj(r)){case 1:n=ov;break;case 4:n=Hj;break;case 16:n=rh;break;case 536870912:n=qj;break;default:n=rh}n=gN(n,cN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cN(e,t){if(If=-1,Lf=0,Mt&6)throw Error(_e(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=sh(e,e===tr?ur:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Sh(e,r);else{t=r;var s=Mt;Mt|=2;var i=dN();(tr!==e||ur!==t)&&(xi=null,Bl=Cn()+500,go(e,t));do try{lP();break}catch(l){uN(e,l)}while(!0);wv(),bh.current=i,Mt=s,Ln!==null?t=0:(tr=null,ur=0,t=Yn)}if(t!==0){if(t===2&&(s=xg(e),s!==0&&(r=s,t=Jg(e,s))),t===1)throw n=Mu,go(e,0),ma(e,r),zr(e,Cn()),n;if(t===6)ma(e,r);else{if(s=e.current.alternate,!(r&30)&&!aP(s)&&(t=Sh(e,r),t===2&&(i=xg(e),i!==0&&(r=i,t=Jg(e,i))),t===1))throw n=Mu,go(e,0),ma(e,r),zr(e,Cn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(_e(345));case 2:Za(e,Mr,xi);break;case 3:if(ma(e,r),(r&130023424)===r&&(t=Iv+500-Cn(),10<t)){if(sh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Cr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Tg(Za.bind(null,e,Mr,xi),t);break}Za(e,Mr,xi);break;case 4:if(ma(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-qs(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iP(r/1960))-r,10<r){e.timeoutHandle=Tg(Za.bind(null,e,Mr,xi),r);break}Za(e,Mr,xi);break;case 5:Za(e,Mr,xi);break;default:throw Error(_e(329))}}}return zr(e,Cn()),e.callbackNode===n?cN.bind(null,e):null}function Jg(e,t){var n=nu;return e.current.memoizedState.isDehydrated&&(go(e,t).flags|=256),e=Sh(e,t),e!==2&&(t=Mr,Mr=n,t!==null&&Yg(t)),e}function Yg(e){Mr===null?Mr=e:Mr.push.apply(Mr,e)}function aP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gs(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ma(e,t){for(t&=~Pv,t&=~ap,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qs(t),r=1<<n;e[n]=-1,t&=~r}}function Vx(e){if(Mt&6)throw Error(_e(327));Cl();var t=sh(e,0);if(!(t&1))return zr(e,Cn()),null;var n=Sh(e,t);if(e.tag!==0&&n===2){var r=xg(e);r!==0&&(t=r,n=Jg(e,r))}if(n===1)throw n=Mu,go(e,0),ma(e,t),zr(e,Cn()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Za(e,Mr,xi),zr(e,Cn()),null}function Lv(e,t){var n=Mt;Mt|=1;try{return e(t)}finally{Mt=n,Mt===0&&(Bl=Cn()+500,np&&Va())}}function ko(e){Sa!==null&&Sa.tag===0&&!(Mt&6)&&Cl();var t=Mt;Mt|=1;var n=Ss.transition,r=zt;try{if(Ss.transition=null,zt=1,e)return e()}finally{zt=r,Ss.transition=n,Mt=t,!(Mt&6)&&Va()}}function Mv(){Zr=bl.current,rn(bl)}function go(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L1(n)),Ln!==null)for(n=Ln.return;n!==null;){var r=n;switch(yv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ch();break;case 3:Fl(),rn(Br),rn(br),Ev();break;case 5:jv(r);break;case 4:Fl();break;case 13:rn(mn);break;case 19:rn(mn);break;case 10:xv(r.type._context);break;case 22:case 23:Mv()}n=n.return}if(tr=e,Ln=e=Pa(e.current,null),ur=Zr=t,Yn=0,Mu=null,Pv=ap=_o=0,Mr=nu=null,lo!==null){for(t=0;t<lo.length;t++)if(n=lo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}lo=null}return e}function uN(e,t){do{var n=Ln;try{if(wv(),Rf.current=vh,yh){for(var r=gn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yh=!1}if(So=0,Zn=Gn=gn=null,eu=!1,Pu=0,Av.current=null,n===null||n.return===null){Yn=1,Mu=t,Ln=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=ur,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=$x(a);if(p!==null){p.flags&=-257,Ox(p,a,l,i,t),p.mode&1&&Tx(i,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var w=new Set;w.add(c),t.updateQueue=w}else m.add(c);break e}else{if(!(t&1)){Tx(i,u,t),Fv();break e}c=Error(_e(426))}}else if(an&&l.mode&1){var b=$x(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ox(b,a,l,i,t),vv(Dl(c,l));break e}}i=c=Dl(c,l),Yn!==4&&(Yn=2),nu===null?nu=[i]:nu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=WE(i,c,t);_x(i,h);break e;case 1:l=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ra===null||!Ra.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=GE(i,l,t);_x(i,k);break e}}i=i.return}while(i!==null)}hN(n)}catch(E){t=E,Ln===n&&n!==null&&(Ln=n=n.return);continue}break}while(!0)}function dN(){var e=bh.current;return bh.current=vh,e===null?vh:e}function Fv(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),tr===null||!(_o&268435455)&&!(ap&268435455)||ma(tr,ur)}function Sh(e,t){var n=Mt;Mt|=2;var r=dN();(tr!==e||ur!==t)&&(xi=null,go(e,t));do try{oP();break}catch(s){uN(e,s)}while(!0);if(wv(),Mt=n,bh.current=r,Ln!==null)throw Error(_e(261));return tr=null,ur=0,Yn}function oP(){for(;Ln!==null;)fN(Ln)}function lP(){for(;Ln!==null&&!AA();)fN(Ln)}function fN(e){var t=mN(e.alternate,e,Zr);e.memoizedProps=e.pendingProps,t===null?hN(e):Ln=t,Av.current=null}function hN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tP(n,t),n!==null){n.flags&=32767,Ln=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yn=6,Ln=null;return}}else if(n=eP(n,t,Zr),n!==null){Ln=n;return}if(t=t.sibling,t!==null){Ln=t;return}Ln=t=e}while(t!==null);Yn===0&&(Yn=5)}function Za(e,t,n){var r=zt,s=Ss.transition;try{Ss.transition=null,zt=1,cP(e,t,n,r)}finally{Ss.transition=s,zt=r}return null}function cP(e,t,n,r){do Cl();while(Sa!==null);if(Mt&6)throw Error(_e(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(VA(e,i),e===tr&&(Ln=tr=null,ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yd||(Yd=!0,gN(rh,function(){return Cl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ss.transition,Ss.transition=null;var a=zt;zt=1;var l=Mt;Mt|=4,Av.current=null,rP(e,n),oN(n,e),T1(Ng),ih=!!Eg,Ng=Eg=null,e.current=n,sP(n),PA(),Mt=l,zt=a,Ss.transition=i}else e.current=n;if(Yd&&(Yd=!1,Sa=e,xh=s),i=e.pendingLanes,i===0&&(Ra=null),MA(n.stateNode),zr(e,Cn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wh)throw wh=!1,e=Wg,Wg=null,e;return xh&1&&e.tag!==0&&Cl(),i=e.pendingLanes,i&1?e===Gg?ru++:(ru=0,Gg=e):ru=0,Va(),null}function Cl(){if(Sa!==null){var e=Wj(xh),t=Ss.transition,n=zt;try{if(Ss.transition=null,zt=16>e?16:e,Sa===null)var r=!1;else{if(e=Sa,Sa=null,xh=0,Mt&6)throw Error(_e(331));var s=Mt;for(Mt|=4,Ke=e.current;Ke!==null;){var i=Ke,a=i.child;if(Ke.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ke=u;Ke!==null;){var d=Ke;switch(d.tag){case 0:case 11:case 15:tu(8,d,i)}var f=d.child;if(f!==null)f.return=d,Ke=f;else for(;Ke!==null;){d=Ke;var g=d.sibling,p=d.return;if(sN(d),d===u){Ke=null;break}if(g!==null){g.return=p,Ke=g;break}Ke=p}}}var m=i.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}Ke=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ke=a;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tu(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,Ke=h;break e}Ke=i.return}}var v=e.current;for(Ke=v;Ke!==null;){a=Ke;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Ke=x;else e:for(a=v;Ke!==null;){if(l=Ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ip(9,l)}}catch(E){_n(l,l.return,E)}if(l===a){Ke=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ke=k;break e}Ke=l.return}}if(Mt=s,Va(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(Qh,e)}catch{}r=!0}return r}finally{zt=n,Ss.transition=t}}return!1}function Hx(e,t,n){t=Dl(n,t),t=WE(e,t,1),e=Oa(e,t,1),t=Cr(),e!==null&&(Zu(e,1,t),zr(e,t))}function _n(e,t,n){if(e.tag===3)Hx(e,e,n);else for(;t!==null;){if(t.tag===3){Hx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))){e=Dl(n,e),e=GE(t,e,1),t=Oa(t,e,1),e=Cr(),t!==null&&(Zu(t,1,e),zr(t,e));break}}t=t.return}}function uP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Cr(),e.pingedLanes|=e.suspendedLanes&n,tr===e&&(ur&n)===n&&(Yn===4||Yn===3&&(ur&130023424)===ur&&500>Cn()-Iv?go(e,0):Pv|=n),zr(e,t)}function pN(e,t){t===0&&(e.mode&1?(t=Bd,Bd<<=1,!(Bd&130023424)&&(Bd=4194304)):t=1);var n=Cr();e=Mi(e,t),e!==null&&(Zu(e,t,n),zr(e,n))}function dP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pN(e,n)}function fP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(t),pN(e,n)}var mN;mN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Br.current)Dr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Dr=!1,Z1(e,t,n);Dr=!!(e.flags&131072)}else Dr=!1,an&&t.flags&1048576&&bE(t,fh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pf(e,t),e=t.pendingProps;var s=Il(t,br.current);Nl(t,n),s=Cv(null,t,r,e,s,n);var i=Tv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ur(r)?(i=!0,uh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_v(t),s.updater=sp,t.stateNode=s,s._reactInternals=t,Lg(t,r,e,n),t=Dg(null,t,r,!0,i,n)):(t.tag=0,an&&i&&gv(t),Er(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pf(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=pP(r),e=Ls(r,e),s){case 0:t=Fg(null,t,r,e,n);break e;case 1:t=Px(null,t,r,e,n);break e;case 11:t=Rx(null,t,r,e,n);break e;case 14:t=Ax(null,t,r,Ls(r.type,e),n);break e}throw Error(_e(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ls(r,s),Fg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ls(r,s),Px(e,t,r,s,n);case 3:e:{if(XE(t),e===null)throw Error(_e(387));r=t.pendingProps,i=t.memoizedState,s=i.element,jE(e,t),mh(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Dl(Error(_e(423)),t),t=Ix(e,t,r,n,s);break e}else if(r!==s){s=Dl(Error(_e(424)),t),t=Ix(e,t,r,n,s);break e}else for(rs=$a(t.stateNode.containerInfo.firstChild),ss=t,an=!0,Us=null,n=_E(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ll(),r===s){t=Fi(e,t,n);break e}Er(e,t,r,n)}t=t.child}return t;case 5:return EE(t),e===null&&Ag(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Cg(r,s)?a=null:i!==null&&Cg(r,i)&&(t.flags|=32),QE(e,t),Er(e,t,a,n),t.child;case 6:return e===null&&Ag(t),null;case 13:return ZE(e,t,n);case 4:return kv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ml(t,null,r,n):Er(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ls(r,s),Rx(e,t,r,s,n);case 7:return Er(e,t,t.pendingProps,n),t.child;case 8:return Er(e,t,t.pendingProps.children,n),t.child;case 12:return Er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Xt(hh,r._currentValue),r._currentValue=a,i!==null)if(Gs(i.value,a)){if(i.children===s.children&&!Br.current){t=Fi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$i(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Pg(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(_e(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Pg(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Er(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nl(t,n),s=ks(s),r=r(s),t.flags|=1,Er(e,t,r,n),t.child;case 14:return r=t.type,s=Ls(r,t.pendingProps),s=Ls(r.type,s),Ax(e,t,r,s,n);case 15:return JE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ls(r,s),Pf(e,t),t.tag=1,Ur(r)?(e=!0,uh(t)):e=!1,Nl(t,n),KE(t,r,s),Lg(t,r,s,n),Dg(null,t,r,!0,e,n);case 19:return eN(e,t,n);case 22:return YE(e,t,n)}throw Error(_e(156,t.tag))};function gN(e,t){return Vj(e,t)}function hP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,n,r){return new hP(e,t,n,r)}function Dv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pP(e){if(typeof e=="function")return Dv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sv)return 11;if(e===iv)return 14}return 2}function Pa(e,t){var n=e.alternate;return n===null?(n=xs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mf(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Dv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case cl:return yo(n.children,s,i,t);case rv:a=8,s|=8;break;case ag:return e=xs(12,n,t,s|2),e.elementType=ag,e.lanes=i,e;case og:return e=xs(13,n,t,s),e.elementType=og,e.lanes=i,e;case lg:return e=xs(19,n,t,s),e.elementType=lg,e.lanes=i,e;case Ej:return op(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kj:a=10;break e;case jj:a=9;break e;case sv:a=11;break e;case iv:a=14;break e;case ca:a=16,r=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=xs(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function yo(e,t,n,r){return e=xs(7,e,r,t),e.lanes=n,e}function op(e,t,n,r){return e=xs(22,e,r,t),e.elementType=Ej,e.lanes=n,e.stateNode={isHidden:!1},e}function vm(e,t,n){return e=xs(6,e,null,t),e.lanes=n,e}function bm(e,t,n){return t=xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mP(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zp(0),this.expirationTimes=Zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bv(e,t,n,r,s,i,a,l,c){return e=new mP(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(i),e}function gP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yN(e){if(!e)return Fa;e=e._reactInternals;e:{if(Oo(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(Ur(n))return yE(e,n,t)}return t}function vN(e,t,n,r,s,i,a,l,c){return e=Bv(n,r,!0,e,s,i,a,l,c),e.context=yN(null),n=e.current,r=Cr(),s=Aa(n),i=$i(r,s),i.callback=t??null,Oa(n,i,s),e.current.lanes=s,Zu(e,s,r),zr(e,r),e}function lp(e,t,n,r){var s=t.current,i=Cr(),a=Aa(s);return n=yN(n),t.context===null?t.context=n:t.pendingContext=n,t=$i(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oa(s,t,a),e!==null&&(Ks(e,s,a,i),Of(e,s,a)),a}function _h(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Uv(e,t){qx(e,t),(e=e.alternate)&&qx(e,t)}function yP(){return null}var bN=typeof reportError=="function"?reportError:function(e){console.error(e)};function zv(e){this._internalRoot=e}cp.prototype.render=zv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));lp(e,t,null,null)};cp.prototype.unmount=zv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ko(function(){lp(null,e,null,null)}),t[Li]=null}};function cp(e){this._internalRoot=e}cp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pa.length&&t!==0&&t<pa[n].priority;n++);pa.splice(n,0,e),n===0&&Xj(e)}};function Vv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function up(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kx(){}function vP(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=_h(a);i.call(u)}}var a=vN(t,r,e,0,null,!1,!1,"",Kx);return e._reactRootContainer=a,e[Li]=a.current,Tu(e.nodeType===8?e.parentNode:e),ko(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=_h(c);l.call(u)}}var c=Bv(e,0,!1,null,null,!1,!1,"",Kx);return e._reactRootContainer=c,e[Li]=c.current,Tu(e.nodeType===8?e.parentNode:e),ko(function(){lp(t,c,n,r)}),c}function dp(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=_h(a);l.call(c)}}lp(t,a,e,s)}else a=vP(n,t,e,s,r);return _h(a)}Gj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fc(t.pendingLanes);n!==0&&(lv(t,n|1),zr(t,Cn()),!(Mt&6)&&(Bl=Cn()+500,Va()))}break;case 13:ko(function(){var r=Mi(e,1);if(r!==null){var s=Cr();Ks(r,e,1,s)}}),Uv(e,1)}};cv=function(e){if(e.tag===13){var t=Mi(e,134217728);if(t!==null){var n=Cr();Ks(t,e,134217728,n)}Uv(e,134217728)}};Jj=function(e){if(e.tag===13){var t=Aa(e),n=Mi(e,t);if(n!==null){var r=Cr();Ks(n,e,t,r)}Uv(e,t)}};Yj=function(){return zt};Qj=function(e,t){var n=zt;try{return zt=e,t()}finally{zt=n}};vg=function(e,t,n){switch(t){case"input":if(dg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=tp(r);if(!s)throw Error(_e(90));Cj(r),dg(r,s)}}}break;case"textarea":$j(e,n);break;case"select":t=n.value,t!=null&&_l(e,!!n.multiple,t,!1)}};Mj=Lv;Fj=ko;var bP={usingClientEntryPoint:!1,Events:[td,hl,tp,Ij,Lj,Lv]},kc={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wP={bundleType:kc.bundleType,version:kc.version,rendererPackageName:kc.rendererPackageName,rendererConfig:kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uj(e),e===null?null:e.stateNode},findFiberByHostInstance:kc.findFiberByHostInstance||yP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{Qh=Qd.inject(wP),ui=Qd}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bP;os.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(t))throw Error(_e(200));return gP(e,t,null,n)};os.createRoot=function(e,t){if(!Vv(e))throw Error(_e(299));var n=!1,r="",s=bN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bv(e,1,!1,null,null,n,!1,r,s),e[Li]=t.current,Tu(e.nodeType===8?e.parentNode:e),new zv(t)};os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=Uj(t),e=e===null?null:e.stateNode,e};os.flushSync=function(e){return ko(e)};os.hydrate=function(e,t,n){if(!up(t))throw Error(_e(200));return dp(null,e,t,!0,n)};os.hydrateRoot=function(e,t,n){if(!Vv(e))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=bN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vN(t,null,e,1,n??null,s,!1,i,a),e[Li]=t.current,Tu(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new cp(t)};os.render=function(e,t,n){if(!up(t))throw Error(_e(200));return dp(null,e,t,!1,n)};os.unmountComponentAtNode=function(e){if(!up(e))throw Error(_e(40));return e._reactRootContainer?(ko(function(){dp(null,null,e,!1,function(){e._reactRootContainer=null,e[Li]=null})}),!0):!1};os.unstable_batchedUpdates=Lv;os.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!up(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return dp(e,t,n,!1,r)};os.version="18.3.1-next-f1338f8080-20240426";function wN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wN)}catch(e){console.error(e)}}wN(),wj.exports=os;var xN=wj.exports;const uo=Ql(xN);var SN,Wx=xN;SN=Wx.createRoot,Wx.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(this,arguments)}var _a;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_a||(_a={}));const Gx="popstate";function xP(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return Qg("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kh(s)}return _P(t,n,null,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SP(){return Math.random().toString(36).substr(2,8)}function Jx(e,t){return{usr:e.state,key:e.key,idx:t}}function Qg(e,t,n,r){return n===void 0&&(n=null),Fu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?tc(t):t,{state:n,key:t&&t.key||r||SP()})}function kh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function tc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _P(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=_a.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Fu({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=_a.Pop;let b=d(),h=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:h})}function g(b,h){l=_a.Push;let v=Qg(w.location,b,h);u=d()+1;let x=Jx(v,u),k=w.createHref(v);try{a.pushState(x,"",k)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(k)}i&&c&&c({action:l,location:w.location,delta:1})}function p(b,h){l=_a.Replace;let v=Qg(w.location,b,h);u=d();let x=Jx(v,u),k=w.createHref(v);a.replaceState(x,"",k),i&&c&&c({action:l,location:w.location,delta:0})}function m(b){let h=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:kh(b);return v=v.replace(/ $/,"%20"),Tn(h,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,h)}let w={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Gx,f),c=b,()=>{s.removeEventListener(Gx,f),c=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let h=m(b);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:g,replace:p,go(b){return a.go(b)}};return w}var Yx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Yx||(Yx={}));function kP(e,t,n){return n===void 0&&(n="/"),jP(e,t,n)}function jP(e,t,n,r){let s=typeof t=="string"?tc(t):t,i=qv(s.pathname||"/",n);if(i==null)return null;let a=_N(e);EP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=FP(i);l=IP(a[c],u)}return l}function _N(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Tn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ia([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Tn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_N(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:AP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of kN(i.path))s(i,a,c)}),t}function kN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=kN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function EP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:PP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NP=/^:[\w-]+$/,CP=3,TP=2,$P=1,OP=10,RP=-2,Qx=e=>e==="*";function AP(e,t){let n=e.split("/"),r=n.length;return n.some(Qx)&&(r+=RP),t&&(r+=TP),n.filter(s=>!Qx(s)).reduce((s,i)=>s+(NP.test(i)?CP:i===""?$P:OP),r)}function PP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function IP(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=LP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),g=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Ia([i,f.pathname]),pathnameBase:VP(Ia([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=Ia([i,f.pathnameBase]))}return a}function LP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=MP(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:g,isOptional:p}=d;if(g==="*"){let w=l[f]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const m=l[f];return p&&!m?u[g]=void 0:u[g]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function MP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function FP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const DP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BP=e=>DP.test(e);function UP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?tc(e):e,i;if(n)if(BP(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Hv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Xx(n.substring(1),"/"):i=Xx(n,t)}else i=t;return{pathname:i,search:HP(r),hash:qP(s)}}function Xx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Kv(e,t){let n=zP(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wv(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=tc(e):(s=Fu({},e),Tn(!s.pathname||!s.pathname.includes("?"),wm("?","pathname","search",s)),Tn(!s.pathname||!s.pathname.includes("#"),wm("#","pathname","hash",s)),Tn(!s.search||!s.search.includes("#"),wm("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}l=f>=0?t[f]:"/"}let c=UP(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ia=e=>e.join("/").replace(/\/\/+/g,"/"),VP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jN=["post","put","patch","delete"];new Set(jN);const WP=["get",...jN];new Set(WP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Du.apply(this,arguments)}const Gv=y.createContext(null),GP=y.createContext(null),Ha=y.createContext(null),fp=y.createContext(null),Hi=y.createContext({outlet:null,matches:[],isDataRoute:!1}),EN=y.createContext(null);function JP(e,t){let{relative:n}=t===void 0?{}:t;nc()||Tn(!1);let{basename:r,navigator:s}=y.useContext(Ha),{hash:i,pathname:a,search:l}=CN(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Ia([r,a])),s.createHref({pathname:c,search:l,hash:i})}function nc(){return y.useContext(fp)!=null}function qa(){return nc()||Tn(!1),y.useContext(fp).location}function NN(e){y.useContext(Ha).static||y.useLayoutEffect(e)}function qi(){let{isDataRoute:e}=y.useContext(Hi);return e?uI():YP()}function YP(){nc()||Tn(!1);let e=y.useContext(Gv),{basename:t,future:n,navigator:r}=y.useContext(Ha),{matches:s}=y.useContext(Hi),{pathname:i}=qa(),a=JSON.stringify(Kv(s,n.v7_relativeSplatPath)),l=y.useRef(!1);return NN(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Wv(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ia([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,i,e])}const QP=y.createContext(null);function XP(e){let t=y.useContext(Hi).outlet;return t&&y.createElement(QP.Provider,{value:e},t)}function CN(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=y.useContext(Ha),{matches:s}=y.useContext(Hi),{pathname:i}=qa(),a=JSON.stringify(Kv(s,r.v7_relativeSplatPath));return y.useMemo(()=>Wv(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function ZP(e,t){return eI(e,t)}function eI(e,t,n,r){nc()||Tn(!1);let{navigator:s}=y.useContext(Ha),{matches:i}=y.useContext(Hi),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=qa(),d;if(t){var f;let b=typeof t=="string"?tc(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Tn(!1),d=b}else d=u;let g=d.pathname||"/",p=g;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=kP(e,{pathname:p}),w=iI(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ia([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ia([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&w?y.createElement(fp.Provider,{value:{location:Du({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:_a.Pop}},w):w}function tI(){let e=cI(),t=KP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:s},n):null,null)}const nI=y.createElement(tI,null);class rI extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(Hi.Provider,{value:this.props.routeContext},y.createElement(EN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sI(e){let{routeContext:t,match:n,children:r}=e,s=y.useContext(Gv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Hi.Provider,{value:t},r)}function iI(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Tn(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:p}=n,m=f.route.loader&&g[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,g)=>{let p,m=!1,w=null,b=null;n&&(p=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||nI,c&&(u<0&&g===0?(dI("route-fallback"),m=!0,b=null):u===g&&(m=!0,b=f.route.hydrateFallbackElement||null)));let h=t.concat(a.slice(0,g+1)),v=()=>{let x;return p?x=w:m?x=b:f.route.Component?x=y.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,y.createElement(sI,{match:f,routeContext:{outlet:d,matches:h,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?y.createElement(rI,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:v(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):v()},null)}var TN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TN||{}),$N=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($N||{});function aI(e){let t=y.useContext(Gv);return t||Tn(!1),t}function oI(e){let t=y.useContext(GP);return t||Tn(!1),t}function lI(e){let t=y.useContext(Hi);return t||Tn(!1),t}function ON(e){let t=lI(),n=t.matches[t.matches.length-1];return n.route.id||Tn(!1),n.route.id}function cI(){var e;let t=y.useContext(EN),n=oI(),r=ON();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uI(){let{router:e}=aI(TN.UseNavigateStable),t=ON($N.UseNavigateStable),n=y.useRef(!1);return NN(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Du({fromRouteId:t},i)))},[e,t])}const Zx={};function dI(e,t,n){Zx[e]||(Zx[e]=!0)}function fI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function eS(e){let{to:t,replace:n,state:r,relative:s}=e;nc()||Tn(!1);let{future:i,static:a}=y.useContext(Ha),{matches:l}=y.useContext(Hi),{pathname:c}=qa(),u=qi(),d=Wv(t,Kv(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function hI(e){return XP(e.context)}function gs(e){Tn(!1)}function pI(e){let{basename:t="/",children:n=null,location:r,navigationType:s=_a.Pop,navigator:i,static:a=!1,future:l}=e;nc()&&Tn(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:a,future:Du({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=tc(r));let{pathname:d="/",search:f="",hash:g="",state:p=null,key:m="default"}=r,w=y.useMemo(()=>{let b=qv(d,c);return b==null?null:{location:{pathname:b,search:f,hash:g,state:p,key:m},navigationType:s}},[c,d,f,g,p,m,s]);return w==null?null:y.createElement(Ha.Provider,{value:u},y.createElement(fp.Provider,{children:n,value:w}))}function mI(e){let{children:t,location:n}=e;return ZP(Xg(t),n)}new Promise(()=>{});function Xg(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(r,s)=>{if(!y.isValidElement(r))return;let i=[...t,s];if(r.type===y.Fragment){n.push.apply(n,Xg(r.props.children,i));return}r.type!==gs&&Tn(!1),!r.props.index||!r.props.children||Tn(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Xg(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zg.apply(this,arguments)}function gI(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function yI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vI(e,t){return e.button===0&&(!t||t==="_self")&&!yI(e)}const bI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wI="6";try{window.__reactRouterVersion=wI}catch{}const xI="startTransition",tS=uA[xI];function SI(e){let{basename:t,children:n,future:r,window:s}=e,i=y.useRef();i.current==null&&(i.current=xP({window:s,v5Compat:!0}));let a=i.current,[l,c]=y.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=y.useCallback(f=>{u&&tS?tS(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>a.listen(d),[a,d]),y.useEffect(()=>fI(r),[r]),y.createElement(pI,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const _I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ni=y.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,g=gI(t,bI),{basename:p}=y.useContext(Ha),m,w=!1;if(typeof u=="string"&&kI.test(u)&&(m=u,_I))try{let x=new URL(window.location.href),k=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=qv(k.pathname,p);k.origin===x.origin&&E!=null?u=E+k.search+k.hash:w=!0}catch{}let b=JP(u,{relative:s}),h=jI(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||h(x)}return y.createElement("a",Zg({},g,{href:m||b,onClick:w||i?r:v,ref:n,target:c}))});var nS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nS||(nS={}));var rS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rS||(rS={}));function jI(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=qi(),u=qa(),d=CN(e,{relative:a});return y.useCallback(f=>{if(vI(f,n)){f.preventDefault();let g=r!==void 0?r:kh(u)===kh(d);c(e,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}var RN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var l in i)t.call(i,l)&&i[l]&&(a=s(a,l));return a}function s(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(RN);var EI=RN.exports;const Ne=Ql(EI);function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(null,arguments)}function AN(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sS(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function NI(e){var t=CI(e,"string");return typeof t=="symbol"?t:String(t)}function CI(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PN(e,t,n){var r=y.useRef(e!==void 0),s=y.useState(t),i=s[0],a=s[1],l=e!==void 0,c=r.current;return r.current=l,!l&&c&&i!==t&&a(t),[l?e:i,y.useCallback(function(u){for(var d=arguments.length,f=new Array(d>1?d-1:0),g=1;g<d;g++)f[g-1]=arguments[g];n&&n.apply(void 0,[u].concat(f)),a(u)},[n])]}function rc(e,t){return Object.keys(t).reduce(function(n,r){var s,i=n,a=i[sS(r)],l=i[r],c=AN(i,[sS(r),r].map(NI)),u=t[r],d=PN(l,a,e[u]),f=d[0],g=d[1];return ey({},c,(s={},s[r]=f,s[u]=g,s))},e)}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ty(e,t)}function TI(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ty(e,t)}const $I=["xxl","xl","lg","md","sm","xs"],OI="xs",rd=y.createContext({prefixes:{},breakpoints:$I,minBreakpoint:OI}),{Consumer:y8,Provider:v8}=rd;function Pe(e,t){const{prefixes:n}=y.useContext(rd);return e||n[t]||t}function IN(){const{breakpoints:e}=y.useContext(rd);return e}function LN(){const{minBreakpoint:e}=y.useContext(rd);return e}function hp(){const{dir:e}=y.useContext(rd);return e==="rtl"}function sc(e){return e&&e.ownerDocument||document}function RI(e){var t=sc(e);return t&&t.defaultView||window}function AI(e,t){return RI(e).getComputedStyle(e,t)}var PI=/([A-Z])/g;function II(e){return e.replace(PI,"-$1").toLowerCase()}var LI=/^ms-/;function Xd(e){return II(e).replace(LI,"-ms-")}var MI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function FI(e){return!!(e&&MI.test(e))}function Oi(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Xd(t))||AI(e).getPropertyValue(Xd(t));Object.keys(t).forEach(function(s){var i=t[s];!i&&i!==0?e.style.removeProperty(Xd(s)):FI(s)?r+=s+"("+i+") ":n+=Xd(s)+": "+i+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var MN={exports:{}},DI="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BI=DI,UI=BI;function FN(){}function DN(){}DN.resetWarningCache=FN;var zI=function(){function e(r,s,i,a,l,c){if(c!==UI){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:DN,resetWarningCache:FN};return n.PropTypes=n,n};MN.exports=zI();var VI=MN.exports;const kn=Ql(VI),iS={disabled:!1},BN=At.createContext(null);var HI=function(t){return t.scrollTop},Bc="unmounted",da="exited",ws="entering",Ei="entered",Ul="exiting",Ki=function(e){TI(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var a=s,l=a&&!a.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?l?(c=da,i.appearStatus=ws):c=Ei:r.unmountOnExit||r.mountOnEnter?c=Bc:c=da,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(s,i){var a=s.in;return a&&i.status===Bc?{status:da}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==ws&&a!==Ei&&(i=ws):(a===ws||a===Ei)&&(i=Ul)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,a,l;return i=a=l=s,s!=null&&typeof s!="number"&&(i=s.exit,a=s.enter,l=s.appear!==void 0?s.appear:a),{exit:i,enter:a,appear:l}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===ws){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:uo.findDOMNode(this);a&&HI(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===da&&this.setState({status:Bc})},n.performEnter=function(s){var i=this,a=this.props.enter,l=this.context?this.context.isMounting:s,c=this.props.nodeRef?[l]:[uo.findDOMNode(this),l],u=c[0],d=c[1],f=this.getTimeouts(),g=l?f.appear:f.enter;if(!s&&!a||iS.disabled){this.safeSetState({status:Ei},function(){i.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:ws},function(){i.props.onEntering(u,d),i.onTransitionEnd(g,function(){i.safeSetState({status:Ei},function(){i.props.onEntered(u,d)})})})},n.performExit=function(){var s=this,i=this.props.exit,a=this.getTimeouts(),l=this.props.nodeRef?void 0:uo.findDOMNode(this);if(!i||iS.disabled){this.safeSetState({status:da},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Ul},function(){s.props.onExiting(l),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:da},function(){s.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,a=!0;return this.nextCallback=function(l){a&&(a=!1,i.nextCallback=null,s(l))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var a=this.props.nodeRef?this.props.nodeRef.current:uo.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!a||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Bc)return null;var i=this.props,a=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=AN(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return At.createElement(BN.Provider,{value:null},typeof a=="function"?a(s,l):At.cloneElement(At.Children.only(a),l))},t}(At.Component);Ki.contextType=BN;Ki.propTypes={};function Bo(){}Ki.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bo,onEntering:Bo,onEntered:Bo,onExit:Bo,onExiting:Bo,onExited:Bo};Ki.UNMOUNTED=Bc;Ki.EXITED=da;Ki.ENTERING=ws;Ki.ENTERED=Ei;Ki.EXITING=Ul;function UN(e){return e.code==="Escape"||e.keyCode===27}function qI(){const e=y.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Ro(e){if(!e||typeof e=="function")return null;const{major:t}=qI();return t>=19?e.props.ref:e.ref}const ic=!!(typeof window<"u"&&window.document&&window.document.createElement);var ny=!1,ry=!1;try{var xm={get passive(){return ny=!0},get once(){return ry=ny=!0}};ic&&(window.addEventListener("test",xm,xm),window.removeEventListener("test",xm,!0))}catch{}function Jv(e,t,n,r){if(r&&typeof r!="boolean"&&!ry){var s=r.once,i=r.capture,a=n;!ry&&s&&(a=n.__once||function l(c){this.removeEventListener(t,l,i),n.call(this,c)},n.__once=a),e.addEventListener(t,a,ny?r:i)}e.addEventListener(t,n,r)}function sy(e,t,n,r){var s=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function Ti(e,t,n,r){return Jv(e,t,n,r),function(){sy(e,t,n,r)}}function KI(e,t,n,r){if(r===void 0&&(r=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,n,r),e.dispatchEvent(s)}}function WI(e){var t=Oi(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function GI(e,t,n){n===void 0&&(n=5);var r=!1,s=setTimeout(function(){r||KI(e,"transitionend",!0)},t+n),i=Ti(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(s),i()}}function zN(e,t,n,r){n==null&&(n=WI(e)||0);var s=GI(e,n,r),i=Ti(e,"transitionend",t);return function(){s(),i()}}function aS(e,t){const n=Oi(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function Yv(e,t){const n=aS(e,"transitionDuration"),r=aS(e,"transitionDelay"),s=zN(e,i=>{i.target===e&&(s(),t(i))},n+r)}function jc(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...s){t.apply(this,s),n.apply(this,s)}},null)}function VN(e){e.offsetHeight}const oS=e=>!e||typeof e=="function"?e:t=>{e.current=t};function JI(e,t){const n=oS(e),r=oS(t);return s=>{n&&n(s),r&&r(s)}}function ac(e,t){return y.useMemo(()=>JI(e,t),[e,t])}function jh(e){return e&&"setState"in e?uo.findDOMNode(e):e??null}const pp=At.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:s,onExited:i,addEndListener:a,children:l,childRef:c,...u},d)=>{const f=y.useRef(null),g=ac(f,c),p=$=>{g(jh($))},m=$=>P=>{$&&f.current&&$(f.current,P)},w=y.useCallback(m(e),[e]),b=y.useCallback(m(t),[t]),h=y.useCallback(m(n),[n]),v=y.useCallback(m(r),[r]),x=y.useCallback(m(s),[s]),k=y.useCallback(m(i),[i]),E=y.useCallback(m(a),[a]);return o.jsx(Ki,{ref:d,...u,onEnter:w,onEntered:h,onEntering:b,onExit:v,onExited:k,onExiting:x,addEndListener:E,nodeRef:f,children:typeof l=="function"?($,P)=>l($,{...P,ref:p}):At.cloneElement(l,{ref:p})})});pp.displayName="TransitionWrapper";const YI={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function QI(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],s=YI[e];return r+parseInt(Oi(t,s[0]),10)+parseInt(Oi(t,s[1]),10)}const XI={[da]:"collapse",[Ul]:"collapsing",[ws]:"collapsing",[Ei]:"collapse show"},Qv=At.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:s,className:i,children:a,dimension:l="height",in:c=!1,timeout:u=300,mountOnEnter:d=!1,unmountOnExit:f=!1,appear:g=!1,getDimensionValue:p=QI,...m},w)=>{const b=typeof l=="function"?l():l,h=y.useMemo(()=>jc($=>{$.style[b]="0"},e),[b,e]),v=y.useMemo(()=>jc($=>{const P=`scroll${b[0].toUpperCase()}${b.slice(1)}`;$.style[b]=`${$[P]}px`},t),[b,t]),x=y.useMemo(()=>jc($=>{$.style[b]=null},n),[b,n]),k=y.useMemo(()=>jc($=>{$.style[b]=`${p(b,$)}px`,VN($)},r),[r,p,b]),E=y.useMemo(()=>jc($=>{$.style[b]=null},s),[b,s]);return o.jsx(pp,{ref:w,addEndListener:Yv,...m,"aria-expanded":m.role?c:null,onEnter:h,onEntering:v,onEntered:x,onExit:k,onExiting:E,childRef:Ro(a),in:c,timeout:u,mountOnEnter:d,unmountOnExit:f,appear:g,children:($,P)=>At.cloneElement(a,{...P,className:Ne(i,a.props.className,XI[$],b==="width"&&"collapse-horizontal")})})});Qv.displayName="Collapse";function HN(e,t){return Array.isArray(e)?e.includes(t):e===t}const sd=y.createContext({});sd.displayName="AccordionContext";const Xv=y.forwardRef(({as:e="div",bsPrefix:t,className:n,children:r,eventKey:s,...i},a)=>{const{activeEventKey:l}=y.useContext(sd);return t=Pe(t,"accordion-collapse"),o.jsx(Qv,{ref:a,in:HN(l,s),...i,className:Ne(n,t),children:o.jsx(e,{children:y.Children.only(r)})})});Xv.displayName="AccordionCollapse";const mp=y.createContext({eventKey:""});mp.displayName="AccordionItemContext";const qN=y.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:r,onEntering:s,onEntered:i,onExit:a,onExiting:l,onExited:c,...u},d)=>{t=Pe(t,"accordion-body");const{eventKey:f}=y.useContext(mp);return o.jsx(Xv,{eventKey:f,onEnter:r,onEntering:s,onEntered:i,onExit:a,onExiting:l,onExited:c,children:o.jsx(e,{ref:d,...u,className:Ne(n,t)})})});qN.displayName="AccordionBody";function ZI(e,t){const{activeEventKey:n,onSelect:r,alwaysOpen:s}=y.useContext(sd);return i=>{let a=e===n?null:e;s&&(Array.isArray(n)?n.includes(e)?a=n.filter(l=>l!==e):a=[...n,e]:a=[e]),r==null||r(a,i),t==null||t(i)}}const Zv=y.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:r,...s},i)=>{t=Pe(t,"accordion-button");const{eventKey:a}=y.useContext(mp),l=ZI(a,r),{activeEventKey:c}=y.useContext(sd);return e==="button"&&(s.type="button"),o.jsx(e,{ref:i,onClick:l,...s,"aria-expanded":Array.isArray(c)?c.includes(a):a===c,className:Ne(n,t,!HN(c,a)&&"collapsed")})});Zv.displayName="AccordionButton";const KN=y.forwardRef(({as:e="h2","aria-controls":t,bsPrefix:n,className:r,children:s,onClick:i,...a},l)=>(n=Pe(n,"accordion-header"),o.jsx(e,{ref:l,...a,className:Ne(r,n),children:o.jsx(Zv,{onClick:i,"aria-controls":t,children:s})})));KN.displayName="AccordionHeader";const WN=y.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:r,...s},i)=>{t=Pe(t,"accordion-item");const a=y.useMemo(()=>({eventKey:r}),[r]);return o.jsx(mp.Provider,{value:a,children:o.jsx(e,{ref:i,...s,className:Ne(n,t)})})});WN.displayName="AccordionItem";const GN=y.forwardRef((e,t)=>{const{as:n="div",activeKey:r,bsPrefix:s,className:i,onSelect:a,flush:l,alwaysOpen:c,...u}=rc(e,{activeKey:"onSelect"}),d=Pe(s,"accordion"),f=y.useMemo(()=>({activeEventKey:r,onSelect:a,alwaysOpen:c}),[r,a,c]);return o.jsx(sd.Provider,{value:f,children:o.jsx(n,{ref:t,...u,className:Ne(i,d,l&&`${d}-flush`)})})});GN.displayName="Accordion";const ka=Object.assign(GN,{Button:Zv,Collapse:Xv,Item:WN,Header:KN,Body:qN});function eL(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e},[e]),t}function Js(e){const t=eL(e);return y.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const id=e=>y.forwardRef((t,n)=>o.jsx("div",{...t,ref:n,className:Ne(t.className,e)})),JN=id("h4");JN.displayName="DivStyledAsH4";const YN=y.forwardRef(({className:e,bsPrefix:t,as:n=JN,...r},s)=>(t=Pe(t,"alert-heading"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));YN.displayName="AlertHeading";function iy(){return y.useState(null)}function tL(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e},[e]),t}function cr(e){const t=tL(e);return y.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function nL(e,t,n,r=!1){const s=cr(n);y.useEffect(()=>{const i=typeof e=="function"?e():e;return i.addEventListener(t,s,r),()=>i.removeEventListener(t,s,r)},[e])}function QN(){const e=y.useRef(!0),t=y.useRef(()=>e.current);return y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function XN(e){const t=y.useRef(null);return y.useEffect(()=>{t.current=e}),t.current}const rL=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",sL=typeof document<"u",lS=sL||rL?y.useLayoutEffect:y.useEffect,iL=["as","disabled"];function aL(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function oL(e){return!e||e.trim()==="#"}function eb({tagName:e,disabled:t,href:n,target:r,rel:s,role:i,onClick:a,tabIndex:l=0,type:c}){e||(n!=null||r!=null||s!=null?e="a":e="button");const u={tagName:e};if(e==="button")return[{type:c||"button",disabled:t},u];const d=g=>{if((t||e==="a"&&oL(n))&&g.preventDefault(),t){g.stopPropagation();return}a==null||a(g)},f=g=>{g.key===" "&&(g.preventDefault(),d(g))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:t?void 0:l,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:d,onKeyDown:f},u]}const tb=y.forwardRef((e,t)=>{let{as:n,disabled:r}=e,s=aL(e,iL);const[i,{tagName:a}]=eb(Object.assign({tagName:n,disabled:r},s));return o.jsx(a,Object.assign({},s,i,{ref:t}))});tb.displayName="Button";const lL=["onKeyDown"];function cL(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function uL(e){return!e||e.trim()==="#"}const ad=y.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=cL(e,lL);const[s]=eb(Object.assign({tagName:"a"},r)),i=cr(a=>{s.onKeyDown(a),n==null||n(a)});return uL(r.href)||r.role==="button"?o.jsx("a",Object.assign({ref:t},r,s,{onKeyDown:i})):o.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});ad.displayName="Anchor";const ZN=y.forwardRef(({className:e,bsPrefix:t,as:n=ad,...r},s)=>(t=Pe(t,"alert-link"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));ZN.displayName="AlertLink";const dL={[ws]:"show",[Ei]:"show"},Ys=y.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...s},i)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},l=y.useCallback((c,u)=>{VN(c),r==null||r(c,u)},[r]);return o.jsx(pp,{ref:i,addEndListener:Yv,...a,onEnter:l,childRef:Ro(t),children:(c,u)=>y.cloneElement(t,{...u,className:Ne("fade",e,t.props.className,dL[c],n[c])})})});Ys.displayName="Fade";const fL={"aria-label":kn.string,onClick:kn.func,variant:kn.oneOf(["white"])},od=y.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},s)=>o.jsx("button",{ref:s,type:"button",className:Ne("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));od.displayName="CloseButton";od.propTypes=fL;const eC=y.forwardRef((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:s="Close alert",closeVariant:i,className:a,children:l,variant:c="primary",onClose:u,dismissible:d,transition:f=Ys,...g}=rc(e,{show:"onClose"}),p=Pe(n,"alert"),m=Js(h=>{u&&u(!1,h)}),w=f===!0?Ys:f,b=o.jsxs("div",{role:"alert",...w?void 0:g,ref:t,className:Ne(a,p,c&&`${p}-${c}`,d&&`${p}-dismissible`),children:[d&&o.jsx(od,{onClick:m,"aria-label":s,variant:i}),l]});return w?o.jsx(w,{unmountOnExit:!0,...g,ref:void 0,in:r,children:b}):r?b:null});eC.displayName="Alert";const Lt=Object.assign(eC,{Link:ZN,Heading:YN}),Ue=y.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:r,className:s,as:i="span",...a},l)=>{const c=Pe(e,"badge");return o.jsx(i,{ref:l,...a,className:Ne(s,c,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})});Ue.displayName="Badge";const oe=y.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:s=!1,disabled:i=!1,className:a,...l},c)=>{const u=Pe(t,"btn"),[d,{tagName:f}]=eb({tagName:e,disabled:i,...l}),g=f;return o.jsx(g,{...d,...l,ref:c,disabled:i,className:Ne(a,u,s&&"active",n&&`${u}-${n}`,r&&`${u}-${r}`,l.href&&i&&"disabled")})});oe.displayName="Button";const Uc=y.forwardRef(({bsPrefix:e,size:t,vertical:n=!1,className:r,role:s="group",as:i="div",...a},l)=>{const c=Pe(e,"btn-group");let u=c;return n&&(u=`${c}-vertical`),o.jsx(i,{...a,ref:l,role:s,className:Ne(r,u,t&&`${c}-${t}`)})});Uc.displayName="ButtonGroup";const nb=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"card-body"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));nb.displayName="CardBody";const tC=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"card-footer"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));tC.displayName="CardFooter";const rb=y.createContext(null);rb.displayName="CardHeaderContext";const nC=y.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},s)=>{const i=Pe(e,"card-header"),a=y.useMemo(()=>({cardHeaderBsPrefix:i}),[i]);return o.jsx(rb.Provider,{value:a,children:o.jsx(n,{ref:s,...r,className:Ne(t,i)})})});nC.displayName="CardHeader";const rC=y.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...s},i)=>{const a=Pe(e,"card-img");return o.jsx(r,{ref:i,className:Ne(n?`${a}-${n}`:a,t),...s})});rC.displayName="CardImg";const sC=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"card-img-overlay"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));sC.displayName="CardImgOverlay";const iC=y.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},s)=>(t=Pe(t,"card-link"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));iC.displayName="CardLink";const hL=id("h6"),aC=y.forwardRef(({className:e,bsPrefix:t,as:n=hL,...r},s)=>(t=Pe(t,"card-subtitle"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));aC.displayName="CardSubtitle";const oC=y.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},s)=>(t=Pe(t,"card-text"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));oC.displayName="CardText";const pL=id("h5"),lC=y.forwardRef(({className:e,bsPrefix:t,as:n=pL,...r},s)=>(t=Pe(t,"card-title"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));lC.displayName="CardTitle";const cC=y.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:s,body:i=!1,children:a,as:l="div",...c},u)=>{const d=Pe(e,"card");return o.jsx(l,{ref:u,...c,className:Ne(t,d,n&&`bg-${n}`,r&&`text-${r}`,s&&`border-${s}`),children:i?o.jsx(nb,{children:a}):a})});cC.displayName="Card";const We=Object.assign(cC,{Img:rC,Title:lC,Subtitle:aC,Body:nb,Link:iC,Text:oC,Header:nC,Footer:tC,ImgOverlay:sC});function mL(){const e=y.useRef(!0),t=y.useRef(()=>e.current);return y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function gL(e){const t=y.useRef(e);return t.current=e,t}function uC(e){const t=gL(e);y.useEffect(()=>()=>t.current(),[])}const ay=2**31-1;function dC(e,t,n){const r=n-Date.now();e.current=r<=ay?setTimeout(t,r):setTimeout(()=>dC(e,t,n),ay)}function fC(){const e=mL(),t=y.useRef();return uC(()=>clearTimeout(t.current)),y.useMemo(()=>{const n=()=>clearTimeout(t.current);function r(s,i=0){e()&&(n(),i<=ay?t.current=setTimeout(s,i):dC(t,s,Date.now()+i))}return{set:r,clear:n,handleRef:t}},[])}function yL(e,t){return y.Children.toArray(e).some(n=>y.isValidElement(n)&&n.type===t)}function vL({as:e,bsPrefix:t,className:n,...r}){t=Pe(t,"col");const s=IN(),i=LN(),a=[],l=[];return s.forEach(c=>{const u=r[c];delete r[c];let d,f,g;typeof u=="object"&&u!=null?{span:d,offset:f,order:g}=u:d=u;const p=c!==i?`-${c}`:"";d&&a.push(d===!0?`${t}${p}`:`${t}${p}-${d}`),g!=null&&l.push(`order${p}-${g}`),f!=null&&l.push(`offset${p}-${f}`)}),[{...r,className:Ne(n,...a,...l)},{as:e,bsPrefix:t,spans:a}]}const Se=y.forwardRef((e,t)=>{const[{className:n,...r},{as:s="div",bsPrefix:i,spans:a}]=vL(e);return o.jsx(s,{...r,ref:t,className:Ne(n,!a.length&&i)})});Se.displayName="Col";const Eh=y.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...s},i)=>{const a=Pe(e,"container"),l=typeof t=="string"?`-${t}`:"-fluid";return o.jsx(n,{ref:i,...s,className:Ne(r,t?`${a}${l}`:a)})});Eh.displayName="Container";var bL=Function.prototype.bind.call(Function.prototype.call,[].slice);function ki(e,t){return bL(e.querySelectorAll(t))}function hC(e,t,n){const r=y.useRef(e!==void 0),[s,i]=y.useState(t),a=e!==void 0,l=r.current;return r.current=a,!a&&l&&s!==t&&i(t),[a?e:s,y.useCallback((...c)=>{const[u,...d]=c;let f=n==null?void 0:n(u,...d);return i(u),f},[n])]}function pC(){const[,e]=y.useReducer(t=>t+1,0);return e}const gp=y.createContext(null);var cS=Object.prototype.hasOwnProperty;function uS(e,t,n){for(n of e.keys())if(su(n,t))return n}function su(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&su(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(s=r,s&&typeof s=="object"&&(s=uS(t,s),!s)||!t.has(s))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(s=r[0],s&&typeof s=="object"&&(s=uS(t,s),!s)||!su(r[1],t.get(s)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(cS.call(e,n)&&++r&&!cS.call(t,n)||!(n in t)||!su(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function wL(e){const t=QN();return[e[0],y.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Vr="top",Es="bottom",Ns="right",Hr="left",sb="auto",ld=[Vr,Es,Ns,Hr],zl="start",Bu="end",xL="clippingParents",mC="viewport",Ec="popper",SL="reference",dS=ld.reduce(function(e,t){return e.concat([t+"-"+zl,t+"-"+Bu])},[]),gC=[].concat(ld,[sb]).reduce(function(e,t){return e.concat([t,t+"-"+zl,t+"-"+Bu])},[]),_L="beforeRead",kL="read",jL="afterRead",EL="beforeMain",NL="main",CL="afterMain",TL="beforeWrite",$L="write",OL="afterWrite",RL=[_L,kL,jL,EL,NL,CL,TL,$L,OL];function fi(e){return e.split("-")[0]}function as(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function jo(e){var t=as(e).Element;return e instanceof t||e instanceof Element}function hi(e){var t=as(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ib(e){if(typeof ShadowRoot>"u")return!1;var t=as(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var vo=Math.max,Nh=Math.min,Vl=Math.round;function oy(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function yC(){return!/^((?!chrome|android).)*safari/i.test(oy())}function Hl(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),s=1,i=1;t&&hi(e)&&(s=e.offsetWidth>0&&Vl(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Vl(r.height)/e.offsetHeight||1);var a=jo(e)?as(e):window,l=a.visualViewport,c=!yC()&&n,u=(r.left+(c&&l?l.offsetLeft:0))/s,d=(r.top+(c&&l?l.offsetTop:0))/i,f=r.width/s,g=r.height/i;return{width:f,height:g,top:d,right:u+f,bottom:d+g,left:u,x:u,y:d}}function ab(e){var t=Hl(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function vC(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ib(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Da(e){return e?(e.nodeName||"").toLowerCase():null}function Di(e){return as(e).getComputedStyle(e)}function AL(e){return["table","td","th"].indexOf(Da(e))>=0}function Ka(e){return((jo(e)?e.ownerDocument:e.document)||window.document).documentElement}function yp(e){return Da(e)==="html"?e:e.assignedSlot||e.parentNode||(ib(e)?e.host:null)||Ka(e)}function fS(e){return!hi(e)||Di(e).position==="fixed"?null:e.offsetParent}function PL(e){var t=/firefox/i.test(oy()),n=/Trident/i.test(oy());if(n&&hi(e)){var r=Di(e);if(r.position==="fixed")return null}var s=yp(e);for(ib(s)&&(s=s.host);hi(s)&&["html","body"].indexOf(Da(s))<0;){var i=Di(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function cd(e){for(var t=as(e),n=fS(e);n&&AL(n)&&Di(n).position==="static";)n=fS(n);return n&&(Da(n)==="html"||Da(n)==="body"&&Di(n).position==="static")?t:n||PL(e)||t}function ob(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function iu(e,t,n){return vo(e,Nh(t,n))}function IL(e,t,n){var r=iu(e,t,n);return r>n?n:r}function bC(){return{top:0,right:0,bottom:0,left:0}}function wC(e){return Object.assign({},bC(),e)}function xC(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var LL=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,wC(typeof t!="number"?t:xC(t,ld))};function ML(e){var t,n=e.state,r=e.name,s=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,l=fi(n.placement),c=ob(l),u=[Hr,Ns].indexOf(l)>=0,d=u?"height":"width";if(!(!i||!a)){var f=LL(s.padding,n),g=ab(i),p=c==="y"?Vr:Hr,m=c==="y"?Es:Ns,w=n.rects.reference[d]+n.rects.reference[c]-a[c]-n.rects.popper[d],b=a[c]-n.rects.reference[c],h=cd(i),v=h?c==="y"?h.clientHeight||0:h.clientWidth||0:0,x=w/2-b/2,k=f[p],E=v-g[d]-f[m],$=v/2-g[d]/2+x,P=iu(k,$,E),B=c;n.modifiersData[r]=(t={},t[B]=P,t.centerOffset=P-$,t)}}function FL(e){var t=e.state,n=e.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||vC(t.elements.popper,s)&&(t.elements.arrow=s))}const DL={name:"arrow",enabled:!0,phase:"main",fn:ML,effect:FL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ql(e){return e.split("-")[1]}var BL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function UL(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:Vl(n*s)/s||0,y:Vl(r*s)/s||0}}function hS(e){var t,n=e.popper,r=e.popperRect,s=e.placement,i=e.variation,a=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,f=e.isFixed,g=a.x,p=g===void 0?0:g,m=a.y,w=m===void 0?0:m,b=typeof d=="function"?d({x:p,y:w}):{x:p,y:w};p=b.x,w=b.y;var h=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),x=Hr,k=Vr,E=window;if(u){var $=cd(n),P="clientHeight",B="clientWidth";if($===as(n)&&($=Ka(n),Di($).position!=="static"&&l==="absolute"&&(P="scrollHeight",B="scrollWidth")),$=$,s===Vr||(s===Hr||s===Ns)&&i===Bu){k=Es;var W=f&&$===E&&E.visualViewport?E.visualViewport.height:$[P];w-=W-r.height,w*=c?1:-1}if(s===Hr||(s===Vr||s===Es)&&i===Bu){x=Ns;var Y=f&&$===E&&E.visualViewport?E.visualViewport.width:$[B];p-=Y-r.width,p*=c?1:-1}}var ee=Object.assign({position:l},u&&BL),Q=d===!0?UL({x:p,y:w},as(n)):{x:p,y:w};if(p=Q.x,w=Q.y,c){var X;return Object.assign({},ee,(X={},X[k]=v?"0":"",X[x]=h?"0":"",X.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+w+"px)":"translate3d("+p+"px, "+w+"px, 0)",X))}return Object.assign({},ee,(t={},t[k]=v?w+"px":"",t[x]=h?p+"px":"",t.transform="",t))}function zL(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,l=n.roundOffsets,c=l===void 0?!0:l,u={placement:fi(t.placement),variation:ql(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,hS(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,hS(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const VL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zL,data:{}};var Zd={passive:!0};function HL(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,i=s===void 0?!0:s,a=r.resize,l=a===void 0?!0:a,c=as(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",n.update,Zd)}),l&&c.addEventListener("resize",n.update,Zd),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Zd)}),l&&c.removeEventListener("resize",n.update,Zd)}}const qL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:HL,data:{}};var KL={left:"right",right:"left",bottom:"top",top:"bottom"};function Ff(e){return e.replace(/left|right|bottom|top/g,function(t){return KL[t]})}var WL={start:"end",end:"start"};function pS(e){return e.replace(/start|end/g,function(t){return WL[t]})}function lb(e){var t=as(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function cb(e){return Hl(Ka(e)).left+lb(e).scrollLeft}function GL(e,t){var n=as(e),r=Ka(e),s=n.visualViewport,i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;var u=yC();(u||!u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l+cb(e),y:c}}function JL(e){var t,n=Ka(e),r=lb(e),s=(t=e.ownerDocument)==null?void 0:t.body,i=vo(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=vo(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+cb(e),c=-r.scrollTop;return Di(s||n).direction==="rtl"&&(l+=vo(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}function ub(e){var t=Di(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function SC(e){return["html","body","#document"].indexOf(Da(e))>=0?e.ownerDocument.body:hi(e)&&ub(e)?e:SC(yp(e))}function au(e,t){var n;t===void 0&&(t=[]);var r=SC(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),i=as(r),a=s?[i].concat(i.visualViewport||[],ub(r)?r:[]):r,l=t.concat(a);return s?l:l.concat(au(yp(a)))}function ly(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function YL(e,t){var n=Hl(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function mS(e,t,n){return t===mC?ly(GL(e,n)):jo(t)?YL(t,n):ly(JL(Ka(e)))}function QL(e){var t=au(yp(e)),n=["absolute","fixed"].indexOf(Di(e).position)>=0,r=n&&hi(e)?cd(e):e;return jo(r)?t.filter(function(s){return jo(s)&&vC(s,r)&&Da(s)!=="body"}):[]}function XL(e,t,n,r){var s=t==="clippingParents"?QL(e):[].concat(t),i=[].concat(s,[n]),a=i[0],l=i.reduce(function(c,u){var d=mS(e,u,r);return c.top=vo(d.top,c.top),c.right=Nh(d.right,c.right),c.bottom=Nh(d.bottom,c.bottom),c.left=vo(d.left,c.left),c},mS(e,a,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function _C(e){var t=e.reference,n=e.element,r=e.placement,s=r?fi(r):null,i=r?ql(r):null,a=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(s){case Vr:c={x:a,y:t.y-n.height};break;case Es:c={x:a,y:t.y+t.height};break;case Ns:c={x:t.x+t.width,y:l};break;case Hr:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var u=s?ob(s):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case zl:c[u]=c[u]-(t[d]/2-n[d]/2);break;case Bu:c[u]=c[u]+(t[d]/2-n[d]/2);break}}return c}function Uu(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=r===void 0?e.placement:r,i=n.strategy,a=i===void 0?e.strategy:i,l=n.boundary,c=l===void 0?xL:l,u=n.rootBoundary,d=u===void 0?mC:u,f=n.elementContext,g=f===void 0?Ec:f,p=n.altBoundary,m=p===void 0?!1:p,w=n.padding,b=w===void 0?0:w,h=wC(typeof b!="number"?b:xC(b,ld)),v=g===Ec?SL:Ec,x=e.rects.popper,k=e.elements[m?v:g],E=XL(jo(k)?k:k.contextElement||Ka(e.elements.popper),c,d,a),$=Hl(e.elements.reference),P=_C({reference:$,element:x,placement:s}),B=ly(Object.assign({},x,P)),W=g===Ec?B:$,Y={top:E.top-W.top+h.top,bottom:W.bottom-E.bottom+h.bottom,left:E.left-W.left+h.left,right:W.right-E.right+h.right},ee=e.modifiersData.offset;if(g===Ec&&ee){var Q=ee[s];Object.keys(Y).forEach(function(X){var fe=[Ns,Es].indexOf(X)>=0?1:-1,me=[Vr,Es].indexOf(X)>=0?"y":"x";Y[X]+=Q[me]*fe})}return Y}function ZL(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?gC:c,d=ql(r),f=d?l?dS:dS.filter(function(m){return ql(m)===d}):ld,g=f.filter(function(m){return u.indexOf(m)>=0});g.length===0&&(g=f);var p=g.reduce(function(m,w){return m[w]=Uu(e,{placement:w,boundary:s,rootBoundary:i,padding:a})[fi(w)],m},{});return Object.keys(p).sort(function(m,w){return p[m]-p[w]})}function eM(e){if(fi(e)===sb)return[];var t=Ff(e);return[pS(e),t,pS(t)]}function tM(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,l=a===void 0?!0:a,c=n.fallbackPlacements,u=n.padding,d=n.boundary,f=n.rootBoundary,g=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,w=n.allowedAutoPlacements,b=t.options.placement,h=fi(b),v=h===b,x=c||(v||!m?[Ff(b)]:eM(b)),k=[b].concat(x).reduce(function(_,R){return _.concat(fi(R)===sb?ZL(t,{placement:R,boundary:d,rootBoundary:f,padding:u,flipVariations:m,allowedAutoPlacements:w}):R)},[]),E=t.rects.reference,$=t.rects.popper,P=new Map,B=!0,W=k[0],Y=0;Y<k.length;Y++){var ee=k[Y],Q=fi(ee),X=ql(ee)===zl,fe=[Vr,Es].indexOf(Q)>=0,me=fe?"width":"height",ve=Uu(t,{placement:ee,boundary:d,rootBoundary:f,altBoundary:g,padding:u}),Oe=fe?X?Ns:Hr:X?Es:Vr;E[me]>$[me]&&(Oe=Ff(Oe));var T=Ff(Oe),M=[];if(i&&M.push(ve[Q]<=0),l&&M.push(ve[Oe]<=0,ve[T]<=0),M.every(function(_){return _})){W=ee,B=!1;break}P.set(ee,M)}if(B)for(var I=m?3:1,N=function(R){var K=k.find(function(pe){var ue=P.get(pe);if(ue)return ue.slice(0,R).every(function(j){return j})});if(K)return W=K,"break"},L=I;L>0;L--){var A=N(L);if(A==="break")break}t.placement!==W&&(t.modifiersData[r]._skip=!0,t.placement=W,t.reset=!0)}}const nM={name:"flip",enabled:!0,phase:"main",fn:tM,requiresIfExists:["offset"],data:{_skip:!1}};function gS(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function yS(e){return[Vr,Ns,Es,Hr].some(function(t){return e[t]>=0})}function rM(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,a=Uu(t,{elementContext:"reference"}),l=Uu(t,{altBoundary:!0}),c=gS(a,r),u=gS(l,s,i),d=yS(c),f=yS(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const sM={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rM};function iM(e,t,n){var r=fi(e),s=[Hr,Vr].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=i[0],l=i[1];return a=a||0,l=(l||0)*s,[Hr,Ns].indexOf(r)>=0?{x:l,y:a}:{x:a,y:l}}function aM(e){var t=e.state,n=e.options,r=e.name,s=n.offset,i=s===void 0?[0,0]:s,a=gC.reduce(function(d,f){return d[f]=iM(f,t.rects,i),d},{}),l=a[t.placement],c=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}const oM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aM};function lM(e){var t=e.state,n=e.name;t.modifiersData[n]=_C({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const cM={name:"popperOffsets",enabled:!0,phase:"read",fn:lM,data:{}};function uM(e){return e==="x"?"y":"x"}function dM(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,l=a===void 0?!1:a,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,f=n.padding,g=n.tether,p=g===void 0?!0:g,m=n.tetherOffset,w=m===void 0?0:m,b=Uu(t,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),h=fi(t.placement),v=ql(t.placement),x=!v,k=ob(h),E=uM(k),$=t.modifiersData.popperOffsets,P=t.rects.reference,B=t.rects.popper,W=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,Y=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Q={x:0,y:0};if($){if(i){var X,fe=k==="y"?Vr:Hr,me=k==="y"?Es:Ns,ve=k==="y"?"height":"width",Oe=$[k],T=Oe+b[fe],M=Oe-b[me],I=p?-B[ve]/2:0,N=v===zl?P[ve]:B[ve],L=v===zl?-B[ve]:-P[ve],A=t.elements.arrow,_=p&&A?ab(A):{width:0,height:0},R=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:bC(),K=R[fe],pe=R[me],ue=iu(0,P[ve],_[ve]),j=x?P[ve]/2-I-ue-K-Y.mainAxis:N-ue-K-Y.mainAxis,$e=x?-P[ve]/2+I+ue+pe+Y.mainAxis:L+ue+pe+Y.mainAxis,De=t.elements.arrow&&cd(t.elements.arrow),rt=De?k==="y"?De.clientTop||0:De.clientLeft||0:0,st=(X=ee==null?void 0:ee[k])!=null?X:0,ke=Oe+j-st-rt,Re=Oe+$e-st,J=iu(p?Nh(T,ke):T,Oe,p?vo(M,Re):M);$[k]=J,Q[k]=J-Oe}if(l){var F,re=k==="x"?Vr:Hr,be=k==="x"?Es:Ns,Le=$[E],O=E==="y"?"height":"width",z=Le+b[re],G=Le-b[be],se=[Vr,Hr].indexOf(h)!==-1,ne=(F=ee==null?void 0:ee[E])!=null?F:0,q=se?z:Le-P[O]-B[O]-ne+Y.altAxis,ge=se?Le+P[O]+B[O]-ne-Y.altAxis:G,Te=p&&se?IL(q,Le,ge):iu(p?q:z,Le,p?ge:G);$[E]=Te,Q[E]=Te-Le}t.modifiersData[r]=Q}}const fM={name:"preventOverflow",enabled:!0,phase:"main",fn:dM,requiresIfExists:["offset"]};function hM(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function pM(e){return e===as(e)||!hi(e)?lb(e):hM(e)}function mM(e){var t=e.getBoundingClientRect(),n=Vl(t.width)/e.offsetWidth||1,r=Vl(t.height)/e.offsetHeight||1;return n!==1||r!==1}function gM(e,t,n){n===void 0&&(n=!1);var r=hi(t),s=hi(t)&&mM(t),i=Ka(t),a=Hl(e,s,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((Da(t)!=="body"||ub(i))&&(l=pM(t)),hi(t)?(c=Hl(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=cb(i))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function yM(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function s(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&s(c)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||s(i)}),r}function vM(e){var t=yM(e);return RL.reduce(function(n,r){return n.concat(t.filter(function(s){return s.phase===r}))},[])}function bM(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function wM(e){var t=e.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var vS={placement:"bottom",modifiers:[],strategy:"absolute"};function bS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xM(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,s=t.defaultOptions,i=s===void 0?vS:s;return function(l,c,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},vS,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],g=!1,p={state:d,setOptions:function(h){var v=typeof h=="function"?h(d.options):h;w(),d.options=Object.assign({},i,d.options,v),d.scrollParents={reference:jo(l)?au(l):l.contextElement?au(l.contextElement):[],popper:au(c)};var x=vM(wM([].concat(r,d.options.modifiers)));return d.orderedModifiers=x.filter(function(k){return k.enabled}),m(),p.update()},forceUpdate:function(){if(!g){var h=d.elements,v=h.reference,x=h.popper;if(bS(v,x)){d.rects={reference:gM(v,cd(x),d.options.strategy==="fixed"),popper:ab(x)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(Y){return d.modifiersData[Y.name]=Object.assign({},Y.data)});for(var k=0;k<d.orderedModifiers.length;k++){if(d.reset===!0){d.reset=!1,k=-1;continue}var E=d.orderedModifiers[k],$=E.fn,P=E.options,B=P===void 0?{}:P,W=E.name;typeof $=="function"&&(d=$({state:d,options:B,name:W,instance:p})||d)}}}},update:bM(function(){return new Promise(function(b){p.forceUpdate(),b(d)})}),destroy:function(){w(),g=!0}};if(!bS(l,c))return p;p.setOptions(u).then(function(b){!g&&u.onFirstUpdate&&u.onFirstUpdate(b)});function m(){d.orderedModifiers.forEach(function(b){var h=b.name,v=b.options,x=v===void 0?{}:v,k=b.effect;if(typeof k=="function"){var E=k({state:d,name:h,instance:p,options:x}),$=function(){};f.push(E||$)}})}function w(){f.forEach(function(b){return b()}),f=[]}return p}}const SM=xM({defaultModifiers:[sM,cM,VL,qL,oM,nM,fM,DL]}),_M=["enabled","placement","strategy","modifiers"];function kM(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const jM={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},EM={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(s=>s.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,s=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&s==="tooltip"&&"setAttribute"in r){const i=r.getAttribute("aria-describedby");if(i&&i.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",i?`${i},${n.id}`:n.id)}}},NM=[];function kC(e,t,n={}){let{enabled:r=!0,placement:s="bottom",strategy:i="absolute",modifiers:a=NM}=n,l=kM(n,_M);const c=y.useRef(a),u=y.useRef(),d=y.useCallback(()=>{var b;(b=u.current)==null||b.update()},[]),f=y.useCallback(()=>{var b;(b=u.current)==null||b.forceUpdate()},[]),[g,p]=wL(y.useState({placement:s,update:d,forceUpdate:f,attributes:{},styles:{popper:{},arrow:{}}})),m=y.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:b})=>{const h={},v={};Object.keys(b.elements).forEach(x=>{h[x]=b.styles[x],v[x]=b.attributes[x]}),p({state:b,styles:h,attributes:v,update:d,forceUpdate:f,placement:b.placement})}}),[d,f,p]),w=y.useMemo(()=>(su(c.current,a)||(c.current=a),c.current),[a]);return y.useEffect(()=>{!u.current||!r||u.current.setOptions({placement:s,strategy:i,modifiers:[...w,m,jM]})},[i,s,m,r,w]),y.useEffect(()=>{if(!(!r||e==null||t==null))return u.current=SM(e,t,Object.assign({},l,{placement:s,strategy:i,modifiers:[...w,EM,m]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,p(b=>Object.assign({},b,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),g}function zu(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var CM=function(){},TM=CM;const $M=Ql(TM),wS=()=>{};function OM(e){return e.button===0}function RM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const Df=e=>e&&("current"in e?e.current:e),xS={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function jC(e,t=wS,{disabled:n,clickTrigger:r="click"}={}){const s=y.useRef(!1),i=y.useRef(!1),a=y.useCallback(u=>{const d=Df(e);$M(!!d,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!d||RM(u)||!OM(u)||!!zu(d,u.target)||i.current,i.current=!1},[e]),l=cr(u=>{const d=Df(e);d&&zu(d,u.target)?i.current=!0:i.current=!1}),c=cr(u=>{s.current||t(u)});y.useEffect(()=>{var u,d;if(n||e==null)return;const f=sc(Df(e)),g=f.defaultView||window;let p=(u=g.event)!=null?u:(d=g.parent)==null?void 0:d.event,m=null;xS[r]&&(m=Ti(f,xS[r],l,!0));const w=Ti(f,r,a,!0),b=Ti(f,r,v=>{if(v===p){p=void 0;return}c(v)});let h=[];return"ontouchstart"in f.documentElement&&(h=[].slice.call(f.body.children).map(v=>Ti(v,"mousemove",wS))),()=>{m==null||m(),w(),b(),h.forEach(v=>v())}},[e,n,r,a,l,c])}function AM(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function PM(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function EC({enabled:e,enableEvents:t,placement:n,flip:r,offset:s,fixed:i,containerPadding:a,arrowElement:l,popperConfig:c={}}){var u,d,f,g,p;const m=AM(c.modifiers);return Object.assign({},c,{placement:n,enabled:e,strategy:i?"fixed":c.strategy,modifiers:PM(Object.assign({},m,{eventListeners:{enabled:t,options:(u=m.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},(d=m.preventOverflow)==null?void 0:d.options):(f=m.preventOverflow)==null?void 0:f.options}),offset:{options:Object.assign({offset:s},(g=m.offset)==null?void 0:g.options)},arrow:Object.assign({},m.arrow,{enabled:!!l,options:Object.assign({},(p=m.arrow)==null?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!r},m.flip)}))})}const IM=["children","usePopper"];function LM(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const MM=()=>{};function NC(e={}){const t=y.useContext(gp),[n,r]=iy(),s=y.useRef(!1),{flip:i,offset:a,rootCloseEvent:l,fixed:c=!1,placement:u,popperConfig:d={},enableEventListeners:f=!0,usePopper:g=!!t}=e,p=(t==null?void 0:t.show)==null?!!e.show:t.show;p&&!s.current&&(s.current=!0);const m=$=>{t==null||t.toggle(!1,$)},{placement:w,setMenu:b,menuElement:h,toggleElement:v}=t||{},x=kC(v,h,EC({placement:u||w||"bottom-start",enabled:g,enableEvents:f??p,offset:a,flip:i,fixed:c,arrowElement:n,popperConfig:d})),k=Object.assign({ref:b||MM,"aria-labelledby":v==null?void 0:v.id},x.attributes.popper,{style:x.styles.popper}),E={show:p,placement:w,hasShown:s.current,toggle:t==null?void 0:t.toggle,popper:g?x:null,arrowProps:g?Object.assign({ref:r},x.attributes.arrow,{style:x.styles.arrow}):{}};return jC(h,m,{clickTrigger:l,disabled:!p}),[k,E]}function CC(e){let{children:t,usePopper:n=!0}=e,r=LM(e,IM);const[s,i]=NC(Object.assign({},r,{usePopper:n}));return o.jsx(o.Fragment,{children:t(s,i)})}CC.displayName="DropdownMenu";const TC={prefix:String(Math.round(Math.random()*1e10)),current:0},$C=At.createContext(TC),FM=At.createContext(!1);let Sm=new WeakMap;function DM(e=!1){let t=y.useContext($C),n=y.useRef(null);if(n.current===null&&!e){var r,s;let i=(s=At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(r=s.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(i){let a=Sm.get(i);a==null?Sm.set(i,{id:t.current,state:i.memoizedState}):i.memoizedState!==a.state&&(t.current=a.id,Sm.delete(i))}n.current=++t.current}return n.current}function BM(e){let t=y.useContext($C),n=DM(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function UM(e){let t=At.useId(),[n]=y.useState(qM()),r=n?"react-aria":`react-aria${TC.prefix}`;return e||`${r}-${t}`}const OC=typeof At.useId=="function"?UM:BM;function zM(){return!1}function VM(){return!0}function HM(e){return()=>{}}function qM(){return typeof At.useSyncExternalStore=="function"?At.useSyncExternalStore(HM,zM,VM):y.useContext(FM)}const RC=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},SS=()=>{};function AC(){const e=OC(),{show:t=!1,toggle:n=SS,setToggle:r,menuElement:s}=y.useContext(gp)||{},i=y.useCallback(l=>{n(!t,l)},[t,n]),a={id:e,ref:r||SS,onClick:i,"aria-expanded":!!t};return s&&RC(s)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:n}]}function PC({children:e}){const[t,n]=AC();return o.jsx(o.Fragment,{children:e(t,n)})}PC.displayName="DropdownToggle";const pi=y.createContext(null),Ba=(e,t=null)=>e!=null?String(e):t||null,vp=y.createContext(null);vp.displayName="NavContext";const KM="data-rr-ui-",WM="rrUi";function oc(e){return`${KM}${e}`}function GM(e){return`${WM}${e}`}const JM=["eventKey","disabled","onClick","active","as"];function YM(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function IC({key:e,href:t,active:n,disabled:r,onClick:s}){const i=y.useContext(pi),a=y.useContext(vp),{activeKey:l}=a||{},c=Ba(e,t),u=n==null&&e!=null?Ba(l)===c:n;return[{onClick:cr(f=>{r||(s==null||s(f),i&&!f.isPropagationStopped()&&i(c,f))}),"aria-disabled":r||void 0,"aria-selected":u,[oc("dropdown-item")]:""},{isActive:u}]}const LC=y.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:s,active:i,as:a=tb}=e,l=YM(e,JM);const[c]=IC({key:n,href:l.href,disabled:r,onClick:s,active:i});return o.jsx(a,Object.assign({},l,{ref:t},c))});LC.displayName="DropdownItem";const MC=y.createContext(ic?window:void 0);MC.Provider;function bp(){return y.useContext(MC)}function _S(){const e=pC(),t=y.useRef(null),n=y.useCallback(r=>{t.current=r,e()},[e]);return[t,n]}function ud({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:s=`* [${oc("dropdown-item")}]`,focusFirstItemOnShow:i,placement:a="bottom-start",children:l}){const c=bp(),[u,d]=hC(t,e,r),[f,g]=_S(),p=f.current,[m,w]=_S(),b=m.current,h=XN(u),v=y.useRef(null),x=y.useRef(!1),k=y.useContext(pi),E=y.useCallback((ee,Q,X=Q==null?void 0:Q.type)=>{d(ee,{originalEvent:Q,source:X})},[d]),$=cr((ee,Q)=>{n==null||n(ee,Q),E(!1,Q,"select"),Q.isPropagationStopped()||k==null||k(ee,Q)}),P=y.useMemo(()=>({toggle:E,placement:a,show:u,menuElement:p,toggleElement:b,setMenu:g,setToggle:w}),[E,a,u,p,b,g,w]);p&&h&&!u&&(x.current=p.contains(p.ownerDocument.activeElement));const B=cr(()=>{b&&b.focus&&b.focus()}),W=cr(()=>{const ee=v.current;let Q=i;if(Q==null&&(Q=f.current&&RC(f.current)?"keyboard":!1),Q===!1||Q==="keyboard"&&!/^key.+$/.test(ee))return;const X=ki(f.current,s)[0];X&&X.focus&&X.focus()});y.useEffect(()=>{u?W():x.current&&(x.current=!1,B())},[u,x,B,W]),y.useEffect(()=>{v.current=null});const Y=(ee,Q)=>{if(!f.current)return null;const X=ki(f.current,s);let fe=X.indexOf(ee)+Q;return fe=Math.max(0,Math.min(fe,X.length)),X[fe]};return nL(y.useCallback(()=>c.document,[c]),"keydown",ee=>{var Q,X;const{key:fe}=ee,me=ee.target,ve=(Q=f.current)==null?void 0:Q.contains(me),Oe=(X=m.current)==null?void 0:X.contains(me);if(/input|textarea/i.test(me.tagName)&&(fe===" "||fe!=="Escape"&&ve||fe==="Escape"&&me.type==="search")||!ve&&!Oe||fe==="Tab"&&(!f.current||!u))return;v.current=ee.type;const M={originalEvent:ee,source:ee.type};switch(fe){case"ArrowUp":{const I=Y(me,-1);I&&I.focus&&I.focus(),ee.preventDefault();return}case"ArrowDown":if(ee.preventDefault(),!u)d(!0,M);else{const I=Y(me,1);I&&I.focus&&I.focus()}return;case"Tab":Jv(me.ownerDocument,"keyup",I=>{var N;(I.key==="Tab"&&!I.target||!((N=f.current)!=null&&N.contains(I.target)))&&d(!1,M)},{once:!0});break;case"Escape":fe==="Escape"&&(ee.preventDefault(),ee.stopPropagation()),d(!1,M);break}}),o.jsx(pi.Provider,{value:$,children:o.jsx(gp.Provider,{value:P,children:l})})}ud.displayName="Dropdown";ud.Menu=CC;ud.Toggle=PC;ud.Item=LC;const db=y.createContext({});db.displayName="DropdownContext";const FC=y.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:r="separator",...s},i)=>(t=Pe(t,"dropdown-divider"),o.jsx(n,{ref:i,className:Ne(e,t),role:r,...s})));FC.displayName="DropdownDivider";const DC=y.forwardRef(({className:e,bsPrefix:t,as:n="div",role:r="heading",...s},i)=>(t=Pe(t,"dropdown-header"),o.jsx(n,{ref:i,className:Ne(e,t),role:r,...s})));DC.displayName="DropdownHeader";const BC=y.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:s,active:i,as:a=ad,...l},c)=>{const u=Pe(e,"dropdown-item"),[d,f]=IC({key:n,href:l.href,disabled:r,onClick:s,active:i});return o.jsx(a,{...l,...d,ref:c,className:Ne(t,u,f.isActive&&"active",r&&"disabled")})});BC.displayName="DropdownItem";const UC=y.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},s)=>(t=Pe(t,"dropdown-item-text"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));UC.displayName="DropdownItemText";const QM=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",XM=typeof document<"u",fb=XM||QM?y.useLayoutEffect:y.useEffect,wp=y.createContext(null);wp.displayName="InputGroupContext";const Ao=y.createContext(null);Ao.displayName="NavbarContext";function zC(e,t){return e}function VC(e,t,n){const r=n?"top-end":"top-start",s=n?"top-start":"top-end",i=n?"bottom-end":"bottom-start",a=n?"bottom-start":"bottom-end",l=n?"right-start":"left-start",c=n?"right-end":"left-end",u=n?"left-start":"right-start",d=n?"left-end":"right-end";let f=e?a:i;return t==="up"?f=e?s:r:t==="end"?f=e?d:u:t==="start"?f=e?c:l:t==="down-centered"?f="bottom":t==="up-centered"&&(f="top"),f}const HC=y.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:s=!0,show:i,renderOnMount:a,as:l="div",popperConfig:c,variant:u,...d},f)=>{let g=!1;const p=y.useContext(Ao),m=Pe(e,"dropdown-menu"),{align:w,drop:b,isRTL:h}=y.useContext(db);n=n||w;const v=y.useContext(wp),x=[];if(n)if(typeof n=="object"){const ee=Object.keys(n);if(ee.length){const Q=ee[0],X=n[Q];g=X==="start",x.push(`${m}-${Q}-${X}`)}}else n==="end"&&(g=!0);const k=VC(g,b,h),[E,{hasShown:$,popper:P,show:B,toggle:W}]=NC({flip:s,rootCloseEvent:r,show:i,usePopper:!p&&x.length===0,offset:[0,2],popperConfig:c,placement:k});if(E.ref=ac(zC(f),E.ref),fb(()=>{B&&(P==null||P.update())},[B]),!$&&!a&&!v)return null;typeof l!="string"&&(E.show=B,E.close=()=>W==null?void 0:W(!1),E.align=n);let Y=d.style;return P!=null&&P.placement&&(Y={...d.style,...E.style},d["x-placement"]=P.placement),o.jsx(l,{...d,...E,style:Y,...(x.length||p)&&{"data-bs-popper":"static"},className:Ne(t,m,B&&"show",g&&`${m}-end`,u&&`${m}-${u}`,...x)})});HC.displayName="DropdownMenu";const qC=y.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:s=oe,...i},a)=>{const l=Pe(e,"dropdown-toggle"),c=y.useContext(gp);r!==void 0&&(i.bsPrefix=r);const[u]=AC();return u.ref=ac(u.ref,zC(a)),o.jsx(s,{className:Ne(n,l,t&&`${l}-split`,(c==null?void 0:c.show)&&"show"),...u,...i})});qC.displayName="DropdownToggle";const KC=y.forwardRef((e,t)=>{const{bsPrefix:n,drop:r="down",show:s,className:i,align:a="start",onSelect:l,onToggle:c,focusFirstItemOnShow:u,as:d="div",navbar:f,autoClose:g=!0,...p}=rc(e,{show:"onToggle"}),m=y.useContext(wp),w=Pe(n,"dropdown"),b=hp(),h=P=>g===!1?P==="click":g==="inside"?P!=="rootClose":g==="outside"?P!=="select":!0,v=Js((P,B)=>{var W;!((W=B.originalEvent)==null||(W=W.target)==null)&&W.classList.contains("dropdown-toggle")&&B.source==="mousedown"||(B.originalEvent.currentTarget===document&&(B.source!=="keydown"||B.originalEvent.key==="Escape")&&(B.source="rootClose"),h(B.source)&&(c==null||c(P,B)))}),k=VC(a==="end",r,b),E=y.useMemo(()=>({align:a,drop:r,isRTL:b}),[a,r,b]),$={down:w,"down-centered":`${w}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return o.jsx(db.Provider,{value:E,children:o.jsx(ud,{placement:k,show:s,onSelect:l,onToggle:v,focusFirstItemOnShow:u,itemSelector:`.${w}-item:not(.disabled):not(:disabled)`,children:m?p.children:o.jsx(d,{...p,ref:t,className:Ne(i,s&&"show",$[r])})})})});KC.displayName="Dropdown";const Ot=Object.assign(KC,{Toggle:qC,Menu:HC,Item:BC,ItemText:UC,Divider:FC,Header:DC});kn.string,kn.bool,kn.bool,kn.bool,kn.bool;const to=y.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:r=!1,roundedCircle:s=!1,thumbnail:i=!1,...a},l)=>(e=Pe(e,"img"),o.jsx("img",{ref:l,...a,className:Ne(t,n&&`${e}-fluid`,r&&"rounded",s&&"rounded-circle",i&&`${e}-thumbnail`)})));to.displayName="Image";const ZM={type:kn.string,tooltip:kn.bool,as:kn.elementType},xp=y.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...s},i)=>o.jsx(e,{...s,ref:i,className:Ne(t,`${n}-${r?"tooltip":"feedback"}`)}));xp.displayName="Feedback";xp.propTypes=ZM;const Bi=y.createContext({}),dd=y.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:s=!1,isInvalid:i=!1,as:a="input",...l},c)=>{const{controlId:u}=y.useContext(Bi);return t=Pe(t,"form-check-input"),o.jsx(a,{...l,ref:c,type:r,id:e||u,className:Ne(n,t,s&&"is-valid",i&&"is-invalid")})});dd.displayName="FormCheckInput";const Ch=y.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},s)=>{const{controlId:i}=y.useContext(Bi);return e=Pe(e,"form-check-label"),o.jsx("label",{...r,ref:s,htmlFor:n||i,className:Ne(t,e)})});Ch.displayName="FormCheckLabel";const WC=y.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:s=!1,disabled:i=!1,isValid:a=!1,isInvalid:l=!1,feedbackTooltip:c=!1,feedback:u,feedbackType:d,className:f,style:g,title:p="",type:m="checkbox",label:w,children:b,as:h="input",...v},x)=>{t=Pe(t,"form-check"),n=Pe(n,"form-switch");const{controlId:k}=y.useContext(Bi),E=y.useMemo(()=>({controlId:e||k}),[k,e]),$=!b&&w!=null&&w!==!1||yL(b,Ch),P=o.jsx(dd,{...v,type:m==="switch"?"checkbox":m,ref:x,isValid:a,isInvalid:l,disabled:i,as:h});return o.jsx(Bi.Provider,{value:E,children:o.jsx("div",{style:g,className:Ne(f,$&&t,r&&`${t}-inline`,s&&`${t}-reverse`,m==="switch"&&n),children:b||o.jsxs(o.Fragment,{children:[P,$&&o.jsx(Ch,{title:p,children:w}),u&&o.jsx(xp,{type:d,tooltip:c,children:u})]})})})});WC.displayName="FormCheck";const Th=Object.assign(WC,{Input:dd,Label:Ch}),GC=y.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:s,className:i,isValid:a=!1,isInvalid:l=!1,plaintext:c,readOnly:u,as:d="input",...f},g)=>{const{controlId:p}=y.useContext(Bi);return e=Pe(e,"form-control"),o.jsx(d,{...f,type:t,size:r,ref:g,readOnly:u,id:s||p,className:Ne(i,c?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",l&&"is-invalid")})});GC.displayName="FormControl";const eF=Object.assign(GC,{Feedback:xp}),JC=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"form-floating"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));JC.displayName="FormFloating";const hb=y.forwardRef(({controlId:e,as:t="div",...n},r)=>{const s=y.useMemo(()=>({controlId:e}),[e]);return o.jsx(Bi.Provider,{value:s,children:o.jsx(t,{...n,ref:r})})});hb.displayName="FormGroup";const YC=y.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:s,htmlFor:i,...a},l)=>{const{controlId:c}=y.useContext(Bi);t=Pe(t,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const d=Ne(s,t,r&&"visually-hidden",n&&u);return i=i||c,n?o.jsx(Se,{ref:l,as:"label",className:d,htmlFor:i,...a}):o.jsx(e,{ref:l,className:d,htmlFor:i,...a})});YC.displayName="FormLabel";const QC=y.forwardRef(({bsPrefix:e,className:t,id:n,...r},s)=>{const{controlId:i}=y.useContext(Bi);return e=Pe(e,"form-range"),o.jsx("input",{...r,type:"range",ref:s,className:Ne(t,e),id:n||i})});QC.displayName="FormRange";const XC=y.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:s=!1,isInvalid:i=!1,id:a,...l},c)=>{const{controlId:u}=y.useContext(Bi);return e=Pe(e,"form-select"),o.jsx("select",{...l,size:n,ref:c,className:Ne(r,e,t&&`${e}-${t}`,s&&"is-valid",i&&"is-invalid"),id:a||u})});XC.displayName="FormSelect";const ZC=y.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...s},i)=>(e=Pe(e,"form-text"),o.jsx(n,{...s,ref:i,className:Ne(t,e,r&&"text-muted")})));ZC.displayName="FormText";const eT=y.forwardRef((e,t)=>o.jsx(Th,{...e,ref:t,type:"switch"}));eT.displayName="Switch";const tF=Object.assign(eT,{Input:Th.Input,Label:Th.Label}),tT=y.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:s,...i},a)=>(e=Pe(e,"form-floating"),o.jsxs(hb,{ref:a,className:Ne(t,e),controlId:r,...i,children:[n,o.jsx("label",{htmlFor:r,children:s})]})));tT.displayName="FloatingLabel";const nF={_ref:kn.any,validated:kn.bool,as:kn.elementType},pb=y.forwardRef(({className:e,validated:t,as:n="form",...r},s)=>o.jsx(n,{...r,ref:s,className:Ne(e,t&&"was-validated")}));pb.displayName="Form";pb.propTypes=nF;const U=Object.assign(pb,{Group:hb,Control:eF,Floating:JC,Check:Th,Switch:tF,Label:YC,Text:ZC,Range:QC,Select:XC,FloatingLabel:tT}),Sp=y.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},s)=>(t=Pe(t,"input-group-text"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));Sp.displayName="InputGroupText";const rF=e=>o.jsx(Sp,{children:o.jsx(dd,{type:"checkbox",...e})}),sF=e=>o.jsx(Sp,{children:o.jsx(dd,{type:"radio",...e})}),nT=y.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:r,as:s="div",...i},a)=>{e=Pe(e,"input-group");const l=y.useMemo(()=>({}),[]);return o.jsx(wp.Provider,{value:l,children:o.jsx(s,{ref:a,...i,className:Ne(r,e,t&&`${e}-${t}`,n&&"has-validation")})})});nT.displayName="InputGroup";const kS=Object.assign(nT,{Text:Sp,Radio:sF,Checkbox:rF}),jS=e=>!e||typeof e=="function"?e:t=>{e.current=t};function iF(e,t){const n=jS(e),r=jS(t);return s=>{n&&n(s),r&&r(s)}}function fd(e,t){return y.useMemo(()=>iF(e,t),[e,t])}const lc=y.createContext(null),aF=["as","active","eventKey"];function oF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mb({key:e,onClick:t,active:n,id:r,role:s,disabled:i}){const a=y.useContext(pi),l=y.useContext(vp),c=y.useContext(lc);let u=n;const d={role:s};if(l){!s&&l.role==="tablist"&&(d.role="tab");const f=l.getControllerId(e??null),g=l.getControlledId(e??null);d[oc("event-key")]=e,d.id=f||r,u=n==null&&e!=null?l.activeKey===e:n,(u||!(c!=null&&c.unmountOnExit)&&!(c!=null&&c.mountOnEnter))&&(d["aria-controls"]=g)}return d.role==="tab"&&(d["aria-selected"]=u,u||(d.tabIndex=-1),i&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=cr(f=>{i||(t==null||t(f),e!=null&&a&&!f.isPropagationStopped()&&a(e,f))}),[d,{isActive:u}]}const rT=y.forwardRef((e,t)=>{let{as:n=tb,active:r,eventKey:s}=e,i=oF(e,aF);const[a,l]=mb(Object.assign({key:Ba(s,i.href),active:r},i));return a[oc("active")]=l.isActive,o.jsx(n,Object.assign({},i,a,{ref:t}))});rT.displayName="NavItem";const lF=["as","onSelect","activeKey","role","onKeyDown"];function cF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const ES=()=>{},NS=oc("event-key"),sT=y.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:s,role:i,onKeyDown:a}=e,l=cF(e,lF);const c=pC(),u=y.useRef(!1),d=y.useContext(pi),f=y.useContext(lc);let g,p;f&&(i=i||"tablist",s=f.activeKey,g=f.getControlledId,p=f.getControllerId);const m=y.useRef(null),w=x=>{const k=m.current;if(!k)return null;const E=ki(k,`[${NS}]:not([aria-disabled=true])`),$=k.querySelector("[aria-selected=true]");if(!$||$!==document.activeElement)return null;const P=E.indexOf($);if(P===-1)return null;let B=P+x;return B>=E.length&&(B=0),B<0&&(B=E.length-1),E[B]},b=(x,k)=>{x!=null&&(r==null||r(x,k),d==null||d(x,k))},h=x=>{if(a==null||a(x),!f)return;let k;switch(x.key){case"ArrowLeft":case"ArrowUp":k=w(-1);break;case"ArrowRight":case"ArrowDown":k=w(1);break;default:return}k&&(x.preventDefault(),b(k.dataset[GM("EventKey")]||null,x),u.current=!0,c())};y.useEffect(()=>{if(m.current&&u.current){const x=m.current.querySelector(`[${NS}][aria-selected=true]`);x==null||x.focus()}u.current=!1});const v=fd(t,m);return o.jsx(pi.Provider,{value:b,children:o.jsx(vp.Provider,{value:{role:i,activeKey:Ba(s),getControlledId:g||ES,getControllerId:p||ES},children:o.jsx(n,Object.assign({},l,{onKeyDown:h,ref:v,role:i}))})})});sT.displayName="Nav";const iT=Object.assign(sT,{Item:rT}),aT=y.forwardRef(({bsPrefix:e,active:t,disabled:n,eventKey:r,className:s,variant:i,action:a,as:l,...c},u)=>{e=Pe(e,"list-group-item");const[d,f]=mb({key:Ba(r,c.href),active:t,...c}),g=Js(m=>{if(n){m.preventDefault(),m.stopPropagation();return}d.onClick(m)});n&&c.tabIndex===void 0&&(c.tabIndex=-1,c["aria-disabled"]=!0);const p=l||(a?c.href?"a":"button":"div");return o.jsx(p,{ref:u,...c,...d,onClick:g,className:Ne(s,e,f.isActive&&"active",n&&"disabled",i&&`${e}-${i}`,a&&`${e}-action`)})});aT.displayName="ListGroupItem";const oT=y.forwardRef((e,t)=>{const{className:n,bsPrefix:r,variant:s,horizontal:i,numbered:a,as:l="div",...c}=rc(e,{activeKey:"onSelect"}),u=Pe(r,"list-group");let d;return i&&(d=i===!0?"horizontal":`horizontal-${i}`),o.jsx(iT,{ref:t,...c,as:l,className:Ne(n,u,s&&`${u}-${s}`,d&&`${u}-${d}`,a&&`${u}-numbered`)})});oT.displayName="ListGroup";const qt=Object.assign(oT,{Item:aT});var ef;function CS(e){if((!ef&&ef!==0||e)&&ic){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ef=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ef}function uF(){return y.useState(null)}function _m(e){e===void 0&&(e=sc());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function dF(e){const t=y.useRef(e);return t.current=e,t}function fF(e){const t=dF(e);y.useEffect(()=>()=>t.current(),[])}function hF(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const TS=oc("modal-open");class gb{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return hF(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[r]:s.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(Oi(s,r)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(TS,""),Oi(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(TS),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const km=(e,t)=>ic?e==null?(t||sc()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function cy(e,t){const n=bp(),[r,s]=y.useState(()=>km(e,n==null?void 0:n.document));if(!r){const i=km(e);i&&s(i)}return y.useEffect(()=>{},[t,r]),y.useEffect(()=>{const i=km(e);i!==r&&s(i)},[e,r]),r}function yb({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:s}){const i=y.useRef(null),a=y.useRef(t),l=cr(n);y.useEffect(()=>{t?a.current=!0:l(i.current)},[t,l]);const c=fd(i,Ro(e)),u=y.cloneElement(e,{ref:c});return t?u:s||!a.current&&r?null:u}const pF=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function mF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gF(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:s,onExiting:i,onExited:a,addEndListener:l,children:c}=e,u=mF(e,pF);const d=y.useRef(null),f=fd(d,Ro(c)),g=k=>E=>{k&&d.current&&k(d.current,E)},p=y.useCallback(g(t),[t]),m=y.useCallback(g(n),[n]),w=y.useCallback(g(r),[r]),b=y.useCallback(g(s),[s]),h=y.useCallback(g(i),[i]),v=y.useCallback(g(a),[a]),x=y.useCallback(g(l),[l]);return Object.assign({},u,{nodeRef:d},t&&{onEnter:p},n&&{onEntering:m},r&&{onEntered:w},s&&{onExit:b},i&&{onExiting:h},a&&{onExited:v},l&&{addEndListener:x},{children:typeof c=="function"?(k,E)=>c(k,Object.assign({},E,{ref:f})):y.cloneElement(c,{ref:f})})}const yF=["component"];function vF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const bF=y.forwardRef((e,t)=>{let{component:n}=e,r=vF(e,yF);const s=gF(r);return o.jsx(n,Object.assign({ref:t},s))});function wF({in:e,onTransition:t}){const n=y.useRef(null),r=y.useRef(!0),s=cr(t);return lS(()=>{if(!n.current)return;let i=!1;return s({in:e,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[e,s]),lS(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function xF({children:e,in:t,onExited:n,onEntered:r,transition:s}){const[i,a]=y.useState(!t);t&&i&&a(!1);const l=wF({in:!!t,onTransition:u=>{const d=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(a(!0),n==null||n(u.element)))};Promise.resolve(s(u)).then(d,f=>{throw u.in||a(!0),f})}}),c=fd(l,Ro(e));return i&&!t?null:y.cloneElement(e,{ref:c})}function uy(e,t,n){return e?o.jsx(bF,Object.assign({},n,{component:e})):t?o.jsx(xF,Object.assign({},n,{transition:t})):o.jsx(yb,Object.assign({},n))}const SF=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _F(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let jm;function kF(e){return jm||(jm=new gb({ownerDocument:e==null?void 0:e.document})),jm}function jF(e){const t=bp(),n=e||kF(t),r=y.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:y.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:y.useCallback(s=>{r.current.backdrop=s},[])})}const lT=y.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:s,style:i,children:a,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:d,transition:f,runTransition:g,backdropTransition:p,runBackdropTransition:m,autoFocus:w=!0,enforceFocus:b=!0,restoreFocus:h=!0,restoreFocusOptions:v,renderDialog:x,renderBackdrop:k=Re=>o.jsx("div",Object.assign({},Re)),manager:E,container:$,onShow:P,onHide:B=()=>{},onExit:W,onExited:Y,onExiting:ee,onEnter:Q,onEntering:X,onEntered:fe}=e,me=_F(e,SF);const ve=bp(),Oe=cy($),T=jF(E),M=QN(),I=XN(n),[N,L]=y.useState(!n),A=y.useRef(null);y.useImperativeHandle(t,()=>T,[T]),ic&&!I&&n&&(A.current=_m(ve==null?void 0:ve.document)),n&&N&&L(!1);const _=cr(()=>{if(T.add(),$e.current=Ti(document,"keydown",ue),j.current=Ti(document,"focus",()=>setTimeout(K),!0),P&&P(),w){var Re,J;const F=_m((Re=(J=T.dialog)==null?void 0:J.ownerDocument)!=null?Re:ve==null?void 0:ve.document);T.dialog&&F&&!zu(T.dialog,F)&&(A.current=F,T.dialog.focus())}}),R=cr(()=>{if(T.remove(),$e.current==null||$e.current(),j.current==null||j.current(),h){var Re;(Re=A.current)==null||Re.focus==null||Re.focus(v),A.current=null}});y.useEffect(()=>{!n||!Oe||_()},[n,Oe,_]),y.useEffect(()=>{N&&R()},[N,R]),fF(()=>{R()});const K=cr(()=>{if(!b||!M()||!T.isTopModal())return;const Re=_m(ve==null?void 0:ve.document);T.dialog&&Re&&!zu(T.dialog,Re)&&T.dialog.focus()}),pe=cr(Re=>{Re.target===Re.currentTarget&&(u==null||u(Re),l===!0&&B())}),ue=cr(Re=>{c&&UN(Re)&&T.isTopModal()&&(d==null||d(Re),Re.defaultPrevented||B())}),j=y.useRef(),$e=y.useRef(),De=(...Re)=>{L(!0),Y==null||Y(...Re)};if(!Oe)return null;const rt=Object.assign({role:r,ref:T.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},me,{style:i,className:s,tabIndex:-1});let st=x?x(rt):o.jsx("div",Object.assign({},rt,{children:y.cloneElement(a,{role:"document"})}));st=uy(f,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:W,onExiting:ee,onExited:De,onEnter:Q,onEntering:X,onEntered:fe,children:st});let ke=null;return l&&(ke=k({ref:T.setBackdropRef,onClick:pe}),ke=uy(p,m,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ke})),o.jsx(o.Fragment,{children:uo.createPortal(o.jsxs(o.Fragment,{children:[ke,st]}),Oe)})});lT.displayName="Modal";const cT=Object.assign(lT,{Manager:gb});function dy(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function EF(e,t){e.classList?e.classList.add(t):dy(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function $S(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function NF(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=$S(e.className,t):e.setAttribute("class",$S(e.className&&e.className.baseVal||"",t))}const Uo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class uT extends gb{adjustAndStore(t,n,r){const s=n.style[t];n.dataset[t]=s,Oi(n,{[t]:`${parseFloat(Oi(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],Oi(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(EF(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";ki(n,Uo.FIXED_CONTENT).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth)),ki(n,Uo.STICKY_CONTENT).forEach(i=>this.adjustAndStore(s,i,-t.scrollBarWidth)),ki(n,Uo.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(s,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();NF(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";ki(n,Uo.FIXED_CONTENT).forEach(i=>this.restore(r,i)),ki(n,Uo.STICKY_CONTENT).forEach(i=>this.restore(s,i)),ki(n,Uo.NAVBAR_TOGGLER).forEach(i=>this.restore(s,i))}}let Em;function dT(e){return Em||(Em=new uT(e)),Em}const fT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"modal-body"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));fT.displayName="ModalBody";const vb=y.createContext({onHide(){}}),bb=y.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:s,fullscreen:i,children:a,scrollable:l,...c},u)=>{e=Pe(e,"modal");const d=`${e}-dialog`,f=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return o.jsx("div",{...c,ref:u,className:Ne(d,t,s&&`${e}-${s}`,r&&`${d}-centered`,l&&`${d}-scrollable`,i&&f),children:o.jsx("div",{className:Ne(`${e}-content`,n),children:a})})});bb.displayName="ModalDialog";const hT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"modal-footer"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));hT.displayName="ModalFooter";const wb=y.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:s,...i},a)=>{const l=y.useContext(vb),c=Js(()=>{l==null||l.onHide(),r==null||r()});return o.jsxs("div",{ref:a,...i,children:[s,n&&o.jsx(od,{"aria-label":e,variant:t,onClick:c})]})});wb.displayName="AbstractModalHeader";const pT=y.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...s},i)=>(e=Pe(e,"modal-header"),o.jsx(wb,{ref:i,...s,className:Ne(t,e),closeLabel:n,closeButton:r})));pT.displayName="ModalHeader";const CF=id("h4"),mT=y.forwardRef(({className:e,bsPrefix:t,as:n=CF,...r},s)=>(t=Pe(t,"modal-title"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));mT.displayName="ModalTitle";function TF(e){return o.jsx(Ys,{...e,timeout:null})}function $F(e){return o.jsx(Ys,{...e,timeout:null})}const gT=y.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:s,children:i,dialogAs:a=bb,"data-bs-theme":l,"aria-labelledby":c,"aria-describedby":u,"aria-label":d,show:f=!1,animation:g=!0,backdrop:p=!0,keyboard:m=!0,onEscapeKeyDown:w,onShow:b,onHide:h,container:v,autoFocus:x=!0,enforceFocus:k=!0,restoreFocus:E=!0,restoreFocusOptions:$,onEntered:P,onExit:B,onExiting:W,onEnter:Y,onEntering:ee,onExited:Q,backdropClassName:X,manager:fe,...me},ve)=>{const[Oe,T]=y.useState({}),[M,I]=y.useState(!1),N=y.useRef(!1),L=y.useRef(!1),A=y.useRef(null),[_,R]=uF(),K=ac(ve,R),pe=Js(h),ue=hp();e=Pe(e,"modal");const j=y.useMemo(()=>({onHide:pe}),[pe]);function $e(){return fe||dT({isRTL:ue})}function De(q){if(!ic)return;const ge=$e().getScrollbarWidth()>0,Te=q.scrollHeight>sc(q).documentElement.clientHeight;T({paddingRight:ge&&!Te?CS():void 0,paddingLeft:!ge&&Te?CS():void 0})}const rt=Js(()=>{_&&De(_.dialog)});uC(()=>{sy(window,"resize",rt),A.current==null||A.current()});const st=()=>{N.current=!0},ke=q=>{N.current&&_&&q.target===_.dialog&&(L.current=!0),N.current=!1},Re=()=>{I(!0),A.current=zN(_.dialog,()=>{I(!1)})},J=q=>{q.target===q.currentTarget&&Re()},F=q=>{if(p==="static"){J(q);return}if(L.current||q.target!==q.currentTarget){L.current=!1;return}h==null||h()},re=q=>{m?w==null||w(q):(q.preventDefault(),p==="static"&&Re())},be=(q,ge)=>{q&&De(q),Y==null||Y(q,ge)},Le=q=>{A.current==null||A.current(),B==null||B(q)},O=(q,ge)=>{ee==null||ee(q,ge),Jv(window,"resize",rt)},z=q=>{q&&(q.style.display=""),Q==null||Q(q),sy(window,"resize",rt)},G=y.useCallback(q=>o.jsx("div",{...q,className:Ne(`${e}-backdrop`,X,!g&&"show")}),[g,X,e]),se={...n,...Oe};se.display="block";const ne=q=>o.jsx("div",{role:"dialog",...q,style:se,className:Ne(t,e,M&&`${e}-static`,!g&&"show"),onClick:p?F:void 0,onMouseUp:ke,"data-bs-theme":l,"aria-label":d,"aria-labelledby":c,"aria-describedby":u,children:o.jsx(a,{...me,onMouseDown:st,className:r,contentClassName:s,children:i})});return o.jsx(vb.Provider,{value:j,children:o.jsx(cT,{show:f,ref:K,backdrop:p,container:v,keyboard:!0,autoFocus:x,enforceFocus:k,restoreFocus:E,restoreFocusOptions:$,onEscapeKeyDown:re,onShow:b,onHide:h,onEnter:be,onEntering:O,onEntered:P,onExit:Le,onExiting:W,onExited:z,manager:$e(),transition:g?TF:void 0,backdropTransition:g?$F:void 0,renderBackdrop:G,renderDialog:ne})})});gT.displayName="Modal";const or=Object.assign(gT,{Body:fT,Header:pT,Title:mT,Footer:hT,Dialog:bb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),yT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"nav-item"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));yT.displayName="NavItem";const vT=y.forwardRef(({bsPrefix:e,className:t,as:n=ad,active:r,eventKey:s,disabled:i=!1,...a},l)=>{e=Pe(e,"nav-link");const[c,u]=mb({key:Ba(s,a.href),active:r,disabled:i,...a});return o.jsx(n,{...a,...c,ref:l,disabled:i,className:Ne(t,e,i&&"disabled",u.isActive&&"active")})});vT.displayName="NavLink";const bT=y.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:s,fill:i=!1,justify:a=!1,navbar:l,navbarScroll:c,className:u,activeKey:d,...f}=rc(e,{activeKey:"onSelect"}),g=Pe(r,"nav");let p,m,w=!1;const b=y.useContext(Ao),h=y.useContext(rb);return b?(p=b.bsPrefix,w=l??!0):h&&({cardHeaderBsPrefix:m}=h),o.jsx(iT,{as:n,ref:t,activeKey:d,className:Ne(u,{[g]:!w,[`${p}-nav`]:w,[`${p}-nav-scroll`]:w&&c,[`${m}-${s}`]:!!m,[`${g}-${s}`]:!!s,[`${g}-fill`]:i,[`${g}-justified`]:a}),...f})});bT.displayName="Nav";const ai=Object.assign(bT,{Item:yT,Link:vT}),wT=y.forwardRef(({bsPrefix:e,className:t,as:n,...r},s)=>{e=Pe(e,"navbar-brand");const i=n||(r.href?"a":"span");return o.jsx(i,{...r,ref:s,className:Ne(t,e)})});wT.displayName="NavbarBrand";const xT=y.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=Pe(t,"navbar-collapse");const s=y.useContext(Ao);return o.jsx(Qv,{in:!!(s&&s.expanded),...n,children:o.jsx("div",{ref:r,className:t,children:e})})});xT.displayName="NavbarCollapse";const ST=y.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:s="button",onClick:i,...a},l)=>{e=Pe(e,"navbar-toggler");const{onToggle:c,expanded:u}=y.useContext(Ao)||{},d=Js(f=>{i&&i(f),c&&c()});return s==="button"&&(a.type="button"),o.jsx(s,{...a,ref:l,onClick:d,"aria-label":r,className:Ne(t,e,!u&&"collapsed"),children:n||o.jsx("span",{className:`${e}-icon`})})});ST.displayName="NavbarToggle";const fy=new WeakMap,OS=(e,t)=>{if(!e||!t)return;const n=fy.get(t)||new Map;fy.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function OF(e,t=typeof window>"u"?void 0:window){const n=OS(e,t),[r,s]=y.useState(()=>n?n.matches:!1);return fb(()=>{let i=OS(e,t);if(!i)return s(!1);let a=fy.get(t);const l=()=>{s(i.matches)};return i.refCount++,i.addListener(l),l(),()=>{i.removeListener(l),i.refCount--,i.refCount<=0&&(a==null||a.delete(i.media)),i=void 0}},[e]),r}function RF(e){const t=Object.keys(e);function n(l,c){return l===c?c:l?`${l} and ${c}`:c}function r(l){return t[Math.min(t.indexOf(l)+1,t.length-1)]}function s(l){const c=r(l);let u=e[c];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function i(l){let c=e[l];return typeof c=="number"&&(c=`${c}px`),`(min-width: ${c})`}function a(l,c,u){let d;typeof l=="object"?(d=l,u=c,c=!0):(c=c||!0,d={[l]:c});let f=y.useMemo(()=>Object.entries(d).reduce((g,[p,m])=>((m==="up"||m===!0)&&(g=n(g,i(p))),(m==="down"||m===!0)&&(g=n(g,s(p))),g),""),[JSON.stringify(d)]);return OF(f,u)}return a}const AF=RF({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),_T=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"offcanvas-body"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));_T.displayName="OffcanvasBody";const PF={[ws]:"show",[Ei]:"show"},kT=y.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:s=!1,unmountOnExit:i=!1,appear:a=!1,...l},c)=>(e=Pe(e,"offcanvas"),o.jsx(pp,{ref:c,addEndListener:Yv,in:r,mountOnEnter:s,unmountOnExit:i,appear:a,...l,childRef:Ro(n),children:(u,d)=>y.cloneElement(n,{...d,className:Ne(t,n.props.className,(u===ws||u===Ul)&&`${e}-toggling`,PF[u])})})));kT.displayName="OffcanvasToggling";const jT=y.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...s},i)=>(e=Pe(e,"offcanvas-header"),o.jsx(wb,{ref:i,...s,className:Ne(t,e),closeLabel:n,closeButton:r})));jT.displayName="OffcanvasHeader";const IF=id("h5"),ET=y.forwardRef(({className:e,bsPrefix:t,as:n=IF,...r},s)=>(t=Pe(t,"offcanvas-title"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));ET.displayName="OffcanvasTitle";function LF(e){return o.jsx(kT,{...e})}function MF(e){return o.jsx(Ys,{...e})}const NT=y.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:s="start",responsive:i,show:a=!1,backdrop:l=!0,keyboard:c=!0,scroll:u=!1,onEscapeKeyDown:d,onShow:f,onHide:g,container:p,autoFocus:m=!0,enforceFocus:w=!0,restoreFocus:b=!0,restoreFocusOptions:h,onEntered:v,onExit:x,onExiting:k,onEnter:E,onEntering:$,onExited:P,backdropClassName:B,manager:W,renderStaticNode:Y=!1,...ee},Q)=>{const X=y.useRef();e=Pe(e,"offcanvas");const[fe,me]=y.useState(!1),ve=Js(g),Oe=AF(i||"xs","up");y.useEffect(()=>{me(i?a&&!Oe:a)},[a,i,Oe]);const T=y.useMemo(()=>({onHide:ve}),[ve]);function M(){return W||(u?(X.current||(X.current=new uT({handleContainerOverflow:!1})),X.current):dT())}const I=(_,...R)=>{_&&(_.style.visibility="visible"),E==null||E(_,...R)},N=(_,...R)=>{_&&(_.style.visibility=""),P==null||P(...R)},L=y.useCallback(_=>o.jsx("div",{..._,className:Ne(`${e}-backdrop`,B)}),[B,e]),A=_=>o.jsx("div",{..._,...ee,className:Ne(t,i?`${e}-${i}`:e,`${e}-${s}`),"aria-labelledby":r,children:n});return o.jsxs(o.Fragment,{children:[!fe&&(i||Y)&&A({}),o.jsx(vb.Provider,{value:T,children:o.jsx(cT,{show:fe,ref:Q,backdrop:l,container:p,keyboard:c,autoFocus:m,enforceFocus:w&&!u,restoreFocus:b,restoreFocusOptions:h,onEscapeKeyDown:d,onShow:f,onHide:ve,onEnter:I,onEntering:$,onEntered:v,onExit:x,onExiting:k,onExited:N,manager:M(),transition:LF,backdropTransition:MF,renderBackdrop:L,renderDialog:A})})]})});NT.displayName="Offcanvas";const Bf=Object.assign(NT,{Body:_T,Header:jT,Title:ET}),CT=y.forwardRef(({onHide:e,...t},n)=>{const r=y.useContext(Ao),s=Js(()=>{r==null||r.onToggle==null||r.onToggle(),e==null||e()});return o.jsx(Bf,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:s})});CT.displayName="NavbarOffcanvas";const TT=y.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},s)=>(t=Pe(t,"navbar-text"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));TT.displayName="NavbarText";const $T=y.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:s="light",bg:i,fixed:a,sticky:l,className:c,as:u="nav",expanded:d,onToggle:f,onSelect:g,collapseOnSelect:p=!1,...m}=rc(e,{expanded:"onToggle"}),w=Pe(n,"navbar"),b=y.useCallback((...x)=>{g==null||g(...x),p&&d&&(f==null||f(!1))},[g,p,d,f]);m.role===void 0&&u!=="nav"&&(m.role="navigation");let h=`${w}-expand`;typeof r=="string"&&(h=`${h}-${r}`);const v=y.useMemo(()=>({onToggle:()=>f==null?void 0:f(!d),bsPrefix:w,expanded:!!d,expand:r}),[w,d,r,f]);return o.jsx(Ao.Provider,{value:v,children:o.jsx(pi.Provider,{value:b,children:o.jsx(u,{ref:t,...m,className:Ne(c,w,r&&h,s&&`${w}-${s}`,i&&`bg-${i}`,l&&`sticky-${l}`,a&&`fixed-${a}`)})})})});$T.displayName="Navbar";const tf=Object.assign($T,{Brand:wT,Collapse:xT,Offcanvas:CT,Text:TT,Toggle:ST}),FF=()=>{};function DF(e,t,{disabled:n,clickTrigger:r}={}){const s=t||FF;jC(e,s,{disabled:n,clickTrigger:r});const i=cr(a=>{UN(a)&&s(a)});y.useEffect(()=>{if(n||e==null)return;const a=sc(Df(e));let l=(a.defaultView||window).event;const c=Ti(a,"keyup",u=>{if(u===l){l=void 0;return}i(u)});return()=>{c()}},[e,n,i])}const OT=y.forwardRef((e,t)=>{const{flip:n,offset:r,placement:s,containerPadding:i,popperConfig:a={},transition:l,runTransition:c}=e,[u,d]=iy(),[f,g]=iy(),p=fd(d,t),m=cy(e.container),w=cy(e.target),[b,h]=y.useState(!e.show),v=kC(w,u,EC({placement:s,enableEvents:!!e.show,containerPadding:i||5,flip:n,offset:r,arrowElement:f,popperConfig:a}));e.show&&b&&h(!1);const x=(...ee)=>{h(!0),e.onExited&&e.onExited(...ee)},k=e.show||!b;if(DF(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:E,onExiting:$,onEnter:P,onEntering:B,onEntered:W}=e;let Y=e.children(Object.assign({},v.attributes.popper,{style:v.styles.popper,ref:p}),{popper:v,placement:s,show:!!e.show,arrowProps:Object.assign({},v.attributes.arrow,{style:v.styles.arrow,ref:g})});return Y=uy(l,c,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Y,onExit:E,onExiting:$,onExited:x,onEnter:P,onEntering:B,onEntered:W}),m?uo.createPortal(Y,m):null});OT.displayName="Overlay";const RT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"popover-header"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));RT.displayName="PopoverHeader";const xb=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"popover-body"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));xb.displayName="PopoverBody";function AT(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function PT(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const IT=y.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:s,body:i,arrowProps:a,hasDoneInitialMeasure:l,popper:c,show:u,...d},f)=>{const g=Pe(e,"popover"),p=hp(),[m]=(t==null?void 0:t.split("-"))||[],w=AT(m,p);let b=r;return u&&!l&&(b={...r,...PT(c==null?void 0:c.strategy)}),o.jsxs("div",{ref:f,role:"tooltip",style:b,"x-placement":m,className:Ne(n,g,m&&`bs-popover-${w}`),...d,children:[o.jsx("div",{className:"popover-arrow",...a}),i?o.jsx(xb,{children:s}):s]})});IT.displayName="Popover";const BF=Object.assign(IT,{Header:RT,Body:xb,POPPER_OFFSET:[0,8]}),LT=y.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:s,arrowProps:i,hasDoneInitialMeasure:a,popper:l,show:c,...u},d)=>{e=Pe(e,"tooltip");const f=hp(),[g]=(t==null?void 0:t.split("-"))||[],p=AT(g,f);let m=r;return c&&!a&&(m={...r,...PT(l==null?void 0:l.strategy)}),o.jsxs("div",{ref:d,style:m,role:"tooltip","x-placement":g,className:Ne(n,e,`bs-tooltip-${p}`),...u,children:[o.jsx("div",{className:"tooltip-arrow",...i}),o.jsx("div",{className:`${e}-inner`,children:s})]})});LT.displayName="Tooltip";const zc=Object.assign(LT,{TOOLTIP_OFFSET:[0,6]});function UF(e){const t=y.useRef(null),n=Pe(void 0,"popover"),r=Pe(void 0,"tooltip"),s=y.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(dy(t.current,n))return BF.POPPER_OFFSET;if(dy(t.current,r))return zc.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,r]);return[t,[s]]}function zF(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=s=>n(jh(s))),t.ref=r.__wrapped||(r.__wrapped=s=>r(jh(s)))}const MT=y.forwardRef(({children:e,transition:t=Ys,popperConfig:n={},rootClose:r=!1,placement:s="top",show:i=!1,...a},l)=>{const c=y.useRef({}),[u,d]=y.useState(null),[f,g]=UF(a.offset),p=ac(l,f),m=t===!0?Ys:t||void 0,w=Js(b=>{d(b),n==null||n.onFirstUpdate==null||n.onFirstUpdate(b)});return fb(()=>{u&&a.target&&(c.current.scheduleUpdate==null||c.current.scheduleUpdate())},[u,a.target]),y.useEffect(()=>{i||d(null)},[i]),o.jsx(OT,{...a,ref:p,popperConfig:{...n,modifiers:g.concat(n.modifiers||[]),onFirstUpdate:w},transition:m,rootClose:r,placement:s,show:i,children:(b,{arrowProps:h,popper:v,show:x})=>{var k;zF(b,h);const E=v==null?void 0:v.placement,$=Object.assign(c.current,{state:v==null?void 0:v.state,scheduleUpdate:v==null?void 0:v.update,placement:E,outOfBoundaries:(v==null||(k=v.state)==null||(k=k.modifiersData.hide)==null?void 0:k.isReferenceHidden)||!1,strategy:n.strategy}),P=!!u;return typeof e=="function"?e({...b,placement:E,show:x,...!t&&x&&{className:"show"},popper:$,arrowProps:h,hasDoneInitialMeasure:P}):y.cloneElement(e,{...b,placement:E,arrowProps:h,popper:$,hasDoneInitialMeasure:P,className:Ne(e.props.className,!t&&x&&"show"),style:{...e.props.style,...b.style}})}})});MT.displayName="Overlay";function VF(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function RS(e,t,n){const[r]=t,s=r.currentTarget,i=r.relatedTarget||r.nativeEvent[n];(!i||i!==s)&&!zu(s,i)&&e(...t)}kn.oneOf(["click","hover","focus"]);const nf=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:r={},show:s,defaultShow:i=!1,onToggle:a,delay:l,placement:c,flip:u=c&&c.indexOf("auto")!==-1,...d})=>{const f=y.useRef(null),g=ac(f,Ro(n)),p=fC(),m=y.useRef(""),[w,b]=PN(s,i,a),h=VF(l),{onFocus:v,onBlur:x,onClick:k}=typeof n!="function"?y.Children.only(n).props:{},E=me=>{g(jh(me))},$=y.useCallback(()=>{if(p.clear(),m.current="show",!h.show){b(!0);return}p.set(()=>{m.current==="show"&&b(!0)},h.show)},[h.show,b,p]),P=y.useCallback(()=>{if(p.clear(),m.current="hide",!h.hide){b(!1);return}p.set(()=>{m.current==="hide"&&b(!1)},h.hide)},[h.hide,b,p]),B=y.useCallback((...me)=>{$(),v==null||v(...me)},[$,v]),W=y.useCallback((...me)=>{P(),x==null||x(...me)},[P,x]),Y=y.useCallback((...me)=>{b(!w),k==null||k(...me)},[k,b,w]),ee=y.useCallback((...me)=>{RS($,me,"fromElement")},[$]),Q=y.useCallback((...me)=>{RS(P,me,"toElement")},[P]),X=e==null?[]:[].concat(e),fe={ref:E};return X.indexOf("click")!==-1&&(fe.onClick=Y),X.indexOf("focus")!==-1&&(fe.onFocus=B,fe.onBlur=W),X.indexOf("hover")!==-1&&(fe.onMouseOver=ee,fe.onMouseOut=Q),o.jsxs(o.Fragment,{children:[typeof n=="function"?n(fe):y.cloneElement(n,fe),o.jsx(MT,{...d,show:w,onHide:P,flip:u,placement:c,popperConfig:r,target:f.current,children:t})]})},Sb=y.forwardRef(({active:e=!1,disabled:t=!1,className:n,style:r,activeLabel:s="(current)",children:i,linkStyle:a,linkClassName:l,as:c=ad,...u},d)=>{const f=e||t?"span":c;return o.jsx("li",{ref:d,style:r,className:Ne(n,"page-item",{active:e,disabled:t}),children:o.jsxs(f,{className:Ne("page-link",l),style:a,...u,children:[i,e&&s&&o.jsx("span",{className:"visually-hidden",children:s})]})})});Sb.displayName="PageItem";function hd(e,t,n=e){const r=y.forwardRef(({children:s,...i},a)=>o.jsxs(Sb,{...i,ref:a,children:[o.jsx("span",{"aria-hidden":"true",children:s||t}),o.jsx("span",{className:"visually-hidden",children:n})]}));return r.displayName=e,r}const HF=hd("First",""),qF=hd("Prev","","Previous"),KF=hd("Ellipsis","","More"),WF=hd("Next",""),GF=hd("Last",""),FT=y.forwardRef(({bsPrefix:e,className:t,size:n,...r},s)=>{const i=Pe(e,"pagination");return o.jsx("ul",{ref:s,...r,className:Ne(t,i,n&&`${i}-${n}`)})});FT.displayName="Pagination";const tn=Object.assign(FT,{First:HF,Prev:qF,Ellipsis:KF,Item:Sb,Next:WF,Last:GF}),Ct=y.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},s)=>{const i=Pe(e,"row"),a=IN(),l=LN(),c=`${i}-cols`,u=[];return a.forEach(d=>{const f=r[d];delete r[d];let g;f!=null&&typeof f=="object"?{cols:g}=f:g=f;const p=d!==l?`-${d}`:"";g!=null&&u.push(`${c}${p}-${g}`)}),o.jsx(n,{ref:s,...r,className:Ne(t,i,...u)})});Ct.displayName="Row";const Ri=y.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:r,as:s="div",className:i,...a},l)=>{e=Pe(e,"spinner");const c=`${e}-${n}`;return o.jsx(s,{ref:l,...a,className:Ne(i,c,r&&`${c}-${r}`,t&&`text-${t}`)})});Ri.displayName="Spinner";const JF=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],YF=["activeKey","getControlledId","getControllerId"],QF=["as"];function hy(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function DT(e){let{active:t,eventKey:n,mountOnEnter:r,transition:s,unmountOnExit:i,role:a="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:f,onExited:g}=e,p=hy(e,JF);const m=y.useContext(lc);if(!m)return[Object.assign({},p,{role:a}),{eventKey:n,isActive:t,mountOnEnter:r,transition:s,unmountOnExit:i,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:f,onExited:g}];const{activeKey:w,getControlledId:b,getControllerId:h}=m,v=hy(m,YF),x=Ba(n);return[Object.assign({},p,{role:a,id:b(n),"aria-labelledby":h(n)}),{eventKey:n,isActive:t==null&&x!=null?Ba(w)===x:t,transition:s||v.transition,mountOnEnter:r??v.mountOnEnter,unmountOnExit:i??v.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:f,onExited:g}]}const BT=y.forwardRef((e,t)=>{let{as:n="div"}=e,r=hy(e,QF);const[s,{isActive:i,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:f,mountOnEnter:g,unmountOnExit:p,transition:m=yb}]=DT(r);return o.jsx(lc.Provider,{value:null,children:o.jsx(pi.Provider,{value:null,children:o.jsx(m,{in:i,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:f,mountOnEnter:g,unmountOnExit:p,children:o.jsx(n,Object.assign({},s,{ref:t,hidden:!i,"aria-hidden":!i}))})})})});BT.displayName="TabPanel";const UT=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:s,defaultActiveKey:i,transition:a,mountOnEnter:l,unmountOnExit:c,children:u}=e,[d,f]=hC(s,i,r),g=OC(t),p=y.useMemo(()=>n||((w,b)=>g?`${g}-${b}-${w}`:null),[g,n]),m=y.useMemo(()=>({onSelect:f,activeKey:d,transition:a,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:w=>p(w,"tabpane"),getControllerId:w=>p(w,"tab")}),[f,d,a,l,c,p]);return o.jsx(lc.Provider,{value:m,children:o.jsx(pi.Provider,{value:f||null,children:u})})};UT.Panel=BT;function zT(e){return typeof e=="boolean"?e?Ys:yb:e}const VT=({transition:e,...t})=>o.jsx(UT,{...t,transition:zT(e)});VT.displayName="TabContainer";const HT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"tab-content"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));HT.displayName="TabContent";const qT=y.forwardRef(({bsPrefix:e,transition:t,...n},r)=>{const[{className:s,as:i="div",...a},{isActive:l,onEnter:c,onEntering:u,onEntered:d,onExit:f,onExiting:g,onExited:p,mountOnEnter:m,unmountOnExit:w,transition:b=Ys}]=DT({...n,transition:zT(t)}),h=Pe(e,"tab-pane");return o.jsx(lc.Provider,{value:null,children:o.jsx(pi.Provider,{value:null,children:o.jsx(b,{in:l,onEnter:c,onEntering:u,onEntered:d,onExit:f,onExiting:g,onExited:p,mountOnEnter:m,unmountOnExit:w,children:o.jsx(i,{...a,ref:r,className:Ne(s,h,l&&"active")})})})})});qT.displayName="TabPane";const XF={eventKey:kn.oneOfType([kn.string,kn.number]),title:kn.node.isRequired,disabled:kn.bool,tabClassName:kn.string,tabAttrs:kn.object},KT=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};KT.propTypes=XF;const rf=Object.assign(KT,{Container:VT,Content:HT,Pane:qT}),ou=y.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:r,borderless:s,hover:i,size:a,variant:l,responsive:c,...u},d)=>{const f=Pe(e,"table"),g=Ne(t,f,l&&`${f}-${l}`,a&&`${f}-${a}`,n&&`${f}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${f}-bordered`,s&&`${f}-borderless`,i&&`${f}-hover`),p=o.jsx("table",{...u,className:g,ref:d});if(c){let m=`${f}-responsive`;return typeof c=="string"&&(m=`${m}-${c}`),o.jsx("div",{className:m,children:p})}return p});ou.displayName="Table";const ZF={[ws]:"showing",[Ul]:"showing show"},WT=y.forwardRef((e,t)=>o.jsx(Ys,{...e,ref:t,transitionClasses:ZF}));WT.displayName="ToastFade";const GT=y.createContext({onClose(){}}),JT=y.forwardRef(({bsPrefix:e,closeLabel:t="Close",closeVariant:n,closeButton:r=!0,className:s,children:i,...a},l)=>{e=Pe(e,"toast-header");const c=y.useContext(GT),u=Js(d=>{c==null||c.onClose==null||c.onClose(d)});return o.jsxs("div",{ref:l,...a,className:Ne(e,s),children:[i,r&&o.jsx(od,{"aria-label":t,variant:n,onClick:u,"data-dismiss":"toast"})]})});JT.displayName="ToastHeader";const YT=y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Pe(t,"toast-body"),o.jsx(n,{ref:s,className:Ne(e,t),...r})));YT.displayName="ToastBody";const QT=y.forwardRef(({bsPrefix:e,className:t,transition:n=WT,show:r=!0,animation:s=!0,delay:i=5e3,autohide:a=!1,onClose:l,onEntered:c,onExit:u,onExiting:d,onEnter:f,onEntering:g,onExited:p,bg:m,...w},b)=>{e=Pe(e,"toast");const h=y.useRef(i),v=y.useRef(l);y.useEffect(()=>{h.current=i,v.current=l},[i,l]);const x=fC(),k=!!(a&&r),E=y.useCallback(()=>{k&&(v.current==null||v.current())},[k]);y.useEffect(()=>{x.set(E,h.current)},[x,E]);const $=y.useMemo(()=>({onClose:l}),[l]),P=!!(n&&s),B=o.jsx("div",{...w,ref:b,className:Ne(e,t,m&&`bg-${m}`,!P&&(r?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return o.jsx(GT.Provider,{value:$,children:P&&n?o.jsx(n,{in:r,onEnter:f,onEntering:g,onEntered:c,onExit:u,onExiting:d,onExited:p,unmountOnExit:!0,children:B}):B})});QT.displayName="Toast";const _s=Object.assign(QT,{Body:YT,Header:JT}),eD={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},_p=y.forwardRef(({bsPrefix:e,position:t,containerPosition:n,className:r,as:s="div",...i},a)=>(e=Pe(e,"toast-container"),o.jsx(s,{ref:a,...i,className:Ne(e,t&&eD[t],n&&`position-${n}`,r)})));_p.displayName="ToastContainer";var pd=e=>e.type==="checkbox",fo=e=>e instanceof Date,Ir=e=>e==null;const XT=e=>typeof e=="object";var Mn=e=>!Ir(e)&&!Array.isArray(e)&&XT(e)&&!fo(e),tD=e=>Mn(e)&&e.target?pd(e.target)?e.target.checked:e.target.value:e,nD=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rD=(e,t)=>e.has(nD(t)),sD=e=>{const t=e.constructor&&e.constructor.prototype;return Mn(t)&&t.hasOwnProperty("isPrototypeOf")},_b=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kn(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(_b&&(e instanceof Blob||t))return e;const n=Array.isArray(e);if(!n&&!(Mn(e)&&sD(e)))return e;const r=n?[]:Object.create(Object.getPrototypeOf(e));for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Kn(e[s]));return r}var kp=e=>/^\w*$/.test(e),pn=e=>e===void 0,kb=e=>Array.isArray(e)?e.filter(Boolean):[],jb=e=>kb(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Xe=(e,t,n)=>{if(!t||!Mn(e))return n;const r=(kp(t)?[t]:jb(t)).reduce((s,i)=>Ir(s)?s:s[i],e);return pn(r)||r===e?pn(e[t])?n:e[t]:r},ri=e=>typeof e=="boolean",zs=e=>typeof e=="function",sn=(e,t,n)=>{let r=-1;const s=kp(t)?[t]:jb(t),i=s.length,a=i-1;for(;++r<i;){const l=s[r];let c=n;if(r!==a){const u=e[l];c=Mn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const AS={BLUR:"blur",FOCUS_OUT:"focusout"},Vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iD=At.createContext(null);iD.displayName="HookFormControlContext";var aD=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const a=i;return t._proxyFormState[a]!==Vs.all&&(t._proxyFormState[a]=!r||Vs.all),e[a]}});return s};const oD=typeof window<"u"?At.useLayoutEffect:At.useEffect;var ts=e=>typeof e=="string",lD=(e,t,n,r,s)=>ts(e)?(r&&t.watch.add(e),Xe(n,e,s)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),Xe(n,i))):(r&&(t.watchAll=!0),n),py=e=>Ir(e)||!XT(e);function ga(e,t,n=new WeakSet){if(py(e)||py(t))return Object.is(e,t);if(fo(e)&&fo(t))return Object.is(e.getTime(),t.getTime());const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const l=t[i];if(fo(a)&&fo(l)||Mn(a)&&Mn(l)||Array.isArray(a)&&Array.isArray(l)?!ga(a,l,n):!Object.is(a,l))return!1}}return!0}const cD=At.createContext(null);cD.displayName="HookFormContext";var uD=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},lu=e=>Array.isArray(e)?e:[e],PS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function ZT(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],i=t[r];if(s&&Mn(s)&&i){const a=ZT(s,i);Mn(a)&&(n[r]=a)}else e[r]&&(n[r]=i)}return n}var jr=e=>Mn(e)&&!Object.keys(e).length,Eb=e=>e.type==="file",$h=e=>{if(!_b)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},e$=e=>e.type==="select-multiple",Nb=e=>e.type==="radio",dD=e=>Nb(e)||pd(e),Nm=e=>$h(e)&&e.isConnected;function fD(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=pn(e)?r++:e[t[r++]];return e}function hD(e){for(const t in e)if(e.hasOwnProperty(t)&&!pn(e[t]))return!1;return!0}function Pn(e,t){const n=Array.isArray(t)?t:kp(t)?[t]:jb(t),r=n.length===1?e:fD(e,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Mn(r)&&jr(r)||Array.isArray(r)&&hD(r))&&Pn(e,n.slice(0,-1)),e}var pD=e=>{for(const t in e)if(zs(e[t]))return!0;return!1};function t$(e){return Array.isArray(e)||Mn(e)&&!pD(e)}function my(e,t={}){for(const n in e){const r=e[n];t$(r)?(t[n]=Array.isArray(r)?[]:{},my(r,t[n])):pn(r)||(t[n]=!0)}return t}function el(e,t,n){n||(n=my(t));for(const r in e){const s=e[r];if(t$(s))pn(t)||py(n[r])?n[r]=my(s,Array.isArray(s)?[]:{}):el(s,Ir(t)?{}:t[r],n[r]);else{const i=t[r];n[r]=!ga(s,i)}}return n}const IS={value:!1,isValid:!1},LS={value:!0,isValid:!0};var n$=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!pn(e[0].attributes.value)?pn(e[0].value)||e[0].value===""?LS:{value:e[0].value,isValid:!0}:LS:IS}return IS},r$=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>pn(e)?e:t?e===""?NaN:e&&+e:n&&ts(e)?new Date(e):r?r(e):e;const MS={isValid:!1,value:null};var s$=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,MS):MS;function FS(e){const t=e.ref;return Eb(t)?t.files:Nb(t)?s$(e.refs).value:e$(t)?[...t.selectedOptions].map(({value:n})=>n):pd(t)?n$(e.refs).value:r$(pn(t.value)?e.ref.value:t.value,e)}var mD=(e,t,n,r)=>{const s={};for(const i of e){const a=Xe(t,i);a&&sn(s,i,a._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Oh=e=>e instanceof RegExp,Nc=e=>pn(e)?e:Oh(e)?e.source:Mn(e)?Oh(e.value)?e.value.source:e.value:e,DS=e=>({isOnSubmit:!e||e===Vs.onSubmit,isOnBlur:e===Vs.onBlur,isOnChange:e===Vs.onChange,isOnAll:e===Vs.all,isOnTouch:e===Vs.onTouched});const BS="AsyncFunction";var gD=e=>!!e&&!!e.validate&&!!(zs(e.validate)&&e.validate.constructor.name===BS||Mn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===BS)),yD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),US=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const cu=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const i=Xe(e,s);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],s)&&!r)return!0;if(a.ref&&t(a.ref,a.name)&&!r)return!0;if(cu(l,t))break}else if(Mn(l)&&cu(l,t))break}}};function zS(e,t,n){const r=Xe(e,n);if(r||kp(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=Xe(t,i),l=Xe(e,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:n}}var vD=(e,t,n,r)=>{n(e);const{name:s,...i}=e;return jr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(a=>t[a]===(!r||Vs.all))},bD=(e,t,n)=>!e||!t||e===t||lu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),wD=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,xD=(e,t)=>!kb(Xe(e,t)).length&&Pn(e,t),SD=(e,t,n)=>{const r=lu(Xe(e,n));return sn(r,"root",t[n]),sn(e,n,r),e};function VS(e,t,n="validate"){if(ts(e)||Array.isArray(e)&&e.every(ts)||ri(e)&&!e)return{type:n,message:ts(e)?e:"",ref:t}}var zo=e=>Mn(e)&&!Oh(e)?e:{value:e,message:""},HS=async(e,t,n,r,s,i)=>{const{ref:a,refs:l,required:c,maxLength:u,minLength:d,min:f,max:g,pattern:p,validate:m,name:w,valueAsNumber:b,mount:h}=e._f,v=Xe(n,w);if(!h||t.has(w))return{};const x=l?l[0]:a,k=Q=>{s&&x.reportValidity&&(x.setCustomValidity(ri(Q)?"":Q||""),x.reportValidity())},E={},$=Nb(a),P=pd(a),B=$||P,W=(b||Eb(a))&&pn(a.value)&&pn(v)||$h(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,Y=uD.bind(null,w,r,E),ee=(Q,X,fe,me=vi.maxLength,ve=vi.minLength)=>{const Oe=Q?X:fe;E[w]={type:Q?me:ve,message:Oe,ref:a,...Y(Q?me:ve,Oe)}};if(i?!Array.isArray(v)||!v.length:c&&(!B&&(W||Ir(v))||ri(v)&&!v||P&&!n$(l).isValid||$&&!s$(l).isValid)){const{value:Q,message:X}=ts(c)?{value:!!c,message:c}:zo(c);if(Q&&(E[w]={type:vi.required,message:X,ref:x,...Y(vi.required,X)},!r))return k(X),E}if(!W&&(!Ir(f)||!Ir(g))){let Q,X;const fe=zo(g),me=zo(f);if(!Ir(v)&&!isNaN(v)){const ve=a.valueAsNumber||v&&+v;Ir(fe.value)||(Q=ve>fe.value),Ir(me.value)||(X=ve<me.value)}else{const ve=a.valueAsDate||new Date(v),Oe=I=>new Date(new Date().toDateString()+" "+I),T=a.type=="time",M=a.type=="week";ts(fe.value)&&v&&(Q=T?Oe(v)>Oe(fe.value):M?v>fe.value:ve>new Date(fe.value)),ts(me.value)&&v&&(X=T?Oe(v)<Oe(me.value):M?v<me.value:ve<new Date(me.value))}if((Q||X)&&(ee(!!Q,fe.message,me.message,vi.max,vi.min),!r))return k(E[w].message),E}if((u||d)&&!W&&(ts(v)||i&&Array.isArray(v))){const Q=zo(u),X=zo(d),fe=!Ir(Q.value)&&v.length>+Q.value,me=!Ir(X.value)&&v.length<+X.value;if((fe||me)&&(ee(fe,Q.message,X.message),!r))return k(E[w].message),E}if(p&&!W&&ts(v)){const{value:Q,message:X}=zo(p);if(Oh(Q)&&!v.match(Q)&&(E[w]={type:vi.pattern,message:X,ref:a,...Y(vi.pattern,X)},!r))return k(X),E}if(m){if(zs(m)){const Q=await m(v,n),X=VS(Q,x);if(X&&(E[w]={...X,...Y(vi.validate,X.message)},!r))return k(X.message),E}else if(Mn(m)){let Q={};for(const X in m){if(!jr(Q)&&!r)break;const fe=VS(await m[X](v,n),x,X);fe&&(Q={...fe,...Y(X,fe.message)},k(fe.message),r&&(E[w]=Q))}if(!jr(Q)&&(E[w]={ref:x,...Q},!r))return E}}return k(!0),E};const _D={mode:Vs.onSubmit,reValidateMode:Vs.onChange,shouldFocusError:!0};function kD(e={}){let t={..._D,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:zs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Mn(t.defaultValues)||Mn(t.values)?Kn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Kn(s),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={...d};let g={...f};const p={array:PS(),state:PS()},m=t.criteriaMode===Vs.all,w=O=>z=>{clearTimeout(u),u=setTimeout(O,z)},b=async O=>{if(!a.keepIsValid&&!t.disabled&&(f.isValid||g.isValid||O)){let z;t.resolver?(z=jr((await B()).errors),h()):z=await Y(r,!0),z!==n.isValid&&p.state.next({isValid:z})}},h=(O,z)=>{!t.disabled&&(f.isValidating||f.validatingFields||g.isValidating||g.validatingFields)&&((O||Array.from(l.mount)).forEach(G=>{G&&(z?sn(n.validatingFields,G,z):Pn(n.validatingFields,G))}),p.state.next({validatingFields:n.validatingFields,isValidating:!jr(n.validatingFields)}))},v=(O,z=[],G,se,ne=!0,q=!0)=>{if(se&&G&&!t.disabled){if(a.action=!0,q&&Array.isArray(Xe(r,O))){const ge=G(Xe(r,O),se.argA,se.argB);ne&&sn(r,O,ge)}if(q&&Array.isArray(Xe(n.errors,O))){const ge=G(Xe(n.errors,O),se.argA,se.argB);ne&&sn(n.errors,O,ge),xD(n.errors,O)}if((f.touchedFields||g.touchedFields)&&q&&Array.isArray(Xe(n.touchedFields,O))){const ge=G(Xe(n.touchedFields,O),se.argA,se.argB);ne&&sn(n.touchedFields,O,ge)}(f.dirtyFields||g.dirtyFields)&&(n.dirtyFields=el(s,i)),p.state.next({name:O,isDirty:Q(O,z),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else sn(i,O,z)},x=(O,z)=>{sn(n.errors,O,z),p.state.next({errors:n.errors})},k=O=>{n.errors=O,p.state.next({errors:n.errors,isValid:!1})},E=(O,z,G,se)=>{const ne=Xe(r,O);if(ne){const q=Xe(i,O,pn(G)?Xe(s,O):G);pn(q)||se&&se.defaultChecked||z?sn(i,O,z?q:FS(ne._f)):me(O,q),a.mount&&!a.action&&b()}},$=(O,z,G,se,ne)=>{let q=!1,ge=!1;const Te={name:O};if(!t.disabled){if(!G||se){(f.isDirty||g.isDirty)&&(ge=n.isDirty,n.isDirty=Te.isDirty=Q(),q=ge!==Te.isDirty);const qe=ga(Xe(s,O),z);ge=!!Xe(n.dirtyFields,O),qe?Pn(n.dirtyFields,O):sn(n.dirtyFields,O,!0),Te.dirtyFields=n.dirtyFields,q=q||(f.dirtyFields||g.dirtyFields)&&ge!==!qe}if(G){const qe=Xe(n.touchedFields,O);qe||(sn(n.touchedFields,O,G),Te.touchedFields=n.touchedFields,q=q||(f.touchedFields||g.touchedFields)&&qe!==G)}q&&ne&&p.state.next(Te)}return q?Te:{}},P=(O,z,G,se)=>{const ne=Xe(n.errors,O),q=(f.isValid||g.isValid)&&ri(z)&&n.isValid!==z;if(t.delayError&&G?(c=w(()=>x(O,G)),c(t.delayError)):(clearTimeout(u),c=null,G?sn(n.errors,O,G):Pn(n.errors,O)),(G?!ga(ne,G):ne)||!jr(se)||q){const ge={...se,...q&&ri(z)?{isValid:z}:{},errors:n.errors,name:O};n={...n,...ge},p.state.next(ge)}},B=async O=>(h(O,!0),await t.resolver(i,t.context,mD(O||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation))),W=async O=>{const{errors:z}=await B(O);if(h(O),O)for(const G of O){const se=Xe(z,G);se?sn(n.errors,G,se):Pn(n.errors,G)}else n.errors=z;return z},Y=async(O,z,G={valid:!0})=>{for(const se in O){const ne=O[se];if(ne){const{_f:q,...ge}=ne;if(q){const Te=l.array.has(q.name),qe=ne._f&&gD(ne._f);qe&&f.validatingFields&&h([q.name],!0);const jt=await HS(ne,l.disabled,i,m,t.shouldUseNativeValidation&&!z,Te);if(qe&&f.validatingFields&&h([q.name]),jt[q.name]&&(G.valid=!1,z||e.shouldUseNativeValidation))break;!z&&(Xe(jt,q.name)?Te?SD(n.errors,jt,q.name):sn(n.errors,q.name,jt[q.name]):Pn(n.errors,q.name))}!jr(ge)&&await Y(ge,z,G)}}return G.valid},ee=()=>{for(const O of l.unMount){const z=Xe(r,O);z&&(z._f.refs?z._f.refs.every(G=>!Nm(G)):!Nm(z._f.ref))&&ue(O)}l.unMount=new Set},Q=(O,z)=>!t.disabled&&(O&&z&&sn(i,O,z),!ga(N(),s)),X=(O,z,G)=>lD(O,l,{...a.mount?i:pn(z)?s:ts(O)?{[O]:z}:z},G,z),fe=O=>kb(Xe(a.mount?i:s,O,t.shouldUnregister?Xe(s,O,[]):[])),me=(O,z,G={})=>{const se=Xe(r,O);let ne=z;if(se){const q=se._f;q&&(!q.disabled&&sn(i,O,r$(z,q)),ne=$h(q.ref)&&Ir(z)?"":z,e$(q.ref)?[...q.ref.options].forEach(ge=>ge.selected=ne.includes(ge.value)):q.refs?pd(q.ref)?q.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(ne)?ge.checked=!!ne.find(Te=>Te===ge.value):ge.checked=ne===ge.value||!!ne)}):q.refs.forEach(ge=>ge.checked=ge.value===ne):Eb(q.ref)?q.ref.value="":(q.ref.value=ne,q.ref.type||p.state.next({name:O,values:Kn(i)})))}(G.shouldDirty||G.shouldTouch)&&$(O,ne,G.shouldTouch,G.shouldDirty,!0),G.shouldValidate&&I(O)},ve=(O,z,G)=>{for(const se in z){if(!z.hasOwnProperty(se))return;const ne=z[se],q=O+"."+se,ge=Xe(r,q);(l.array.has(O)||Mn(ne)||ge&&!ge._f)&&!fo(ne)?ve(q,ne,G):me(q,ne,G)}},Oe=(O,z,G={})=>{const se=Xe(r,O),ne=l.array.has(O),q=Kn(z);sn(i,O,q),ne?(p.array.next({name:O,values:Kn(i)}),(f.isDirty||f.dirtyFields||g.isDirty||g.dirtyFields)&&G.shouldDirty&&p.state.next({name:O,dirtyFields:el(s,i),isDirty:Q(O,q)})):se&&!se._f&&!Ir(q)?ve(O,q,G):me(O,q,G),US(O,l)?p.state.next({...n,name:O,values:Kn(i)}):p.state.next({name:a.mount?O:void 0,values:Kn(i)})},T=async O=>{a.mount=!0;const z=O.target;let G=z.name,se=!0;const ne=Xe(r,G),q=qe=>{se=Number.isNaN(qe)||fo(qe)&&isNaN(qe.getTime())||ga(qe,Xe(i,G,qe))},ge=DS(t.mode),Te=DS(t.reValidateMode);if(ne){let qe,jt;const Dt=z.type?FS(ne._f):tD(O),Bt=O.type===AS.BLUR||O.type===AS.FOCUS_OUT,Fn=!yD(ne._f)&&!t.resolver&&!Xe(n.errors,G)&&!ne._f.deps||wD(Bt,Xe(n.touchedFields,G),n.isSubmitted,Te,ge),on=US(G,l,Bt);sn(i,G,Dt),Bt?(!z||!z.readOnly)&&(ne._f.onBlur&&ne._f.onBlur(O),c&&c(0)):ne._f.onChange&&ne._f.onChange(O);const En=$(G,Dt,Bt),fr=!jr(En)||on;if(!Bt&&p.state.next({name:G,type:O.type,values:Kn(i)}),Fn)return(f.isValid||g.isValid)&&(t.mode==="onBlur"?Bt&&b():Bt||b()),fr&&p.state.next({name:G,...on?{}:En});if(!Bt&&on&&p.state.next({...n}),t.resolver){const{errors:Ft}=await B([G]);if(h([G]),q(Dt),se){const Xn=zS(n.errors,r,G),S=zS(Ft,r,Xn.name||G);qe=S.error,G=S.name,jt=jr(Ft)}}else h([G],!0),qe=(await HS(ne,l.disabled,i,m,t.shouldUseNativeValidation))[G],h([G]),q(Dt),se&&(qe?jt=!1:(f.isValid||g.isValid)&&(jt=await Y(r,!0)));se&&(ne._f.deps&&(!Array.isArray(ne._f.deps)||ne._f.deps.length>0)&&I(ne._f.deps),P(G,jt,qe,En))}},M=(O,z)=>{if(Xe(n.errors,z)&&O.focus)return O.focus(),1},I=async(O,z={})=>{let G,se;const ne=lu(O);if(t.resolver){const q=await W(pn(O)?O:ne);G=jr(q),se=O?!ne.some(ge=>Xe(q,ge)):G}else O?(se=(await Promise.all(ne.map(async q=>{const ge=Xe(r,q);return await Y(ge&&ge._f?{[q]:ge}:ge)}))).every(Boolean),!(!se&&!n.isValid)&&b()):se=G=await Y(r);return p.state.next({...!ts(O)||(f.isValid||g.isValid)&&G!==n.isValid?{}:{name:O},...t.resolver||!O?{isValid:G}:{},errors:n.errors}),z.shouldFocus&&!se&&cu(r,M,O?ne:l.mount),se},N=(O,z)=>{let G={...a.mount?i:s};return z&&(G=ZT(z.dirtyFields?n.dirtyFields:n.touchedFields,G)),pn(O)?G:ts(O)?Xe(G,O):O.map(se=>Xe(G,se))},L=(O,z)=>({invalid:!!Xe((z||n).errors,O),isDirty:!!Xe((z||n).dirtyFields,O),error:Xe((z||n).errors,O),isValidating:!!Xe(n.validatingFields,O),isTouched:!!Xe((z||n).touchedFields,O)}),A=O=>{O&&lu(O).forEach(z=>Pn(n.errors,z)),p.state.next({errors:O?n.errors:{}})},_=(O,z,G)=>{const se=(Xe(r,O,{_f:{}})._f||{}).ref,ne=Xe(n.errors,O)||{},{ref:q,message:ge,type:Te,...qe}=ne;sn(n.errors,O,{...qe,...z,ref:se}),p.state.next({name:O,errors:n.errors,isValid:!1}),G&&G.shouldFocus&&se&&se.focus&&se.focus()},R=(O,z)=>zs(O)?p.state.subscribe({next:G=>"values"in G&&O(X(void 0,z),G)}):X(O,z,!0),K=O=>p.state.subscribe({next:z=>{bD(O.name,z.name,O.exact)&&vD(z,O.formState||f,re,O.reRenderRoot)&&O.callback({values:{...i},...n,...z,defaultValues:s})}}).unsubscribe,pe=O=>(a.mount=!0,g={...g,...O.formState},K({...O,formState:{...d,...O.formState}})),ue=(O,z={})=>{for(const G of O?lu(O):l.mount)l.mount.delete(G),l.array.delete(G),z.keepValue||(Pn(r,G),Pn(i,G)),!z.keepError&&Pn(n.errors,G),!z.keepDirty&&Pn(n.dirtyFields,G),!z.keepTouched&&Pn(n.touchedFields,G),!z.keepIsValidating&&Pn(n.validatingFields,G),!t.shouldUnregister&&!z.keepDefaultValue&&Pn(s,G);p.state.next({values:Kn(i)}),p.state.next({...n,...z.keepDirty?{isDirty:Q()}:{}}),!z.keepIsValid&&b()},j=({disabled:O,name:z})=>{if(ri(O)&&a.mount||O||l.disabled.has(z)){const ne=l.disabled.has(z)!==!!O;O?l.disabled.add(z):l.disabled.delete(z),ne&&a.mount&&!a.action&&b()}},$e=(O,z={})=>{let G=Xe(r,O);const se=ri(z.disabled)||ri(t.disabled);return sn(r,O,{...G||{},_f:{...G&&G._f?G._f:{ref:{name:O}},name:O,mount:!0,...z}}),l.mount.add(O),G?j({disabled:ri(z.disabled)?z.disabled:t.disabled,name:O}):E(O,!0,z.value),{...se?{disabled:z.disabled||t.disabled}:{},...t.progressive?{required:!!z.required,min:Nc(z.min),max:Nc(z.max),minLength:Nc(z.minLength),maxLength:Nc(z.maxLength),pattern:Nc(z.pattern)}:{},name:O,onChange:T,onBlur:T,ref:ne=>{if(ne){$e(O,z),G=Xe(r,O);const q=pn(ne.value)&&ne.querySelectorAll&&ne.querySelectorAll("input,select,textarea")[0]||ne,ge=dD(q),Te=G._f.refs||[];if(ge?Te.find(qe=>qe===q):q===G._f.ref)return;sn(r,O,{_f:{...G._f,...ge?{refs:[...Te.filter(Nm),q,...Array.isArray(Xe(s,O))?[{}]:[]],ref:{type:q.type,name:O}}:{ref:q}}}),E(O,!1,void 0,q)}else G=Xe(r,O,{}),G._f&&(G._f.mount=!1),(t.shouldUnregister||z.shouldUnregister)&&!(rD(l.array,O)&&a.action)&&l.unMount.add(O)}}},De=()=>t.shouldFocusError&&cu(r,M,l.mount),rt=O=>{ri(O)&&(p.state.next({disabled:O}),cu(r,(z,G)=>{const se=Xe(r,G);se&&(z.disabled=se._f.disabled||O,Array.isArray(se._f.refs)&&se._f.refs.forEach(ne=>{ne.disabled=se._f.disabled||O}))},0,!1))},st=(O,z)=>async G=>{let se;G&&(G.preventDefault&&G.preventDefault(),G.persist&&G.persist());let ne=Kn(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:q,values:ge}=await B();h(),n.errors=q,ne=Kn(ge)}else await Y(r);if(l.disabled.size)for(const q of l.disabled)Pn(ne,q);if(Pn(n.errors,"root"),jr(n.errors)){p.state.next({errors:{}});try{await O(ne,G)}catch(q){se=q}}else z&&await z({...n.errors},G),De(),setTimeout(De);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jr(n.errors)&&!se,submitCount:n.submitCount+1,errors:n.errors}),se)throw se},ke=(O,z={})=>{Xe(r,O)&&(pn(z.defaultValue)?Oe(O,Kn(Xe(s,O))):(Oe(O,z.defaultValue),sn(s,O,Kn(z.defaultValue))),z.keepTouched||Pn(n.touchedFields,O),z.keepDirty||(Pn(n.dirtyFields,O),n.isDirty=z.defaultValue?Q(O,Kn(Xe(s,O))):Q()),z.keepError||(Pn(n.errors,O),f.isValid&&b()),p.state.next({...n}))},Re=(O,z={})=>{const G=O?Kn(O):s,se=Kn(G),ne=jr(O),q=ne?s:se;if(z.keepDefaultValues||(s=G),!z.keepValues){if(z.keepDirtyValues){const ge=new Set([...l.mount,...Object.keys(el(s,i))]);for(const Te of Array.from(ge)){const qe=Xe(n.dirtyFields,Te),jt=Xe(i,Te),Dt=Xe(q,Te);qe&&!pn(jt)?sn(q,Te,jt):!qe&&!pn(Dt)&&Oe(Te,Dt)}}else{if(_b&&pn(O))for(const ge of l.mount){const Te=Xe(r,ge);if(Te&&Te._f){const qe=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if($h(qe)){const jt=qe.closest("form");if(jt){jt.reset();break}}}}if(z.keepFieldsRef)for(const ge of l.mount)Oe(ge,Xe(q,ge));else r={}}i=t.shouldUnregister?z.keepDefaultValues?Kn(s):{}:Kn(q),p.array.next({values:{...q}}),p.state.next({values:{...q}})}l={mount:z.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!f.isValid||!!z.keepIsValid||!!z.keepDirtyValues||!t.shouldUnregister&&!jr(q),a.watch=!!t.shouldUnregister,a.keepIsValid=!!z.keepIsValid,a.action=!1,z.keepErrors||(n.errors={}),p.state.next({submitCount:z.keepSubmitCount?n.submitCount:0,isDirty:ne?!1:z.keepDirty?n.isDirty:!!(z.keepDefaultValues&&!ga(O,s)),isSubmitted:z.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ne?{}:z.keepDirtyValues?z.keepDefaultValues&&i?el(s,i):n.dirtyFields:z.keepDefaultValues&&O?el(s,O):z.keepDirty?n.dirtyFields:{},touchedFields:z.keepTouched?n.touchedFields:{},errors:z.keepErrors?n.errors:{},isSubmitSuccessful:z.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},J=(O,z)=>Re(zs(O)?O(i):O,{...t.resetOptions,...z}),F=(O,z={})=>{const G=Xe(r,O),se=G&&G._f;if(se){const ne=se.refs?se.refs[0]:se.ref;ne.focus&&setTimeout(()=>{ne.focus(),z.shouldSelect&&zs(ne.select)&&ne.select()})}},re=O=>{n={...n,...O}},Le={control:{register:$e,unregister:ue,getFieldState:L,handleSubmit:st,setError:_,_subscribe:K,_runSchema:B,_updateIsValidating:h,_focusError:De,_getWatch:X,_getDirty:Q,_setValid:b,_setFieldArray:v,_setDisabledField:j,_setErrors:k,_getFieldArray:fe,_reset:Re,_resetDefaultValues:()=>zs(t.defaultValues)&&t.defaultValues().then(O=>{J(O,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:ee,_disableForm:rt,_subjects:p,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(O){a=O},get _defaultValues(){return s},get _names(){return l},set _names(O){l=O},get _formState(){return n},get _options(){return t},set _options(O){t={...t,...O}}},subscribe:pe,trigger:I,register:$e,handleSubmit:st,watch:R,setValue:Oe,getValues:N,reset:J,resetField:ke,clearErrors:A,unregister:ue,setError:_,setFocus:F,getFieldState:L};return{...Le,formControl:Le}}function i$(e={}){const t=At.useRef(void 0),n=At.useRef(void 0),[r,s]=At.useState({isDirty:!1,isValidating:!1,isLoading:zs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:zs(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!zs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:a,...l}=kD(e);t.current={...l,formState:r}}const i=t.current.control;return i._options=e,oD(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,a},[i]),At.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),At.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),At.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),At.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),At.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),At.useEffect(()=>{var a;e.values&&!ga(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((a=i._options.resetOptions)===null||a===void 0)&&a.keepIsValid||i._setValid(),n.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),At.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=At.useMemo(()=>aD(r,i),[i,r]),t.current}function jp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function jD(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}const ED=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Cb extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class ND extends Cb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qS extends Cb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class KS extends Cb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gy||(gy={}));class CD{constructor(t,{headers:n={},customFetch:r,region:s=gy.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=ED(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return jD(this,arguments,void 0,function*(n,r={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=r;let g={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(g["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(g["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(g["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let b=d;f&&(a=new AbortController,i=setTimeout(()=>a.abort(),f),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const h=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),l),body:w,signal:b}).catch(E=>{throw new ND(E)}),v=h.headers.get("x-relay-error");if(v&&v==="true")throw new qS(h);if(!h.ok)throw new KS(h);let x=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return x==="application/json"?k=yield h.json():x==="application/octet-stream"||x==="application/pdf"?k=yield h.blob():x==="text/event-stream"?k=h:x==="multipart/form-data"?k=yield h.formData():k=yield h.text(),{data:k,error:null,response:h}}catch(l){return{data:null,error:l,response:l instanceof KS||l instanceof qS?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var TD=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},$D=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,g;if(n.method!=="HEAD"){var p;const h=await i.text();h===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=h:l=JSON.parse(h))}const w=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");w&&b&&b.length>1&&(c=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var m;const w=await i.text();try{a=JSON.parse(w),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):a={message:w}}if(a&&n.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&n.shouldThrowOnError)throw new TD(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="",c="",u="";const d=i==null?void 0:i.cause;if(d){var f,g,p,m;const h=(f=d==null?void 0:d.message)!==null&&f!==void 0?f:"",v=(g=d==null?void 0:d.code)!==null&&g!==void 0?g:"";l=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(m=d==null?void 0:d.name)!==null&&m!==void 0?m:"Error"}: ${h}`,v&&(l+=` (${v})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var w;l=(w=i==null?void 0:i.stack)!==null&&w!==void 0?w:""}const b=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",b>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${b} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",b>this.urlLengthLimit&&(c+=`. Your request URL is ${b} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},OD=class extends $D{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const WS=new RegExp("[,()]");var tl=class extends OD{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&WS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&WS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},RD=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",a),r&&c.append("Prefer",`count=${r}`),new tl({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new tl({method:s,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new tl({method:a,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new tl({method:r,url:s,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new tl({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function AD(e,t){if(Vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PD(e){var t=AD(e,"string");return Vu(t)=="symbol"?t:t+""}function ID(e,t,n){return(t=PD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(n),!0).forEach(function(r){ID(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var LD=class a${constructor(t,{headers:n={},schema:r,fetch:s,timeout:i,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=a;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,u)=>{const d=new AbortController,f=setTimeout(()=>d.abort(),i),g=u==null?void 0:u.signal;if(g){if(g.aborted)return clearTimeout(f),l(c,u);const p=()=>{clearTimeout(f),d.abort()};return g.addEventListener("abort",p,{once:!0}),l(c,sf(sf({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(f),g.removeEventListener("abort",p)})}return l(c,sf(sf({},u),{},{signal:d.signal})).finally(()=>clearTimeout(f))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new RD(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new a$(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),f=r&&Object.values(n).some(d);f?(l="POST",u=n):r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{c.searchParams.append(p,m)})):(l="POST",u=n);const g=new Headers(this.headers);return f?g.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&g.set("Prefer",`count=${i}`),new tl({method:l,url:c,headers:g,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};class MD{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FD="2.96.0",DD=`realtime-js/${FD}`,BD="1.0.0",o$="2.0.0",JS=o$,yy=1e4,UD=1e3,zD=100;var fa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fa||(fa={}));var Wn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wn||(Wn={}));var Ds;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ds||(Ds={}));var vy;(function(e){e.websocket="websocket"})(vy||(vy={}));var no;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(no||(no={}));class VD{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var s,i;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+g);let m=new DataView(p),w=0;m.setUint8(w++,this.KINDS.userBroadcastPush),m.setUint8(w++,c.length),m.setUint8(w++,l.length),m.setUint8(w++,a.length),m.setUint8(w++,u.length),m.setUint8(w++,f.length),m.setUint8(w++,n),Array.from(c,h=>m.setUint8(w++,h.charCodeAt(0))),Array.from(l,h=>m.setUint8(w++,h.charCodeAt(0))),Array.from(a,h=>m.setUint8(w++,h.charCodeAt(0))),Array.from(u,h=>m.setUint8(w++,h.charCodeAt(0))),Array.from(f,h=>m.setUint8(w++,h.charCodeAt(0)));var b=new Uint8Array(p.byteLength+r.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(r),p.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,a,l,c]=r;return n({join_ref:s,ref:i,topic:a,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),a=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+i));c=c+i;const f=r.decode(t.slice(c,c+a));c=c+a;const g=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,m={type:this.BROADCAST_EVENT,event:d,payload:p};return a>0&&(m.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class l${constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Yt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Yt||(Yt={}));const YS=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=HD(a,e,t,s),i),{}):{}},HD=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?c$(i,a):by(a)},c$=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return GD(t,n)}switch(e){case Yt.bool:return qD(t);case Yt.float4:case Yt.float8:case Yt.int2:case Yt.int4:case Yt.int8:case Yt.numeric:case Yt.oid:return KD(t);case Yt.json:case Yt.jsonb:return WD(t);case Yt.timestamp:return JD(t);case Yt.abstime:case Yt.date:case Yt.daterange:case Yt.int4range:case Yt.int8range:case Yt.money:case Yt.reltime:case Yt.text:case Yt.time:case Yt.timestamptz:case Yt.timetz:case Yt.tsrange:case Yt.tstzrange:return by(t);default:return by(t)}},by=e=>e,qD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},KD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},WD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},GD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>c$(t,l))}return e},JD=e=>typeof e=="string"?e.replace(" ","T"):e,u$=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Cm{constructor(t,n,r={},s=yy){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var QS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(QS||(QS={}));class uu{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uu.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=uu.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=uu.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const g=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),w=f.filter(b=>g.indexOf(b.presence_ref)<0);m.length>0&&(l[u]=m),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),g=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...g)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var XS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(XS||(XS={}));var du;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(du||(du={}));var Si;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Si||(Si={}));class wl{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Cm(this,Ds.join,this.params,this.timeout),this.rejoinTimer=new l$(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ds.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new uu(this),this.broadcastEndpointURL=u$(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Wn.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[du.PRESENCE]&&this.bindings[du.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},g={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Si.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Si.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Si.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(m=w==null?void 0:w.length)!==null&&m!==void 0?m:0,h=[];for(let v=0;v<b;v++){const x=w[v],{filter:{event:k,schema:E,table:$,filter:P}}=x,B=p&&p[v];if(B&&B.event===k&&wl.isFilterValueEqual(B.schema,E)&&wl.isFilterValueEqual(B.table,$)&&wl.isFilterValueEqual(B.filter,P))h.push(Object.assign(Object.assign({},x),{id:B.id}));else{this.unsubscribe(),this.state=Wn.errored,t==null||t(Si.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,t&&t(Si.SUBSCRIBED);return}}).receive("error",p=>{this.state=Wn.errored,t==null||t(Si.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Si.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Wn.joined&&t===du.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ds.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Cm(this,Ds.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Cm(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ds;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let g=this._onMessage(a,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,w,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(w=p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(g,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,w,b,h,v,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const k=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(v=(h=p==null?void 0:p.filter)===null||h===void 0?void 0:h.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return k==="*"||k===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof g=="object"&&"ids"in g){const m=g.data,{schema:w,table:b,commit_timestamp:h,type:v,errors:x}=m;g=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:h,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(m))}p.callback(g,r)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&wl.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ds.close,{},t)}_onError(t){this._on(Ds.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=YS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=YS(t.columns,t.old_record)),n}}const Tm=()=>{},af={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},YD=[1e3,2e3,5e3,1e4],QD=1e4,XD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZD{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yy,this.transport=null,this.heartbeatIntervalMs=af.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tm,this.ref=0,this.reconnectTimer=null,this.vsn=JS,this.logger=Tm,this.conn=null,this.sendBuffer=[],this.serializer=new VD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${vy.websocket}`,this.httpEndpoint=u$(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case fa.connecting:return no.Connecting;case fa.open:return no.Open;case fa.closing:return no.Closing;default:return no.Closed}}isConnected(){return this.connectionState()===no.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new wl(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(UD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},af.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===fa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===fa.open||this.conn.readyState===fa.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ds.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([XD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:DD};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ds.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new l$(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},af.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d,f,g,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:yy,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:af.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Tm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:JS,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:m=>YD[m-1]||QD,this.vsn){case BD:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,w)=>w(JSON.stringify(m)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(m,w)=>w(JSON.parse(m));break;case o$:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Hu=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function e2(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function t2(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function n2(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:a}){const l=e2(e.baseUrl,r,s),c=await t2(e.auth),u=await t(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),g=f&&d?JSON.parse(d):d;if(!u.ok){const p=f?g:void 0,m=p==null?void 0:p.error;throw new Hu((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:u.status,headers:u.headers,data:g}}}}function of(e){return e.join("")}var r2=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:of(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${of(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${of(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${of(e.namespace)}`}),!0}catch(t){if(t instanceof Hu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Hu&&n.status===409)return;throw n}}};function Vo(e){return e.join("")}var s2=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vo(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Hu&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Hu&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},i2=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=n2({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new r2(this.client,t),this.tableOps=new s2(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ep=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Np(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var lf=class extends Ep{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},d$=class extends Ep{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const a2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o2=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wy=e=>{if(Array.isArray(e))return e.map(n=>wy(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=wy(r)}),t},l2=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function c2(e,t){if(qu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u2(e){var t=c2(e,"string");return qu(t)=="symbol"?t:t+""}function d2(e,t,n){return(t=u2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(n),!0).forEach(function(r){d2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const e_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},f2=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new lf(e_(a),i,l,r))}).catch(()=>{if(r==="vectors"){const a=i+"";t(new lf(s.statusText||`HTTP ${i} error`,i,a,r))}else{const a=i+"";t(new lf(s.statusText||`HTTP ${i} error`,i,a,r))}});else{const a=i+"";t(new lf(s.statusText||`HTTP ${i} error`,i,a,r))}}else t(new d$(e_(e),e,r))},h2=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?it(it({},s),n):(o2(r)?(s.headers=it({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),it(it({},s),n))};async function Cc(e,t,n,r,s,i,a){return new Promise((l,c)=>{e(n,h2(t,r,s,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(a==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>f2(u,c,r,a))})}function f$(e="storage"){return{get:async(t,n,r,s)=>Cc(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,i)=>Cc(t,"POST",n,s,i,r,e),put:async(t,n,r,s,i)=>Cc(t,"PUT",n,s,i,r,e),head:async(t,n,r,s)=>Cc(t,"HEAD",n,it(it({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,i)=>Cc(t,"DELETE",n,s,i,r,e)}}const p2=f$("storage"),{get:Ku,post:Ms,put:xy,head:m2,remove:Tb}=p2,ns=f$("vectors");var cc=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=a2(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=it(it({},this.headers),{},{[e]:t}),this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Np(n))return{data:null,error:n};throw n}}},g2=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Np(t))return{data:null,error:t};throw t}}};let h$;h$=Symbol.toStringTag;var y2=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[h$]="BlobDownloadBuilder",this.promise=null}asStream(){return new g2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Np(t))return{data:null,error:t};throw t}}};const v2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},t_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b2=class extends cc{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let i;const a=it(it({},t_),r);let l=it(it({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(l=it(it({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),f=await(e=="PUT"?xy:Ms)(s.fetch,`${s.url}/object/${d}`,i,it({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=it({upsert:t_.upsert},r),d=it(it({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await xy(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=it({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Ms(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(n.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ep("No token returned by API");return{signedUrl:a.toString(),path:e,token:l}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Ms(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Ms(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),i=await Ms(r.fetch,`${r.url}/object/sign/${s}`,it({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await Ms(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(a=>it(it({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Ku(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0},n);return new y2(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>wy(await Ku(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await m2(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Np(r)&&r instanceof d$){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Tb(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=it(it(it({},v2),t),{},{prefix:e||""});return await Ms(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=it({},e);return await Ms(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const w2="2.96.0",md={"X-Client-Info":`storage-js/${w2}`};var x2=class extends cc{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),a=it(it({},md),t);super(i,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Ku(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ku(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Ms(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await xy(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Ms(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Tb(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},S2=class extends cc{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=it(it({},md),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ms(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Ku(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Tb(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!l2(e))throw new Ep("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new i2({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},_2=class extends cc{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=it(it({},md),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await ns.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await ns.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},k2=class extends cc{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=it(it({},md),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},j2=class extends cc{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=it(it({},md),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ns.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},E2=class extends j2{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new N2(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},N2=class extends _2{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new C2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},C2=class extends k2{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,it(it({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},T2=class extends x2{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new b2(this.url,this.headers,e,this.fetch)}get vectors(){return new E2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new S2(this.url+"/iceberg",this.headers,this.fetch)}};const p$="2.96.0",nl=30*1e3,Sy=3,$m=Sy*nl,$2="http://localhost:9999",O2="supabase.auth.token",R2={"X-Client-Info":`gotrue-js/${p$}`},_y="X-Supabase-Api-Version",m$={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P2=10*60*1e3;class Wu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ze(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class I2 extends Wu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function L2(e){return Ze(e)&&e.name==="AuthApiError"}class ro extends Wu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wi extends Wu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Xr extends Wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Om(e){return Ze(e)&&e.name==="AuthSessionMissingError"}class Ho extends Wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cf extends Wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class uf extends Wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function M2(e){return Ze(e)&&e.name==="AuthImplicitGrantRedirectError"}class n_ extends Wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F2 extends Wi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ky extends Wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Rm(e){return Ze(e)&&e.name==="AuthRetryableFetchError"}class r_ extends Wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class jy extends Wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),s_=` 	
\r=`.split(""),D2=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<s_.length;t+=1)e[s_[t].charCodeAt(0)]=-2;for(let t=0;t<Rh.length;t+=1)e[Rh[t].charCodeAt(0)]=t;return e})();function i_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Rh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Rh[r]),t.queuedBits-=6}}function g$(e,t,n){const r=D2[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a_(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{z2(a,r,n)};for(let a=0;a<e.length;a+=1)g$(e.charCodeAt(a),s,i);return t.join("")}function B2(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function U2(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}B2(r,t)}}function z2(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Tl(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)g$(e.charCodeAt(s),n,r);return new Uint8Array(t)}function V2(e){const t=[];return U2(e,n=>t.push(n)),new Uint8Array(t)}function ho(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>i_(s,n,r)),i_(null,n,r),t.join("")}function H2(e){return Math.round(Date.now()/1e3)+e}function q2(){return Symbol("auth-callback")}const sr=()=>typeof window<"u"&&typeof document<"u",Ja={tested:!1,writable:!1},y$=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ja.tested)return Ja.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ja.tested=!0,Ja.writable=!0}catch{Ja.tested=!0,Ja.writable=!1}return Ja.writable};function K2(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const v$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),W2=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ya=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rr=async(e,t)=>{await e.removeItem(t)};class Cp{constructor(){this.promise=new Cp.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Cp.promiseConstructor=Promise;function df(e){const t=e.split(".");if(t.length!==3)throw new jy("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!A2.test(t[r]))throw new jy("JWT not in base64url format");return{header:JSON.parse(a_(t[0])),payload:JSON.parse(a_(t[1])),signature:Tl(t[2]),raw:{header:t[0],payload:t[1]}}}async function G2(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function J2(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function Y2(e){return("0"+e.toString(16)).substr(-2)}function Q2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Y2).join("")}async function X2(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Z2(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await X2(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qo(e,t,n=!1){const r=Q2();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rl(e,`${t}-code-verifier`,s);const i=await Z2(r);return[i,r===i?"plain":"s256"]}const eB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tB(e){const t=e.headers.get(_y);if(!t||!t.match(eB))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function nB(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rB(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ko(e){if(!sB.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Am(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iB(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function o_(e){return JSON.parse(JSON.stringify(e))}const eo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aB=[502,503,504];async function l_(e){var t;if(!W2(e))throw new ky(eo(e),0);if(aB.includes(e.status))throw new ky(eo(e),e.status);let n;try{n=await e.json()}catch(i){throw new ro(eo(i),i)}let r;const s=tB(e);if(s&&s.getTime()>=m$["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new r_(eo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Xr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new r_(eo(n),e.status,n.weak_password.reasons);throw new I2(eo(n),e.status||500,r)}const oB=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function at(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[_y]||(i[_y]=m$["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await lB(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function lB(e,t,n,r,s,i){const a=oB(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new ky(eo(c),0)}if(l.ok||await l_(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await l_(c)}}function Ps(e){var t;let n=null;dB(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=H2(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function c_(e){const t=Ps(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ya(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cB(e){return{data:e,error:null}}function uB(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=jp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function u_(e){return e}function dB(e){return e.access_token&&e.refresh_token&&e.expires_in}const Pm=["global","local","others"];class fB{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=v$(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Pm[0]){if(Pm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pm.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ya})}catch(r){if(Ze(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=jp(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:uB,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ze(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ya})}catch(n){if(Ze(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:u_});if(d.error)throw d.error;const f=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const w=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ze(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ko(t);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ya})}catch(n){if(Ze(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ko(t);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ya})}catch(r){if(Ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ko(t);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ya})}catch(r){if(Ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ko(t.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ze(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ko(t.userId),Ko(t.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await at(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:u_});if(d.error)throw d.error;const f=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const w=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ze(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ze(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await at(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ze(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await at(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ze(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await at(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ze(n))return{data:null,error:n};throw n}}}function d_(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Wo={debug:!!(globalThis&&y$()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class b$ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class f_ extends b${}async function hB(e,t,n){Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;t>0&&setTimeout(()=>{r.abort(),Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new f_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new f_(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${t}ms`):s}}function pB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function w$(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mB(e){return parseInt(e,16)}function gB(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function yB(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=w$(e.address),m=d?`${d}://${r}`:r,w=e.statement?`${e.statement}
`:"",b=`${m} wants you to sign in with your Ethereum account:
${p}

${w}`;let h=`URI: ${f}
Version: ${g}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(h+=`
Expiration Time: ${s.toISOString()}`),l&&(h+=`
Not Before: ${l.toISOString()}`),c&&(h+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);v+=`
- ${x}`}h+=v}return`${b}
${h}`}class In extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Ah extends In{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function vB({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new In({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new In({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new In({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new In({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new In({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new In({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new In({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new In({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(x$(a)){if(i.rp.id!==a)return new In({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new In({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new In({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new In({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new In({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function bB({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new In({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new In({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(x$(r)){if(n.rpId!==r)return new In({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new In({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new In({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new In({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class wB{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const xB=new wB;function SB(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=jp(e,["challenge","user","excludeCredentials"]),i=Tl(t).buffer,a=Object.assign(Object.assign({},n),{id:Tl(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Tl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function _B(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=jp(e,["challenge","allowCredentials"]),s=Tl(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Tl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function kB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ho(new Uint8Array(e.response.attestationObject)),clientDataJSON:ho(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ho(new Uint8Array(s.authenticatorData)),clientDataJSON:ho(new Uint8Array(s.clientDataJSON)),signature:ho(new Uint8Array(s.signature)),userHandle:s.userHandle?ho(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function x$(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function h_(){var e,t;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function EB(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",t)}:{data:null,error:new Ah("Empty credential response",t)}}catch(t){return{data:null,error:vB({error:t,options:e})}}}async function NB(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",t)}:{data:null,error:new Ah("Empty credential response",t)}}catch(t){return{data:null,error:bB({error:t,options:e})}}}const CB={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},TB={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ph(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(t(a)){const l=r[i];t(l)?r[i]=Ph(l,a):r[i]=Ph(a)}else r[i]=a}return r}function $B(e,t){return Ph(CB,e,t||{})}function OB(e,t){return Ph(TB,e,t||{})}class RB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){var a;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:c};const u=s??xB.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const f=r;if(f)d.name=`${d.id}:${f}`;else{const p=(await this.client.getUser()).data.user,m=((a=p==null?void 0:p.user_metadata)===null||a===void 0?void 0:a.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";d.name=`${d.id}:${m}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=$B(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:g}=await EB({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:g}}case"request":{const d=OB(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:g}=await NB(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:g}}}}catch(l){return Ze(l)?{data:null,error:l}:{data:null,error:new ro("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Wu("rpId is required for WebAuthn authentication")};try{if(!h_())return{data:null,error:new ro("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Ze(a)?{data:null,error:a}:{data:null,error:new ro("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Wu("rpId is required for WebAuthn registration")};try{if(!h_())return{data:null,error:new ro("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return Ze(a)?{data:null,error:a}:{data:null,error:new ro("Unexpected error in register",a)}}}}pB();const AB={url:$2,storageKey:O2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:R2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function p_(e,t,n){return await n()}const Go={};class Gu{get jwks(){var t,n;return(n=(t=Go[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Go[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},AB),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Gu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Gu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&sr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fB({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=v$(i.fetch),this.lock=i.lock||p_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&sr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=hB:this.lock=p_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new RB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:y$()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=d_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=d_(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${p$}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(sr()&&(n=K2(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),sr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),M2(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ze(n)?this._returnResult({error:n}):this._returnResult({error:new ro("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ps}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:f,options:g}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await qo(this.storage,this.storageKey)),i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ps})}else if("phone"in t){const{phone:d,password:f,options:g}=t;i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ps})}else throw new cf("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await rr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:c_})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:c_})}else throw new cf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Ho;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ze(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,u,d,f,g;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:w,wallet:b,statement:h,options:v}=t;let x;if(sr())if(typeof b=="object")x=b;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")x=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const k=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),E=await x.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=w$(E[0]);let P=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const W=await x.request({method:"eth_chainId"});P=mB(W)}const B={domain:k.host,address:$,statement:h,uri:k.href,version:"1",chainId:P,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=yB(B),m=await x.request({method:"personal_sign",params:[gB(p),$]})}try{const{data:w,error:b}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ps});if(b)throw b;if(!w||!w.session||!w.user){const h=new Ho;return this._returnResult({data:{user:null,session:null},error:h})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(Ze(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,f,g,p;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:b,wallet:h,statement:v,options:x}=t;let k;if(sr())if(typeof h=="object")k=h;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))k=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof h!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=h}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const $=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),v?{statement:v}:null));let P;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")P=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)P=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),w=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const $=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=$}}try{const{data:b,error:h}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ho(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ps});if(h)throw h;if(!b||!b.session||!b.user){const v=new Ho;return this._returnResult({data:{user:null,session:null},error:v})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:h})}catch(b){if(Ze(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await Ya(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new F2;const{data:i,error:a}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ps});if(await rr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Ho;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ps}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Ho;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Ze(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await qo(this.storage,this.storageKey));const{error:f}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new cf("You must provide either an email or phone number.")}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ps});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Ze(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await qo(this.storage,this.storageKey));const u=await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:cB});return!((i=u.data)===null||i===void 0)&&i.url&&sr()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Xr;const{error:s}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Ze(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new cf("You must provide either an email or phone number and a type")}catch(n){if(Ze(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ya(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<$m:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Ya(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Am()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=iB(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ya}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xr}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ya})})}catch(n){if(Ze(n))return Om(n)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Xr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await qo(this.storage,this.storageKey));const{data:u,error:d}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:ya});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=df(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Ze(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Xr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ze(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!sr())throw new uf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new uf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new n_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n_("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new uf("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let g=d+f;c&&(g=parseInt(c));const p=g-d;p*1e3<=nl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=g-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,g,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,g,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const h={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:g,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:h,redirectType:t.type},error:null})}catch(r){if(Ze(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ya(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i&&!Om(i))return this._returnResult({error:i});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(L2(l)&&(l.status===404||l.status===401||l.status===403)||Om(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=q2(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await qo(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:f,error:g}=i;if(g)throw g;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return sr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ze(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,f=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ps}),{data:g,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Ho}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:p}))}catch(s){if(await rr(this.storage,`${this.storageKey}-code-verifier`),Ze(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await J2(async s=>(s>0&&await G2(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ps})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Rm(i)&&Date.now()+a-r<nl})}catch(r){if(this._debug(n,"error",r),Ze(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),sr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ya(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ya(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await rl(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Am()}else if(s&&!s.user&&!s.user){const a=await Ya(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await rr(this.storage,this.storageKey+"-user"),await rl(this.storage,this.storageKey,s)):s.user=Am()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$m;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${$m}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Rm(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Xr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cp;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Xr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ze(i)){const a={data:null,error:i};return Rm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await rl(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=o_(s);await rl(this.storage,this.storageKey,i)}else{const s=o_(n);await rl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),nl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/nl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nl}ms, refresh threshold is ${Sy} ticks`),s<=Sy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof b$)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await qo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await at(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await at(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?kB(t.webauthn.credential_response):jB(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:SB(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_B(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,i;if(t)try{const{payload:p}=df(t);let m=null;p.aal&&(m=p.aal);let w=m;const{data:{user:b},error:h}=await this.getUser(t);if(h)return this._returnResult({data:null,error:h});((r=(n=b==null?void 0:b.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(w="aal2");const x=p.amr||[];return{data:{currentLevel:m,nextLevel:w,currentAuthenticationMethods:x},error:null}}catch(p){if(Ze(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=df(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(s=a.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const g=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await at(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Xr});const a=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&sr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Ze(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Xr});const a=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&sr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Ze(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await at(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(t){if(Ze(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await at(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xr})})}catch(n){if(Ze(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+P2>s)return r;const{data:i,error:a}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=df(r);n!=null&&n.allowExpired||nB(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const d=rB(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,V2(`${l}.${c}`)))throw new jy("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Ze(r))return this._returnResult({data:null,error:r});throw r}}}Gu.nextInstanceID={};const PB=Gu,IB="2.96.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const LB={"X-Client-Info":`supabase-js-${Vc}/${IB}`},MB={headers:LB},FB={schema:"public"},DB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BB={};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function UB(e,t){if(Ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zB(e){var t=UB(e,"string");return Ju(t)=="symbol"?t:t+""}function VB(e,t,n){return(t=zB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(n),!0).forEach(function(r){VB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const HB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qB=()=>Headers,KB=(e,t,n)=>{const r=HB(n),s=qB();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Sn(Sn({},a),{},{headers:u}))}};function WB(e){return e.endsWith("/")?e:e+"/"}function GB(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,g={db:Sn(Sn({},c),s),auth:Sn(Sn({},u),i),realtime:Sn(Sn({},d),a),storage:{},global:Sn(Sn(Sn({},f),l),{},{headers:Sn(Sn({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function JB(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(WB(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var YB=class extends PB{constructor(e){super(e)}},QB=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=JB(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:FB,realtime:BB,auth:Sn(Sn({},DB),{},{storageKey:a}),global:MB},c=GB(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=KB(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Sn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new LD(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new T2(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new CD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YB({url:this.authUrl.href,headers:Sn(Sn({},g),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ZD(this.realtimeUrl.href,Sn(Sn({},e),{},{params:Sn(Sn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const XB=(e,t,n)=>new QB(e,t,n);function ZB(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}ZB()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $b="supabase_runtime_url_v1",Ob="supabase_runtime_anon_key_v1";function S$(){return typeof window<"u"}function g_(e){if(!S$())return"";try{return String(window.localStorage.getItem(e)||"").trim()}catch{return""}}function Ih(e,t){if(S$())try{const n=String(t||"").trim();if(!n){window.localStorage.removeItem(e);return}window.localStorage.setItem(e,n)}catch{}}function Lh(e){const t=String(e||"").trim();if(!t)return"";try{const n=new URL(t);return/^https?:$/.test(n.protocol)?`${n.protocol}//${n.host}`:""}catch{return""}}function _$(){const e=Lh("https://fykmvlsbnywfsjfswque.supabase.co"),t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a212bHNibnl3ZnNqZnN3cXVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4OTE3MDksImV4cCI6MjA4NjQ2NzcwOX0.DswAnTElV2W8kRTJwaHBgIjJlmTciWpGG26TMcLu0kE".trim(),n=Lh(g_($b)),r=String(g_(Ob)||"").trim();return n&&r?{url:n,anonKey:r,source:"runtime"}:{url:e,anonKey:t,source:"env"}}let Eo=_$();function Rb(e){const t=Lh((e==null?void 0:e.url)||""),n=String((e==null?void 0:e.anonKey)||"").trim();if(!t||!n)throw new Error("Supabase client is not configured. Missing URL or anon key.");return XB(t,n)}let Pt=Rb(Eo);function fu(){return{url:Eo.url,source:Eo.source}}function eU({url:e,anonKey:t}){const n=Lh(e),r=String(t||"").trim();if(!n||!r)throw new Error("Supabase runtime config tidak valid");return Ih($b,n),Ih(Ob,r),Eo={url:n,anonKey:r,source:"runtime"},Pt=Rb(Eo),fu()}function tU(){return Ih($b,""),Ih(Ob,""),Eo=_$(),Pt=Rb(Eo),fu()}function k$(e,t){return function(){return e.apply(t,arguments)}}const{toString:nU}=Object.prototype,{getPrototypeOf:Ab}=Object,{iterator:Tp,toStringTag:j$}=Symbol,$p=(e=>t=>{const n=nU.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qs=e=>(e=e.toLowerCase(),t=>$p(t)===e),Op=e=>t=>typeof t===e,{isArray:uc}=Array,Kl=Op("undefined");function gd(e){return e!==null&&!Kl(e)&&e.constructor!==null&&!Kl(e.constructor)&&qr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const E$=Qs("ArrayBuffer");function rU(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&E$(e.buffer),t}const sU=Op("string"),qr=Op("function"),N$=Op("number"),yd=e=>e!==null&&typeof e=="object",iU=e=>e===!0||e===!1,Uf=e=>{if($p(e)!=="object")return!1;const t=Ab(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(j$ in e)&&!(Tp in e)},aU=e=>{if(!yd(e)||gd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},oU=Qs("Date"),lU=Qs("File"),cU=Qs("Blob"),uU=Qs("FileList"),dU=e=>yd(e)&&qr(e.pipe),fU=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qr(e.append)&&((t=$p(e))==="formdata"||t==="object"&&qr(e.toString)&&e.toString()==="[object FormData]"))},hU=Qs("URLSearchParams"),[pU,mU,gU,yU]=["ReadableStream","Request","Response","Headers"].map(Qs),vU=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),uc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(gd(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(r=0;r<a;r++)l=i[r],t.call(null,e[l],l,e)}}function C$(e,t){if(gd(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,T$=e=>!Kl(e)&&e!==po;function Ey(){const{caseless:e,skipUndefined:t}=T$(this)&&this||{},n={},r=(s,i)=>{if(i==="__proto__"||i==="constructor"||i==="prototype")return;const a=e&&C$(n,i)||i;Uf(n[a])&&Uf(s)?n[a]=Ey(n[a],s):Uf(s)?n[a]=Ey({},s):uc(s)?n[a]=s.slice():(!t||!Kl(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&vd(arguments[s],r);return n}const bU=(e,t,n,{allOwnKeys:r}={})=>(vd(t,(s,i)=>{n&&qr(s)?Object.defineProperty(e,i,{value:k$(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),wU=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xU=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},SU=(e,t,n,r)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&Ab(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},_U=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},kU=e=>{if(!e)return null;if(uc(e))return e;let t=e.length;if(!N$(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},jU=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ab(Uint8Array)),EU=(e,t)=>{const r=(e&&e[Tp]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},NU=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},CU=Qs("HTMLFormElement"),TU=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),y_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),$U=Qs("RegExp"),$$=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};vd(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(r[i]=a||s)}),Object.defineProperties(e,r)},OU=e=>{$$(e,(t,n)=>{if(qr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(qr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},RU=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return uc(e)?r(e):r(String(e).split(t)),n},AU=()=>{},PU=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function IU(e){return!!(e&&qr(e.append)&&e[j$]==="FormData"&&e[Tp])}const LU=e=>{const t=new Array(10),n=(r,s)=>{if(yd(r)){if(t.indexOf(r)>=0)return;if(gd(r))return r;if(!("toJSON"in r)){t[s]=r;const i=uc(r)?[]:{};return vd(r,(a,l)=>{const c=n(a,s+1);!Kl(c)&&(i[l]=c)}),t[s]=void 0,i}}return r};return n(e,0)},MU=Qs("AsyncFunction"),FU=e=>e&&(yd(e)||qr(e))&&qr(e.then)&&qr(e.catch),O$=((e,t)=>e?setImmediate:t?((n,r)=>(po.addEventListener("message",({source:s,data:i})=>{s===po&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),po.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qr(po.postMessage)),DU=typeof queueMicrotask<"u"?queueMicrotask.bind(po):typeof process<"u"&&process.nextTick||O$,BU=e=>e!=null&&qr(e[Tp]),Z={isArray:uc,isArrayBuffer:E$,isBuffer:gd,isFormData:fU,isArrayBufferView:rU,isString:sU,isNumber:N$,isBoolean:iU,isObject:yd,isPlainObject:Uf,isEmptyObject:aU,isReadableStream:pU,isRequest:mU,isResponse:gU,isHeaders:yU,isUndefined:Kl,isDate:oU,isFile:lU,isBlob:cU,isRegExp:$U,isFunction:qr,isStream:dU,isURLSearchParams:hU,isTypedArray:jU,isFileList:uU,forEach:vd,merge:Ey,extend:bU,trim:vU,stripBOM:wU,inherits:xU,toFlatObject:SU,kindOf:$p,kindOfTest:Qs,endsWith:_U,toArray:kU,forEachEntry:EU,matchAll:NU,isHTMLForm:CU,hasOwnProperty:y_,hasOwnProp:y_,reduceDescriptors:$$,freezeMethods:OU,toObjectSet:RU,toCamelCase:TU,noop:AU,toFiniteNumber:PU,findKey:C$,global:po,isContextDefined:T$,isSpecCompliantForm:IU,toJSONObject:LU,isAsyncFn:MU,isThenable:FU,setImmediate:O$,asap:DU,isIterable:BU};let ut=class R$ extends Error{static from(t,n,r,s,i,a){const l=new R$(t.message,n||t.code,r,s,i);return l.cause=t,l.name=t.name,a&&Object.assign(l,a),l}constructor(t,n,r,s,i){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}};ut.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ut.ERR_BAD_OPTION="ERR_BAD_OPTION";ut.ECONNABORTED="ECONNABORTED";ut.ETIMEDOUT="ETIMEDOUT";ut.ERR_NETWORK="ERR_NETWORK";ut.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ut.ERR_DEPRECATED="ERR_DEPRECATED";ut.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ut.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ut.ERR_CANCELED="ERR_CANCELED";ut.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ut.ERR_INVALID_URL="ERR_INVALID_URL";const UU=null;function Ny(e){return Z.isPlainObject(e)||Z.isArray(e)}function A$(e){return Z.endsWith(e,"[]")?e.slice(0,-2):e}function v_(e,t,n){return e?e.concat(t).map(function(s,i){return s=A$(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function zU(e){return Z.isArray(e)&&!e.some(Ny)}const VU=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function Rp(e,t,n){if(!Z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!Z.isUndefined(b[w])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(Z.isDate(m))return m.toISOString();if(Z.isBoolean(m))return m.toString();if(!c&&Z.isBlob(m))throw new ut("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(m)||Z.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,w,b){let h=m;if(m&&!b&&typeof m=="object"){if(Z.endsWith(w,"{}"))w=r?w:w.slice(0,-2),m=JSON.stringify(m);else if(Z.isArray(m)&&zU(m)||(Z.isFileList(m)||Z.endsWith(w,"[]"))&&(h=Z.toArray(m)))return w=A$(w),h.forEach(function(x,k){!(Z.isUndefined(x)||x===null)&&t.append(a===!0?v_([w],k,i):a===null?w:w+"[]",u(x))}),!1}return Ny(m)?!0:(t.append(v_(b,w,i),u(m)),!1)}const f=[],g=Object.assign(VU,{defaultVisitor:d,convertValue:u,isVisitable:Ny});function p(m,w){if(!Z.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(m),Z.forEach(m,function(h,v){(!(Z.isUndefined(h)||h===null)&&s.call(t,h,Z.isString(v)?v.trim():v,w,g))===!0&&p(h,w?w.concat(v):[v])}),f.pop()}}if(!Z.isObject(e))throw new TypeError("data must be an object");return p(e),t}function b_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Pb(e,t){this._pairs=[],e&&Rp(e,this,t)}const P$=Pb.prototype;P$.append=function(t,n){this._pairs.push([t,n])};P$.toString=function(t){const n=t?function(r){return t.call(this,r,b_)}:b_;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function HU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function I$(e,t,n){if(!t)return e;const r=n&&n.encode||HU,s=Z.isFunction(n)?{serialize:n}:n,i=s&&s.serialize;let a;if(i?a=i(t,s):a=Z.isURLSearchParams(t)?t.toString():new Pb(t,s).toString(r),a){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class w_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Ib={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},qU=typeof URLSearchParams<"u"?URLSearchParams:Pb,KU=typeof FormData<"u"?FormData:null,WU=typeof Blob<"u"?Blob:null,GU={isBrowser:!0,classes:{URLSearchParams:qU,FormData:KU,Blob:WU},protocols:["http","https","file","blob","url","data"]},Lb=typeof window<"u"&&typeof document<"u",Cy=typeof navigator=="object"&&navigator||void 0,JU=Lb&&(!Cy||["ReactNative","NativeScript","NS"].indexOf(Cy.product)<0),YU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QU=Lb&&window.location.href||"http://localhost",XU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lb,hasStandardBrowserEnv:JU,hasStandardBrowserWebWorkerEnv:YU,navigator:Cy,origin:QU},Symbol.toStringTag,{value:"Module"})),vr={...XU,...GU};function ZU(e,t){return Rp(e,new vr.classes.URLSearchParams,{visitor:function(n,r,s,i){return vr.isNode&&Z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function ez(e){return Z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tz(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function L$(e){function t(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&Z.isArray(s)?s.length:a,c?(Z.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!Z.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],i)&&Z.isArray(s[a])&&(s[a]=tz(s[a])),!l)}if(Z.isFormData(e)&&Z.isFunction(e.entries)){const n={};return Z.forEachEntry(e,(r,s)=>{t(ez(r),s,n,0)}),n}return null}function nz(e,t,n){if(Z.isString(e))try{return(t||JSON.parse)(e),Z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const bd={transitional:Ib,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=Z.isObject(t);if(i&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return s?JSON.stringify(L$(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)||Z.isReadableStream(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ZU(t,this.formSerializer).toString();if((l=Z.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Rp(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),nz(t)):t}],transformResponse:[function(t){const n=this.transitional||bd.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Z.isResponse(t)||Z.isReadableStream(t))return t;if(t&&Z.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?ut.from(l,ut.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vr.classes.FormData,Blob:vr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],e=>{bd.headers[e]={}});const rz=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sz=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&rz[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},x_=Symbol("internals");function Tc(e){return e&&String(e).trim().toLowerCase()}function zf(e){return e===!1||e==null?e:Z.isArray(e)?e.map(zf):String(e)}function iz(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const az=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Im(e,t,n,r,s){if(Z.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!Z.isString(t)){if(Z.isString(r))return t.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(t)}}function oz(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function lz(e,t){const n=Z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,a){return this[r].call(this,t,s,i,a)},configurable:!0})})}let Kr=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,c,u){const d=Tc(c);if(!d)throw new Error("header name must be a non-empty string");const f=Z.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=zf(l))}const a=(l,c)=>Z.forEach(l,(u,d)=>i(u,d,c));if(Z.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(Z.isString(t)&&(t=t.trim())&&!az(t))a(sz(t),n);else if(Z.isObject(t)&&Z.isIterable(t)){let l={},c,u;for(const d of t){if(!Z.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?Z.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=Tc(t),t){const r=Z.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return iz(s);if(Z.isFunction(n))return n.call(this,s,r);if(Z.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Tc(t),t){const r=Z.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Im(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(a){if(a=Tc(a),a){const l=Z.findKey(r,a);l&&(!n||Im(r,r[l],l,n))&&(delete r[l],s=!0)}}return Z.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||Im(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return Z.forEach(this,(s,i)=>{const a=Z.findKey(r,i);if(a){n[a]=zf(s),delete n[i];return}const l=t?oz(i):String(i).trim();l!==i&&delete n[i],n[l]=zf(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Z.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&Z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[x_]=this[x_]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Tc(a);r[l]||(lz(s,a),r[l]=!0)}return Z.isArray(t)?t.forEach(i):i(t),this}};Kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Kr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Z.freezeMethods(Kr);function Lm(e,t){const n=this||bd,r=t||n,s=Kr.from(r.headers);let i=r.data;return Z.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function M$(e){return!!(e&&e.__CANCEL__)}let wd=class extends ut{constructor(t,n,r){super(t??"canceled",ut.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function F$(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ut("Request failed with status code "+n.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function cz(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function uz(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let f=i,g=0;for(;f!==s;)g+=n[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-a<t)return;const p=d&&u-d;return p?Math.round(g*1e3/p):void 0}}function dz(e,t){let n=0,r=1e3/t,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-f)))},()=>s&&a(s)]}const Mh=(e,t,n=3)=>{let r=0;const s=uz(50,250);return dz(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},S_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},__=e=>(...t)=>Z.asap(()=>e(...t)),fz=vr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,vr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(vr.origin),vr.navigator&&/(msie|trident)/i.test(vr.navigator.userAgent)):()=>!0,hz=vr.hasStandardBrowserEnv?{write(e,t,n,r,s,i,a){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];Z.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),Z.isString(r)&&l.push(`path=${r}`),Z.isString(s)&&l.push(`domain=${s}`),i===!0&&l.push("secure"),Z.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function pz(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mz(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function D$(e,t,n){let r=!pz(t);return e&&(r||n==!1)?mz(e,t):t}const k_=e=>e instanceof Kr?{...e}:e;function No(e,t){t=t||{};const n={};function r(u,d,f,g){return Z.isPlainObject(u)&&Z.isPlainObject(d)?Z.merge.call({caseless:g},u,d):Z.isPlainObject(d)?Z.merge({},d):Z.isArray(d)?d.slice():d}function s(u,d,f,g){if(Z.isUndefined(d)){if(!Z.isUndefined(u))return r(void 0,u,f,g)}else return r(u,d,f,g)}function i(u,d){if(!Z.isUndefined(d))return r(void 0,d)}function a(u,d){if(Z.isUndefined(d)){if(!Z.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>s(k_(u),k_(d),f,!0)};return Z.forEach(Object.keys({...e,...t}),function(d){if(d==="__proto__"||d==="constructor"||d==="prototype")return;const f=Z.hasOwnProp(c,d)?c[d]:s,g=f(e[d],t[d],d);Z.isUndefined(g)&&f!==l||(n[d]=g)}),n}const B$=e=>{const t=No({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;if(t.headers=a=Kr.from(a),t.url=I$(D$(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Z.isFormData(n)){if(vr.hasStandardBrowserEnv||vr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Z.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&a.set(d,f)})}}if(vr.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(t)),r||r!==!1&&fz(t.url))){const c=s&&i&&hz.read(i);c&&a.set(s,c)}return t},gz=typeof XMLHttpRequest<"u",yz=gz&&function(e){return new Promise(function(n,r){const s=B$(e);let i=s.data;const a=Kr.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,g,p,m;function w(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function h(){if(!b)return;const x=Kr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:x,config:e,request:b};F$(function(P){n(P),w()},function(P){r(P),w()},E),b=null}"onloadend"in b?b.onloadend=h:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(h)},b.onabort=function(){b&&(r(new ut("Request aborted",ut.ECONNABORTED,e,b)),b=null)},b.onerror=function(k){const E=k&&k.message?k.message:"Network Error",$=new ut(E,ut.ERR_NETWORK,e,b);$.event=k||null,r($),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||Ib;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),r(new ut(k,E.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,e,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&Z.forEach(a.toJSON(),function(k,E){b.setRequestHeader(E,k)}),Z.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),u&&([g,m]=Mh(u,!0),b.addEventListener("progress",g)),c&&b.upload&&([f,p]=Mh(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=x=>{b&&(r(!x||x.type?new wd(null,e,b):x),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const v=cz(s.url);if(v&&vr.protocols.indexOf(v)===-1){r(new ut("Unsupported protocol "+v+":",ut.ERR_BAD_REQUEST,e));return}b.send(i||null)})},vz=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof ut?d:new wd(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new ut(`timeout of ${t}ms exceeded`,ut.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Z.asap(l),c}},bz=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},wz=async function*(e,t){for await(const n of xz(e))yield*bz(n,t)},xz=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},j_=(e,t,n,r)=>{const s=wz(e,t);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let g=i+=f;n(g)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},E_=64*1024,{isFunction:ff}=Z,Sz=(({Request:e,Response:t})=>({Request:e,Response:t}))(Z.global),{ReadableStream:N_,TextEncoder:C_}=Z.global,T_=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_z=e=>{e=Z.merge.call({skipUndefined:!0},Sz,e);const{fetch:t,Request:n,Response:r}=e,s=t?ff(t):typeof fetch=="function",i=ff(n),a=ff(r);if(!s)return!1;const l=s&&ff(N_),c=s&&(typeof C_=="function"?(m=>w=>m.encode(w))(new C_):async m=>new Uint8Array(await new n(m).arrayBuffer())),u=i&&l&&T_(()=>{let m=!1;const w=new n(vr.origin,{body:new N_,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!w}),d=a&&l&&T_(()=>Z.isReadableStream(new r("").body)),f={stream:d&&(m=>m.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(w,b)=>{let h=w&&w[m];if(h)return h.call(w);throw new ut(`Response type '${m}' is not supported`,ut.ERR_NOT_SUPPORT,b)})});const g=async m=>{if(m==null)return 0;if(Z.isBlob(m))return m.size;if(Z.isSpecCompliantForm(m))return(await new n(vr.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(m)||Z.isArrayBuffer(m))return m.byteLength;if(Z.isURLSearchParams(m)&&(m=m+""),Z.isString(m))return(await c(m)).byteLength},p=async(m,w)=>{const b=Z.toFiniteNumber(m.getContentLength());return b??g(w)};return async m=>{let{url:w,method:b,data:h,signal:v,cancelToken:x,timeout:k,onDownloadProgress:E,onUploadProgress:$,responseType:P,headers:B,withCredentials:W="same-origin",fetchOptions:Y}=B$(m),ee=t||fetch;P=P?(P+"").toLowerCase():"text";let Q=vz([v,x&&x.toAbortSignal()],k),X=null;const fe=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let me;try{if($&&u&&b!=="get"&&b!=="head"&&(me=await p(B,h))!==0){let N=new n(w,{method:"POST",body:h,duplex:"half"}),L;if(Z.isFormData(h)&&(L=N.headers.get("content-type"))&&B.setContentType(L),N.body){const[A,_]=S_(me,Mh(__($)));h=j_(N.body,E_,A,_)}}Z.isString(W)||(W=W?"include":"omit");const ve=i&&"credentials"in n.prototype,Oe={...Y,signal:Q,method:b.toUpperCase(),headers:B.normalize().toJSON(),body:h,duplex:"half",credentials:ve?W:void 0};X=i&&new n(w,Oe);let T=await(i?ee(X,Y):ee(w,Oe));const M=d&&(P==="stream"||P==="response");if(d&&(E||M&&fe)){const N={};["status","statusText","headers"].forEach(R=>{N[R]=T[R]});const L=Z.toFiniteNumber(T.headers.get("content-length")),[A,_]=E&&S_(L,Mh(__(E),!0))||[];T=new r(j_(T.body,E_,A,()=>{_&&_(),fe&&fe()}),N)}P=P||"text";let I=await f[Z.findKey(f,P)||"text"](T,m);return!M&&fe&&fe(),await new Promise((N,L)=>{F$(N,L,{data:I,headers:Kr.from(T.headers),status:T.status,statusText:T.statusText,config:m,request:X})})}catch(ve){throw fe&&fe(),ve&&ve.name==="TypeError"&&/Load failed|fetch/i.test(ve.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,m,X,ve&&ve.response),{cause:ve.cause||ve}):ut.from(ve,ve&&ve.code,m,X,ve&&ve.response)}}},kz=new Map,U$=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let a=i.length,l=a,c,u,d=kz;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:_z(t)),d=u;return u};U$();const Mb={http:UU,xhr:yz,fetch:{get:U$}};Z.forEach(Mb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const $_=e=>`- ${e}`,jz=e=>Z.isFunction(e)||e===null||e===!1;function Ez(e,t){e=Z.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let a=0;a<n;a++){r=e[a];let l;if(s=r,!jz(r)&&(s=Mb[(l=String(r)).toLowerCase()],s===void 0))throw new ut(`Unknown adapter '${l}'`);if(s&&(Z.isFunction(s)||(s=s.get(t))))break;i[l||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map($_).join(`
`):" "+$_(a[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const z$={getAdapter:Ez,adapters:Mb};function Mm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wd(null,e)}function O_(e){return Mm(e),e.headers=Kr.from(e.headers),e.data=Lm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),z$.getAdapter(e.adapter||bd.adapter,e)(e).then(function(r){return Mm(e),r.data=Lm.call(e,e.transformResponse,r),r.headers=Kr.from(r.headers),r},function(r){return M$(r)||(Mm(e),r&&r.response&&(r.response.data=Lm.call(e,e.transformResponse,r.response),r.response.headers=Kr.from(r.response.headers))),Promise.reject(r)})}const V$="1.13.5",Ap={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ap[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const R_={};Ap.transitional=function(t,n,r){function s(i,a){return"[Axios v"+V$+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(t===!1)throw new ut(s(a," has been removed"+(n?" in "+n:"")),ut.ERR_DEPRECATED);return n&&!R_[a]&&(R_[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};Ap.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Nz(e,t,n){if(typeof e!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const l=e[i],c=l===void 0||a(l,i,e);if(c!==!0)throw new ut("option "+i+" must be "+c,ut.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ut("Unknown option "+i,ut.ERR_BAD_OPTION)}}const Vf={assertOptions:Nz,validators:Ap},ps=Vf.validators;let bo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new w_,response:new w_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=No(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Vf.assertOptions(r,{silentJSONParsing:ps.transitional(ps.boolean),forcedJSONParsing:ps.transitional(ps.boolean),clarifyTimeoutError:ps.transitional(ps.boolean),legacyInterceptorReqResOrdering:ps.transitional(ps.boolean)},!1),s!=null&&(Z.isFunction(s)?n.paramsSerializer={serialize:s}:Vf.assertOptions(s,{encode:ps.function,serialize:ps.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Vf.assertOptions(n,{baseUrl:ps.spelling("baseURL"),withXsrfToken:ps.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Z.merge(i.common,i[n.method]);i&&Z.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Kr.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(w){if(typeof w.runWhen=="function"&&w.runWhen(n)===!1)return;c=c&&w.synchronous;const b=n.transitional||Ib;b&&b.legacyInterceptorReqResOrdering?l.unshift(w.fulfilled,w.rejected):l.push(w.fulfilled,w.rejected)});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,f=0,g;if(!c){const m=[O_.bind(this),void 0];for(m.unshift(...l),m.push(...u),g=m.length,d=Promise.resolve(n);f<g;)d=d.then(m[f++],m[f++]);return d}g=l.length;let p=n;for(;f<g;){const m=l[f++],w=l[f++];try{p=m(p)}catch(b){w.call(this,b);break}}try{d=O_.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,g=u.length;f<g;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=No(this.defaults,t);const n=D$(t.baseURL,t.url,t.allowAbsoluteUrls);return I$(n,t.params,t.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(t){bo.prototype[t]=function(n,r){return this.request(No(r||{},{method:t,url:n,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,l){return this.request(No(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}bo.prototype[t]=n(),bo.prototype[t+"Form"]=n(!0)});let Cz=class H${constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,l){r.reason||(r.reason=new wd(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new H$(function(s){t=s}),cancel:t}}};function Tz(e){return function(n){return e.apply(null,n)}}function $z(e){return Z.isObject(e)&&e.isAxiosError===!0}const Ty={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ty).forEach(([e,t])=>{Ty[t]=e});function q$(e){const t=new bo(e),n=k$(bo.prototype.request,t);return Z.extend(n,bo.prototype,t,{allOwnKeys:!0}),Z.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return q$(No(e,s))},n}const jn=q$(bd);jn.Axios=bo;jn.CanceledError=wd;jn.CancelToken=Cz;jn.isCancel=M$;jn.VERSION=V$;jn.toFormData=Rp;jn.AxiosError=ut;jn.Cancel=jn.CanceledError;jn.all=function(t){return Promise.all(t)};jn.spread=Tz;jn.isAxiosError=$z;jn.mergeConfig=No;jn.AxiosHeaders=Kr;jn.formToJSON=e=>L$(Z.isHTMLForm(e)?new FormData(e):e);jn.getAdapter=z$.getAdapter;jn.HttpStatusCode=Ty;jn.default=jn;const{Axios:S8,AxiosError:_8,CanceledError:k8,isCancel:j8,CancelToken:E8,VERSION:N8,all:C8,Cancel:T8,isAxiosError:$8,spread:O8,toFormData:R8,AxiosHeaders:A8,HttpStatusCode:P8,formToJSON:I8,getAdapter:L8,mergeConfig:M8}=jn,Fb="api_base_override_v1",Db="api_base_secondary_v1",Bb="api_allow_local_fallback_v1",Ub="api_last_healthy_v1",Oz=new Set([408,429,502,503,504]),Rz=er("http://127.0.0.1:3000"),Az=er("http://localhost:3000"),Pz=er("http://127.0.0.1:3000");function zb(){return typeof window<"u"}function Hf(e){if(!zb())return"";try{return String(window.localStorage.getItem(e)||"").trim()}catch{return""}}function ja(e,t){if(zb())try{t===""||t==null?window.localStorage.removeItem(e):window.localStorage.setItem(e,String(t))}catch{}}function Iz(e,t=!0){const n=Hf(e);return n?n==="1"||n.toLowerCase()==="true":!!t}function Lz(e=[]){const t=[],n=new Set;return e.forEach(r=>{const s=String(r||"").trim();!s||n.has(s)||(n.add(s),t.push(s))}),t}function Vb(e){const t=String(e||"").trim();return t?t.startsWith("/")?t:`/${t}`:"/"}function Mz(e){var c,u;const t=er(e);if(!t)return!1;let n;try{n=new URL(t)}catch{return!1}const r=String(n.hostname||"").toLowerCase();if(!(r==="localhost"||r==="127.0.0.1"))return!1;if(!zb())return!0;const i=String(((c=window.location)==null?void 0:c.hostname)||"").toLowerCase(),a=String(((u=window.location)==null?void 0:u.protocol)||"").toLowerCase(),l=i==="localhost"||i==="127.0.0.1";return n.protocol==="https:"||a==="http:"?!0:l}function Fz(e,t=!0){const n=e.allowLocalFallback!==!1,r=[e.override,e.envPrimary,e.secondary,e.envSecondary];t&&n&&Mz(e.localFallback)&&r.push(e.localFallback);const s=Lz(r.map(a=>er(a)).filter(Boolean)),i=er(e.lastHealthyBase);return!i||!s.includes(i)?s:[i,...s.filter(a=>a!==i)]}function K$(e){const t=Number(e||0);return Oz.has(t)}function W$(e){const t=String((e==null?void 0:e.message)||"").toLowerCase();return String((e==null?void 0:e.code)||"").toLowerCase()==="econnaborted"||t.includes("timeout")||t.includes("timed out")}function $y(e,t){const n=Math.max(80,Number(e||350)),r=Math.max(0,Number(t||0));return n*(r+1)}async function Oy(e){const t=Math.max(0,Number(e||0));t&&await new Promise(n=>setTimeout(n,t))}function G$(e,t){return`${er(e)}${Vb(t)}`}async function J$(e,t={},n=12e3){const r=Math.max(500,Number(n||12e3)),s=new AbortController,i=setTimeout(()=>s.abort(),r);try{return await fetch(e,{...t,signal:s.signal})}finally{clearTimeout(i)}}function Dz(e){return e?e.name==="AbortError"?"Timeout":e.message||"Network error":"Network error"}function ti(e){return String(e||"").trim()}function Bz(e=""){const t=String(e||"").toLowerCase();return t.includes("network error")||t.includes("failed to fetch")||t.includes("net::")||t.includes("cors")}function hf(e,t){const n=ti(e),r=ti(t);return n?r?`${/[.!?]$/.test(n)?n:`${n}.`} ${r}`:n:r}function Y$(e=null){const t=Ry();return!e||typeof e!="object"?t:{...t,override:e.override!==void 0?er(e.override):t.override,secondary:e.secondary!==void 0?er(e.secondary):t.secondary,allowLocalFallback:e.allowLocalFallback!==void 0?!!e.allowLocalFallback:t.allowLocalFallback}}function Fh(e){const t=er(e);t&&ja(Ub,t)}function er(e){const t=String(e||"").trim();if(!t)return"";const n=/^(localhost|127\.0\.0\.1)(:\d+)?(\/.*)?$/i.test(t),r=/^https?:\/\//i.test(t)?t:n?`http://${t}`:`https://${t}`;try{const s=new URL(r);if(!/^https?:$/.test(s.protocol))return"";const i=s.pathname==="/"?"":s.pathname.replace(/\/+$/,"");return`${s.protocol}//${s.host}${i}`}catch{return""}}function Ry(){return{envPrimary:Rz,envSecondary:Az,localFallback:Pz,override:er(Hf(Fb)),secondary:er(Hf(Db)),allowLocalFallback:Iz(Bb,!0),lastHealthyBase:er(Hf(Ub))}}function Uz(e={}){const t=Y$(e);ja(Fb,t.override||""),ja(Db,t.secondary||""),ja(Bb,t.allowLocalFallback?"1":"0")}function zz(){ja(Fb,""),ja(Db,""),ja(Bb,""),ja(Ub,"")}function Hb({includeLocalFallback:e=!0,configOverride:t=null}={}){return Fz(Y$(t),e)}async function Vz(e,{timeoutMs:t=2500}={}){const n=er(e);if(!n)return{ok:!1,base:"",status:0,error:"URL backend tidak valid"};try{const r=await J$(G$(n,"/health"),{method:"GET",headers:{Accept:"application/json"}},t);return r.ok?(Fh(n),{ok:!0,base:n,status:r.status,error:""}):{ok:!1,base:n,status:r.status,error:`HTTP ${r.status}`}}catch(r){return{ok:!1,base:n,status:0,error:Dz(r)}}}async function Hz(e=null,{timeoutMs:t=2500,includeLocalFallback:n=!0}={}){const r=Hb({includeLocalFallback:n,configOverride:e}),s=[];for(const i of r){const a=await Vz(i,{timeoutMs:t});if(s.push(a),a.ok)return{ok:!0,activeBase:a.base,checked:s}}return{ok:!1,activeBase:"",checked:s}}async function Po(e,t={},n={}){const r=Math.max(800,Number(n.timeoutMs||15e3)),s=Math.max(0,Number(n.retryAttempts??0)),i=Math.max(80,Number(n.retryDelayMs||350)),a=n.includeLocalFallback!==!1,l=n.configOverride||null,c=Hb({includeLocalFallback:a,configOverride:l}),u=Vb(e);let d=null;for(let f=0;f<c.length;f+=1){const g=c[f];for(let p=0;p<=s;p+=1)try{const m=await J$(G$(g,u),t,r);if(!K$(m.status))return Fh(g),m;if(d=new Error(`HTTP ${m.status}`),p<s){await Oy($y(i,p));continue}if(!(f<c.length-1))return Fh(g),m;break}catch(m){d=m;const w=W$(m),b=p<s;if(w&&b){await Oy($y(i,p));continue}if(!(f<c.length-1))throw m;break}}throw d||new Error("Semua endpoint backend tidak dapat diakses")}function Ay(e,t={}){var u,d,f,g;const n=ti(t.fallback)||"Terjadi kesalahan saat memproses permintaan.",r=Number(((u=e==null?void 0:e.response)==null?void 0:u.status)||(e==null?void 0:e.status)||0),s=(d=e==null?void 0:e.response)==null?void 0:d.data,i=s&&typeof s=="object"?s.error||{}:{},a=ti(i==null?void 0:i.code).toUpperCase(),l=ti((i==null?void 0:i.message)||(s==null?void 0:s.message)||(e==null?void 0:e.message)),c=ti((f=i==null?void 0:i.details)==null?void 0:f.classification).toLowerCase();if(!r){const p=ti((e==null?void 0:e.message)||"");return ti(e==null?void 0:e.code).toLowerCase()==="econnaborted"||p.toLowerCase().includes("timeout")||p.toLowerCase().includes("timed out")?"Koneksi timeout. Server atau provider terlalu lama merespons. Coba ulang atau ganti model.":Bz(p)?"Backend tidak bisa dihubungi. Periksa URL backend di Settings atau jalankan backend lokal.":l||n}if(r===401)return"Sesi login tidak valid atau sudah habis. Silakan login ulang.";if(r===403)return a==="EMAIL_NOT_ALLOWED"?"Akun ini tidak masuk allowlist internal. Hubungi owner aplikasi.":l||"Akses ditolak oleh server.";if(r===404)return l||"Endpoint tidak ditemukan di backend.";if(r===429||c==="rate_limit")return hf(l||"Request dibatasi sementara oleh provider (rate limit)","Tunggu 15-30 detik lalu coba lagi, atau ganti model/provider.");if(r===503){const p=l.toLowerCase();return p.includes("supabase admin client")?"Supabase admin client belum dikonfigurasi di backend.":p.includes("encryption")?"Enkripsi API key provider belum dikonfigurasi di backend.":l||"Layanan backend sedang tidak tersedia (503)."}if(r===400&&a==="KEY_NOT_CONFIGURED")return"API key provider belum dikonfigurasi. Buka Settings lalu simpan key provider terlebih dulu.";if(r===400&&a==="VALIDATION_ERROR"){const p=Array.isArray(i==null?void 0:i.details)?i.details.filter(Boolean):[];return p.length?`${l||"Validasi gagal"} (${p.join("; ")})`:l||"Validasi request gagal."}if(r===400&&a==="PRESET_CONTRACT_REJECTED"){const p=i!=null&&i.details&&typeof i.details=="object"?i.details:{},m=ti(p.platform),w=Array.isArray(p.errors)?p.errors.filter(Boolean):[],b=Array.isArray(p.warnings)?p.warnings.filter(Boolean):[],h=ti((g=p==null?void 0:p.action)==null?void 0:g.tip),v=w.length?w.join("; "):"Field preset belum sesuai kontrak platform.",x=b.length?` Peringatan: ${b.join("; ")}`:"",k=m?` (${m})`:"",E=h?` ${h}`:" Buka Templates untuk Edit atau Hapus preset ini.";return`Preset ditolak${k}: ${v}.${x}${E}`}return r===502||r===504||c==="timeout"||c==="json_invalid"?c==="json_invalid"?hf(l||"Respons provider tidak valid JSON","Coba ulang, atau ganti model/provider di Settings."):c==="timeout"||r===504?hf(l||"Provider timeout","Coba ulang, atau pilih model yang lebih ringan."):hf(l||"Provider AI gagal merespons","Coba ulang atau ganti model/provider."):l||n}async function Rt(e={},t={}){var f;const n=Math.max(800,Number(t.timeoutMs||15e3)),r=Math.max(0,Number(t.retryAttempts??0)),s=Math.max(80,Number(t.retryDelayMs||350)),i=t.includeLocalFallback!==!1,a=t.configOverride||null,l=Hb({includeLocalFallback:i,configOverride:a}),c=String(e.url||"").trim();if(/^https?:\/\//i.test(c))return jn({...e,timeout:e.timeout??n});const u=Vb(c);let d=null;for(let g=0;g<l.length;g+=1){const p=l[g];for(let m=0;m<=r;m+=1)try{const w=await jn({...e,baseURL:p,url:u,timeout:e.timeout??n});return Fh(p),w}catch(w){d=w;const b=Number(((f=w==null?void 0:w.response)==null?void 0:f.status)||0),h=!b||K$(b)||W$(w),v=m<r;if(h&&v){await Oy($y(s,m));continue}const x=g<l.length-1;if(!h||!x)throw w;break}}throw d||new Error("Semua endpoint backend tidak dapat diakses")}function qz(){const{register:e,handleSubmit:t}=i$(),[n,r]=y.useState(!1),[s,i]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState(null),[d,f]=y.useState(0),[g,p]=y.useState(null),m=qi(),w=!!(g!=null&&g.publicSignupEnabled);y.useEffect(()=>{let h;return d>0&&(h=setInterval(()=>f(v=>v-1),1e3)),()=>clearInterval(h)},[d]),y.useEffect(()=>{let h=!0;async function v(){var x;try{const k=await Rt({method:"get",url:"/api/auth/signup-policy"});if(!h)return;(x=k.data)!=null&&x.ok&&p(k.data.data)}catch{h&&p(null)}}return v(),()=>{h=!1}},[]),y.useEffect(()=>{g&&!w&&n&&r(!1)},[g,w,n]);async function b(h){var v,x,k,E,$,P,B;i(!0),l(null),u(null);try{if(n){if(!((v=(await Rt({method:"post",url:"/api/auth/sign-up",data:{email:h.email,password:h.password}})).data)!=null&&v.ok))throw new Error("Failed to create account");u("Akun berhasil dibuat. Silakan cek email untuk verifikasi lalu login."),r(!1);try{const Y=await Rt({method:"get",url:"/api/auth/signup-policy"});(x=Y.data)!=null&&x.ok&&p(Y.data.data)}catch{}}else{const{error:W}=await Pt.auth.signInWithPassword({email:h.email,password:h.password});if(W)throw W;const{data:Y}=await Pt.auth.getSession(),ee=(k=Y==null?void 0:Y.session)==null?void 0:k.access_token;if(!ee)throw new Error("Sesi login tidak ditemukan");try{await Rt({method:"get",url:"/api/auth/session-access",headers:{Authorization:`Bearer ${ee}`}})}catch(Q){throw await Pt.auth.signOut(),Q}m("/dashboard")}}catch(W){const Y=((E=W==null?void 0:W.response)==null?void 0:E.status)||(W==null?void 0:W.status),ee=(P=($=W==null?void 0:W.response)==null?void 0:$.data)==null?void 0:P.error,Q=(ee==null?void 0:ee.message)||(W==null?void 0:W.message)||((W==null?void 0:W.error_description)??null)||JSON.stringify(W),X=String(Q||"").trim();if(Y===429||/too many requests/i.test(Q))l("Too many requests. Please wait 30 seconds before trying again."),f(30);else if(Y===403)((ee==null?void 0:ee.code)||"")==="EMAIL_NOT_ALLOWED"?l("Akun ini tidak masuk allowlist internal. Hubungi pemilik aplikasi."):((ee==null?void 0:ee.code)||"")==="SIGNUP_DISABLED"?l("Pendaftaran akun dinonaktifkan. Hubungi owner untuk dibuatkan akun."):l(X||"Akses ditolak.");else if(Y===400)if(/email_not_confirmed|Email not confirmed/i.test(X))l("Email belum dikonfirmasi. Periksa email Anda untuk link verifikasi atau minta admin mengkonfirmasi akun dari Supabase Dashboard.");else if(/invalid login credentials/i.test(X))l("Email/password salah, atau akun belum ada di project Supabase yang sedang aktif.");else{const fe=((B=W==null?void 0:W.response)==null?void 0:B.data)??(W==null?void 0:W.response)??null;l(`Login gagal: ${X}${fe?" - "+JSON.stringify(fe):""}`)}else l(Y===409||typeof X=="string"?X:JSON.stringify(X))}finally{i(!1)}}return o.jsx(We,{className:"mx-auto",style:{maxWidth:480},children:o.jsxs(We.Body,{children:[o.jsx("h3",{className:"mb-3",children:n?"Sign up":"Sign in"}),a&&o.jsx(Lt,{variant:"danger",children:a}),c&&o.jsx(Lt,{variant:"success",children:c}),g&&!w&&o.jsx(Lt,{variant:"info",children:"Pendaftaran akun publik dinonaktifkan. Akun baru dibuat manual oleh owner."}),n&&g&&o.jsxs(Lt,{variant:g.signupOpen?"info":"warning",children:["Slot pendaftaran: ",g.currentUsers,"/",g.maxUsers]}),o.jsxs(U,{onSubmit:t(b),children:[o.jsxs(U.Group,{className:"mb-2",controlId:"email",children:[o.jsx(U.Label,{children:"Email"}),o.jsx(U.Control,{type:"email",placeholder:"you@example.com",...e("email",{required:!0})})]}),o.jsxs(U.Group,{className:"mb-3",controlId:"password",children:[o.jsx(U.Label,{children:"Password"}),o.jsx(U.Control,{type:"password",...e("password",{required:!0})})]}),o.jsxs("div",{className:"d-grid gap-2",children:[o.jsx(oe,{variant:"primary",type:"submit",disabled:s,children:s?o.jsx(Ri,{animation:"border",size:"sm"}):n?"Create account":"Sign in"}),w&&o.jsx(oe,{variant:"outline-secondary",onClick:()=>r(h=>!h),children:n?"Have an account? Sign in":"Don't have account? Sign up"})]})]})]})})}function Kz(){return o.jsx(Eh,{className:"py-5",children:o.jsx(Ct,{children:o.jsx(Se,{md:6,className:"mx-auto",children:o.jsx(qz,{})})})})}const A_="generations_fallback_queue",Wz="generations_fallback_queue:",Gz="generations_local_draft:",Q$=200,P_=30;function X$(e,t){try{return JSON.parse(e)}catch{return t}}function Z$(e){return`${Wz}${e||"anonymous"}`}function I_(e){const t=localStorage.getItem(e),n=X$(t||"[]",[]);return Array.isArray(n)?n:[]}function Wl(e){const t=Z$(e),n=I_(t);if(n.length)return n;if(e){const r=I_(A_);if(r.length)return xd(e,r),localStorage.removeItem(A_),r}return n}function xd(e,t){const n=Array.isArray(t)?t.slice(0,Q$):[];localStorage.setItem(Z$(e),JSON.stringify(n))}function eO(e){return`${Gz}${e||"anonymous"}`}function Sd(e){const t=localStorage.getItem(eO(e)),n=X$(t||"[]",[]);return Array.isArray(n)?n:[]}function Pp(e,t){const n=Array.isArray(t)?t.slice(0,Q$):[];localStorage.setItem(eO(e),JSON.stringify(n))}function L_(e){const t=String((e==null?void 0:e.created_at)||"").trim();if(!t)return null;const n=Date.parse(t);return Number.isFinite(n)?n:null}function tO(e,t){return{user_id:t,user_display_name:e.user_display_name||null,topic:e.topic||"",platform:e.platform||"",provider:e.provider||"",result:e.result||null,created_at:e.created_at||new Date().toISOString()}}async function nO({supabase:e,entry:t}){var n,r,s,i,a,l,c,u;if(!e)return{ok:!1,skipped:!0,reason:"supabase_missing"};try{const{data:d}=await e.auth.getSession(),f=(n=d==null?void 0:d.session)==null?void 0:n.access_token;if(!f)return{ok:!1,skipped:!0,reason:"session_missing"};const g=await Rt({method:"post",url:"/api/generations/save",headers:{Authorization:`Bearer ${f}`},data:{entry:t}});if(!((r=g.data)!=null&&r.ok)){const p=(s=g.data)==null?void 0:s.error;return{ok:!1,skipped:!1,reason:(p==null?void 0:p.code)||"api_rejected",error:p||null}}return{ok:!0,skipped:!1,mirrored:!!((l=(a=(i=g.data)==null?void 0:i.data)==null?void 0:a.mirror)!=null&&l.mirrored),mirror:((u=(c=g.data)==null?void 0:c.data)==null?void 0:u.mirror)||null}}catch(d){return{ok:!1,skipped:!1,reason:"api_failed",error:d}}}function Jz(e){const t=String((e==null?void 0:e.message)||"").toLowerCase(),n=String((e==null?void 0:e.details)||"").toLowerCase(),r=String((e==null?void 0:e.hint)||"").toLowerCase();return t.includes("user_display_name")&&(t.includes("schema cache")||t.includes("column")||n.includes("column")||r.includes("column"))}async function rO(e,t){const{error:n}=await e.from("generations").insert([t]);if(!n)return{error:null,degraded:!1};if(Jz(n)){const r={...t};delete r.user_display_name;const s=await e.from("generations").insert([r]);return s.error?{error:s.error,degraded:!0}:{error:null,degraded:!0}}return{error:n,degraded:!1}}function Yz(e,t){return{id:e.id||`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,user_id:t,user_display_name:e.user_display_name||null,topic:e.topic||"",platform:e.platform||"",provider:e.provider||"",result:e.result||null,created_at:e.created_at||new Date().toISOString(),_localFallback:!0}}function Qz(e,t){return{id:e.id||`draft-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,user_id:t,user_display_name:e.user_display_name||null,topic:e.topic||"",platform:e.platform||"",provider:e.provider||"",result:e.result||null,created_at:e.created_at||new Date().toISOString(),_localDraft:!0}}function M_(e,t){const n=Wl(t);n.unshift(e),xd(t,n)}function sO(e){return Wl(e).map(t=>Yz(t,e))}function iO(e,t){if(!e||typeof e!="object")return;const n=String(e.id||"").trim(),r={...e,id:n||`draft-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,created_at:e.created_at||new Date().toISOString()},i=Sd(t).filter(a=>String((a==null?void 0:a.id)||"")!==r.id);i.unshift(r),Pp(t,i)}function Xz(e,t){const n=String(t||"").trim();if(!n)return;const s=Sd(e).filter(i=>String((i==null?void 0:i.id)||"")!==n);Pp(e,s)}function Zz(e,t=[]){const n=new Set((t||[]).map(a=>String(a||"").trim()).filter(Boolean));if(!n.size)return 0;const r=Sd(e),s=r.filter(a=>!n.has(String((a==null?void 0:a.id)||"").trim())),i=r.length-s.length;return i>0&&Pp(e,s),i}function e3(e,t=[]){const n=new Set((t||[]).map(a=>String(a||"").trim()).filter(Boolean));if(!n.size)return 0;const r=Wl(e),s=r.filter(a=>!n.has(String((a==null?void 0:a.id)||"").trim())),i=r.length-s.length;return i>0&&xd(e,s),i}function F_(e,t=[]){const n=Zz(e,t),r=e3(e,t);return{removedDraft:n,removedFallback:r,removedTotal:n+r}}function t3(e,t=P_){const n=Math.max(1,Number(t)||P_),r=Date.now()-n*24*60*60*1e3,s=Sd(e),i=s.filter(d=>{const f=L_(d);return Number.isFinite(f)?f>=r:!0}),a=s.length-i.length;a>0&&Pp(e,i);const l=Wl(e),c=l.filter(d=>{const f=L_(d);return Number.isFinite(f)?f>=r:!0}),u=l.length-c.length;return u>0&&xd(e,c),{removedDraft:a,removedFallback:u,removedTotal:a+u,maxAgeDays:n}}function aO(e){return Sd(e).map(t=>Qz(t,e))}async function oO({supabase:e,userId:t,entry:n}){if(!e||!t)return M_(n,t),{ok:!1,savedTo:"local"};const r=await nO({supabase:e,entry:n});if(r.ok)return{ok:!0,savedTo:"supabase",mirrored:!!r.mirrored,mirror:r.mirror||null};const s=tO(n,t),{error:i,degraded:a}=await rO(e,s);if(i){const l=String((i==null?void 0:i.message)||"").toLowerCase(),c=String((i==null?void 0:i.code)||"").trim(),u=String((i==null?void 0:i.details)||"").toLowerCase(),d=c==="42501"||l.includes("permission denied")||l.includes("row-level security")||u.includes("policy");return M_(n,t),{ok:!1,savedTo:"local",error:i,reason:d?"forbidden_rls":"insert_failed"}}return{ok:!0,savedTo:"supabase",degraded:a}}async function lO({supabase:e,userId:t}){if(!e||!t)return{synced:0,remaining:Wl(t).length};const n=Wl(t);if(!n.length)return{synced:0,remaining:0};let r=0;const s=[];for(const i of n){if((await nO({supabase:e,entry:i})).ok){r+=1;continue}const l=tO(i,t),{error:c}=await rO(e,l);c?s.push(i):r+=1}return xd(t,s),{synced:r,remaining:s.length}}const D_=[7,14,30],Fm=500,n3=200,r3=8,s3=["Gemini","OpenAI","OpenRouter","Groq","Cohere AI","DeepSeek","Hugging Face"],B_=[{key:"all",label:"All Source"},{key:"supabase",label:"Cloud"},{key:"local",label:"Local"}],U_=[{key:"all",label:"All Decision"},{key:"GO",label:"GO"},{key:"REVISE",label:"REVISE"},{key:"BLOCK",label:"BLOCK"}];function hu(e){const t=Date.parse(String((e==null?void 0:e.created_at)||""));return Number.isFinite(t)?t:0}function $l(e){return e!=null&&e._localDraft?"draft":e!=null&&e._localFallback?"offline":"supabase"}function z_(e){return e==="draft"?"Draft Lokal":e==="offline"?"Queue Offline":"Supabase"}function i3(e){return e==="draft"?"secondary":e==="offline"?"warning":"success"}function V_(e){const t=$l(e);return t==="draft"?1:t==="offline"?2:3}function va(e){var t,n,r;return String(((r=(n=(t=e==null?void 0:e.result)==null?void 0:t.meta)==null?void 0:n.aiDecision)==null?void 0:r.status)||"").toUpperCase()}function a3(e){return e==="GO"?"success":e==="REVISE"?"warning":e==="BLOCK"?"danger":"secondary"}function o3(e){return e==="GO"?"#198754":e==="REVISE"?"#ffc107":e==="BLOCK"?"#dc3545":"#6c757d"}function l3(e){const t=String(e||"").trim().toLowerCase();return t==="go-rate-low"?{decision:"REVISE"}:t==="score-low"?{sortBy:"score_asc"}:t==="block-exist"?{decision:"BLOCK"}:t==="provider-risk"?{decision:"REVISE",sortBy:"score_asc"}:t==="inactive-keys"?{_link:"/settings"}:t==="empty-filter"?{}:{}}function c3(e){const t=String(e||"").trim().toLowerCase();return["secondary","info","warning","danger","success"].includes(t)?t:"secondary"}function Py(e){var t,n;return String(((n=(t=e==null?void 0:e.result)==null?void 0:t.meta)==null?void 0:n.model)||"").trim()}function sl(e){var r,s,i,a;const t=Number((s=(r=e==null?void 0:e.result)==null?void 0:r.meta)==null?void 0:s.finalScore);if(Number.isFinite(t))return t;const n=Number((a=(i=e==null?void 0:e.result)==null?void 0:i.meta)==null?void 0:a.qualityScore);return Number.isFinite(n)?n:null}function H_(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e||"").trim())}function Dm(e,t){var i,a;const n=String((e==null?void 0:e.user_display_name)||"").trim();if(n&&!H_(n))return n;const r=String((e==null?void 0:e.user_id)||"").trim(),s=String((t==null?void 0:t.id)||"").trim();if(r&&r===s){const l=String(((i=t==null?void 0:t.user_metadata)==null?void 0:i.display_name)||((a=t==null?void 0:t.user_metadata)==null?void 0:a.name)||"").trim();return l||"You"}return n&&H_(n)?n.split("@")[0]:"-"}function cO(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={gemini:"Gemini",openai:"OpenAI","open ai":"OpenAI",openrouter:"OpenRouter",openroute:"OpenRouter",groq:"Groq",cohere:"Cohere AI","cohere ai":"Cohere AI",deepseek:"DeepSeek",huggingface:"Hugging Face","hugging face":"Hugging Face"};return r[n]?r[n]:s3.find(i=>i.toLowerCase()===n)||t}function Bm(e){var t,n;return String((e==null?void 0:e.platform)||((n=(t=e==null?void 0:e.result)==null?void 0:t.meta)==null?void 0:n.platform)||"").trim()}function il(e){var t,n;return cO((e==null?void 0:e.provider)||((n=(t=e==null?void 0:e.result)==null?void 0:t.meta)==null?void 0:n.provider))}function q_(e){var t,n;return String((e==null?void 0:e.topic)||((t=e==null?void 0:e.result)==null?void 0:t.topic)||((n=e==null?void 0:e.result)==null?void 0:n.title)||"-").trim()}function u3(e=[],t=[],n=[]){const r=new Map;return[...t,...n,...e].forEach((i,a)=>{const c=String((i==null?void 0:i.id)||"").trim()||`row-${a}-${String((i==null?void 0:i.created_at)||"")}`,u=r.get(c);(!u||V_(i)>=V_(u))&&r.set(c,i)}),Array.from(r.values()).sort((i,a)=>hu(a)-hu(i))}function uO(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function d3(e=7){const t=[];for(let n=e-1;n>=0;n-=1){const r=new Date;r.setHours(0,0,0,0),r.setDate(r.getDate()-n),t.push({key:uO(r),label:r.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit"})})}return t}function al(e=[]){return e.length?e.reduce((n,r)=>n+Number(r||0),0)/e.length:null}function f3(e){var r,s,i,a,l;const t=Number((i=(s=(r=e==null?void 0:e.result)==null?void 0:r.meta)==null?void 0:s.providerRequest)==null?void 0:i.elapsedMs);if(Number.isFinite(t)&&t>0)return t;const n=Number((l=(a=e==null?void 0:e.result)==null?void 0:a.meta)==null?void 0:l.providerLatencyMs);return Number.isFinite(n)&&n>0?n:null}function h3(e){var n,r,s;const t=Number((s=(r=(n=e==null?void 0:e.result)==null?void 0:n.meta)==null?void 0:r.providerRequest)==null?void 0:s.attemptsUsed);return Number.isFinite(t)&&t>=1?t:null}function p3(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"-":t<1e3?`${Math.round(t)}ms`:`${(t/1e3).toFixed(2)}s`}function K_(e=[],t="all"){return t==="supabase"?e.filter(n=>$l(n)==="supabase"):t==="local"?e.filter(n=>$l(n)!=="supabase"):e}function m3(e=[],t="all"){const n=String(t||"all").toUpperCase();return n==="ALL"?e:e.filter(r=>va(r)===n)}function g3(e=[]){const t={GO:0,REVISE:0,BLOCK:0,UNKNOWN:0};return e.forEach(n=>{const r=va(n);if(r==="GO"||r==="REVISE"||r==="BLOCK"){t[r]+=1;return}t.UNKNOWN+=1}),t}function Um(e=[],t,n=4){const r=new Map;return e.forEach(s=>{const i=String(t(s)||"").trim();i&&r.set(i,(r.get(i)||0)+1)}),Array.from(r.entries()).map(([s,i])=>({label:s,count:i})).sort((s,i)=>i.count-s.count).slice(0,n)}function y3(e){return e==="healthy"?"success":e==="watch"||e==="vision"?"warning":e==="tune"?"danger":e==="ready"?"info":e==="inactive"||e==="idle"?"secondary":"dark"}function v3(e){return e==="healthy"?"Healthy":e==="watch"?"Watch":e==="vision"?"Vision Check":e==="tune"?"Needs Tune":e==="ready"?"Ready":e==="inactive"?"Inactive":e==="idle"?"Idle":"Unknown"}function b3(e){return e==="healthy"?"Performa stabil: key aktif, kualitas baik, dan siap dipakai.":e==="watch"?"Perlu dipantau: ada indikasi penurunan skor/GO rate atau latency provider sedang tinggi.":e==="vision"?"Perlu cek model vision: ada kebutuhan gambar yang belum optimal.":e==="tune"?"Butuh tuning: risiko kualitas tinggi, evaluasi model/prompt disarankan.":e==="ready"?"Siap dipakai: key aktif dan bisa generate.":e==="inactive"?"Tidak aktif: key belum dikonfigurasi atau dimatikan.":e==="idle"?"Aktif tapi belum banyak dipakai pada window saat ini.":"Status belum dikenali."}function w3(e,t){return e?e.configured?e.isActive?"Key on":"Key off":"No key":t>0?"Server key":"n/a"}function W_(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function G_(e=7){const t=new Date;t.setHours(23,59,59,999);const n=new Date;return n.setHours(0,0,0,0),n.setDate(n.getDate()-(Math.max(1,Number(e)||7)-1)),{from:W_(n),to:W_(t)}}function x3(e=[],t=2){const n=new Map;return e.forEach(r=>{const s=il(r),i=Py(r);if(!s||!i)return;const a=`${s}|||${i}`,l=n.get(a)||{provider:s,model:i,label:`${s} / ${i}`,count:0,scoreValues:[],decisionTotal:0,decisionGo:0};l.count+=1;const c=sl(r);Number.isFinite(c)&&l.scoreValues.push(c);const u=va(r);u&&(l.decisionTotal+=1),u==="GO"&&(l.decisionGo+=1),n.set(a,l)}),Array.from(n.values()).filter(r=>r.count>=t).map(r=>({...r,avgScore:al(r.scoreValues),goRate:r.decisionTotal>0?r.decisionGo/r.decisionTotal*100:null}))}function bi(e){const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t}function zm(e,t,n){const r=new Blob([n],{type:t}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=e,i.click(),URL.revokeObjectURL(s)}async function dc(){var e;try{const{data:t}=await Pt.auth.getSession(),n=(e=t==null?void 0:t.session)==null?void 0:e.access_token;return n?{Authorization:`Bearer ${n}`}:{}}catch{return{}}}async function S3(){try{const e=await dc();if(!e.Authorization)return{rows:[],error:"Sesi login tidak ditemukan"};const t=await Po("/api/settings/provider-keys",{headers:e});if(!t.ok)return{rows:[],error:`Provider key status HTTP ${t.status}`};const n=await t.json();return!(n!=null&&n.ok)||!Array.isArray(n==null?void 0:n.data)?{rows:[],error:"Response provider key tidak valid"}:{rows:n.data,error:""}}catch{return{rows:[],error:"Gagal memuat status provider key"}}}async function _3(e){const t=[];for(let n=0;n<n3;n+=1){const r=n*Fm,s=r+Fm-1,i=await Pt.from("generations").select("id,user_id,user_display_name,topic,platform,provider,result,created_at").gte("created_at",e).order("created_at",{ascending:!1}).range(r,s);if(i.error)return{rows:t,error:i.error,truncated:!1};const a=Array.isArray(i.data)?i.data:[];if(t.push(...a),a.length<Fm)return{rows:t,error:null,truncated:!1}}return{rows:t,error:null,truncated:!0}}function _d(e,t="Request gagal"){var n;return String(((n=e==null?void 0:e.error)==null?void 0:n.message)||t).trim()||t}async function k3(e=120){const t=await dc();if(!t.Authorization)return{ok:!1,data:[],error:"Sesi login tidak ditemukan"};const n=await Po(`/api/dashboard/alerts?limit=${Math.max(1,Math.min(e,200))}`,{headers:t}),r=await n.json().catch(()=>({}));return!n.ok||!(r!=null&&r.ok)?{ok:!1,data:[],error:_d(r,`Gagal memuat alerts (${n.status})`)}:{ok:!0,data:Array.isArray(r.data)?r.data:[],error:""}}async function j3(e=[]){const t=await dc();if(!t.Authorization)return{ok:!1,data:[],error:"Sesi login tidak ditemukan"};const n=await Po("/api/dashboard/alerts/sync",{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({alerts:e})}),r=await n.json().catch(()=>({}));if(!n.ok||!(r!=null&&r.ok))return{ok:!1,data:[],error:_d(r,`Gagal sinkron alert (${n.status})`)};const s=r.data;return Array.isArray(s)?{ok:!0,data:s,mirror:null,error:""}:s&&typeof s=="object"?{ok:!0,data:Array.isArray(s.rows)?s.rows:[],mirror:s.mirror||null,error:""}:{ok:!0,data:[],mirror:null,error:""}}async function E3(e,t){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n||!r)return{ok:!1,data:null,error:"Alert id/action tidak valid"};const s=await dc();if(!s.Authorization)return{ok:!1,data:null,error:"Sesi login tidak ditemukan"};const i=await Po(`/api/dashboard/alerts/${encodeURIComponent(n)}/${encodeURIComponent(r)}`,{method:"POST",headers:s}),a=await i.json().catch(()=>({}));return!i.ok||!(a!=null&&a.ok)?{ok:!1,data:null,error:_d(a,`Gagal update alert (${i.status})`)}:{ok:!0,data:a.data||null,error:""}}async function N3({windowDays:e,sourceScope:t,decisionScope:n,limit:r=20}){const s=await dc();if(!s.Authorization)return{ok:!1,data:[],error:"Sesi login tidak ditemukan"};const i=new URLSearchParams;i.set("limit",String(Math.max(1,Math.min(r,120)))),i.set("windowDays",String(Math.max(1,Number(e)||7))),i.set("sourceScope",String(t||"all")),i.set("decisionScope",String(n||"all").toLowerCase());const a=await Po(`/api/dashboard/snapshots?${i.toString()}`,{headers:s}),l=await a.json().catch(()=>({}));return!a.ok||!(l!=null&&l.ok)?{ok:!1,data:[],error:_d(l,`Gagal memuat snapshots (${a.status})`)}:{ok:!0,data:Array.isArray(l.data)?l.data:[],error:""}}async function C3(e){const t=await dc();if(!t.Authorization)return{ok:!1,data:null,error:"Sesi login tidak ditemukan"};const n=await Po("/api/dashboard/snapshots/run",{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e||{})}),r=await n.json().catch(()=>({}));return!n.ok||!(r!=null&&r.ok)?{ok:!1,data:null,error:_d(r,`Gagal simpan snapshot (${n.status})`)}:{ok:!0,data:r.data||null,error:""}}function T3(){var on,En,fr,Ft,Xn;const e=qi(),[t,n]=y.useState(!0),[r,s]=y.useState(""),[i,a]=y.useState([]),[l,c]=y.useState(0),[u,d]=y.useState(null),[f,g]=y.useState(null),[p,m]=y.useState(7),[w,b]=y.useState("all"),[h,v]=y.useState("all"),[x,k]=y.useState([]),[E,$]=y.useState(""),[P,B]=y.useState([]),[W,Y]=y.useState(!1),[ee,Q]=y.useState(""),[X,fe]=y.useState("open"),[me,ve]=y.useState(""),[Oe,T]=y.useState(""),[M,I]=y.useState([]),[N,L]=y.useState(!1),[A,_]=y.useState(!1),[R,K]=y.useState("");async function pe(){n(!0),s(""),$("");try{const{data:S,error:de}=await Pt.auth.getUser();if(de)throw de;const xe=(S==null?void 0:S.user)||null;if(d(xe),!(xe!=null&&xe.id)){a([]),c(0),T(""),g(new Date),n(!1);return}const Je=Math.max(...D_),Ve=new Date(Date.now()-Je*24*60*60*1e3).toISOString(),[He,Tt,Jt]=await Promise.all([_3(Ve),Pt.from("generations").select("id",{count:"exact",head:!0}),S3()]),Ut=aO(xe.id),ht=sO(xe.id),Ce=He.error?[]:Array.isArray(He.rows)?He.rows:[],lt=Number.isFinite(Tt==null?void 0:Tt.count)?Tt.count:null;k(Array.isArray(Jt.rows)?Jt.rows:[]),Jt.error&&$(Jt.error),He.error&&Ut.length+ht.length===0?s("Gagal memuat data cloud dashboard."):He.error?s("Data cloud tidak tersedia, menampilkan data lokal."):He.truncated&&s("Data cloud dashboard sangat besar; analitik memakai batch terbaru (maks 100.000 baris window)."),c(lt??Ce.length),a(u3(Ce,Ut,ht)),T(""),g(new Date)}catch{s("Gagal memuat dashboard."),a([]),c(0),T(""),g(new Date)}finally{n(!1)}}function ue(S={}){const de=G_(p),Je={...{source:w==="local"?"local":w,decision:h,dateFrom:de.from,dateTo:de.to,sortBy:"created_desc"},...S||{}};e("/history",{state:{dashboardFilters:Je}})}y.useEffect(()=>{pe()},[]);const j=y.useMemo(()=>{const de=Date.now()-p*24*60*60*1e3,xe=i.filter(je=>hu(je)>=de),Je=K_(xe,w),Ve=m3(Je,h),He=Ve.map(sl).filter(je=>Number.isFinite(je)),Tt=Ve.map(va).filter(Boolean),Jt=Tt.filter(je=>je==="GO").length,Ut=al(He),ht=Tt.length?Jt/Tt.length*100:null,Ce=g3(Ve),lt=Object.values(Ce).reduce((je,ye)=>je+ye,0),bt={supabase:0,draft:0,offline:0};xe.forEach(je=>{const ye=$l(je);bt[ye]=(bt[ye]||0)+1});const wr=d3(p),Dn=new Map(wr.map(je=>[je.key,0]));Ve.forEach(je=>{const ye=hu(je);if(!ye)return;const V=uO(new Date(ye));Dn.has(V)&&Dn.set(V,(Dn.get(V)||0)+1)});const $n=wr.map(je=>({...je,count:Dn.get(je.key)||0})),Bn=Math.max(1,...$n.map(je=>je.count)),Un=Um(Ve,Bm,4),ln=Um(Ve,il,4),mt=x3(Ve,2),nr=[...mt].sort((je,ye)=>{const V=Number.isFinite(je.goRate)?je.goRate:-1,ie=Number.isFinite(ye.goRate)?ye.goRate:-1;if(ie!==V)return ie-V;const Ae=Number.isFinite(je.avgScore)?je.avgScore:-1,H=Number.isFinite(ye.avgScore)?ye.avgScore:-1;return H!==Ae?H-Ae:ye.count-je.count}).slice(0,5),Zt=[...mt].sort((je,ye)=>{const V=Number.isFinite(je.goRate)?je.goRate:999,ie=Number.isFinite(ye.goRate)?ye.goRate:999;if(V!==ie)return V-ie;const Ae=Number.isFinite(je.avgScore)?je.avgScore:999,H=Number.isFinite(ye.avgScore)?ye.avgScore:999;return Ae!==H?Ae-H:ye.count-je.count}).slice(0,5),Or=new Map;Ve.forEach(je=>{const ye=Dm(je,u),V=`${String((je==null?void 0:je.user_id)||"").trim()}|||${ye}`,ie=Or.get(V)||{userLabel:ye||"-",userId:String((je==null?void 0:je.user_id)||"").trim(),count:0,scoreValues:[],decisionTotal:0,decisionGo:0,lastCreatedAtMs:0};ie.count+=1;const Ae=sl(je);Number.isFinite(Ae)&&ie.scoreValues.push(Ae);const H=va(je);H&&(ie.decisionTotal+=1),H==="GO"&&(ie.decisionGo+=1),ie.lastCreatedAtMs=Math.max(ie.lastCreatedAtMs,hu(je)),Or.set(V,ie)});const cs=Array.from(Or.values()).map(je=>({...je,avgScore:al(je.scoreValues),goRate:je.decisionTotal>0?je.decisionGo/je.decisionTotal*100:null})).sort((je,ye)=>{if(ye.count!==je.count)return ye.count-je.count;const V=Number.isFinite(je.goRate)?je.goRate:-1,ie=Number.isFinite(ye.goRate)?ye.goRate:-1;return ie!==V?ie-V:ye.lastCreatedAtMs-je.lastCreatedAtMs}).slice(0,10),Wr=K_(xe,w),hr=new Map((x||[]).map(je=>[cO(je==null?void 0:je.provider),je])),us=w==="all",Cs=new Set([...Wr.map(je=>il(je)).filter(Boolean),...us?Array.from(hr.keys()).filter(Boolean):[]]),ds=Array.from(Cs).map(je=>{var Ji;const ye=hr.get(je)||null,V=Wr.filter(vn=>il(vn)===je),ie=V.length,Ae=V.map(sl).filter(vn=>Number.isFinite(vn)),H=V.map(f3).filter(vn=>Number.isFinite(vn)),Qe=V.map(h3).filter(vn=>Number.isFinite(vn)),Ie=al(Ae),_t=al(H),It=al(Qe),Kt=V.map(va).filter(Boolean),Gr=Kt.length?Kt.filter(vn=>vn==="GO").length/Kt.length*100:null,Ts=V.filter(vn=>{var D,le;return Number(((le=(D=vn==null?void 0:vn.result)==null?void 0:D.meta)==null?void 0:le.imageReferencesCount)||0)>0}),$s=Ts.filter(vn=>{var D,le,ce;return String(((ce=(le=(D=vn==null?void 0:vn.result)==null?void 0:D.meta)==null?void 0:le.vision)==null?void 0:ce.mode)||"")==="multimodal"}),fs=Ts.length?$s.length/Ts.length*100:null,mc=((Ji=Um(V,Py,1)[0])==null?void 0:Ji.label)||"-",Wa=!!(ye!=null&&ye.configured),Gi=!!(ye!=null&&ye.isActive)&&Wa;let Rr="idle";return Wa&&!Gi?Rr="inactive":ie===0?Rr=Gi?"ready":"idle":Ts.length&&Number.isFinite(fs)&&fs<50?Rr="vision":Number.isFinite(_t)&&_t>26e3?Rr="watch":Number.isFinite(Ie)&&Ie>=85&&(!Number.isFinite(Gr)||Gr>=70)?Rr="healthy":Number.isFinite(Ie)&&Ie>=70?Rr="watch":Rr="tune",{providerName:je,usage:ie,avgScore:Ie,avgElapsedMs:_t,avgAttempts:It,goRate:Gr,topModel:mc,visionCoverage:fs,keyText:w3(ye,ie),status:Rr}}).sort((je,ye)=>ye.usage!==je.usage?ye.usage-je.usage:je.providerName.localeCompare(ye.providerName,"id")),xr=ds.filter(je=>je.status==="tune"||je.status==="vision").length,zn=(x||[]).filter(je=>(je==null?void 0:je.configured)&&!(je!=null&&je.isActive)).length,cn=[];return Ve.length||cn.push({key:"empty-filter",variant:"secondary",text:"Tidak ada output pada filter aktif. Ubah source/decision atau range."}),Number.isFinite(ht)&&ht<70&&cn.push({key:"go-rate-low",variant:"warning",text:`GO rate ${ht.toFixed(1)}% masih rendah. Review prompt dan preset utama.`}),Number.isFinite(Ut)&&Ut<75&&cn.push({key:"score-low",variant:"warning",text:`Avg score ${Ut.toFixed(1)}% di bawah target 75%. Perketat quality contract preset.`}),(Ce.BLOCK||0)>0&&cn.push({key:"block-exist",variant:"danger",text:`Ada ${Ce.BLOCK} output BLOCK pada filter aktif.`}),xr>0&&cn.push({key:"provider-risk",variant:"warning",text:`Ada ${xr} provider berstatus risk (vision/tune).`}),w==="all"&&zn>0&&cn.push({key:"inactive-keys",variant:"info",text:`${zn} provider key nonaktif. Cek halaman Settings.`}),{windowRows:xe,recentRows:Ve,scoreAvg:Ut,goRate:ht,sourceCounts:bt,decisionCounts:Ce,decisionTotal:lt,trend:$n,maxTrend:Bn,topPlatforms:Un,topProviders:ln,bestProviderModels:nr,riskyProviderModels:Zt,teamPerformance:cs,providerHealth:ds,qualityRiskCount:xr,alerts:cn}},[i,x,p,w,h,u]),$e=y.useMemo(()=>(j.alerts||[]).map(S=>{const de=String((S==null?void 0:S.key)||"").trim().toLowerCase();return{key:`dashboard:${de}`,source:"dashboard",severity:(S==null?void 0:S.variant)||"warning",message:String((S==null?void 0:S.text)||"").trim(),context:{ruleKey:de,windowDays:p,sourceScope:w,decisionScope:h,drilldown:l3(de)}}}).filter(S=>S.key&&S.message),[j.alerts,p,w,h]),De=y.useMemo(()=>JSON.stringify($e),[$e]);async function rt(){Y(!0),ve("");try{const S=await k3(160);if(!S.ok){ve(S.error||"Gagal memuat alert center");return}B(S.data||[])}catch{ve("Gagal memuat alert center")}finally{Y(!1)}}async function st(){L(!0),K("");try{const S=await N3({windowDays:p,sourceScope:w,decisionScope:h,limit:20});if(!S.ok){K(S.error||"Gagal memuat snapshots");return}I(S.data||[])}catch{K("Gagal memuat snapshots")}finally{L(!1)}}async function ke(){if(!$e.length){await rt();return}Y(!0),ve("");try{const S=await j3($e);if(!S.ok){ve(S.error||"Gagal sinkron alert center");return}Array.isArray(S.data)&&S.data.length?B(S.data):await rt()}catch{ve("Gagal sinkron alert center")}finally{Y(!1)}}y.useEffect(()=>{if(!(u!=null&&u.id))return;const S=De;S!==Oe&&(T(S),ke())},[u==null?void 0:u.id,De]),y.useEffect(()=>{u!=null&&u.id&&st()},[u==null?void 0:u.id,p,w,h]);async function Re(S,de){const xe=String((S==null?void 0:S.id)||"").trim();if(!(!xe||!de)){Q(xe),ve("");try{const Je=await E3(xe,de);if(!Je.ok){ve(Je.error||"Gagal update alert");return}await rt()}catch{ve("Gagal update alert")}finally{Q("")}}}function J(S){const de=(S==null?void 0:S.context)||{},xe=(de==null?void 0:de.drilldown)||{},Je=String((xe==null?void 0:xe._link)||"").trim();if(Je&&Je.startsWith("/")){e(Je);return}const Ve={...xe||{}};delete Ve._link,ue(Ve)}const F=y.useMemo(()=>j.recentRows.slice(0,r3),[j.recentRows]),re=(j.sourceCounts.draft||0)+(j.sourceCounts.offline||0),be=((on=B_.find(S=>S.key===w))==null?void 0:on.label)||"All Source",Le=((En=U_.find(S=>S.key===h))==null?void 0:En.label)||"All Decision",O=w!=="all"||h!=="all",z=y.useMemo(()=>(P||[]).filter(S=>String((S==null?void 0:S.status)||"").toLowerCase()==="open").length,[P]),G=y.useMemo(()=>{const S=String(X||"open").toLowerCase();return(P||[]).filter(de=>String((de==null?void 0:de.status)||"").toLowerCase()===S)},[P,X]),se=M[0]||null,ne=M[1]||null,q=((fr=se==null?void 0:se.summary)==null?void 0:fr.kpi)||{},ge=((Ft=ne==null?void 0:ne.summary)==null?void 0:Ft.kpi)||{},Te={output:Number(q.outputCount||0)-Number(ge.outputCount||0),goRate:Number(q.goRate||0)-Number(ge.goRate||0),avgScore:Number(q.avgFinalScore||0)-Number(ge.avgFinalScore||0)};function qe(S="json"){const de=new Date().toISOString().replace(/[:]/g,"-").replace(/\..+$/,""),xe=String(w||"all").toLowerCase(),Je=String(h||"all").toLowerCase();return`dashboard-${p}d-${xe}-${Je}-${de}.${S}`}function jt(){return j.recentRows.map(S=>({user:Dm(S,u),topic:q_(S),platform:Bm(S),provider:il(S),model:Py(S),source:$l(S),score:sl(S),decision:va(S),created_at:(S==null?void 0:S.created_at)||""}))}function Dt(S=new Date().toISOString()){const de=G_(p),xe=jt();return{generatedAt:S,filters:{windowDays:p,source:w,decision:h,dateFrom:de.from,dateTo:de.to},kpi:{outputCount:j.recentRows.length,goRate:Number.isFinite(j.goRate)?Number(j.goRate.toFixed(2)):null,avgFinalScore:Number.isFinite(j.scoreAvg)?Number(j.scoreAvg.toFixed(2)):null,providerRiskCount:j.qualityRiskCount,cloudRecords:l,localRecords:re},decisionCounts:j.decisionCounts,sourceCounts:j.sourceCounts,topPlatforms:j.topPlatforms,topProviders:j.topProviders,bestProviderModels:j.bestProviderModels,riskyProviderModels:j.riskyProviderModels,teamPerformance:j.teamPerformance,providerHealth:j.providerHealth,alerts:j.alerts.map(Je=>({key:Je.key,severity:Je.variant,message:Je.text})),rows:xe}}async function Bt(){_(!0),K("");try{const S=Dt(new Date().toISOString()),de=await C3({windowDays:p,sourceScope:w,decisionScope:String(h||"all").toLowerCase(),summary:S});if(!de.ok){K(de.error||"Gagal simpan snapshot");return}await st()}catch{K("Gagal simpan snapshot")}finally{_(!1)}}function Fn(S="json"){var Tt,Jt,Ut,ht;const de=new Date().toISOString(),xe=Dt(de),Je=xe.filters||{},Ve=Array.isArray(xe.rows)?xe.rows:[];if(S==="json"){zm(qe("json"),"application/json;charset=utf-8",JSON.stringify(xe,null,2));return}if(S==="csv"){const lt=[["user","topic","platform","provider","model","source","score","decision","created_at"].join(",")];Ve.forEach(bt=>{lt.push([bi(bt.user),bi(bt.topic),bi(bt.platform),bi(bt.provider),bi(bt.model),bi(bt.source),bi(Number.isFinite(bt.score)?Number(bt.score).toFixed(1):""),bi(bt.decision),bi(bt.created_at)].join(","))}),zm(qe("csv"),"text/csv;charset=utf-8",lt.join(`
`));return}const He=["# Dashboard Report","",`Generated: ${de}`,"","## Filters","",`- Window: ${p} hari`,`- Source: ${be}`,`- Decision: ${Le}`,`- Date: ${Je.dateFrom||"-"} s/d ${Je.dateTo||"-"}`,"","## KPI","",`- Output: ${j.recentRows.length}`,`- GO Rate: ${Number.isFinite(j.goRate)?`${j.goRate.toFixed(1)}%`:"-"}`,`- Avg Final Score: ${Number.isFinite(j.scoreAvg)?`${j.scoreAvg.toFixed(1)}%`:"-"}`,`- Provider Risk: ${j.qualityRiskCount}`,`- Cloud Records: ${l}`,`- Local Records: ${re}`,"","## Decision Counts","",`- GO: ${((Tt=j.decisionCounts)==null?void 0:Tt.GO)||0}`,`- REVISE: ${((Jt=j.decisionCounts)==null?void 0:Jt.REVISE)||0}`,`- BLOCK: ${((Ut=j.decisionCounts)==null?void 0:Ut.BLOCK)||0}`,`- UNKNOWN: ${((ht=j.decisionCounts)==null?void 0:ht.UNKNOWN)||0}`,"","## Team Performance","","| User | Count | GO Rate | Avg Score |","| --- | --- | --- | --- |"];(j.teamPerformance||[]).forEach(Ce=>{He.push(`| ${String(Ce.userLabel||"-").replace(/\|/g,"\\|")} | ${Ce.count} | ${Number.isFinite(Ce.goRate)?`${Ce.goRate.toFixed(1)}%`:"-"} | ${Number.isFinite(Ce.avgScore)?`${Ce.avgScore.toFixed(1)}%`:"-"} |`)}),He.push("","## Rows","","| User | Topic | Platform | Provider | Model | Source | Score | Decision | Created |","| --- | --- | --- | --- | --- | --- | --- | --- | --- |"),Ve.slice(0,200).forEach(Ce=>{He.push(`| ${String(Ce.user||"-").replace(/\|/g,"\\|")} | ${String(Ce.topic||"-").replace(/\|/g,"\\|")} | ${String(Ce.platform||"-").replace(/\|/g,"\\|")} | ${String(Ce.provider||"-").replace(/\|/g,"\\|")} | ${String(Ce.model||"-").replace(/\|/g,"\\|")} | ${String(Ce.source||"-").replace(/\|/g,"\\|")} | ${Number.isFinite(Ce.score)?Ce.score.toFixed(1):"-"} | ${String(Ce.decision||"-").replace(/\|/g,"\\|")} | ${String(Ce.created_at||"-").replace(/\|/g,"\\|")} |`)}),zm(qe("md"),"text/markdown;charset=utf-8",He.join(`
`))}return o.jsxs("div",{className:"dashboard-page",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"mb-0",children:"Dashboard"}),o.jsxs("small",{className:"text-muted",children:["Ringkasan performa konten ",p," hari terakhir",f?`  update ${f.toLocaleTimeString()}`:"",`  open alerts ${z}`]})]}),o.jsxs("div",{className:"d-flex gap-2 align-items-center flex-wrap justify-content-end",children:[o.jsxs("div",{className:"d-flex align-items-center gap-1",children:[o.jsx("small",{className:"text-muted",children:"Range"}),o.jsx(Uc,{size:"sm",children:D_.map(S=>o.jsxs(oe,{variant:p===S?"primary":"outline-secondary",onClick:()=>m(S),children:[S,"D"]},S))})]}),o.jsx(oe,{as:ni,to:"/generate",size:"sm",variant:"primary",children:"Generate"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue(),children:"History"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:t,onClick:pe,children:t?"Loading...":"Refresh"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:A||t,onClick:Bt,children:A?"Saving...":"Save Snapshot"}),o.jsxs(Ot,{align:"end",children:[o.jsx(Ot.Toggle,{size:"sm",variant:"outline-secondary",children:"Export"}),o.jsxs(Ot.Menu,{children:[o.jsx(Ot.Item,{onClick:()=>Fn("json"),children:"Export JSON"}),o.jsx(Ot.Item,{onClick:()=>Fn("csv"),children:"Export CSV"}),o.jsx(Ot.Item,{onClick:()=>Fn("md"),children:"Export Markdown"})]})]})]})]}),r&&o.jsx(Lt,{variant:"warning",className:"mb-3",children:r}),o.jsxs(Ct,{className:"g-2 mb-3",children:[o.jsx(Se,{xs:12,lg:8,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{className:"py-2 d-flex align-items-center flex-wrap gap-2",children:[o.jsx("small",{className:"text-muted",children:"Source"}),o.jsx(Uc,{size:"sm",children:B_.map(S=>o.jsx(oe,{variant:w===S.key?"primary":"outline-secondary",onClick:()=>b(S.key),children:S.label},S.key))}),o.jsx("small",{className:"text-muted ms-lg-2",children:"Decision"}),o.jsx(Uc,{size:"sm",children:U_.map(S=>o.jsx(oe,{variant:h===S.key?a3(S.key):"outline-secondary",onClick:()=>v(S.key),children:S.label},S.key))})]})})}),o.jsx(Se,{xs:12,lg:4,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{className:"py-2 d-flex justify-content-between align-items-center gap-2 flex-wrap",children:[o.jsxs("small",{className:"text-muted",children:["Aktif: ",be,"  ",Le]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:!O,onClick:()=>{b("all"),v("all")},children:"Reset Filter"})]})})})]}),o.jsx(We,{className:"mb-3",children:o.jsxs(We.Body,{className:"py-2",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-1",children:[o.jsx("small",{className:"text-muted",children:"Action Signals"}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsx(oe,{as:ni,to:"/settings",size:"sm",variant:"outline-secondary",children:"Settings"}),o.jsx(oe,{as:ni,to:"/templates",size:"sm",variant:"outline-secondary",children:"Templates"})]})]}),j.alerts.length?j.alerts.map(S=>o.jsx(Lt,{variant:S.variant,className:"py-1 px-2 mb-1",children:S.text},S.key)):o.jsx("small",{className:"text-success",children:"Semua indikator utama terlihat sehat pada filter aktif."})]})}),o.jsxs(Ct,{className:"g-3 mb-3",children:[o.jsx(Se,{lg:7,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-2",children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o.jsx("h6",{className:"mb-0",children:"Alert Center"}),o.jsx(Ue,{bg:"danger",children:z})]}),o.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o.jsxs(Uc,{size:"sm",children:[o.jsx(oe,{variant:X==="open"?"danger":"outline-secondary",onClick:()=>fe("open"),children:"Open"}),o.jsx(oe,{variant:X==="acknowledged"?"warning":"outline-secondary",onClick:()=>fe("acknowledged"),children:"Acknowledged"}),o.jsx(oe,{variant:X==="resolved"?"success":"outline-secondary",onClick:()=>fe("resolved"),children:"Resolved"})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:rt,disabled:W,children:W?"Loading...":"Refresh"})]})]}),me&&o.jsx(Lt,{variant:"warning",className:"py-1 px-2 mb-2",children:me}),!W&&!G.length?o.jsx("small",{className:"text-muted",children:"Tidak ada alert pada tab ini."}):o.jsx(qt,{variant:"flush",children:G.map(S=>{const de=String((S==null?void 0:S.status)||"").toLowerCase(),xe=ee===(S==null?void 0:S.id);return o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold",children:(S==null?void 0:S.message)||"-"}),o.jsxs("small",{className:"text-muted",children:["key: ",(S==null?void 0:S.alertKey)||"-","  seen: ",(S==null?void 0:S.count)||1,S!=null&&S.lastSeenAt?`  ${new Date(S.lastSeenAt).toLocaleString()}`:""]}),o.jsxs("div",{className:"mt-1 d-flex gap-2 flex-wrap",children:[o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>J(S),children:"Buka Konteks"}),de==="open"&&o.jsxs(o.Fragment,{children:[o.jsx(nf,{placement:"top",overlay:o.jsx(zc,{id:`tooltip-alert-ack-${String((S==null?void 0:S.id)||"row")}`,children:"Acknowledge alert tanpa menutupnya."}),children:o.jsx("span",{className:"d-inline-flex",children:o.jsx(oe,{size:"sm",variant:"outline-warning",disabled:xe,onClick:()=>Re(S,"ack"),children:"Ack"})})}),o.jsx(nf,{placement:"top",overlay:o.jsx(zc,{id:`tooltip-alert-resolve-${String((S==null?void 0:S.id)||"row")}`,children:"Tandai alert selesai."}),children:o.jsx("span",{className:"d-inline-flex",children:o.jsx(oe,{size:"sm",variant:"outline-success",disabled:xe,onClick:()=>Re(S,"resolve"),children:"Resolve"})})})]}),de==="acknowledged"&&o.jsxs(o.Fragment,{children:[o.jsx(nf,{placement:"top",overlay:o.jsx(zc,{id:`tooltip-alert-resolve-ack-${String((S==null?void 0:S.id)||"row")}`,children:"Tandai alert selesai."}),children:o.jsx("span",{className:"d-inline-flex",children:o.jsx(oe,{size:"sm",variant:"outline-success",disabled:xe,onClick:()=>Re(S,"resolve"),children:"Resolve"})})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:xe,onClick:()=>Re(S,"reopen"),children:"Reopen"})]}),de==="resolved"&&o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:xe,onClick:()=>Re(S,"reopen"),children:"Reopen"})]})]}),o.jsxs("div",{className:"text-end",children:[o.jsx(Ue,{bg:c3(S==null?void 0:S.severity),children:String((S==null?void 0:S.severity)||"warning").toUpperCase()}),o.jsx("div",{children:o.jsx("small",{className:"text-muted",children:String((S==null?void 0:S.status)||"-").toUpperCase()})})]})]})},`alert-${S==null?void 0:S.id}`)})})]})})}),o.jsx(Se,{lg:5,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Snapshot Timeline"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:st,disabled:N,children:N?"Loading...":"Refresh"})]}),R&&o.jsx(Lt,{variant:"warning",className:"py-1 px-2 mb-2",children:R}),se?o.jsxs("div",{className:"mb-2",children:[o.jsxs("small",{className:"d-block text-muted",children:["Latest: ",se.snapshotDate||"-",se.createdAt?`  ${new Date(se.createdAt).toLocaleString()}`:""]}),o.jsxs("small",{className:"d-block text-muted",children:["Output: ",Number(q.outputCount||0),ne?` (${Te.output>=0?"+":""}${Te.output})`:""]}),o.jsxs("small",{className:"d-block text-muted",children:["GO: ",Number.isFinite(Number(q.goRate))?`${Number(q.goRate).toFixed(1)}%`:"-",ne?` (${Te.goRate>=0?"+":""}${Te.goRate.toFixed(1)}%)`:""]}),o.jsxs("small",{className:"d-block text-muted",children:["Avg Score: ",Number.isFinite(Number(q.avgFinalScore))?`${Number(q.avgFinalScore).toFixed(1)}%`:"-",ne?` (${Te.avgScore>=0?"+":""}${Te.avgScore.toFixed(1)}%)`:""]})]}):o.jsx("small",{className:"text-muted d-block mb-2",children:"Belum ada snapshot untuk scope aktif."}),!N&&M.length>0&&o.jsx(qt,{variant:"flush",children:M.slice(0,8).map(S=>o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"fw-semibold",children:S.snapshotDate||"-"}),o.jsxs("small",{className:"text-muted",children:[S.generatedByDisplayName||"-","  ",S.windowDays,"D  ",S.sourceScope,"/",String(S.decisionScope||"").toUpperCase()]})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({source:S.sourceScope||"all",decision:String(S.decisionScope||"all").toUpperCase()}),children:"Buka"})]})},`snap-${S.id}`))})]})})})]}),o.jsxs(Ct,{className:"g-3 mb-3",children:[o.jsx(Se,{xs:6,md:3,children:o.jsx(We,{className:"h-100 dashboard-kpi-card",children:o.jsxs(We.Body,{children:[o.jsxs("small",{className:"text-muted",children:["Output ",p," Hari"]}),o.jsx("div",{className:"dashboard-kpi-value",children:j.recentRows.length}),o.jsx("small",{className:"dashboard-kpi-sub",children:"Sesuai source/decision filter"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue(),children:"Detail"})]})})}),o.jsx(Se,{xs:6,md:3,children:o.jsx(We,{className:"h-100 dashboard-kpi-card",children:o.jsxs(We.Body,{children:[o.jsx("small",{className:"text-muted",children:"GO Rate"}),o.jsx("div",{className:"dashboard-kpi-value",children:Number.isFinite(j.goRate)?`${j.goRate.toFixed(1)}%`:"-"}),o.jsx("small",{className:"dashboard-kpi-sub",children:"Dari output dengan decision"}),o.jsx(oe,{size:"sm",variant:"outline-success",onClick:()=>ue({decision:"GO"}),children:"Lihat GO"})]})})}),o.jsx(Se,{xs:6,md:3,children:o.jsx(We,{className:"h-100 dashboard-kpi-card",children:o.jsxs(We.Body,{children:[o.jsx("small",{className:"text-muted",children:"Avg Final Score"}),o.jsx("div",{className:"dashboard-kpi-value",children:Number.isFinite(j.scoreAvg)?`${j.scoreAvg.toFixed(1)}%`:"-"}),o.jsx("small",{className:"dashboard-kpi-sub",children:"Nilai compliance/performance gate"}),o.jsx(oe,{size:"sm",variant:"outline-primary",onClick:()=>ue({sortBy:"score_desc"}),children:"Score Tertinggi"})]})})}),o.jsx(Se,{xs:6,md:3,children:o.jsx(We,{className:"h-100 dashboard-kpi-card",children:o.jsxs(We.Body,{children:[o.jsx("small",{className:"text-muted",children:"Provider Risk"}),o.jsx("div",{className:"dashboard-kpi-value",children:j.qualityRiskCount}),o.jsx("small",{className:"dashboard-kpi-sub",children:"Status watch/needs tune"}),o.jsx(oe,{size:"sm",variant:"outline-warning",onClick:()=>ue({decision:"REVISE",sortBy:"score_asc"}),children:"Cek Risiko"})]})})}),o.jsx(Se,{xs:6,md:3,children:o.jsx(We,{className:"h-100 dashboard-kpi-card",children:o.jsxs(We.Body,{children:[o.jsx("small",{className:"text-muted",children:"Cloud Records (All)"}),o.jsx("div",{className:"dashboard-kpi-value",children:l}),o.jsxs("small",{className:"dashboard-kpi-sub",children:["Draft/offline lokal: ",re]}),o.jsx(oe,{size:"sm",variant:"outline-info",onClick:()=>ue({source:"supabase"}),children:"Lihat Cloud"})]})})})]}),o.jsxs(Ct,{className:"g-3 mb-3",children:[o.jsx(Se,{lg:8,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsxs("h6",{className:"mb-0",children:["Tren Output ",p," Hari"]}),o.jsx("small",{className:"text-muted",children:"Count per hari"})]}),o.jsx("div",{className:"dashboard-trend-grid",style:{gridTemplateColumns:`repeat(${p}, minmax(0, 1fr))`},children:j.trend.map(S=>{const de=S.count>0?Math.max(12,S.count/j.maxTrend*100):6;return o.jsxs("div",{className:"dashboard-trend-col",title:`${S.label}: ${S.count}`,children:[o.jsx("div",{className:"dashboard-trend-bar-wrap",children:o.jsx("div",{className:"dashboard-trend-bar",style:{height:`${de}%`}})}),o.jsx("small",{className:"dashboard-trend-count",children:S.count}),o.jsx("small",{className:"dashboard-trend-label",children:S.label})]},S.key)})})]})})}),o.jsx(Se,{lg:4,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Source Breakdown"}),["supabase","draft","offline"].map(S=>{const de=j.sourceCounts[S]||0,xe=j.windowRows.length||1,Je=Math.round(de/xe*100);return o.jsxs("div",{className:"dashboard-source-line",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-2",children:[o.jsx("small",{children:z_(S)}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[o.jsxs("small",{children:[de," (",Je,"%)"]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({source:S}),children:"Lihat"})]})]}),o.jsx("div",{className:"dashboard-source-progress",children:o.jsx("div",{className:`dashboard-source-progress-fill is-${S}`,style:{width:`${Je}%`}})})]},S)})]})})})]}),o.jsxs(Ct,{className:"g-3",children:[o.jsx(Se,{lg:4,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Decision Overview"}),["GO","REVISE","BLOCK"].map(S=>{var Ve;const de=((Ve=j.decisionCounts)==null?void 0:Ve[S])||0,xe=j.decisionTotal||1,Je=Math.round(de/xe*100);return o.jsxs("div",{className:"dashboard-source-line",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-2",children:[o.jsx("small",{children:S}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[o.jsxs("small",{children:[de," (",Je,"%)"]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({decision:S}),children:"Lihat"})]})]}),o.jsx("div",{className:"dashboard-source-progress",children:o.jsx("div",{className:"dashboard-source-progress-fill",style:{width:`${Je}%`,background:o3(S)}})})]},S)}),(((Xn=j.decisionCounts)==null?void 0:Xn.UNKNOWN)||0)>0&&o.jsxs("small",{className:"text-muted",children:["Unknown decision: ",j.decisionCounts.UNKNOWN]})]})})}),o.jsx(Se,{lg:4,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Top Platform"}),j.topPlatforms.length?o.jsx(qt,{variant:"flush",children:j.topPlatforms.map(S=>o.jsxs(qt.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:S.label}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[o.jsx(Ue,{bg:"dark",children:S.count}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({platform:S.label}),children:"Lihat"})]})]},`platform-${S.label}`))}):o.jsx("small",{className:"text-muted",children:"Belum ada data platform."})]})})}),o.jsx(Se,{lg:4,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Top Provider"}),j.topProviders.length?o.jsx(qt,{variant:"flush",children:j.topProviders.map(S=>o.jsxs(qt.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:S.label}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[o.jsx(Ue,{bg:"info",children:S.count}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({provider:S.label}),children:"Lihat"})]})]},`provider-${S.label}`))}):o.jsx("small",{className:"text-muted",children:"Belum ada data provider."})]})})})]}),o.jsxs(Ct,{className:"g-3 mt-0",children:[o.jsx(Se,{lg:6,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Leaderboard: Best Provider/Model"}),j.bestProviderModels.length?o.jsx(qt,{variant:"flush",children:j.bestProviderModels.map(S=>o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold dashboard-recent-topic",children:S.label}),o.jsxs("small",{className:"text-muted",children:["Use: ",S.count,Number.isFinite(S.goRate)?`  GO: ${S.goRate.toFixed(0)}%`:"",Number.isFinite(S.avgScore)?`  Avg: ${S.avgScore.toFixed(1)}%`:""]})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({provider:S.provider}),children:"Lihat"})]})},`best-${S.label}`))}):o.jsx("small",{className:"text-muted",children:"Belum cukup data (min 2 output per model)."})]})})}),o.jsx(Se,{lg:6,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsx("h6",{className:"mb-2",children:"Leaderboard: Needs Attention"}),j.riskyProviderModels.length?o.jsx(qt,{variant:"flush",children:j.riskyProviderModels.map(S=>o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold dashboard-recent-topic",children:S.label}),o.jsxs("small",{className:"text-muted",children:["Use: ",S.count,Number.isFinite(S.goRate)?`  GO: ${S.goRate.toFixed(0)}%`:"",Number.isFinite(S.avgScore)?`  Avg: ${S.avgScore.toFixed(1)}%`:""]})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({provider:S.provider,sortBy:"score_asc"}),children:"Review"})]})},`risk-${S.label}`))}):o.jsx("small",{className:"text-muted",children:"Belum cukup data (min 2 output per model)."})]})})})]}),o.jsx(Ct,{className:"g-3 mt-0",children:o.jsx(Se,{lg:12,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 flex-wrap gap-2",children:[o.jsx("h6",{className:"mb-0",children:"Team Performance"}),o.jsx("small",{className:"text-muted",children:"Berdasarkan output pada filter aktif"})]}),j.teamPerformance.length?o.jsx(qt,{variant:"flush",children:j.teamPerformance.map(S=>o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold",children:S.userLabel||"-"}),o.jsxs("small",{className:"text-muted",children:["Output: ",S.count,Number.isFinite(S.goRate)?`  GO: ${S.goRate.toFixed(1)}%`:"",Number.isFinite(S.avgScore)?`  Avg: ${S.avgScore.toFixed(1)}%`:""]})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({search:S.userLabel||""}),children:"Lihat History"})]})},`team-${S.userId||S.userLabel}`))}):o.jsx("small",{className:"text-muted",children:"Belum ada data tim pada filter aktif."})]})})})}),o.jsxs(Ct,{className:"g-3 mt-0",children:[o.jsx(Se,{lg:5,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Provider Health"}),o.jsxs("small",{className:"text-muted",children:[p,"D window"]})]}),E&&o.jsx(Lt,{variant:"warning",className:"py-1 px-2 mb-2",children:E}),j.providerHealth.length?o.jsx(qt,{variant:"flush",children:j.providerHealth.map(S=>o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold",children:S.providerName}),o.jsxs("small",{className:"text-muted",children:["Key: ",S.keyText,"  Top model: ",S.topModel]}),o.jsx("div",{children:o.jsxs("small",{className:"text-muted",children:["Use: ",S.usage,Number.isFinite(S.avgScore)?`  Avg: ${S.avgScore.toFixed(1)}%`:"",Number.isFinite(S.goRate)?`  GO: ${S.goRate.toFixed(0)}%`:"",Number.isFinite(S.visionCoverage)?`  Vision: ${S.visionCoverage.toFixed(0)}%`:"",Number.isFinite(S.avgElapsedMs)?`  Avg RTT: ${p3(S.avgElapsedMs)}`:"",Number.isFinite(S.avgAttempts)?`  Attempts: ${S.avgAttempts.toFixed(1)}`:""]})}),o.jsx("div",{className:"mt-1",children:o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue({provider:S.providerName}),children:"Lihat History"})})]}),o.jsx(nf,{placement:"top",overlay:o.jsx(zc,{id:`tooltip-provider-health-${String(S.providerName||"provider").replace(/\s+/g,"-").toLowerCase()}`,children:b3(S.status)}),children:o.jsx("span",{className:"d-inline-flex",children:o.jsx(Ue,{bg:y3(S.status),text:S.status==="watch"||S.status==="vision"?"dark":void 0,children:v3(S.status)})})})]})},`health-${S.providerName}`))}):o.jsx("small",{className:"text-muted",children:"Belum ada data provider."})]})})}),o.jsx(Se,{lg:7,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Aktivitas Terbaru"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>ue(),children:"Open History"})]}),F.length?o.jsx(qt,{variant:"flush",children:F.map((S,de)=>{const xe=$l(S),Je=sl(S),Ve=va(S);return o.jsx(qt.Item,{className:"px-0 py-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[o.jsxs("div",{className:"dashboard-recent-text",children:[o.jsx("div",{className:"fw-semibold dashboard-recent-topic",children:q_(S)}),o.jsxs("small",{className:"text-muted",children:[Dm(S,u),"  ",Bm(S)||"-","  ",il(S)||"-"]}),o.jsx("div",{className:"mt-1",children:o.jsx(oe,{size:"sm",variant:"outline-primary",onClick:()=>e("/generate",{state:{historyItem:S}}),children:"Gunakan"})})]}),o.jsxs("div",{className:"text-end",children:[o.jsx(Ue,{bg:i3(xe),text:xe==="offline"?"dark":void 0,className:"mb-1",children:z_(xe)}),o.jsx("div",{children:Number.isFinite(Je)?o.jsxs("small",{className:"text-muted",children:[Number(Je).toFixed(1),"%",Ve?`  ${Ve}`:""]}):o.jsx("small",{className:"text-muted",children:Ve||"-"})})]})]})},String((S==null?void 0:S.id)||de))})}):o.jsx("small",{className:"text-muted",children:"Belum ada aktivitas."})]})})})]})]})}function $3(e,t){const n=e.icons,r=e.aliases||Object.create(null),s=Object.create(null);function i(a){if(n[a])return s[a]=[];if(!(a in s)){s[a]=null;const l=r[a]&&r[a].parent,c=l&&i(l);c&&(s[a]=[l].concat(c))}return s[a]}return Object.keys(n).concat(Object.keys(r)).forEach(i),s}const dO=Object.freeze({left:0,top:0,width:16,height:16}),Dh=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),qb=Object.freeze({...dO,...Dh}),Iy=Object.freeze({...qb,body:"",hidden:!1});function O3(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function J_(e,t){const n=O3(e,t);for(const r in Iy)r in Dh?r in e&&!(r in n)&&(n[r]=Dh[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function R3(e,t,n){const r=e.icons,s=e.aliases||Object.create(null);let i={};function a(l){i=J_(r[l]||s[l],i)}return a(t),n.forEach(a),J_(e,i)}function fO(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(s=>{t(s,null),n.push(s)});const r=$3(e);for(const s in r){const i=r[s];i&&(t(s,R3(e,s,i)),n.push(s))}return n}const A3={provider:"",aliases:{},not_found:{},...dO};function Vm(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function hO(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!Vm(e,A3))return null;const n=t.icons;for(const s in n){const i=n[s];if(!s||typeof i.body!="string"||!Vm(i,Iy))return null}const r=t.aliases||Object.create(null);for(const s in r){const i=r[s],a=i.parent;if(!s||typeof a!="string"||!n[a]&&!r[a]||!Vm(i,Iy))return null}return t}const Y_=Object.create(null);function P3(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Gl(e,t){const n=Y_[e]||(Y_[e]=Object.create(null));return n[t]||(n[t]=P3(e,t))}function pO(e,t){return hO(t)?fO(t,(n,r)=>{r?e.icons[n]=r:e.missing.add(n)}):[]}function I3(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}const mO=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ip=(e,t,n,r="")=>{const s=e.split(":");if(e.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;r=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const l=s.pop(),c=s.pop(),u={provider:s.length>0?s[0]:r,prefix:c,name:l};return t&&!qf(u)?null:u}const i=s[0],a=i.split("-");if(a.length>1){const l={provider:r,prefix:a.shift(),name:a.join("-")};return t&&!qf(l)?null:l}if(n&&r===""){const l={provider:r,prefix:"",name:i};return t&&!qf(l,n)?null:l}return null},qf=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;let Yu=!1;function gO(e){return typeof e=="boolean"&&(Yu=e),Yu}function Q_(e){const t=typeof e=="string"?Ip(e,!0,Yu):e;if(t){const n=Gl(t.provider,t.prefix),r=t.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function L3(e,t){const n=Ip(e,!0,Yu);if(!n)return!1;const r=Gl(n.provider,n.prefix);return t?I3(r,n.name,t):(r.missing.add(n.name),!0)}function M3(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Yu&&!t&&!e.prefix){let s=!1;return hO(e)&&(e.prefix="",fO(e,(i,a)=>{L3(i,a)&&(s=!0)})),s}const n=e.prefix;if(!qf({prefix:n,name:"a"}))return!1;const r=Gl(t,n);return!!pO(r,e)}const yO=Object.freeze({width:null,height:null}),vO=Object.freeze({...yO,...Dh}),F3=/(-?[0-9.]*[0-9]+[0-9.]*)/g,D3=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function X_(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(F3);if(r===null||!r.length)return e;const s=[];let i=r.shift(),a=D3.test(i);for(;;){if(a){const l=parseFloat(i);isNaN(l)?s.push(i):s.push(Math.ceil(l*t*n)/n)}else s.push(i);if(i=r.shift(),i===void 0)return s.join("");a=!a}}function B3(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const s=e.indexOf(">",r),i=e.indexOf("</"+t);if(s===-1||i===-1)break;const a=e.indexOf(">",i);if(a===-1)break;n+=e.slice(s+1,i).trim(),e=e.slice(0,r).trim()+e.slice(a+1)}return{defs:n,content:e}}function U3(e,t){return e?"<defs>"+e+"</defs>"+t:t}function z3(e,t,n){const r=B3(e);return U3(r.defs,t+r.content+n)}const V3=e=>e==="unset"||e==="undefined"||e==="none";function H3(e,t){const n={...qb,...e},r={...vO,...t},s={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,r].forEach(w=>{const b=[],h=w.hFlip,v=w.vFlip;let x=w.rotate;h?v?x+=2:(b.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),b.push("scale(-1 1)"),s.top=s.left=0):v&&(b.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),b.push("scale(1 -1)"),s.top=s.left=0);let k;switch(x<0&&(x-=Math.floor(x/4)*4),x=x%4,x){case 1:k=s.height/2+s.top,b.unshift("rotate(90 "+k.toString()+" "+k.toString()+")");break;case 2:b.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:k=s.width/2+s.left,b.unshift("rotate(-90 "+k.toString()+" "+k.toString()+")");break}x%2===1&&(s.left!==s.top&&(k=s.left,s.left=s.top,s.top=k),s.width!==s.height&&(k=s.width,s.width=s.height,s.height=k)),b.length&&(i=z3(i,'<g transform="'+b.join(" ")+'">',"</g>"))});const a=r.width,l=r.height,c=s.width,u=s.height;let d,f;a===null?(f=l===null?"1em":l==="auto"?u:l,d=X_(f,c/u)):(d=a==="auto"?c:a,f=l===null?X_(d,u/c):l==="auto"?u:l);const g={},p=(w,b)=>{V3(b)||(g[w]=b.toString())};p("width",d),p("height",f);const m=[s.left,s.top,c,u];return g.viewBox=m.join(" "),{attributes:g,viewBox:m,body:i}}const q3=/\sid="(\S+)"/g,K3="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let W3=0;function G3(e,t=K3){const n=[];let r;for(;r=q3.exec(e);)n.push(r[1]);if(!n.length)return e;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const a=typeof t=="function"?t(i):t+(W3++).toString(),l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+a+s+"$3")}),e=e.replace(new RegExp(s,"g"),""),e}const Ly=Object.create(null);function J3(e,t){Ly[e]=t}function My(e){return Ly[e]||Ly[""]}function Kb(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const Wb=Object.create(null),$c=["https://api.simplesvg.com","https://api.unisvg.com"],Kf=[];for(;$c.length>0;)$c.length===1||Math.random()>.5?Kf.push($c.shift()):Kf.push($c.pop());Wb[""]=Kb({resources:["https://api.iconify.design"].concat(Kf)});function Y3(e,t){const n=Kb(t);return n===null?!1:(Wb[e]=n,!0)}function Gb(e){return Wb[e]}const Q3=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Z_=Q3();function X3(e,t){const n=Gb(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let s=0;n.resources.forEach(a=>{s=Math.max(s,a.length)});const i=t+".json?icons=";r=n.maxURL-s-n.path.length-i.length}return r}function Z3(e){return e===404}const eV=(e,t,n)=>{const r=[],s=X3(e,t),i="icons";let a={type:i,provider:e,prefix:t,icons:[]},l=0;return n.forEach((c,u)=>{l+=c.length+1,l>=s&&u>0&&(r.push(a),a={type:i,provider:e,prefix:t,icons:[]},l=c.length),a.icons.push(c)}),r.push(a),r};function tV(e){if(typeof e=="string"){const t=Gb(e);if(t)return t.path}return"/"}const nV=(e,t,n)=>{if(!Z_){n("abort",424);return}let r=tV(t.provider);switch(t.type){case"icons":{const i=t.prefix,l=t.icons.join(","),c=new URLSearchParams({icons:l});r+=i+".json?"+c.toString();break}case"custom":{const i=t.uri;r+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let s=503;Z_(e+r).then(i=>{const a=i.status;if(a!==200){setTimeout(()=>{n(Z3(a)?"abort":"next",a)});return}return s=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",s)});return}setTimeout(()=>{n("success",i)})}).catch(()=>{n("next",s)})},rV={prepare:eV,send:nV};function bO(e,t){e.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(s=>s.id!==t))})}function sV(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const r=e.provider,s=e.prefix;t.forEach(i=>{const a=i.icons,l=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==s)return!0;const u=c.name;if(e.icons[u])a.loaded.push({provider:r,prefix:s,name:u});else if(e.missing.has(u))a.missing.push({provider:r,prefix:s,name:u});else return n=!0,!0;return!1}),a.pending.length!==l&&(n||bO([e],i.id),i.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),i.abort))})}))}let iV=0;function aV(e,t,n){const r=iV++,s=bO.bind(null,n,r);if(!t.pending.length)return s;const i={id:r,icons:t,callback:e,abort:s};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(i)}),s}function oV(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((s,i)=>s.provider!==i.provider?s.provider.localeCompare(i.provider):s.prefix!==i.prefix?s.prefix.localeCompare(i.prefix):s.name.localeCompare(i.name));let r={provider:"",prefix:"",name:""};return e.forEach(s=>{if(r.name===s.name&&r.prefix===s.prefix&&r.provider===s.provider)return;r=s;const i=s.provider,a=s.prefix,l=s.name,c=n[i]||(n[i]=Object.create(null)),u=c[a]||(c[a]=Gl(i,a));let d;l in u.icons?d=t.loaded:a===""||u.missing.has(l)?d=t.missing:d=t.pending;const f={provider:i,prefix:a,name:l};d.push(f)}),t}function lV(e,t=!0,n=!1){const r=[];return e.forEach(s=>{const i=typeof s=="string"?Ip(s,t,n):s;i&&r.push(i)}),r}const cV={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function uV(e,t,n,r){const s=e.resources.length,i=e.random?Math.floor(Math.random()*s):e.index;let a;if(e.random){let $=e.resources.slice(0);for(a=[];$.length>1;){const P=Math.floor(Math.random()*$.length);a.push($[P]),$=$.slice(0,P).concat($.slice(P+1))}a=a.concat($)}else a=e.resources.slice(i).concat(e.resources.slice(0,i));const l=Date.now();let c="pending",u=0,d,f=null,g=[],p=[];typeof r=="function"&&p.push(r);function m(){f&&(clearTimeout(f),f=null)}function w(){c==="pending"&&(c="aborted"),m(),g.forEach($=>{$.status==="pending"&&($.status="aborted")}),g=[]}function b($,P){P&&(p=[]),typeof $=="function"&&p.push($)}function h(){return{startTime:l,payload:t,status:c,queriesSent:u,queriesPending:g.length,subscribe:b,abort:w}}function v(){c="failed",p.forEach($=>{$(void 0,d)})}function x(){g.forEach($=>{$.status==="pending"&&($.status="aborted")}),g=[]}function k($,P,B){const W=P!=="success";switch(g=g.filter(Y=>Y!==$),c){case"pending":break;case"failed":if(W||!e.dataAfterTimeout)return;break;default:return}if(P==="abort"){d=B,v();return}if(W){d=B,g.length||(a.length?E():v());return}if(m(),x(),!e.random){const Y=e.resources.indexOf($.resource);Y!==-1&&Y!==e.index&&(e.index=Y)}c="completed",p.forEach(Y=>{Y(B)})}function E(){if(c!=="pending")return;m();const $=a.shift();if($===void 0){if(g.length){f=setTimeout(()=>{m(),c==="pending"&&(x(),v())},e.timeout);return}v();return}const P={status:"pending",resource:$,callback:(B,W)=>{k(P,B,W)}};g.push(P),u++,f=setTimeout(E,e.rotate),n($,t,P.callback)}return setTimeout(E),h}function wO(e){const t={...cV,...e};let n=[];function r(){n=n.filter(l=>l().status==="pending")}function s(l,c,u){const d=uV(t,l,c,(f,g)=>{r(),u&&u(f,g)});return n.push(d),d}function i(l){return n.find(c=>l(c))||null}return{query:s,find:i,setIndex:l=>{t.index=l},getIndex:()=>t.index,cleanup:r}}function ek(){}const Hm=Object.create(null);function dV(e){if(!Hm[e]){const t=Gb(e);if(!t)return;const n=wO(t),r={config:t,redundancy:n};Hm[e]=r}return Hm[e]}function fV(e,t,n){let r,s;if(typeof e=="string"){const i=My(e);if(!i)return n(void 0,424),ek;s=i.send;const a=dV(e);a&&(r=a.redundancy)}else{const i=Kb(e);if(i){r=wO(i);const a=e.resources?e.resources[0]:"",l=My(a);l&&(s=l.send)}}return!r||!s?(n(void 0,424),ek):r.query(t,s,n)().abort}function tk(){}function hV(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,sV(e)}))}function pV(e){const t=[],n=[];return e.forEach(r=>{(r.match(mO)?t:n).push(r)}),{valid:t,invalid:n}}function Oc(e,t,n){function r(){const s=e.pendingIcons;t.forEach(i=>{s&&s.delete(i),e.icons[i]||e.missing.add(i)})}if(n&&typeof n=="object")try{if(!pO(e,n).length){r();return}}catch(s){console.error(s)}r(),hV(e)}function nk(e,t){e instanceof Promise?e.then(n=>{t(n)}).catch(()=>{t(null)}):t(e)}function mV(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:r}=e,s=e.iconsToLoad;if(delete e.iconsToLoad,!s||!s.length)return;const i=e.loadIcon;if(e.loadIcons&&(s.length>1||!i)){nk(e.loadIcons(s,r,n),d=>{Oc(e,s,d)});return}if(i){s.forEach(d=>{const f=i(d,r,n);nk(f,g=>{const p=g?{prefix:r,icons:{[d]:g}}:null;Oc(e,[d],p)})});return}const{valid:a,invalid:l}=pV(s);if(l.length&&Oc(e,l,null),!a.length)return;const c=r.match(mO)?My(n):null;if(!c){Oc(e,a,null);return}c.prepare(n,r,a).forEach(d=>{fV(n,d,f=>{Oc(e,d.icons,f)})})}))}const gV=(e,t)=>{const n=lV(e,!0,gO()),r=oV(n);if(!r.pending.length){let c=!0;return t&&setTimeout(()=>{c&&t(r.loaded,r.missing,r.pending,tk)}),()=>{c=!1}}const s=Object.create(null),i=[];let a,l;return r.pending.forEach(c=>{const{provider:u,prefix:d}=c;if(d===l&&u===a)return;a=u,l=d,i.push(Gl(u,d));const f=s[u]||(s[u]=Object.create(null));f[d]||(f[d]=[])}),r.pending.forEach(c=>{const{provider:u,prefix:d,name:f}=c,g=Gl(u,d),p=g.pendingIcons||(g.pendingIcons=new Set);p.has(f)||(p.add(f),s[u][d].push(f))}),i.forEach(c=>{const u=s[c.provider][c.prefix];u.length&&mV(c,u)}),t?aV(t,r,i):tk};function yV(e,t){const n={...e};for(const r in t){const s=t[r],i=typeof s;r in yO?(s===null||s&&(i==="string"||i==="number"))&&(n[r]=s):i===typeof n[r]&&(n[r]=r==="rotate"?s%4:s)}return n}const vV=/[\s,]+/;function bV(e,t){t.split(vV).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function wV(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function r(s){for(;s<0;)s+=4;return s%4}if(n===""){const s=parseInt(e);return isNaN(s)?0:r(s)}else if(n!==e){let s=0;switch(n){case"%":s=25;break;case"deg":s=90}if(s){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/s,i%1===0?r(i):0)}}return t}function xV(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function SV(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function _V(e){return"data:image/svg+xml,"+SV(e)}function kV(e){return'url("'+_V(e)+'")'}let pu;function jV(){try{pu=window.trustedTypes.createPolicy("iconify",{createHTML:e=>e})}catch{pu=null}}function EV(e){return pu===void 0&&jV(),pu?pu.createHTML(e):e}const xO={...vO,inline:!1},NV={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},CV={display:"inline-block"},Fy={backgroundColor:"currentColor"},SO={backgroundColor:"transparent"},rk={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},sk={WebkitMask:Fy,mask:Fy,background:SO};for(const e in sk){const t=sk[e];for(const n in rk)t[e+n]=rk[n]}const TV={...xO,inline:!0};function ik(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const $V=(e,t,n)=>{const r=t.inline?TV:xO,s=yV(r,t),i=t.mode||"svg",a={},l=t.style||{},c={...i==="svg"?NV:{}};if(n){const b=Ip(n,!1,!0);if(b){const h=["iconify"],v=["provider","prefix"];for(const x of v)b[x]&&h.push("iconify--"+b[x]);c.className=h.join(" ")}}for(let b in t){const h=t[b];if(h!==void 0)switch(b){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":case"fallback":break;case"_ref":c.ref=h;break;case"className":c[b]=(c[b]?c[b]+" ":"")+h;break;case"inline":case"hFlip":case"vFlip":s[b]=h===!0||h==="true"||h===1;break;case"flip":typeof h=="string"&&bV(s,h);break;case"color":a.color=h;break;case"rotate":typeof h=="string"?s[b]=wV(h):typeof h=="number"&&(s[b]=h);break;case"ariaHidden":case"aria-hidden":h!==!0&&h!=="true"&&delete c["aria-hidden"];break;default:r[b]===void 0&&(c[b]=h)}}const u=H3(e,s),d=u.attributes;if(s.inline&&(a.verticalAlign="-0.125em"),i==="svg"){c.style={...a,...l},Object.assign(c,d);let b=0,h=t.id;return typeof h=="string"&&(h=h.replace(/-/g,"_")),c.dangerouslySetInnerHTML={__html:EV(G3(u.body,h?()=>h+"ID"+b++:"iconifyReact"))},y.createElement("svg",c)}const{body:f,width:g,height:p}=e,m=i==="mask"||(i==="bg"?!1:f.indexOf("currentColor")!==-1),w=xV(f,{...d,width:g+"",height:p+""});return c.style={...a,"--svg":kV(w),width:ik(d.width),height:ik(d.height),...CV,...m?Fy:SO,...l},y.createElement("span",c)};gO(!0);J3("",rV);if(typeof document<"u"&&typeof window<"u"){const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!M3(r))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const r="IconifyProviders["+n+"] is invalid.";try{const s=t[n];if(typeof s!="object"||!s||s.resources===void 0)continue;Y3(n,s)||console.error(r)}catch{console.error(r)}}}}function _O(e){const[t,n]=y.useState(!!e.ssr),[r,s]=y.useState({});function i(p){if(p){const m=e.icon;if(typeof m=="object")return{name:"",data:m};const w=Q_(m);if(w)return{name:m,data:w}}return{name:""}}const[a,l]=y.useState(i(!!e.ssr));function c(){const p=r.callback;p&&(p(),s({}))}function u(p){if(JSON.stringify(a)!==JSON.stringify(p))return c(),l(p),!0}function d(){var p;const m=e.icon;if(typeof m=="object"){u({name:"",data:m});return}const w=Q_(m);if(u({name:m,data:w}))if(w===void 0){const b=gV([m],d);s({callback:b})}else w&&((p=e.onLoad)===null||p===void 0||p.call(e,m))}y.useEffect(()=>(n(!0),c),[]),y.useEffect(()=>{t&&d()},[e.icon,t]);const{name:f,data:g}=a;return g?$V({...qb,...g},e,f):e.children?e.children:e.fallback?e.fallback:y.createElement("span",{})}const Qt=y.forwardRef((e,t)=>_O({...e,_ref:t}));y.forwardRef((e,t)=>_O({inline:!0,...e,_ref:t}));function qm(e){const t={platform:e.platform||"TikTok",strategy:null,contentStructure:{length:e.length||"short",format:e.formatOutput||"text"},language:e.language||"Indonesia",tone:e.tone||null,topic:e.topic||"",keywords:e.keywords?Array.isArray(e.keywords)?e.keywords:String(e.keywords).split(",").map(n=>n.trim()).filter(Boolean):[],cta:e.cta?Array.isArray(e.cta)?e.cta:[{type:"primary",text:String(e.cta)}]:[],constraints:e.constraints||{forbiddenWords:[]},meta:{createdBy:"manual-ui",createdAt:new Date().toISOString()}};return t.strategy||delete t.strategy,t.tone||delete t.tone,(!t.keywords||t.keywords.length===0)&&delete t.keywords,(!t.cta||t.cta.length===0)&&delete t.cta,t}function OV(e,t){if(!t)return;const n=t.split(".");let r=e;for(const s of n){if(r==null)return;/^\d+$/.test(s)?r=r[Number(s)]:r=r[s]}return r}function RV(e){return e==null?"":Array.isArray(e)?e.join(", "):typeof e=="object"?JSON.stringify(e):String(e)}function AV(e,t={}){return!e||typeof e!="string"?"":e.replace(/{{\s*([^}]+)\s*}}/g,(n,r)=>{const s=OV(t,r.trim());return RV(s)})}function PV(e={}){return["Anda adalah content strategist untuk konten digital yang harus tepat sasaran.","Konteks inti:","- Platform: {{platform}}","- Topik/ide: {{topic}}","- Bahasa: {{language}}","- Tone: {{tone}}","- Panjang: {{contentStructure.length}}","- Goal utama: {{goal}}","- Target audience: {{targetAudience}}","- Keyword penting: {{keywords}}","- CTA prioritas: {{cta.0.text}}","Target output:","- Hook tajam, narasi jelas, deskripsi ringkas, hashtag relevan.","- Narrator wajib format scene-by-length (short=3 scene, medium=5 scene, long=7 scene).","- Audio recommendation wajib format 5 field: Style, Mood, Genre, Suggestion, Length.","- Audio recommendation harus berupa referensi musik, bukan dialog/CTA.","Larangan:","- Hindari klaim absolut (100%, pasti untung, garansi hasil, auto viral).","- Hindari kata spam/scam/clickbait dan hashtag berisiko."].join(`
`)}const IV=["TikTok","YouTube Short","YouTube Long","Shopee","Tokopedia","Lazada","Instagram Reels","Facebook Reels","Pinterest","WhatsApp Status","Threads","WhatsApp Channel","Telegram","LinkedIn","X (Twitter)","SoundCloud","Blog Blogger"],ak=new Map(IV.map((e,t)=>[e,t]));function ok(e){const t=`${(e==null?void 0:e.id)||""} ${(e==null?void 0:e.title)||""} ${(e==null?void 0:e.label)||""}`.toLowerCase();return t.includes("hard-sell")||t.includes("hard sell")?0:t.includes("soft-education")||t.includes("soft education")?1:2}function lk(e){return ak.has(e)?ak.get(e):Number.MAX_SAFE_INTEGER}function ck(e){return String((e==null?void 0:e.title)||(e==null?void 0:e.label)||(e==null?void 0:e.id)||"").trim().toLowerCase()}function LV(e,t){const n=String((e==null?void 0:e.platform)||"").trim(),r=String((t==null?void 0:t.platform)||"").trim(),s=lk(n)-lk(r);if(s!==0)return s;if(n!==r)return n.localeCompare(r);const i=ok(e)-ok(t);if(i!==0)return i;const a=ck(e),l=ck(t),c=a.localeCompare(l);return c!==0?c:String((e==null?void 0:e.id)||"").localeCompare(String((t==null?void 0:t.id)||""))}function kO(e=[]){return Array.isArray(e)?[...e].sort(LV):[]}const Bh="tmdb_generate_selection_v1",jO="tmdb_generate_prefs_v2",MV="tmdb_generate_prefs_v1",aa=5,Jb=["series","season","episode"],Yb=["no_spoiler","light","full"],Ol=["title","tagline","release_date","runtime","genres","director","cast_top","overview","keywords","certification_id","production_companies","networks","production_countries","vote_average","budget","revenue","status","original_language","watch_providers_id","trailer"],FV=new Set(["budget","revenue"]),DV=new Set(["networks"]),ta={enabled:!0,mediaType:"multi",region:"ID",language:"id-ID",query:"",year:"",referenceScope:"series",spoilerLevel:"light"};function Qn(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function EO(e){try{const t=new URL(String(e||"").trim());return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function Ui(e){const t=String(e||"multi").trim().toLowerCase();return t==="movie"||t==="tv"||t==="multi"?t:"multi"}function kd(e){const t=String(e||"").trim().toUpperCase();return/^[A-Z]{2}$/.test(t)?t:"ID"}function jd(e){const t=String(e||"").trim();return/^[a-z]{2}-[A-Z]{2}$/.test(t)?t:"id-ID"}function Ed(e){const t=String(e||"").trim();return/^\d{4}$/.test(t)?t:""}function Nd(e){const t=String(e||"").trim().toLowerCase();return Jb.includes(t)?t:"series"}function Lp(e){const t=String(e||"").trim().toLowerCase();return Yb.includes(t)?t:"light"}function NO(e){const t=Qn(e)?e:{};return{factual_only_from_tmdb:t.factual_only_from_tmdb!==!1,no_hallucination:t.no_hallucination!==!1,spoilerLevel:Lp(t.spoilerLevel||t.spoiler_level||"light")}}function CO(e,t="multi"){const n=Qn(e)?e:{},r=Ui(t),s={};for(const i of Ol)r==="tv"&&FV.has(i)||r==="movie"&&DV.has(i)||(s[i]=n[i]!==!1);return s}function BV(e,t="multi"){const n=CO(e,t),r=Ui(t);if(r!=="tv"){r==="movie"&&delete n.networks;const l=Qn(e)&&Object.prototype.hasOwnProperty.call(e,"creator"),c=Qn(e)&&Object.prototype.hasOwnProperty.call(e,"director");return l&&!c&&(n.director=e.creator!==!1),n}const s=Qn(e)&&Object.prototype.hasOwnProperty.call(e,"creator")?e.creator!==!1:n.director!==!1,{director:i,...a}=n;return delete a.budget,delete a.revenue,{...a,creator:s}}function TO(e,t="multi"){if(Ui(t)!=="tv"||!Qn(e))return null;const n=String(e.season||"").trim(),r=String(e.episode||"").trim();return!n&&!r?null:{...n?{season:n}:{},...r?{episode:r}:{}}}function UV({explicitMediaType:e="multi",candidate:t=null,movieOrTv:n=null,tvContext:r=null}={}){const s=Ui(e);if(s==="movie"||s==="tv")return s;const i=Ui((t==null?void 0:t.mediaType)||(t==null?void 0:t.type)||(t==null?void 0:t.entityType)||"multi");if(i==="movie"||i==="tv")return i;const a=Qn(n)?n:{};return String(a.creator||"").trim()||Array.isArray(a.creator_list)&&a.creator_list.length>0||Array.isArray(a.networks)&&a.networks.length>0||Number(a.season_count||0)>0||Number(a.episode_count||0)>0||String(a.reference_scope||"").trim()||Qn(r)?"tv":String(a.director||"").trim()||Array.isArray(a.director_list)&&a.director_list.length>0||Number(a.revenue||0)>0||Number(a.budget||0)>0?"movie":s}function $O(e){const t=Array.isArray(e)?e:[],n=[],r=new Set;for(const s of t){const i=typeof s=="string"?String(s||"").trim():String((s==null?void 0:s.url)||"").trim();if(!i||!EO(i))continue;const a=`url:${i}`;if(!r.has(a)&&(r.add(a),n.push({type:"url",url:i,source:typeof s=="object"&&(s!=null&&s.source)?String(s.source):"tmdb"}),n.length>=aa))break}return n}function zV(e){if(!Qn(e))return null;const t=Number(e.tmdbId||e.tmdb_id||0),n=Number.isInteger(t)&&t>0?t:null,r=Ui(e.mediaType||e.type||e.entityType||"multi"),s=String(e.title||"").trim(),i=Ed(e.year||""),a=String(e.posterUrl||e.poster_url||"").trim(),l=Number(e.rating),c=Number.isFinite(l)?Number(l.toFixed(1)):null;return{...n?{tmdbId:n}:{},mediaType:r,title:s,year:i,...a&&EO(a)?{posterUrl:a}:{},...c!==null?{rating:c}:{}}}function VV(e){if(!Qn(e))return null;const t=Number(e.count),n=Number.isFinite(t)?Math.max(0,Math.min(10,Math.floor(t))):0,r=String(e.query||"").trim(),s=jd(e.languageCode||e.language||"id-ID"),i=kd(e.region||"ID"),a=String(e.keySource||"").trim()||null;return{count:n,query:r,languageCode:s,region:i,...a?{keySource:a}:{}}}function Uh(e){if(!Qn(e))return null;const t=Number(e.number??e.season_number??0),n=Number.isInteger(t)&&t>0?t:null;if(!n)return null;const r=Number(e.episodeCount??e.episode_count??0);return{number:n,name:String(e.name||"").trim(),airDate:String(e.airDate||e.air_date||"").trim(),overview:String(e.overview||"").trim(),episodeCount:Number.isFinite(r)&&r>0?Math.floor(r):null}}function zh(e){if(!Qn(e))return null;const t=Number(e.number??e.episode_number??0),n=Number.isInteger(t)&&t>0?t:null;if(!n)return null;const r=Number(e.runtime??0),s=Number(e.voteAverage??e.vote_average??0);return{number:n,name:String(e.name||"").trim(),airDate:String(e.airDate||e.air_date||"").trim(),overview:String(e.overview||"").trim(),runtime:Number.isFinite(r)&&r>0?Math.floor(r):null,voteAverage:Number.isFinite(s)&&s>0?Number(s.toFixed(1)):null,episodeType:String(e.episodeType||e.episode_type||"").trim().toLowerCase()||null}}function HV(e){if(!Qn(e))return null;const t=Uh(e.season),n=zh(e.episode),r=Array.isArray(e.seasonOptions)?e.seasonOptions.map(l=>Uh(l)).filter(Boolean):[],s=Array.isArray(e.episodeOptions)?e.episodeOptions.map(l=>zh(l)).filter(Boolean):[],i=Number(e.seasonCount??e.season_count??0),a=Number(e.episodeCount??e.episode_count??0);return{referenceScope:Nd(e.referenceScope||e.reference_scope||"series"),spoilerLevel:Lp(e.spoilerLevel||e.spoiler_level||"light"),seasonCount:Number.isFinite(i)&&i>0?Math.floor(i):null,episodeCount:Number.isFinite(a)&&a>0?Math.floor(a):null,episodeType:String(e.episodeType||e.episode_type||"").trim().toLowerCase()||null,season:t,episode:n,seasonOptions:r,episodeOptions:s}}function Qb(e){var k,E,$;if(!Qn(e))return null;const t=Number(e.tmdbId||e.tmdb_id||((k=e.movieOrTv)==null?void 0:k.tmdb_id)||0),n=Number.isInteger(t)&&t>0?t:null;if(!n)return null;const r=Qn(e.movieOrTv)?e.movieOrTv:null,s=zV(e.candidate),i=HV(e.tvContext),a=String(e.mediaType||e.entityType||e.type||"").trim().toLowerCase(),l=UV({explicitMediaType:a,candidate:s,movieOrTv:r,tvContext:i}),c=TO(e.scopeLabels,l),u=String(e.title||(r==null?void 0:r.title)||"").trim(),d=String(e.releaseDate||(r==null?void 0:r.release_date)||"").trim(),f=Ed(e.year||String(d||"").slice(0,4)),g=String(e.query||u||"").trim(),p=NO({...Qn(e.rules)?e.rules:{},spoilerLevel:((E=e==null?void 0:e.rules)==null?void 0:E.spoilerLevel)||(($=e==null?void 0:e.rules)==null?void 0:$.spoiler_level)||(i==null?void 0:i.spoilerLevel)||e.spoilerLevel||e.spoiler_level||"light"}),m=CO(e.factLocks,l),w=$O(e.selectedImages),b=VV(e.searchMeta),h=l==="tv"?Uh(e.season||(i==null?void 0:i.season)):null,v=l==="tv"?zh(e.episode||(i==null?void 0:i.episode)):null,x=Nd(e.referenceScope||e.reference_scope||(i==null?void 0:i.referenceScope)||"series");return{tmdbId:n,mediaType:l,entityType:a==="movie"||a==="tv"?a:l,title:u,query:g,year:f,releaseDate:d,region:kd(e.region),language:jd(e.language||e.languageCode),rules:p,referenceScope:x,season:h,episode:v,factLocks:m,selectedImages:w,candidate:s,searchMeta:b,movieOrTv:r,tvContext:l==="tv"?i:null,scopeLabels:c,debug:Qn(e.debug)?e.debug:null,updatedAt:new Date().toISOString()}}function OO(e){var g,p,m;const t=Qb(e);if(!(t!=null&&t.tmdbId))return{tmdb:{enabled:!1}};const n=String(t.entityType||t.mediaType||"multi").trim().toLowerCase(),r=Ui(n),s=String(t.query||t.title||"").trim(),i=Ed(t.year||""),a=kd(t.region||""),l=jd(t.language||t.languageCode||""),c=NO(t.rules),u=BV(t.factLocks,r),d=$O(t.selectedImages),f={tmdb:{enabled:!0,mediaType:r,tmdbId:Number(t.tmdbId),...s?{query:s}:{},...i?{year:i}:{},...a?{region:a}:{},...l?{language:l}:{},rules:c,factLocks:u,...d.length?{selectedImages:d}:{}}};if(r==="tv"){const w=Nd(t.referenceScope||((g=t.tvContext)==null?void 0:g.referenceScope)||"series");f.tmdb.referenceScope=w;const b=Uh(t.season||((p=t.tvContext)==null?void 0:p.season)),h=zh(t.episode||((m=t.tvContext)==null?void 0:m.episode));(w==="season"||w==="episode")&&b!=null&&b.number&&(f.tmdb.season=b,f.tmdb.seasonNumber=Number(b.number)),w==="episode"&&h!=null&&h.number&&(f.tmdb.episode=h,f.tmdb.episodeNumber=Number(h.number));const v=TO(t.scopeLabels,r);v&&(f.tmdb.scopeLabels=v)}return f}function Xb(){if(typeof window>"u")return{...ta};try{const e=JSON.parse(window.localStorage.getItem(jO)||"{}"),t=JSON.parse(window.localStorage.getItem(MV)||"{}"),n=Qn(e)?e:{},r=Qn(t)?t:{};return{enabled:typeof n.enabled=="boolean"?n.enabled:typeof r.enabled=="boolean"?r.enabled:ta.enabled,mediaType:Ui(n.mediaType||r.mediaType||ta.mediaType),region:kd(n.region||r.region||ta.region),language:jd(n.language||r.language||ta.language),query:String(n.query||"").trim(),year:Ed(n.year||""),referenceScope:Nd(n.referenceScope||n.reference_scope||r.referenceScope||ta.referenceScope),spoilerLevel:Lp(n.spoilerLevel||n.spoiler_level||r.spoilerLevel||ta.spoilerLevel)}}catch{return{...ta}}}function Vh(e={}){if(typeof window>"u")return;const t=Xb(),n={enabled:typeof e.enabled=="boolean"?e.enabled:t.enabled,mediaType:Ui(e.mediaType||t.mediaType),region:kd(e.region||t.region),language:jd(e.language||t.language),query:String(e.query??t.query??"").trim(),year:Ed(e.year??t.year??""),referenceScope:Nd(e.referenceScope??t.referenceScope??"series"),spoilerLevel:Lp(e.spoilerLevel??t.spoilerLevel??"light")};try{window.localStorage.setItem(jO,JSON.stringify(n))}catch{}}function Wf(){if(typeof window>"u")return null;try{const e=JSON.parse(window.localStorage.getItem(Bh)||"null");return Qb(e)}catch{return null}}function RO(e){if(typeof window>"u")return null;const t=Qb(e);try{return t?(window.localStorage.setItem(Bh,JSON.stringify(t)),t):(window.localStorage.removeItem(Bh),null)}catch{return null}}function AO(){if(!(typeof window>"u"))try{window.localStorage.removeItem(Bh)}catch{}}const uk=["TikTok","YouTube Short","YouTube Long","Shopee","Tokopedia","Lazada","Instagram Reels","Facebook Reels","Pinterest","WhatsApp Status","Threads","WhatsApp Channel","Telegram","LinkedIn","X (Twitter)","SoundCloud","Blog Blogger"],qV=["Gemini","OpenAI","OpenRouter","Groq","Cohere AI","DeepSeek","Hugging Face"],dk={Gemini:["gemini-2.5-flash","gemini-2.5-flash-lite","gemini-1.5-flash","gemini-1.5-pro","gemini-2.0-flash"],OpenAI:["gpt-4o-mini","gpt-3.5-turbo","gpt-4o-mini-2024-07-18","gpt-4o","gpt-4.1-mini"],OpenRouter:["meta-llama/llama-3-8b-instruct","mistralai/mixtral-8x7b-instruct","meta-llama/llama-3.1-8b-instruct","openai/gpt-4o-mini","anthropic/claude-3.5-sonnet","google/gemini-2.0-flash-001"],Groq:["llama-3.1-8b-instant","llama-3.3-70b-versatile","mixtral-8x7b-32768"],"Cohere AI":["command-a-03-2025","command-r-plus-08-2024","command-r7b-12-2024","command-r","command-r-plus"],DeepSeek:["deepseek-chat","deepseek-reasoner","deepseek-coder","deepseek-r1-distil-llama-70b"],"Hugging Face":["meta-llama/Llama-3-70b-chat-hf","mistralai/Mixtral-8x7B-Instruct-v0.1","Qwen/Qwen2.5-72B-Instruct","meta-llama/Llama-3.1-8B-Instruct","mistralai/Mistral-7B-Instruct-v0.3"]},PO={Gemini:["gemini-2.5-flash","gemini-2.5-flash-lite"],OpenAI:["gpt-4o-mini","gpt-3.5-turbo","gpt-4o-mini-2024-07-18"],OpenRouter:["meta-llama/llama-3-8b-instruct","mistralai/mixtral-8x7b-instruct","meta-llama/llama-3.1-8b-instruct","mmeta-llama/llama-3.1-8b-instruct"],Groq:["llama-3.3-70b-versatile","llama-3.1-8b-instant","mixtral-8x7b-32768"],"Cohere AI":["command-a-03-2025","command-r-plus-08-2024","command-r7b-12-2024"],"Hugging Face":["meta-llama/llama-3-70b-chat-hf","mistralai/mixtral-8x7b-instruct-v0.1","qwen/qwen2.5-72b-instruct"],DeepSeek:["deepseek-chat","deepseek-reasoner","deepseek-coder","deepseek-r1-distil-llama-70b"]};function Mp(e){return String(e||"").trim().toLowerCase().replace(/^mmeta-/,"meta-")}const KV=Object.fromEntries(Object.entries(PO).map(([e,t])=>[e,new Set((t||[]).map(n=>Mp(n)))])),WV=Object.fromEntries(Object.entries(PO).map(([e,t])=>{const n=new Map;return(t||[]).forEach((r,s)=>n.set(Mp(r),s)),[e,n]}));function Hh(e,t){const n=KV[String(e||"").trim()];return n?n.has(Mp(t)):!1}function fk(e,t){const n=WV[String(e||"").trim()];if(!n)return Number.MAX_SAFE_INTEGER;const r=n.get(Mp(t));return Number.isFinite(r)?r:Number.MAX_SAFE_INTEGER}function IO(e,t=[]){return(t||[]).map((n,r)=>({...n,isFeatured:(n==null?void 0:n.isFeatured)===!0||Hh(e,n==null?void 0:n.id),__idx:r})).sort((n,r)=>!!n.isFeatured!=!!r.isFeatured?n.isFeatured?-1:1:n.isFeatured&&r.isFeatured?fk(e,n.id)-fk(e,r.id):n.__idx-r.__idx).map(({__idx:n,...r})=>r)}function Dy(e,t){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();return!n||!r?null:n==="OpenAI"?/gpt-3\.5|embedding|whisper|tts|audio|dall-e|moderation|realtime/.test(r)?!1:/gpt-4o|gpt-4\.1|vision|omni/.test(r)?!0:null:n==="Gemini"?/embedding|aqa|imagen|tts|speech|transcribe/.test(r)?!1:/gemini/.test(r)?!0:null:n==="OpenRouter"?/embedding|rerank|moderation|whisper|tts|audio/.test(r)?!1:/vision|gpt-4o|gpt-4\.1|gemini|claude-3|claude-sonnet|pixtral|llava|qwen2-vl|llama-3\.2-11b-vision|llama-3\.2-90b-vision/.test(r)?!0:null:n==="Groq"?/whisper|audio|embed|embedding/.test(r)?!1:/vision|llava|pixtral|qwen2-vl|llama-3\.2-11b-vision|llama-3\.2-90b-vision/.test(r)?!0:null:n==="Cohere AI"?/embed|rerank|classif/.test(r)?!1:/vision/.test(r)?!0:null:n==="DeepSeek"?/deepseek-chat|deepseek-reasoner/.test(r)?!1:/vision|vl/.test(r)?!0:null:n==="Hugging Face"?/embed|rerank|classif|whisper|audio/.test(r)?!1:/vision|vl|llava|pixtral|qwen2-vl|llama-3\.2-11b-vision|llama-3\.2-90b-vision/.test(r)?!0:null:null}function hk(e,t=""){if(typeof e=="string"){const a=String(e||"").trim();return a?{id:a,label:a,supportsVision:Dy(t,a),isFeatured:Hh(t,a)}:null}if(!e||typeof e!="object")return null;const n=String(e.id||"").trim();if(!n)return null;const r=String(e.label||n).trim()||n,s=typeof e.supportsVision=="boolean"?e.supportsVision:Dy(t,n),i=typeof e.isFeatured=="boolean"?e.isFeatured:Hh(t,n);return{id:n,label:r,supportsVision:s,isFeatured:i}}function pk(e){const t=Array.isArray(dk[e])?dk[e]:[];return IO(e,t.map(n=>({id:n,label:n,supportsVision:Dy(e,n),isFeatured:Hh(e,n)})))}const GV=["Urgency","Persuasive / Meyakinkan","Casual / Santai","Sassy / Ngegas","Bold / Berani","Relatable / Bisa Direlate","Friendly / Ramah","Witty / Cerdas Lucu","Profesional","Fun"],JV=["Adventurous / Petualang","Classy / Elegan","Conversational / Ngobrol","Curious / Bikin Penasaran","Humor / Lucu","Motivational / Motivasi","Raw / Unfiltered / Mentah Autentik","Inspirational / Menginspirasi","Storytelling / Naratif","Empathetic / Empati"],YV=[{value:"Indonesia",label:"ID"},{value:"English",label:"EN"}],Rc=[{key:"builtin:short-hook",label:"Short Hook (Instant)",tone:"Fun",length:"short"},{key:"builtin:long-script",label:"Long Script (Instant)",tone:"Profesional",length:"long"},{key:"builtin:hashtag-pack",label:"Hashtag Pack (Instant)",tone:"Urgency",length:"short"}],Zs=5,pf=2,QV={TikTok:10,"YouTube Short":18,"YouTube Long":18,Shopee:12,Tokopedia:14,Lazada:10,"Instagram Reels":18,"Facebook Reels":18,"WhatsApp Status":20,Threads:11,"WhatsApp Channel":20,Telegram:11,LinkedIn:12,"X (Twitter)":14,SoundCloud:14,"Blog Blogger":16},XV={Gemini:11,OpenAI:11,OpenRouter:15,Groq:10,"Cohere AI":13,DeepSeek:13,"Hugging Face":16},ZV="provider_free_only_by_provider_v1",LO="tmdb_detail_accordion_open_v1";function e4(){try{const e=JSON.parse(localStorage.getItem(ZV)||"{}");return e&&typeof e=="object"?e:{}}catch{return{}}}function t4(e){const t=e4(),n=t==null?void 0:t[e];return typeof n=="boolean"?n:e!=="OpenRouter"}function n4(e){return String(e||"").trim()==="OpenRouter"?400:100}function r4(){try{return typeof window>"u"?!1:window.localStorage.getItem(LO)==="1"}catch{return!1}}function s4({onResult:e,regenerateToken:t=0}){var Wa,Gi,Rr,Ji,vn;const n=qa(),r=qi(),s=Xb(),{register:i,handleSubmit:a,reset:l,watch:c,setValue:u,getValues:d}=i$({defaultValues:{platform:"TikTok",provider:"OpenAI",tone:"Fun",language:"Indonesia",length:"short",model:"gpt-4o-mini",mode:"Standard",preset:"",useTmdb:s.enabled!==!1}}),[f,g]=y.useState(!1),[p,m]=y.useState(null),[w,b]=y.useState(null),h=c("provider"),v=c("mode"),x=c("preset"),k=c("tone"),E=c("platform"),$=c("model");c("language");const P=c("topic"),B=c("useTmdb"),[W,Y]=y.useState([]),ee=y.useMemo(()=>kO(W),[W]),Q=v==="Instant"&&String(x||"").startsWith("template:"),X=v==="Instant"&&String(x||"").startsWith("builtin:"),fe=Q?W.find(D=>D.id===String(x).replace("template:","")):null,me=Number.isInteger(Number((Wa=fe==null?void 0:fe.constraints)==null?void 0:Wa.variationCount))?Math.max(1,Number((Gi=fe==null?void 0:fe.constraints)==null?void 0:Gi.variationCount)):1,ve=X?Rc.find(D=>D.key===x):null,[Oe,T]=y.useState(pk("OpenAI")),[M,I]=y.useState(!1),[N,L]=y.useState(!1),[A,_]=y.useState(!1),[R,K]=y.useState(""),[pe,ue]=y.useState(!1),[j,$e]=y.useState(""),[De,rt]=y.useState(""),[st,ke]=y.useState("all"),[Re,J]=y.useState([]),[F,re]=y.useState(()=>Wf()),[be,Le]=y.useState(()=>r4()),O=y.useRef(null),z=y.useRef(0),G=y.useRef({}),se=y.useRef(""),ne=y.useRef(""),q=y.useMemo(()=>B?(Array.isArray(F==null?void 0:F.selectedImages)?F.selectedImages:[]).map((le,ce)=>{const ae=String((le==null?void 0:le.url)||"").trim();return!ae||!xe(ae)?null:{id:`tmdb:${ce}:${ae}`,type:"url",url:ae,__source:"tmdb"}}).filter(Boolean):[],[F==null?void 0:F.selectedImages,B]),ge=y.useMemo(()=>[...(Re||[]).map(D=>({...D,__source:"local"})),...q],[Re,q]),Te=q.length,qe=Re.length+Te,jt=Ve(P).filter(D=>xe(D)).length,Dt=qe>0||jt>0,Bt=qe+jt,Fn=t4(h),on=Dt?!1:Fn,En=on?"Free only":Dt&&Fn?"All models (auto for image refs)":"All models";y.useEffect(()=>{let D=!0;const le=pk(h),ce=`${h}::${on?"free":"all"}`;function ae(Ye){if(!D)return;const ct=Array.isArray(Ye)?Ye.map(dt=>hk(dt,h)).filter(Boolean):[],ot=IO(h,ct);if(T(ot),!ot.length)return;const wt=String(d("model")||"");(!wt||!ot.some(dt=>dt.id===wt))&&u("model",ot[0].id)}async function Me(){var ct,ot;const Ye=G.current[ce];if(Array.isArray(Ye)&&Ye.length){b(null),ae(Ye);return}I(!0),b(null);try{const wt=await cs(),dt=Object.keys(wt).length?{headers:wt}:{},Vn=await Rt({method:"post",url:`/api/settings/provider-keys/${encodeURIComponent(h)}/test`,data:{freeOnly:on,limit:n4(h)},...dt}),un=Array.isArray((ot=(ct=Vn==null?void 0:Vn.data)==null?void 0:ct.data)==null?void 0:ot.models)?Vn.data.data.models.map(Yi=>hk(Yi,h)).filter(Boolean):[];if(un.length){G.current[ce]=un,b(null),ae(un);return}}catch(wt){D&&b(Ay(wt,{fallback:`Gagal memuat model ${h}. Menampilkan daftar model bawaan.`}))}ae(le),I(!1)}return Me().finally(()=>{D&&I(!1)}),()=>{D=!1}},[h,u,d,on]),y.useEffect(()=>{let D=!0;async function le(){var ce,ae;try{const{data:Me}=await Pt.auth.getSession(),Ye=(ce=Me==null?void 0:Me.session)==null?void 0:ce.access_token,ct=Ye?{headers:{Authorization:`Bearer ${Ye}`}}:{},ot=await Rt({method:"get",url:"/api/presets",...ct});if(!D)return;if((ae=ot.data)!=null&&ae.ok&&Array.isArray(ot.data.data)){Y(ot.data.data),localStorage.setItem("templates",JSON.stringify(ot.data.data));return}}catch{}try{const Me=JSON.parse(localStorage.getItem("templates")||"[]");D&&Array.isArray(Me)&&Y(Me)}catch{D&&Y([])}}return le(),()=>{D=!1}},[]),y.useEffect(()=>{async function D(){try{const{data:le}=await Pt.auth.getUser(),ce=le==null?void 0:le.user;if(!ce)return;await lO({supabase:Pt,userId:ce.id})}catch{}}D()},[]),y.useEffect(()=>{var D;if(v==="Instant"&&x){if(x.startsWith("builtin:")){const le=Rc.find(ce=>ce.key===x);le&&(u("tone",le.tone),u("length",le.length))}else if(x.startsWith("template:")){const le=x.replace("template:",""),ce=(W||[]).find(ae=>ae.id===le);ce&&(u("platform",ce.platform||""),u("topic",ce.topic||""),ce.language&&u("language",ce.language),(D=ce.contentStructure)!=null&&D.length&&u("length",ce.contentStructure.length))}}},[v,x,u,W]),y.useEffect(()=>{Vh({enabled:!!B})},[B]),y.useEffect(()=>{re(Wf())},[n==null?void 0:n.key]),y.useEffect(()=>{try{if(typeof window>"u")return;window.localStorage.setItem(LO,be?"1":"0")}catch{}},[be]),y.useEffect(()=>{var ce,ae,Me,Ye,ct,ot,wt,dt;const D=(ce=n==null?void 0:n.state)==null?void 0:ce.historyItem;if(D&&typeof D=="object"){const Vn=String(D.id||D.created_at||"").trim();if(Vn&&Vn===ne.current)return;ne.current=Vn;const un=D.result||{},Yi=String(D.topic||un.topic||un.title||"").trim(),Io=String(D.platform||un.platform||((ae=un.meta)==null?void 0:ae.platform)||"TikTok").trim(),gi=String(D.provider||((Me=un.meta)==null?void 0:Me.provider)||"OpenAI").trim(),$t=String(((Ye=un.meta)==null?void 0:Ye.model)||"").trim(),Jr=String(un.language||((ct=un.meta)==null?void 0:ct.language)||"Indonesia").trim(),Ga=String(((ot=un.meta)==null?void 0:ot.tone)||un.tone||"Fun").trim(),Qi=String(((wt=un.meta)==null?void 0:wt.length)||"short").trim();u("mode","Standard"),u("preset",""),u("topic",Yi),u("platform",Io),u("provider",gi),$t&&u("model",$t),Jr&&u("language",Jr),Ga&&u("tone",Ga),Qi&&["short","medium","long"].includes(Qi)&&u("length",Qi),J([]),K(""),m(null);return}const le=(dt=n==null?void 0:n.state)==null?void 0:dt.preset;le&&(u("preset",le),u("mode","Instant"))},[n,u]);function fr(D){if(!D)return"";if(D.startsWith("builtin:")){const le=Rc.find(ce=>ce.key===D);return le?le.label:D}if(D.startsWith("template:")){const le=D.replace("template:",""),ce=ee.find(ae=>ae.id===le)||W.find(ae=>ae.id===le);return ce?ce.title:D}return D}function Ft(D,le={min:8,max:18,extra:3,fixed:null}){if(le.fixed&&Object.prototype.hasOwnProperty.call(le.fixed,D))return`${le.fixed[D]}ch`;const ce=String(D||"").length+Number(le.extra||0);return`${Math.max(Number(le.min||8),Math.min(Number(le.max||18),ce))}ch`}function Xn(){const D=[],le=String(j||"").toLowerCase();return(st==="all"||st==="builtin")&&Rc.forEach(ce=>{le&&!ce.label.toLowerCase().includes(le)||De&&ce.platform&&ce.platform!==De||D.push({value:ce.key,label:ce.label})}),(st==="all"||st==="template")&&ee.forEach(ce=>{le&&!((ce.title||"").toLowerCase().includes(le)||(ce.topic||"").toLowerCase().includes(le))||De&&ce.platform&&ce.platform!==De||D.push({value:`template:${ce.id}`,label:ce.title||ce.id})}),D}function S(D){const{cleanedTopic:le,combinedImageRefs:ce}=Jt(D.topic);return!(D.mode==="Instant"&&D.preset&&D.preset.startsWith("template:"))&&!le&&!ce.length?"Isi Topik / Ide Konten atau tambahkan minimal 1 referensi gambar":null}function de(){return`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function xe(D){try{const le=new URL(String(D||"").trim());return le.protocol==="http:"||le.protocol==="https:"}catch{return!1}}function Je(D=Re){return(D||[]).map(le=>le.type==="url"?{type:"url",url:le.url}:{type:"data_url",dataUrl:le.dataUrl,name:le.name||null,sizeBytes:le.sizeBytes||null})}function Ve(D){const ce=(String(D||"").match(/https?:\/\/[^\s<>"']+/g)||[]).map(ae=>ae.replace(/[),.;!?]+$/,"").trim()).filter(Boolean);return Array.from(new Set(ce))}function He(D){return String(D||"").replace(/https?:\/\/[^\s<>"']+/g," ").replace(/\s+/g," ").trim()}function Tt(D,le){const ce=[],ae=new Set,Me=[...D||[],...le||[]];for(const Ye of Me)if(Ye){if(Ye.type==="url"){const ct=`url:${Ye.url}`;if(ae.has(ct))continue;ae.add(ct),ce.push(Ye);continue}if(Ye.type==="data_url"){const ct=`data:${Ye.dataUrl}`;if(ae.has(ct))continue;ae.add(ct),ce.push(Ye)}}return ce}function Jt(D){const le=String(D||""),ce=He(le),ae=Ve(le).filter(ot=>xe(ot)).map(ot=>({type:"url",url:ot})),Me=Je(),Ye=(q||[]).map(ot=>({type:"url",url:ot.url})),ct=Tt(Tt(Me,ae),Ye).slice(0,Zs);return{cleanedTopic:ce,combinedImageRefs:ct}}y.useEffect(()=>{if(!Dt){se.current="";return}if(!Array.isArray(Oe)||!Oe.length)return;const D=Oe.filter(ae=>(ae==null?void 0:ae.supportsVision)===!0);if(!D.length)return;const le=Oe.find(ae=>ae.id===$);if((le==null?void 0:le.supportsVision)===!0)return;const ce=`${h}:${D[0].id}:${Bt}`;se.current!==ce&&(se.current=ce,u("model",D[0].id,{shouldDirty:!0}))},[Dt,Bt,Oe,$,h,u]);function Ut(D){const le=Ve(D);if(!le.length)return 0;const ce=Math.max(Zs-qe,0);if(!ce)return m(`Maksimal ${Zs} referensi gambar`),0;const ae=new Set([...(Re||[]).filter(wt=>wt.type==="url").map(wt=>wt.url),...(q||[]).map(wt=>wt.url)]),Me=[];let Ye=0,ct=0,ot=0;for(const wt of le){if(!xe(wt)){Ye+=1;continue}if(ae.has(wt)||Me.some(dt=>dt.url===wt)){ct+=1;continue}if(Me.length>=ce){ot+=1;continue}Me.push({id:de(),type:"url",url:wt})}return Me.length?(J(wt=>[...wt,...Me]),m(null)):ct&&!Ye&&m("URL gambar sudah ada di daftar referensi"),!Me.length&&Ye?m("URL referensi gambar tidak valid. Gunakan http:// atau https://"):ot&&m(`Sebagian URL tidak ditambahkan karena batas maksimal ${Zs} referensi`),Me.length}function ht(D){return new Promise((le,ce)=>{const ae=new FileReader;ae.onload=()=>le(ae.result),ae.onerror=ce,ae.readAsDataURL(D)})}async function Ce(D){if(!D.length)return;const le=Math.max(Zs-qe,0);if(!le){m(`Maksimal ${Zs} referensi gambar`);return}const ce=D.slice(0,le),ae=[];for(const Me of ce){if(!String(Me.type||"").startsWith("image/")){m(`File "${Me.name}" bukan image`);continue}if(Me.size>pf*1024*1024){m(`File "${Me.name}" melebihi ${pf}MB`);continue}try{const Ye=await ht(Me);ae.push({id:de(),type:"data_url",dataUrl:String(Ye||""),name:Me.name,sizeBytes:Me.size})}catch{m(`Gagal membaca file "${Me.name}"`)}}ae.length&&(J(Me=>[...Me,...ae]),m(null)),ce.length>ae.length&&m("Sebagian file tidak bisa ditambahkan. Pastikan file gambar dan ukuran sesuai.")}async function lt(D){const le=Array.from(D.target.files||[]);D.target.value=null,await Ce(le)}async function bt(D){var Ye,ct;const ce=Array.from(((Ye=D.clipboardData)==null?void 0:Ye.items)||[]).filter(ot=>ot.kind==="file"&&String(ot.type||"").startsWith("image/")).map(ot=>ot.getAsFile()).filter(Boolean);if(ce.length){D.preventDefault(),await Ce(ce);return}const ae=((ct=D.clipboardData)==null?void 0:ct.getData("text"))||"";if(Ve(ae).length){D.preventDefault(),Ut(ae);const ot=He(ae);if(ot){const wt=String(c("topic")||""),dt=wt?`${wt}
${ot}`:ot;u("topic",dt,{shouldDirty:!0,shouldTouch:!0})}}}async function wr(D){var ae,Me;const le=Array.from(((ae=D.dataTransfer)==null?void 0:ae.files)||[]);if(le.length){D.preventDefault(),await Ce(le);return}const ce=((Me=D.dataTransfer)==null?void 0:Me.getData("text"))||"";if(Ve(ce).length){D.preventDefault(),Ut(ce);const Ye=He(ce);if(Ye){const ct=String(c("topic")||""),ot=ct?`${ct}
${Ye}`:Ye;u("topic",ot,{shouldDirty:!0,shouldTouch:!0})}}}function Dn(){var D;qe>=Zs||(D=O.current)==null||D.click()}function $n(){if(!B)return;const{cleanedTopic:D}=Jt(d("topic")),le=String(D||(F==null?void 0:F.query)||"").trim();Vh({enabled:!0,query:le||""}),r("/tmdb-finder",{state:{seedQuery:le}})}function Bn(){AO(),re(null)}function Un(D){Le(D==="0")}function ln(D){if(String((D==null?void 0:D.__source)||"local").toLowerCase()==="tmdb"){const ae=String((D==null?void 0:D.url)||"").trim();if(!ae)return;re(Me=>{if(!Me||typeof Me!="object")return Me;const Ye=(Array.isArray(Me.selectedImages)?Me.selectedImages:[]).filter(ot=>String((ot==null?void 0:ot.url)||"").trim()!==ae),ct={...Me,selectedImages:Ye};return RO(ct),ct});return}const ce=String((D==null?void 0:D.id)||"").trim();ce&&J(ae=>ae.filter(Me=>String(Me.id||"").trim()!==ce))}function mt(){l(),J([]),re(Wf()),m(null)}function nr(D,le=Je()){if(!le.length)return D;const ce=le.map((ae,Me)=>{if(ae.type==="url")return`${Me+1}. URL: ${ae.url}`;const Ye=ae.sizeBytes?Math.max(1,Math.round(ae.sizeBytes/1024)):null,ct=Ye?`${Ye}KB`:"unknown size";return`${Me+1}. Upload: ${ae.name||`image-${Me+1}`} (${ct})`});return`${D}

Referensi visual:
${ce.map(ae=>`- ${ae}`).join(`
`)}`}function Zt(D,le=""){var Ye;if(!((D==null?void 0:D.useTmdb)!==!1))return{tmdb:{enabled:!1}};const ae=F&&Number.isInteger(Number(F==null?void 0:F.tmdbId))?F:null;if(ae!=null&&ae.tmdbId){const ct=OO(ae);if((Ye=ct==null?void 0:ct.tmdb)!=null&&Ye.tmdbId)return ct}const Me=String(le||"").trim();return{tmdb:{enabled:!0,...Me?{query:Me}:{}}}}function Or(D){const{cleanedTopic:le,combinedImageRefs:ce}=Jt(D.topic),ae=le||(ce.length?"Konten berbasis referensi gambar":""),Me=ce,Ye=Me.length?{imageReferences:Me}:{},ct=Zt(D,le);if(D.mode==="Instant"&&D.preset&&D.preset.startsWith("template:")){const wt=D.preset.replace("template:",""),dt=W.find(Vn=>Vn.id===wt);return dt?{payload:{mode:"preset",presetId:wt,provider:D.provider,model:D.model,...le?{extraInstruction:le}:{},...Ye,...ct},templatePreset:dt}:{error:"Preset template not found"}}if(D.mode==="Instant"&&D.preset&&D.preset.startsWith("builtin:")){const wt=D.preset,dt=Rc.find(un=>un.key===wt);return{payload:{mode:"manual",manualConfig:qm({platform:D.platform,topic:ae,tone:(dt==null?void 0:dt.tone)||D.tone,length:(dt==null?void 0:dt.length)||D.length,language:D.language}),provider:D.provider,model:D.model,...Ye,...ct},templatePreset:null}}return{payload:{mode:"manual",manualConfig:qm({...D,topic:ae}),provider:D.provider,model:D.model,...Ye,...ct},templatePreset:null}}async function cs(){var D;try{const{data:le}=await Pt.auth.getSession(),ce=(D=le==null?void 0:le.session)==null?void 0:D.access_token;return ce?{Authorization:`Bearer ${ce}`}:{}}catch{return{}}}function Wr(D){return Ay(D,{fallback:"Generate gagal. Coba lagi atau ganti model/provider."})}async function hr(D,le={variations:!1}){var dt,Vn,un,Yi,Io;g(!0),m(null);const ce=S(D);if(ce){m(ce),g(!1);return}const{payload:ae,templatePreset:Me,error:Ye}=Or(D);if(Ye){m(Ye),g(!1);return}const ot=!!le.variations&&ae.mode==="preset"?Math.max(1,Math.min(Number(((dt=Me==null?void 0:Me.constraints)==null?void 0:dt.variationCount)||1),10)):1,wt={timeoutMs:3e4,retryAttempts:1,retryDelayMs:450};try{const gi=await cs(),$t=Object.keys(gi).length?{headers:gi}:{};if(ot===1){const Hn=await Rt({method:"post",url:"/api/generate",data:ae,...$t},wt);if(!((Vn=Hn.data)!=null&&Vn.ok)){const Os=(un=Hn.data)==null?void 0:un.error;m((Os==null?void 0:Os.message)||Os||"No data");return}const Zi=Hn.data.data;e(Zi);return}const Jr=await Rt({method:"post",url:"/api/generate",data:ae,...$t},wt);if(!((Yi=Jr.data)!=null&&Yi.ok)){const Hn=(Io=Jr.data)==null?void 0:Io.error;m((Hn==null?void 0:Hn.message)||Hn||"No data");return}const Ga=ot-1,Qi=Ga>0?Array.from({length:Ga},()=>Rt({method:"post",url:"/api/generate",data:ae,...$t},wt)):[],Xi=Qi.length?await Promise.allSettled(Qi):[],Od=[{status:"fulfilled",value:Jr},...Xi],yi=Od.filter(Hn=>{var Zi,Os;return Hn.status==="fulfilled"&&((Os=(Zi=Hn.value)==null?void 0:Zi.data)==null?void 0:Os.ok)}).map(Hn=>Hn.value.data.data);if(!yi.length){const Hn=Od.find(Zi=>Zi.status==="rejected");Hn&&Hn.status==="rejected"?m(Wr(Hn.reason)):m("Semua variation gagal di-generate");return}const Hp={...yi[0],variations:yi,variation_meta:{requested:ot,generated:yi.length}};e(Hp),yi.length<ot&&m(`Sebagian variation gagal. Berhasil: ${yi.length}/${ot}`)}catch(gi){m(Wr(gi))}finally{g(!1)}}async function us(D){return hr(D,{variations:!1})}async function Cs(D){return hr(D,{variations:!0})}y.useEffect(()=>{t&&t!==z.current&&(f||(z.current=t,a(us)()))},[t,f,a]);function ds(){const{cleanedTopic:D,combinedImageRefs:le}=Jt(c("topic")),ce={platform:c("platform"),topic:D||(le.length?"Konten berbasis referensi gambar":""),length:c("length"),language:c("language"),tone:c("tone"),keywords:c("keywords")||[],cta:c("cta")?[{type:"primary",text:c("cta")}]:[]},ae=qm(ce),Me=PV(ae),Ye=AV(Me,ae);K(nr(Ye,le))}const xr=(Oe||[]).find(D=>D.id===$)||null,zn=Dt&&(xr==null?void 0:xr.supportsVision)===!0,cn=String((F==null?void 0:F.title)||(F==null?void 0:F.query)||"").trim(),je=String((F==null?void 0:F.entityType)||(F==null?void 0:F.mediaType)||"").trim().toUpperCase(),ye=Te,V=F!=null&&F.tmdbId?`${je||"TMDB"}  ${cn||"-"}${F!=null&&F.year?` (${F.year})`:""}`:"Belum ada data TMDB yang dipilih",ie=(F==null?void 0:F.candidate)||null,Ae=(F==null?void 0:F.searchMeta)||null,H=(F==null?void 0:F.movieOrTv)||null,Qe=String((F==null?void 0:F.entityType)||(F==null?void 0:F.mediaType)||"").trim().toLowerCase()==="tv",Ie=Qe&&(F!=null&&F.scopeLabels)&&typeof F.scopeLabels=="object"?F.scopeLabels:null,_t=Qe?"Creator":"Director",It=Qe?(H==null?void 0:H.creator)||(Array.isArray(H==null?void 0:H.creator_list)?H.creator_list[0]:"")||(H==null?void 0:H.director)||"-":(H==null?void 0:H.director)||(Array.isArray(H==null?void 0:H.director_list)?H.director_list[0]:"")||"-",Kt=String((H==null?void 0:H.reference_scope)||(F==null?void 0:F.referenceScope)||"").trim().toLowerCase(),Gr=(()=>{if(!Qe)return"";const D=String((Ie==null?void 0:Ie.season)||"").trim();if(D)return D;if(Kt==="series")return"All Season";const le=(F==null?void 0:F.season)||null,ce=Number((le==null?void 0:le.number)||0);if(Number.isInteger(ce)&&ce>0){const ae=String((le==null?void 0:le.name)||"").trim();return ae?`S${ce}  ${ae}`:`S${ce}`}return"-"})(),Ts=(()=>{if(!Qe)return"";const D=String((Ie==null?void 0:Ie.episode)||"").trim();if(D)return D;const le=Gr||"-";if(Kt==="season")return le!=="-"?`${le}  All Episode`:"All Episode";if(Kt!=="episode")return"-";const ce=(F==null?void 0:F.episode)||null,ae=Number((ce==null?void 0:ce.number)||0);if(Number.isInteger(ae)&&ae>0){const Me=String((ce==null?void 0:ce.name)||"").trim(),Ye=Me?`E${ae}  ${Me}`:`E${ae}`;return le!=="-"?`${le}  ${Ye}`:Ye}return"-"})(),$s=String((ie==null?void 0:ie.posterUrl)||((Rr=q==null?void 0:q[0])==null?void 0:Rr.url)||"").trim(),fs=Number.isFinite(Number(Ae==null?void 0:Ae.count))?Number(Ae.count):F!=null&&F.tmdbId?1:0,mc=[`${((ie==null?void 0:ie.mediaType)||(F==null?void 0:F.entityType)||"-").toString().toUpperCase()} Detail Kandidat: ${fs}`,Ae!=null&&Ae.query?` ${Ae.query} ${F!=null&&F.year?`  ${F.year}`:""}`:"",Ae!=null&&Ae.languageCode?` ${Ae.languageCode}`:"",Ae!=null&&Ae.region?`reg-${Ae.region}`:""].filter(Boolean).join("  ");return o.jsxs(U,{onSubmit:a(us),className:"generate-form",children:[w&&o.jsx(Lt,{variant:"warning",children:w}),p&&o.jsx(Lt,{variant:"danger",children:p}),o.jsxs(Ct,{className:"mb-3",children:[o.jsxs(Se,{md:4,children:[o.jsx(U.Label,{children:"Mode"}),o.jsxs(U.Select,{...i("mode"),children:[o.jsx("option",{value:"Standard",children:"Standard"}),o.jsx("option",{value:"Instant",children:"Instant"})]})]}),v==="Instant"&&o.jsxs(Se,{md:8,children:[o.jsx(U.Label,{children:"Preset (Instant)"}),o.jsxs(Ot,{show:pe,onToggle:D=>ue(D),className:"w-100",children:[o.jsx(Ot.Toggle,{as:oe,variant:"outline-secondary",className:"w-100 text-start preset-toggle",children:fr(x)||"-- choose preset --"}),o.jsxs(Ot.Menu,{style:{maxHeight:320,width:"100%",padding:".5rem"},children:[o.jsx("div",{className:"mb-2",children:o.jsx(U.Control,{size:"sm",placeholder:" Cari preset...",value:j,onChange:D=>$e(D.target.value)})}),o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsxs(U.Select,{size:"sm",value:De,onChange:D=>rt(D.target.value),children:[o.jsx("option",{value:"",children:"(Semua)"}),uk.map(D=>o.jsx("option",{value:D,children:D},D))]}),o.jsxs(U.Select,{size:"sm",value:st,onChange:D=>ke(D.target.value),children:[o.jsx("option",{value:"all",children:"(Semua)"}),o.jsx("option",{value:"builtin",children:"Built-in"}),o.jsx("option",{value:"template",children:"Template"})]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:()=>{$e(""),rt(""),ke("all")},children:"Reset"})]}),o.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:Xn().map(D=>o.jsx(Ot.Item,{onClick:()=>{u("preset",D.value),ue(!1)},children:D.label},D.value))})]})]}),o.jsx(U.Control,{type:"hidden",...i("preset")})]})]}),o.jsxs(U.Group,{className:"mb-3",children:[o.jsx(U.Label,{children:Q?"Instruksi Tambahan + Referensi Gambar (Opsional)":"Topik / Ide Konten + Referensi Gambar"}),o.jsxs("div",{className:"ref-unified-input border rounded p-2",onDrop:wr,onDragOver:D=>D.preventDefault(),children:[ge.length>0&&o.jsx("div",{className:"image-ref-list mb-2",children:ge.map((D,le)=>o.jsxs("div",{className:"image-ref-item",children:[o.jsx("img",{src:D.type==="url"?D.url:D.dataUrl,alt:`reference-${le+1}`,className:"image-ref-thumb"}),D.__source==="tmdb"&&o.jsx("span",{className:"image-ref-badge",children:"TMDB"}),o.jsx("button",{type:"button",className:"image-ref-remove",onClick:()=>ln(D),"aria-label":`Hapus referensi gambar ${le+1}`,children:"X"})]},D.id))}),o.jsx(U.Control,{as:"textarea",rows:Q?2:3,className:"border-0 shadow-none p-0",placeholder:Q?`Tulis instruksi tambahan, paste URL gambar, paste image (Ctrl+V), atau drag & drop... Maks ${Zs} gambar, ${pf}MB/file.`:`Masukan topik / ide konten. Bisa langsung paste URL gambar, paste image (Ctrl+V), atau drag & drop... Maks ${Zs} gambar, ${pf}MB/file.`,...i("topic"),onPaste:bt}),o.jsxs("div",{className:"composer-action-row mt-2",children:[o.jsxs("div",{className:"composer-left-group",children:[o.jsx(oe,{type:"button",size:"sm",variant:"light",className:"upload-icon-btn",onClick:Dn,disabled:qe>=Zs,title:"Upload gambar","aria-label":"Upload gambar",children:o.jsx(Qt,{icon:"gridicons:add-outline",width:"26",height:"26"})}),o.jsxs("div",{className:"composer-controls d-flex align-items-center gap-2",children:[!Q&&o.jsx(U.Select,{size:"sm",className:"composer-select",style:{width:Ft(E,{fixed:QV,min:7,max:20,extra:3})},...i("platform"),children:uk.map(D=>o.jsx("option",{value:D,children:D},D))}),o.jsx(U.Select,{size:"sm",className:"composer-select",style:{width:Ft(h,{fixed:XV,min:7,max:16,extra:3})},...i("provider"),children:qV.map(D=>o.jsx("option",{value:D,children:D},D))}),o.jsx(U.Select,{size:"sm",className:"composer-select",style:{width:Ft($,{min:7,max:20,extra:3})},disabled:M&&!Oe.length,...i("model"),children:(Oe||[]).map(D=>o.jsxs("option",{value:D.id,children:[D.isFeatured?`* ${D.label}`:D.label,D.supportsVision===!0?" (Vision)":""]},D.id))})]})]}),o.jsxs("div",{className:"composer-status-group",children:[o.jsx("span",{className:`composer-status-icon ${zn?"is-on":"is-off"}`,title:`Vision ${zn?"ON":"OFF"}`,"aria-label":`Vision ${zn?"ON":"OFF"}`,children:o.jsx(Qt,{icon:"picon:fox",width:"18",height:"18"})}),o.jsx("span",{className:`composer-status-icon ${on?"is-free":"is-paid"}`,title:`Pool: ${En}`,"aria-label":`Pool: ${En}`,children:o.jsx(Qt,{icon:"streamline-sharp:tag-free-circle-remix",width:"18",height:"18"})})]})]}),!Q&&o.jsxs(Ct,{className:"mb-2 mt-2 triple-row",children:[o.jsxs(Se,{md:2,children:[o.jsx(U.Label,{children:"Bahasa"}),o.jsx(U.Select,{className:"language-select-compact",style:{width:"9ch"},...i("language"),children:YV.map(D=>o.jsx("option",{value:D.value,children:D.label},D.value))})]}),o.jsxs(Se,{md:4,children:[o.jsx(U.Label,{children:"Long Output"}),o.jsxs(U.Select,{...i("length"),children:[o.jsx("option",{value:"short",children:"Short"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"long",children:"Long"})]})]}),v==="Standard"&&o.jsxs(Se,{md:4,children:[o.jsx(U.Label,{children:"Tone (Manual)"}),o.jsxs("div",{children:[o.jsxs(Ot,{show:A,onToggle:D=>_(D),autoClose:!1,children:[o.jsx(Ot.Toggle,{as:oe,variant:"outline-secondary",size:"sm",className:"w-100 text-start",children:k||"-- pilih tone --"}),o.jsxs(Ot.Menu,{style:{maxHeight:300,overflow:"auto"},children:[GV.map(D=>o.jsx(Ot.Item,{onClick:()=>{u("tone",D),_(!1)},children:D},D)),!N&&o.jsx(Ot.Item,{onClick:()=>L(!0),children:"More..."}),N&&o.jsxs(o.Fragment,{children:[o.jsx(Ot.Divider,{}),JV.map(D=>o.jsx(Ot.Item,{onClick:()=>{u("tone",D),_(!1)},children:D},D)),o.jsx(Ot.Divider,{}),o.jsx(Ot.Item,{onClick:()=>L(!1),children:"Less"})]})]})]}),o.jsx(U.Control,{type:"hidden",...i("tone")})]})]}),X&&o.jsxs(Se,{md:4,children:[o.jsx(U.Label,{children:"Tone Built-in (Preset)"}),o.jsx(U.Control,{value:(ve==null?void 0:ve.tone)||"Default",readOnly:!0})]})]}),o.jsxs("div",{className:"tmdb-bridge-row mt-2",children:[o.jsx(U.Check,{type:"switch",id:"use-tmdb-generate",label:"Use TMDB",className:"tmdb-switch",...i("useTmdb")}),o.jsx(oe,{type:"button",size:"sm",variant:"outline-primary",className:"tmdb-finder-btn",disabled:!B,onClick:$n,children:"Buka TMDB Finder"}),B&&(F==null?void 0:F.tmdbId)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"tmdb-bridge-summary",title:V,children:V}),o.jsxs("span",{className:"tmdb-bridge-badge",children:[ye," gambar"]}),o.jsx(oe,{type:"button",size:"sm",variant:"outline-danger",className:"tmdb-clear-btn",onClick:Bn,children:"Lepas"})]})]}),B&&!(F!=null&&F.tmdbId)&&o.jsxs("small",{className:"text-muted d-block mt-1 tmdb-bridge-empty",children:["TMDB belum dipilih. Klik ",o.jsx("strong",{children:"Buka TMDB Finder"})," untuk cari Movie/TV + pilih detail dan gambar."]}),B&&(F==null?void 0:F.tmdbId)&&o.jsxs("div",{className:"tmdb-selected-ref-wrap mt-2",children:[o.jsxs("div",{className:"tmdb-selected-card",children:[o.jsx("div",{className:"tmdb-candidate-thumb-wrap",children:$s?o.jsx("img",{src:$s,alt:cn||"tmdb-selected",className:"tmdb-candidate-thumb"}):o.jsx("div",{className:"tmdb-candidate-thumb tmdb-candidate-thumb-empty",children:"No Poster"})}),o.jsxs("div",{className:"tmdb-candidate-meta",children:[o.jsx("div",{className:"tmdb-candidate-title",children:cn||"-"}),o.jsxs("div",{className:"tmdb-candidate-sub",children:[((ie==null?void 0:ie.mediaType)||(F==null?void 0:F.entityType)||"-").toString().toUpperCase(),F!=null&&F.year?`  ${F.year}`:""]}),o.jsx("div",{className:"tmdb-candidate-rating",children:Number.isFinite(Number(ie==null?void 0:ie.rating))?` ${Number(ie.rating).toFixed(1)}`:"-"})]}),o.jsx("div",{className:"tmdb-candidate-overview",children:String((H==null?void 0:H.overview)||"").trim()||"-"})]}),!!H&&o.jsx(ka,{className:"mt-2 tmdb-detail-accordion",activeKey:be?"0":null,onSelect:Un,children:o.jsxs(ka.Item,{eventKey:"0",children:[o.jsx(ka.Header,{children:mc||"Kandidat TMDB"}),o.jsx(ka.Body,{children:o.jsxs("div",{className:"tmdb-selected-detail-grid",children:[o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Tagline:"})," ",(H==null?void 0:H.tagline)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Release:"})," ",(H==null?void 0:H.release_date)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Genres:"})," ",Array.isArray(H==null?void 0:H.genres)&&H.genres.join(", ")||"-"]}),o.jsxs("small",{children:[o.jsxs("strong",{className:"st-dt",children:[_t,":"]})," ",It]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Runtime:"})," ",(H==null?void 0:H.runtime)||"-"," menit"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Status:"})," ",(H==null?void 0:H.status)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Certification:"})," ",(H==null?void 0:H.certification_id)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Vote Average:"})," ",Number.isFinite(Number(H==null?void 0:H.vote_average))?Number(H.vote_average).toFixed(1):"-"]}),!Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Budget:"})," ",Number.isFinite(Number(H==null?void 0:H.budget))&&Number(H==null?void 0:H.budget)>0?`$${new Intl.NumberFormat("en-US").format(Math.round(Number(H.budget)))}`:"-"]}),!Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Revenue:"})," ",Number.isFinite(Number(H==null?void 0:H.revenue))&&Number(H==null?void 0:H.revenue)>0?`$${new Intl.NumberFormat("en-US").format(Math.round(Number(H.revenue)))}`:"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Original Language:"})," ",(H==null?void 0:H.original_language)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Production Countries:"})," ",Array.isArray(H==null?void 0:H.production_countries)&&H.production_countries.slice(0,4).join(", ")||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Production Companies:"})," ",Array.isArray(H==null?void 0:H.production_companies)&&H.production_companies.slice(0,4).join(", ")||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Networks:"})," ",Array.isArray(H==null?void 0:H.networks)&&H.networks.slice(0,4).join(", ")||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Cast:"})," ",Array.isArray(H==null?void 0:H.cast_top)&&H.cast_top.slice(0,4).join(", ")||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Keywords:"})," ",Array.isArray(H==null?void 0:H.keywords)&&H.keywords.slice(0,8).join(", ")||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Watch:"})," ",Array.isArray(H==null?void 0:H.watch_providers_id)&&H.watch_providers_id.slice(0,4).join(", ")||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Reference Scope:"})," ",(H==null?void 0:H.reference_scope)||(F==null?void 0:F.referenceScope)||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Season:"})," ",Gr||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Episode:"})," ",Ts||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Season Count:"})," ",(H==null?void 0:H.season_count)||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Episode Count:"})," ",(H==null?void 0:H.episode_count)||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Episode Type:"})," ",(H==null?void 0:H.episode_type)||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Season Overview:"})," ",(H==null?void 0:H.season_overview)||((Ji=F==null?void 0:F.season)==null?void 0:Ji.overview)||"-"]}),Qe&&o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Episode Overview:"})," ",(H==null?void 0:H.episode_overview)||((vn=F==null?void 0:F.episode)==null?void 0:vn.overview)||"-"]}),o.jsxs("small",{children:[o.jsx("strong",{className:"st-dt",children:"Trailer:"})," ",H!=null&&H.trailer?o.jsx("a",{href:H.trailer,target:"_blank",rel:"noreferrer",children:"link"}):"-"]})]})})]})})]}),o.jsx(U.Control,{ref:O,type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp,image/gif",multiple:!0,onChange:lt,style:{display:"none"}})]})]}),o.jsxs("div",{className:"d-grid d-md-flex gap-2",children:[o.jsx(oe,{type:"submit",disabled:f,variant:"primary",className:"w-md-auto",children:f?o.jsx(Ri,{animation:"border",size:"sm"}):"Generate"}),Q&&me>1&&o.jsx(oe,{type:"button",disabled:f,variant:"outline-primary",className:"w-md-auto",onClick:a(Cs),children:f?o.jsx(Ri,{animation:"border",size:"sm"}):`Generate Variations (${me})`}),o.jsx(oe,{type:"button",variant:"outline-secondary",onClick:mt,className:"w-md-auto",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[o.jsx("rect",{width:"24",height:"24",fill:"none"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"M20 8c-1.403-2.96-4.463-5-8-5a9 9 0 1 0 0 18a9 9 0 0 0 9-9m0-9v6h-6"})]})}),o.jsx(oe,{type:"button",variant:"outline-primary",onClick:ds,className:"w-md-auto",children:"Preview Prompt"})]}),R&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h6",{children:"Preview Prompt"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:R})]})]})}function i4(e){return e==="pass"?"success":e==="retry"?"warning":e==="fallback"?"secondary":e==="block"?"danger":"dark"}function a4(e){return e==="GO"?"success":e==="REVISE"?"warning":e==="BLOCK"?"danger":"secondary"}function oa(e){return String(e||"").trim()||"-"}function o4(e){if(Array.isArray(e)){const t=e.map(n=>String(n||"").trim()).filter(Boolean);return t.length?t.join(", "):"-"}return oa(e)}function mk(e,t="-"){if(Array.isArray(e)){const r=e.map(s=>String(s||"").trim()).filter(Boolean);return r.length?r.join(`
`):t}return String(e||"").trim()||t}function l4(e,{isBlogger:t=!1}={}){var m,w;const n=oa(e==null?void 0:e.title),r=oa(e==null?void 0:e.hook),s=oa(e==null?void 0:e.description),i=o4(e==null?void 0:e.hashtags),a=oa(e==null?void 0:e.narrator),l=oa((e==null?void 0:e.audioRecommendation)||((m=e==null?void 0:e.meta)==null?void 0:m.audio)),c=((w=e==null?void 0:e.meta)==null?void 0:w.bloggerPublishPack)||{},u=oa((e==null?void 0:e.slug)||(c==null?void 0:c.slug)),d=mk((e==null?void 0:e.internalLinks)||(c==null?void 0:c.internalLinks)),f=mk((e==null?void 0:e.externalReferences)||(c==null?void 0:c.externalReferences)),g=oa((e==null?void 0:e.featuredSnippet)||(c==null?void 0:c.featuredSnippet)),p=[`Title: ${n}`,`Hook: ${r}`,`Deskripsi: ${s}`,`Hashtag: ${i}`,"Skrip Narator/Voice:",a];return t?(p.push(`Slug: ${u}`),p.push("Internal Links:"),p.push(d),p.push("External References:"),p.push(f),p.push(`Featured Snippet: ${g}`)):(p.push("Audio:"),p.push(l)),p.join(`
`)}function c4({item:e,onCopy:t,onRegenerate:n,onSave:r}){var Ft,Xn,S,de,xe,Je,Ve,He,Tt,Jt,Ut,ht,Ce,lt,bt,wr,Dn,$n,Bn,Un,ln,mt,nr,Zt,Or,cs,Wr,hr,us,Cs,ds,xr,zn,cn,je;const[s,i]=y.useState(0);if(y.useEffect(()=>{i(0)},[e]),!e)return null;const a=Array.isArray(e.variations)&&e.variations.length?e.variations:[e],l=a[s]||e,c=["TikTok","YouTube Short","YouTube Long","Shopee","Tokopedia","Lazada","Instagram Reels","Facebook Reels","Pinterest","WhatsApp Status","Threads","WhatsApp Channel","Telegram","LinkedIn","X (Twitter)","SoundCloud","Blog Blogger"];let u=l.title||"",d=l.platform||((Ft=l.meta)==null?void 0:Ft.platform);const f=(Xn=l.meta)==null?void 0:Xn.provider,g=(S=l.meta)==null?void 0:S.model,p=(de=l.meta)==null?void 0:de.keySource,m=(xe=l.meta)==null?void 0:xe.providerCall,w=Array.isArray((Je=l.meta)==null?void 0:Je.warnings)?l.meta.warnings:[],b=String(((He=(Ve=l.meta)==null?void 0:Ve.vision)==null?void 0:He.mode)||"");let h=((Tt=l.meta)==null?void 0:Tt.tone)||l.tone;const v=l.language||((Jt=l.meta)==null?void 0:Jt.language),x=Number(((Ut=l.meta)==null?void 0:Ut.imageReferencesCount)||0),k=Number(((ht=l.meta)==null?void 0:ht.complianceScore)??((Ce=l.meta)==null?void 0:Ce.qualityScore)),E=Number.isFinite(k),$=E?Math.max(0,Math.min(100,Math.round(k))):null,P=Number((lt=l.meta)==null?void 0:lt.performancePotentialScore),B=Number.isFinite(P),W=B?Math.max(0,Math.min(100,Math.round(P))):null,Y=Number((bt=l.meta)==null?void 0:bt.finalScore),ee=Number.isFinite(Y),Q=ee?Math.max(0,Math.min(100,Number(Y.toFixed(1)))):null,X=String(((Dn=(wr=l.meta)==null?void 0:wr.aiDecision)==null?void 0:Dn.status)||"").toUpperCase(),fe=Array.isArray((Bn=($n=l.meta)==null?void 0:$n.aiDecision)==null?void 0:Bn.reasons)?l.meta.aiDecision.reasons:[],me=String(((Un=l.meta)==null?void 0:Un.performanceConfidence)||"").toLowerCase(),ve=String(((ln=l.meta)==null?void 0:ln.qualityGate)||"").toLowerCase(),Oe=Array.isArray((mt=l.meta)==null?void 0:mt.complianceChecks)?l.meta.complianceChecks:Array.isArray((nr=l.meta)==null?void 0:nr.qualityChecks)?l.meta.qualityChecks:[],T=Array.isArray((Zt=l.meta)==null?void 0:Zt.performanceChecks)?l.meta.performanceChecks:[],M=(Or=l.meta)!=null&&Or.platformContract&&typeof((cs=l.meta)==null?void 0:cs.platformContract)=="object"?l.meta.platformContract:null,I=(Wr=l.meta)!=null&&Wr.platformContractAdjustments&&typeof((hr=l.meta)==null?void 0:hr.platformContractAdjustments)=="object"?l.meta.platformContractAdjustments:null,N=Number(M==null?void 0:M.stage),L=Number.isFinite(N)&&N>0,A=Array.isArray(M==null?void 0:M.hookRange)&&M.hookRange.length===2?M.hookRange:null,_=Array.isArray(M==null?void 0:M.descriptionSentences)&&M.descriptionSentences.length===2?M.descriptionSentences:null,R=Array.isArray(M==null?void 0:M.hashtagRange)&&M.hashtagRange.length===2?M.hashtagRange:null,K=typeof(M==null?void 0:M.requireCtaInDescription)=="boolean"?M.requireCtaInDescription:null,pe=String((M==null?void 0:M.ctaStyle)||"").trim(),ue=!!(I!=null&&I.hookAdjusted),j=!!(I!=null&&I.descriptionAdjusted),$e=!!(I!=null&&I.hashtagAdjusted),De=Number.isFinite(Number(I==null?void 0:I.hashtagRemoved))?Number((I==null?void 0:I.hashtagRemoved)||0):null,rt=Number.isFinite(Number(I==null?void 0:I.hashtagAdded))?Number((I==null?void 0:I.hashtagAdded)||0):null,st=!!(I!=null&&I.slugAdjusted),ke=!!(I!=null&&I.internalLinksAdjusted),Re=!!(I!=null&&I.externalReferencesAdjusted),J=!!(I!=null&&I.featuredSnippetAdjusted),F=Array.isArray(M==null?void 0:M.articleWordRange)&&M.articleWordRange.length===2?M.articleWordRange:null,re=Array.isArray(M==null?void 0:M.articleTargetWords)&&M.articleTargetWords.length===2?M.articleTargetWords:null,be=Array.isArray(M==null?void 0:M.metaDescriptionChars)&&M.metaDescriptionChars.length===2?M.metaDescriptionChars:null,Le=ue||j||$e||st||ke||Re||J,O=[ue?"Hook adjusted":null,j?"Description adjusted":null,$e?`Hashtag adjusted${De!==null||rt!==null?` (removed ${De??0}, added ${rt??0})`:""}`:null,st?"Slug adjusted":null,ke?"Internal links adjusted":null,Re?"External refs adjusted":null,J?"Featured snippet adjusted":null].filter(Boolean),z=!!M||!!I||L||!!A||!!_||!!R||K!==null||!!pe,se=v?{Indonesia:"ID",Indonesian:"ID",English:"EN"}[v]||String(v).slice(0,2).toUpperCase():null;if(!d&&u){const ye=u.split(" - ");if(ye.length>1){const V=ye[0].trim();c.includes(V)&&(d=V,u=ye.slice(1).join(" - ").trim())}}if(!h&&u){const ye=u.match(/\s*\(([^)]+)\)\s*$/);ye&&(h=ye[1],u=u.replace(/\s*\([^)]+\)\s*$/,"").trim())}const ne=String(d||((us=l.meta)==null?void 0:us.platform)||"").toLowerCase()==="blog blogger",q=(Cs=l.meta)!=null&&Cs.bloggerPublishPack&&typeof((ds=l.meta)==null?void 0:ds.bloggerPublishPack)=="object"?l.meta.bloggerPublishPack:null,ge=String(l.slug||(q==null?void 0:q.slug)||"").trim(),Te=Array.isArray(l.internalLinks)?l.internalLinks:Array.isArray(q==null?void 0:q.internalLinks)?q.internalLinks:[],qe=Array.isArray(l.externalReferences)?l.externalReferences:Array.isArray(q==null?void 0:q.externalReferences)?q.externalReferences:[],jt=String(l.featuredSnippet||(q==null?void 0:q.featuredSnippet)||"").trim(),Dt=Number(((zn=(xr=l.meta)==null?void 0:xr.qualitySummary)==null?void 0:zn.narratorWordCount)||0),Bt=ne?"Lead / Opening:":"Hook:",Fn=ne?"Meta Description:":"Deskripsi:",on=ne?"Labels:":"Hashtag:",En=ne?"Artikel SEO:":"Skrip Narator:";return o.jsx(We,{className:"mt-3",children:o.jsxs(We.Body,{children:[a.length>1&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("small",{className:"text-muted d-block mb-1",children:["Variations: ",a.length,(cn=e==null?void 0:e.variation_meta)!=null&&cn.requested?` (requested ${e.variation_meta.requested})`:""]}),o.jsx("div",{className:"d-flex gap-1 flex-wrap",children:a.map((ye,V)=>o.jsxs(oe,{size:"sm",variant:V===s?"primary":"outline-secondary",onClick:()=>i(V),children:["V",V+1]},ye.id||V))})]}),o.jsxs("div",{className:"badges-result mb-2",children:[d&&o.jsx(Ue,{bg:"danger gradient",text:"dark",className:"me-1",children:d}),f&&o.jsx(Ue,{bg:"info",className:"me-1",children:f}),g&&o.jsx(Ue,{bg:"primary",className:"me-1",children:g}),p&&o.jsx(Ue,{bg:p==="user"?"success":"secondary",className:"me-1",children:p==="user"?"User Key":"Server Key"}),m&&o.jsx(Ue,{bg:m==="real"?"success":"dark",className:"me-1",children:m==="real"?"Real AI":"Mock AI"}),b==="multimodal"&&o.jsx(Ue,{bg:"success",className:"me-1",children:"Vision ON"}),b==="text_fallback"&&o.jsx(Ue,{bg:"warning",text:"dark",className:"me-1",children:"Vision Fallback"}),se&&o.jsx(Ue,{bg:"warning",text:"dark",className:"me-1",children:se}),h&&o.jsx(Ue,{bg:"secondary",className:"me-1",children:h}),x>0&&o.jsxs(Ue,{bg:"dark",className:"me-1",children:["Image Ref: ",x]}),ee&&o.jsxs(Ue,{bg:"primary",className:"me-1",children:["Final: ",Q,"%"]}),E&&o.jsxs(Ue,{bg:"success",className:"me-1",children:["Compliance: ",$]}),B&&o.jsxs(Ue,{bg:"info",className:"me-1",children:["Potential: ",W]}),X&&o.jsxs(Ue,{bg:a4(X),className:"me-1",children:["Decision: ",X]}),L&&o.jsxs(Ue,{bg:"dark",className:"me-1",children:["Contract S",N]}),Le&&o.jsx(Ue,{bg:"warning",text:"dark",className:"me-1",children:"Adjusted"}),ve&&o.jsxs(Ue,{bg:i4(ve),text:ve==="retry"?"dark":void 0,className:"me-1",children:["Gate: ",ve]}),l.id&&o.jsxs("small",{className:"text-muted ms-2 gen-result-id",title:l.id,children:["ID: ",String(l.id).slice(0,8)]})]}),z&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("small",{className:"d-block text-muted",children:["Platform Contract",L?` (Stage ${N})`:"",": Hook ",A?`${A[0]}-${A[1]} char`:"-"," ",ne?`Meta ${be?`${be[0]}-${be[1]} char`:"-"}  Article ${F?`${F[0]}-${F[1]} kata`:"-"}`:`Desc ${_?`${_[0]}-${_[1]} kalimat`:"-"}  Hashtag ${R?`${R[0]}-${R[1]}`:"-"}`]}),ne&&o.jsxs("small",{className:"d-block text-muted",children:["Target Article Words: ",re?`${re[0]}-${re[1]}`:"-"]}),o.jsxs("small",{className:"d-block text-muted",children:["CTA in Description: ",K===null?"-":K?"required":"optional",pe?`  Style: ${pe}`:""]}),o.jsxs("small",{className:`d-block ${Le?"text-warning":"text-muted"}`,children:["Adjustment: ",Le?O.join("  "):"No adjustment"]})]}),o.jsx("h5",{className:"mb-3 text-capitalize",children:u}),o.jsx("label",{className:"lb-result",children:Bt}),o.jsxs("p",{children:[" ",l.hook]}),o.jsx("label",{className:"lb-result",children:Fn}),o.jsxs("p",{children:[" ",l.description]}),o.jsx("label",{className:"lb-result",children:on}),o.jsx("div",{className:"mb-2",children:(l.hashtags||[]).map(ye=>o.jsx(Ue,{bg:"secondary",className:"me-1",children:ye},ye))}),ne&&o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"lb-result",children:"Slug:"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:ge||""}),o.jsx("label",{className:"lb-result",children:"Internal Links:"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:Te.length?Te.join(`
`):""}),o.jsx("label",{className:"lb-result",children:"External References:"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:qe.length?qe.join(`
`):""}),o.jsx("label",{className:"lb-result",children:"Featured Snippet:"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:jt||""})]}),o.jsx("label",{className:"lb-result",children:En}),ne&&Dt>0&&o.jsxs("small",{className:"d-block text-muted mb-1",children:["Word count: ",Dt]}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:l.narrator||""}),!ne&&o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"lb-result",children:"Audio:"}),o.jsx("pre",{className:"pre-end",style:{whiteSpace:"pre-wrap",marginBottom:".75rem"},children:l.audioRecommendation||((je=l.meta)==null?void 0:je.audio)||""})]}),o.jsxs("div",{className:"d-flex gap-2 btns-result",children:[o.jsx(oe,{size:"sm",variant:"outline-primary",className:"btn-salin",onClick:()=>{const ye=l4(l,{isBlogger:ne});navigator.clipboard.writeText(ye),t&&t()},children:"Salin"}),o.jsx(oe,{size:"sm",variant:"outline-success",className:"btn-bulang",onClick:()=>n&&n(l),children:"Buat Ulang"}),o.jsx(oe,{size:"sm",variant:"primary",className:"btn-simpan",onClick:()=>r&&r(l),children:"Simpan"})]}),w.length>0&&o.jsx("div",{className:"mb-2 mt-2 text-warning",children:w.map((ye,V)=>o.jsx("small",{className:"d-block info-output",children:ye},`${V}-${ye}`))}),(E||B||ee||X)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("small",{className:"d-block text-muted",children:["Quality Compliance Score: ",E?`${$}/100`:""]}),o.jsxs("small",{className:"d-block text-muted",children:["Performance Potential Score: ",B?`${W}/100`:"",me?` (${me})`:""]}),o.jsxs("small",{className:"d-block text-muted",children:["AI Decision: ",X||""]}),o.jsxs("small",{className:"d-block text-muted",children:["Final Score (Gate): ",ee?`${Q}%`:""]}),fe.map((ye,V)=>o.jsxs("small",{className:"d-block text-muted",children:["Reason: ",ye]},`${V}-${ye}`))]}),Oe.length>0&&o.jsx("div",{className:"mb-2",children:Oe.map(ye=>{const V=String((ye==null?void 0:ye.label)||(ye==null?void 0:ye.id)||"Check"),ie=Number((ye==null?void 0:ye.awarded)||0),Ae=Number((ye==null?void 0:ye.weight)||0),H=String((ye==null?void 0:ye.note)||"").trim();return o.jsxs("small",{className:"d-block text-muted",children:["Compliance - ",V,": ",ie,"/",Ae,H?` - ${H}`:""]},String((ye==null?void 0:ye.id)||V))})}),T.length>0&&o.jsx("div",{className:"mb-2",children:T.map(ye=>{const V=String((ye==null?void 0:ye.label)||(ye==null?void 0:ye.id)||"Check"),ie=Number((ye==null?void 0:ye.awarded)||0),Ae=Number((ye==null?void 0:ye.weight)||0),H=String((ye==null?void 0:ye.note)||"").trim();return o.jsxs("small",{className:"d-block text-muted",children:["Potential - ",V,": ",ie,"/",Ae,H?` - ${H}`:""]},`perf-${String((ye==null?void 0:ye.id)||V)}`)})})]})})}function u4(){const[e,t]=y.useState(null),[n,r]=y.useState(null),[s,i]=y.useState(0),a=y.useRef(new Map);function l(h,v=3e3){r(h),setTimeout(()=>r(null),v)}function c(){return`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function u(h){if(!h||typeof h!="object")return"";const v=[h.user_display_name,h.display_name,h["Display Name"],h.full_name,h.name,h.email];for(const x of v){const k=String(x||"").trim();if(k)return k}return""}async function d(h){const v=h!=null&&h.user_metadata&&typeof h.user_metadata=="object"?h.user_metadata:{},x=String(v.display_name||v.user_display_name||v.full_name||v.name||"").trim();if(x)return x;const k=String((h==null?void 0:h.id)||"").trim();if(k){const E=a.current.get(k);if(E)return E;try{const{data:$,error:P}=await Pt.from("profiles").select("*").eq("id",k).maybeSingle();if(!P&&$){const B=u($);if(B)return a.current.set(k,B),B}}catch{}}return String((h==null?void 0:h.email)||"unknown").trim()||"unknown"}function f(h){if(!h||typeof h!="object")return h;const v=x=>{const E=String((x==null?void 0:x._historyId)||(x==null?void 0:x.id)||"").trim()||c();return{...x,_historyId:E}};if(Array.isArray(h.variations)&&h.variations.length){const x=h.variations.filter(Boolean).map(k=>v(k));return{...v(h),variations:x}}return v(h)}function g(h,v={}){var k,E;const x=String((h==null?void 0:h._historyId)||(h==null?void 0:h.id)||"").trim()||c();return{id:x,user_display_name:v.user_display_name??(h==null?void 0:h.user_display_name)??null,topic:v.topic??h.topic??h.title??"",platform:v.platform??h.platform??((k=h.meta)==null?void 0:k.platform)??"",provider:v.provider??((E=h.meta)==null?void 0:E.provider)??"",result:v.result??{...h,_historyId:x},created_at:v.created_at||new Date().toISOString()}}async function p(h){try{const{data:v}=await Pt.auth.getUser(),x=v==null?void 0:v.user,k=(x==null?void 0:x.id)||"anonymous",E=await d(x);(Array.isArray(h==null?void 0:h.variations)?h.variations:[h]).filter(Boolean).forEach(P=>{iO(g(P,{user_display_name:E}),k)})}catch{}}function m(h){const v=f(h);t(v);const x=Array.isArray(v==null?void 0:v.variations)?v.variations.length:1;p(v),l(x>1?`Generated ${x} variations successfully`:"Generated successfully")}async function w(h){if(h)try{const{data:v}=await Pt.auth.getUser(),x=v==null?void 0:v.user,k=await d(x),E=g(h,{user_display_name:k}),$=await oO({supabase:Pt,userId:x==null?void 0:x.id,entry:E});$.ok?(Xz((x==null?void 0:x.id)||"anonymous",E.id),l("Saved to Supabase history")):$.reason==="forbidden_rls"?l("Supabase history ditolak (RLS/permission). Data tetap tersimpan di browser history."):l("Gagal ke Supabase, tetap tersimpan di browser history")}catch{l("Gagal menyimpan ke Supabase")}}function b(){i(h=>h+1),l("Regenerating...")}return o.jsxs(Ct,{children:[o.jsxs(Se,{md:6,children:[o.jsx("h4",{children:"Generate Content"}),o.jsx(s4,{onResult:m,regenerateToken:s}),n&&o.jsx(Lt,{variant:"success",className:"mt-2",children:n})]}),o.jsxs(Se,{md:6,children:[o.jsx("h5",{children:"Result"}),o.jsx(c4,{item:e,onCopy:()=>l("Copied to clipboard"),onRegenerate:b,onSave:w})]})]})}const d4=[13,25,50,100],An=25;function es(e){return e!=null&&e._localFallback?"offline":e!=null&&e._localDraft?"draft":"supabase"}function f4(e){const t=es(e);return t==="draft"?"Draft Lokal":t==="offline"?"Queue Offline":"Supabase"}function h4(e){return e==="draft"?"icon-park-outline:browser-chrome":e==="supabase"?"devicon:supabase":""}function p4(e){const t=es(e),n=f4(e),r=h4(t);return r?o.jsx("span",{className:"d-inline-flex align-items-center justify-content-center",title:n,"aria-label":n,children:o.jsx(Qt,{icon:r,width:"15",height:"15"})}):n}function m4(e){const t=es(e);return t==="draft"?"secondary":t==="offline"?"warning":"success"}function gk(e){const t=es(e);return t==="draft"?1:t==="offline"?2:3}function Hc(e){var t,n,r;return String(((r=(n=(t=e==null?void 0:e.result)==null?void 0:t.meta)==null?void 0:n.aiDecision)==null?void 0:r.status)||"").toUpperCase()}function mo(e){var r,s,i,a;const t=Number((s=(r=e==null?void 0:e.result)==null?void 0:r.meta)==null?void 0:s.finalScore);if(Number.isFinite(t))return t;const n=Number((a=(i=e==null?void 0:e.result)==null?void 0:i.meta)==null?void 0:a.qualityScore);return Number.isFinite(n)?n:null}function qc(e){const t=Date.parse(String((e==null?void 0:e.created_at)||""));return Number.isFinite(t)?t:0}function g4(e){const t=String(e||"").trim().toLowerCase();return t==="supabase"||t==="draft"||t==="offline"||t==="all"||t==="local"?t:"all"}function y4(e){const t=String(e||"").trim().toUpperCase();return t==="GO"||t==="REVISE"||t==="BLOCK"?t:"all"}function yk(e){return String(e||"").trim().toLowerCase()}function Zb(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e||"").trim())}async function v4(){var e;try{const{data:t}=await Pt.auth.getSession(),n=(e=t==null?void 0:t.session)==null?void 0:e.access_token;return n?{Authorization:`Bearer ${n}`}:{}}catch{return{}}}function b4(e=[]){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.user_id)||"").trim(),s=String((n==null?void 0:n.user_display_name)||"").trim();!r||!s||Zb(s)||(t[r]=s)}),t}function w4(e=[]){const t=new Set;return e.forEach(n=>{const r=String((n==null?void 0:n.user_id)||"").trim(),s=String((n==null?void 0:n.user_display_name)||"").trim();r&&(!s||Zb(s))&&t.add(r)}),Array.from(t)}async function x4(e=[]){const t=Array.from(new Set((e||[]).map(n=>String(n||"").trim()).filter(Boolean))).slice(0,500);if(!t.length)return{};try{const r={"Content-Type":"application/json",...await v4()},s=await Po("/api/history/user-display-names",{method:"POST",headers:r,body:JSON.stringify({userIds:t})});if(!s.ok)return{};const i=await s.json();return!(i!=null&&i.ok)||!(i!=null&&i.data)||typeof i.data!="object"?{}:i.data}catch{return{}}}function vk(e=[],t={}){return!e.length||!t||typeof t!="object"?e:e.map(n=>{const r=String((n==null?void 0:n.user_id)||"").trim();if(!r)return n;const s=String(t[r]||"").trim();if(!s)return n;const i=String((n==null?void 0:n.user_display_name)||"").trim();return!i||Zb(i)?{...n,user_display_name:s}:n})}function S4(e,t){var s,i,a,l;const n=yk(t);return n?[e==null?void 0:e.user_display_name,e==null?void 0:e.topic,e==null?void 0:e.platform,e==null?void 0:e.provider,(s=e==null?void 0:e.result)==null?void 0:s.title,(i=e==null?void 0:e.result)==null?void 0:i.hook,(a=e==null?void 0:e.result)==null?void 0:a.description,(l=e==null?void 0:e.result)==null?void 0:l.narrator].map(c=>yk(c)).join(" ").includes(n):!0}function Kc(e=[],t="created_desc"){const n=[...e];return n.sort((r,s)=>t==="created_asc"?qc(r)-qc(s):t==="score_desc"?(mo(s)??-1)-(mo(r)??-1):t==="score_asc"?(mo(r)??-1)-(mo(s)??-1):t==="topic_asc"?String(r.topic||"").localeCompare(String(s.topic||""),"id"):t==="provider_asc"?String(r.provider||"").localeCompare(String(s.provider||""),"id"):t==="platform_asc"?String(r.platform||"").localeCompare(String(s.platform||""),"id"):qc(s)-qc(r)),n}function bk(e=[],t=[],n=[]){const r=new Map;return[...t,...n,...e].forEach((i,a)=>{const c=String((i==null?void 0:i.id)||"").trim()||`row-${a}-${String((i==null?void 0:i.created_at)||"")}`,u=r.get(c);(!u||gk(i)>=gk(u))&&r.set(c,i)}),Kc(Array.from(r.values()),"created_desc")}function wk(e,t={}){var r,s,i,a,l,c,u;const n=String(t.id||(e==null?void 0:e.id)||"").trim()||`draft-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;return{id:n,user_display_name:t.user_display_name??(e==null?void 0:e.user_display_name)??null,topic:t.topic??(e==null?void 0:e.topic)??((r=e==null?void 0:e.result)==null?void 0:r.topic)??((s=e==null?void 0:e.result)==null?void 0:s.title)??"",platform:t.platform??(e==null?void 0:e.platform)??((i=e==null?void 0:e.result)==null?void 0:i.platform)??((l=(a=e==null?void 0:e.result)==null?void 0:a.meta)==null?void 0:l.platform)??"",provider:t.provider??(e==null?void 0:e.provider)??((u=(c=e==null?void 0:e.result)==null?void 0:c.meta)==null?void 0:u.provider)??"",result:t.result||{...(e==null?void 0:e.result)||{},_historyId:n},created_at:t.created_at||new Date().toISOString()}}function _4(e){return e==="created_asc"?{column:"created_at",ascending:!0,scoreClientSort:!1}:e==="topic_asc"?{column:"topic",ascending:!0,scoreClientSort:!1}:e==="provider_asc"?{column:"provider",ascending:!0,scoreClientSort:!1}:e==="platform_asc"?{column:"platform",ascending:!0,scoreClientSort:!1}:e==="score_desc"||e==="score_asc"?{column:"created_at",ascending:!1,scoreClientSort:!0}:{column:"created_at",ascending:!1,scoreClientSort:!1}}function wi(e){const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t}function Km(e,t,n){const r=new Blob([n],{type:t}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=e,i.click(),URL.revokeObjectURL(s)}function xk(e,t,n="history"){const r=e.map(a=>({id:a.id||null,user_display_name:a.user_display_name||null,source:es(a),topic:a.topic||"",platform:a.platform||"",provider:a.provider||"",decision:Hc(a),score:mo(a),created_at:a.created_at||null,result:a.result||null})),s=Date.now(),i=String(n||"history").replace(/[^a-zA-Z0-9-_]+/g,"_");if(t==="csv"){const l=[["id","user_display_name","source","topic","platform","provider","decision","score","created_at"].join(",")];r.forEach(c=>{l.push([wi(c.id),wi(c.user_display_name),wi(c.source),wi(c.topic),wi(c.platform),wi(c.provider),wi(c.decision),wi(c.score??""),wi(c.created_at)].join(","))}),Km(`${i}-${s}.csv`,"text/csv;charset=utf-8",l.join(`
`));return}if(t==="md"){const a=["# History Export","",`Generated: ${new Date().toISOString()}`,"","| # | User | Topic | Platform | Provider | Source | Score | Decision | Created |","| --- | --- | --- | --- | --- | --- | --- | --- | --- |"];r.forEach((l,c)=>{a.push(`| ${c+1} | ${String(l.user_display_name||"-").replace(/\|/g,"\\|")} | ${String(l.topic||"-").replace(/\|/g,"\\|")} | ${String(l.platform||"-").replace(/\|/g,"\\|")} | ${String(l.provider||"-").replace(/\|/g,"\\|")} | ${l.source} | ${l.score??"-"} | ${l.decision||"-"} | ${l.created_at||"-"} |`)}),Km(`${i}-${s}.md`,"text/markdown;charset=utf-8",a.join(`
`));return}Km(`${i}-${s}.json`,"application/json;charset=utf-8",JSON.stringify(r,null,2))}function k4(e,t){const n=Math.max(1,Number(e)||1),r=Math.max(1,Number(t)||1);if(r<=7)return Array.from({length:r},(l,c)=>c+1);const s=[1];let i=Math.max(2,n-1),a=Math.min(r-1,n+1);n<=3?(i=2,a=4):n>=r-2&&(i=r-3,a=r-1),i>2&&s.push("ellipsis-left");for(let l=i;l<=a;l+=1)s.push(l);return a<r-1&&s.push("ellipsis-right"),s.push(r),s}function j4(){const e=qi(),t=qa(),n=y.useRef(!0),r=y.useRef({}),s=y.useRef(""),[i,a]=y.useState([]),[l,c]=y.useState(""),[u,d]=y.useState(!0),[f,g]=y.useState(!1),[p,m]=y.useState(null),[w,b]=y.useState(null),[h,v]=y.useState([]),[x,k]=y.useState(""),[E,$]=y.useState(""),[P,B]=y.useState(""),[W,Y]=y.useState("all"),[ee,Q]=y.useState("all"),[X,fe]=y.useState(""),[me,ve]=y.useState(""),[Oe,T]=y.useState("created_desc"),[M,I]=y.useState(1),[N,L]=y.useState(13),[A,_]=y.useState(0),[R,K]=y.useState(0),[pe,ue]=y.useState("json"),[j,$e]=y.useState(null),[De,rt]=y.useState({show:!1,bg:"secondary",message:"",autohide:!0,delay:2600,mode:"message"}),st=W==="supabase",ke=st?A:i.length,Re=Math.max(1,Math.ceil(ke/N)),J=Re>1,F=(Math.max(1,M)-1)*N,re=y.useMemo(()=>k4(M,Re),[M,Re]);function be(S,de={}){rt({show:!0,bg:de.bg||"secondary",message:S,autohide:de.autohide??!0,delay:de.delay??2600,mode:de.mode||"message"})}function Le(){rt(S=>({...S,show:!1})),$e(null)}y.useEffect(()=>{var Tt;const S=(Tt=t==null?void 0:t.state)==null?void 0:Tt.dashboardFilters;if(!S||typeof S!="object")return;const de=JSON.stringify(S);if(!de||s.current===de)return;s.current=de;const xe=g4(S.source),Je=y4(S.decision),He=new Set(["created_desc","created_asc","score_desc","score_asc","topic_asc","provider_asc","platform_asc"]).has(String(S.sortBy||"").trim())?String(S.sortBy||"").trim():"created_desc";k(String(S.search||"").trim()),$(String(S.platform||"").trim()),B(String(S.provider||"").trim()),Y(xe),Q(Je),fe(String(S.dateFrom||"").trim()),ve(String(S.dateTo||"").trim()),T(He),I(1),v([]),be("Filter dari Dashboard diterapkan.",{bg:"info"})},[t]),y.useEffect(()=>{M>Re&&I(Re)},[M,Re]),y.useEffect(()=>{I(1)},[x,E,P,W,ee,X,me,Oe,N]);async function O({maintenance:S=!1}={}){d(!0),m(null);try{const{data:de}=await Pt.auth.getUser(),xe=de==null?void 0:de.user;if(c((xe==null?void 0:xe.id)||""),!xe){a([]),_(0),K(0),v([]),d(!1);return}if(S){const ht=t3(xe.id,30);ht.removedTotal>0&&be(`Cleanup lokal: ${ht.removedTotal} item dihapus (> ${ht.maxAgeDays} hari)`);try{await lO({supabase:Pt,userId:xe.id})}catch{}}const Je=bk([],aO(xe.id),sO(xe.id)),Ve=Kc(Je.filter(ht=>{if(!S4(ht,x)||E&&String(ht.platform||"").trim()!==E||P&&String(ht.provider||"").trim()!==P||W==="draft"&&es(ht)!=="draft"||W==="offline"&&es(ht)!=="offline"||W==="supabase"||ee!=="all"&&Hc(ht)!==ee)return!1;const Ce=qc(ht),lt=X?Date.parse(`${X}T00:00:00`):null,bt=me?Date.parse(`${me}T23:59:59.999`):null;return!(Number.isFinite(lt)&&Ce<lt||Number.isFinite(bt)&&Ce>bt)}),Oe);let He=[],Tt=0;if(W!=="draft"&&W!=="offline"&&W!=="local"){const ht=_4(Oe),Ce=String(x||"").trim().replace(/[%_,]/g," "),lt=W==="supabase",bt=Math.max(0,(Math.max(1,M)-1)*Math.max(1,N)),wr=bt+Math.max(1,N)-1,Dn=(Un,{applyRange:ln=!0}={})=>{let mt=Pt.from("generations").select("*",{count:"exact"});return E&&(mt=mt.eq("platform",E)),P&&(mt=mt.eq("provider",P)),X&&(mt=mt.gte("created_at",`${X}T00:00:00`)),me&&(mt=mt.lte("created_at",`${me}T23:59:59.999`)),Ce&&(mt=mt.or(`topic.ilike.%${Ce}%,platform.ilike.%${Ce}%,provider.ilike.%${Ce}%,user_display_name.ilike.%${Ce}%`)),Un&&ee!=="all"&&(mt=mt.filter("result->meta->aiDecision->>status","eq",ee)),mt=mt.order(ht.column,{ascending:ht.ascending}),ln&&lt&&(mt=mt.range(bt,wr)),mt};let $n=await Dn(!0),Bn=!1;if($n.error&&ee!=="all"){const Un=await Dn(!1);Un.error||($n=Un,Bn=!0,m("Filter Decision diterapkan di sisi client untuk halaman cloud saat ini."))}if($n.error)m("Gagal memuat history cloud. Menampilkan data lokal.");else{He=Array.isArray($n.data)?$n.data:[],Tt=Number.isFinite($n.count)?$n.count:0;const Un=lt&&(ht.scoreClientSort||Bn&&ee!=="all");let ln=!1;if(Un){let mt=await Dn(!0,{applyRange:!1}),nr=!1;if(mt.error&&ee!=="all"){const Zt=await Dn(!1,{applyRange:!1});Zt.error||(mt=Zt,nr=!0)}mt.error||(He=Array.isArray(mt.data)?mt.data:[],(Bn||nr)&&ee!=="all"&&(He=He.filter(Zt=>Hc(Zt)===ee)),ht.scoreClientSort&&(He=Kc(He,Oe)),Tt=He.length,He=He.slice(bt,bt+Math.max(1,N)),ln=!0)}if(ln||(Bn&&ee!=="all"&&(He=He.filter(mt=>Hc(mt)===ee),Tt=He.length),ht.scoreClientSort&&(He=Kc(He,Oe))),He.length){const mt=b4(He);Object.keys(mt).length&&(r.current={...r.current,...mt},He=vk(He,mt));const nr=w4(He).filter(Zt=>!r.current[Zt]);if(nr.length){const Zt=await x4(nr);Object.keys(Zt).length&&(r.current={...r.current,...Zt})}Object.keys(r.current).length&&(He=vk(He,r.current))}}}const Ut=W==="supabase"?He:W==="draft"||W==="offline"||W==="local"?Ve:bk(He,Ve,[]);a(Kc(Ut,Oe)),K(Ve.length),_(Tt)}catch{m("Gagal memuat history.")}finally{d(!1)}}y.useEffect(()=>{O({maintenance:n.current}),n.current=!1},[x,E,P,W,ee,X,me,Oe,N]),y.useEffect(()=>{st&&(n.current||O({maintenance:!1}))},[M,st]),y.useEffect(()=>{const S=new Set(i.map(de=>String(de.id||"").trim()).filter(Boolean));v(de=>de.filter(xe=>S.has(xe)))},[i]);const z=y.useMemo(()=>st?i:i.slice(F,F+N),[i,F,N,st]),G=y.useMemo(()=>new Set(h),[h]),se=y.useMemo(()=>{const S=new Map(i.map(de=>[String(de.id||"").trim(),de]));return h.map(de=>S.get(de)).filter(Boolean)},[i,h]),ne=y.useMemo(()=>z.map(S=>String(S.id||"").trim()).filter(Boolean),[z]),q=y.useMemo(()=>ne.length>0&&ne.every(S=>G.has(S)),[ne,G]),ge=y.useMemo(()=>Array.from(new Set(i.map(S=>String(S.platform||"").trim()).filter(Boolean))).sort((S,de)=>S.localeCompare(de,"id")),[i]),Te=y.useMemo(()=>Array.from(new Set(i.map(S=>String(S.provider||"").trim()).filter(Boolean))).sort((S,de)=>S.localeCompare(de,"id")),[i]);function qe(S){if(!S){v(de=>de.filter(xe=>!ne.includes(xe)));return}v(de=>Array.from(new Set([...de,...ne])))}function jt(S,de){const xe=String(S||"").trim();xe&&v(Je=>de?Array.from(new Set([...Je,xe])):Je.filter(Ve=>Ve!==xe))}function Dt(){k(""),$(""),B(""),Y("all"),Q("all"),fe(""),ve(""),T("created_desc")}async function Bt(S){if(!l)return be("Sesi user tidak ditemukan.",{bg:"danger"});const de=(S||[]).filter(Ve=>es(Ve)!=="supabase");if(!de.length)return be("Tidak ada draft/offline untuk disimpan.",{bg:"secondary"});g(!0);let xe=0;const Je=[];for(const Ve of de)(await oO({supabase:Pt,userId:l,entry:wk(Ve)})).ok&&(xe+=1,Je.push(String(Ve.id||"").trim()));Je.length&&F_(l,Je),await O({maintenance:!1}),be(xe===de.length?`Berhasil simpan ${xe} item ke cloud.`:`Sebagian gagal. Berhasil ${xe}/${de.length}.`,{bg:xe===de.length?"success":"warning"}),g(!1)}async function Fn(S){if(!l)return be("Sesi user tidak ditemukan.",{bg:"danger"});const de=Array.isArray(S)?S.filter(Boolean):[];de.forEach(xe=>{const Je=wk(xe,{id:`draft-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,created_at:new Date().toISOString()});iO(Je,l)}),await O({maintenance:!1}),be(`Duplikat berhasil: ${de.length} item`,{bg:"success"})}function on(S){const de=(S||[]).map(xe=>String((xe==null?void 0:xe.id)||"").trim()).filter(Boolean);if(!de.length)return be("Tidak ada item untuk dihapus.",{bg:"secondary"});$e({ids:de,count:de.length}),be(`Hapus ${de.length} item history?`,{bg:"warning",autohide:!1,delay:0,mode:"confirm-delete"})}async function En(){var Ce;if(!((Ce=j==null?void 0:j.ids)!=null&&Ce.length)||!l)return;const S=j.ids;Le(),g(!0);const de=i.filter(lt=>S.includes(String(lt.id||"").trim())),xe=de.filter(lt=>es(lt)!=="supabase").map(lt=>String(lt.id||"").trim()),Je=de.filter(lt=>es(lt)!=="supabase"?!1:String((lt==null?void 0:lt.user_id)||"").trim()===String(l||"").trim()),Ve=de.filter(lt=>es(lt)!=="supabase"?!1:String((lt==null?void 0:lt.user_id)||"").trim()!==String(l||"").trim()).length,He=Je.map(lt=>String(lt.id||"").trim()),Tt=F_(l,xe);let Jt=0,Ut=null;if(He.length){const{data:lt,error:bt}=await Pt.from("generations").delete().eq("user_id",l).in("id",He).select("id");bt?Ut=bt:Jt=Array.isArray(lt)?lt.length:He.length}const ht=Tt.removedTotal+Jt;!Ut&&Ve>0&&ht===0?be(`Tidak bisa hapus ${Ve} item cloud milik user lain.`,{bg:"warning"}):!Ut&&Ve>0?be(`Berhasil hapus ${ht} item. ${Ve} item cloud milik user lain dilewati.`,{bg:"warning"}):be(Ut?`Hapus sebagian berhasil (${ht}).`:`Berhasil hapus ${ht} item.`,{bg:Ut?"warning":"success"}),v(lt=>lt.filter(bt=>!S.includes(bt))),await O({maintenance:!1}),g(!1)}function fr(S,de){xk([S],de,`history-${String((S==null?void 0:S.topic)||(S==null?void 0:S.id)||"item").replace(/[^a-zA-Z0-9-_]+/g,"_")}`),be(`Export ${de.toUpperCase()} berhasil.`,{bg:"success"})}function Ft(){if(!se.length)return be("Pilih item dulu untuk export.",{bg:"secondary"});xk(se,pe,`history-selected-${se.length}`),be(`Export ${pe.toUpperCase()} berhasil (${se.length}).`,{bg:"success"})}function Xn(){return J?o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mt-2",children:[o.jsxs("small",{className:"text-muted",children:["Page ",M,"/",Re,"  showing ",z.length," of ",ke]}),o.jsxs(tn,{className:"mb-0 history-pagination-modern",children:[o.jsx(tn.First,{disabled:u||M<=1,onClick:()=>I(1)}),o.jsx(tn.Prev,{disabled:u||M<=1,onClick:()=>I(S=>Math.max(1,S-1))}),re.map((S,de)=>typeof S=="string"?o.jsx(tn.Ellipsis,{disabled:!0},`${S}-${de}`):o.jsx(tn.Item,{active:S===M,onClick:()=>I(S),children:S},S)),o.jsx(tn.Next,{disabled:u||M>=Re,onClick:()=>I(S=>Math.min(Re,S+1))}),o.jsx(tn.Last,{disabled:u||M>=Re,onClick:()=>I(Re)})]})]}):null}return o.jsxs(o.Fragment,{children:[p&&o.jsx(Lt,{variant:"warning",children:p}),o.jsxs(Ct,{className:"g-2 mb-3",children:[o.jsxs(Se,{xs:12,md:3,children:[o.jsx(U.Label,{children:"Cari"}),o.jsx(U.Control,{value:x,onChange:S=>k(S.target.value),placeholder:"Cari topic/platform/provider"})]}),o.jsxs(Se,{xs:4,md:2,children:[o.jsx(U.Label,{children:"Platform"}),o.jsxs(U.Select,{value:E,onChange:S=>$(S.target.value),children:[o.jsx("option",{value:"",children:"Semua"}),ge.map(S=>o.jsx("option",{value:S,children:S},S))]})]}),o.jsxs(Se,{xs:4,md:2,children:[o.jsx(U.Label,{children:"Provider"}),o.jsxs(U.Select,{value:P,onChange:S=>B(S.target.value),children:[o.jsx("option",{value:"",children:"Semua"}),Te.map(S=>o.jsx("option",{value:S,children:S},S))]})]}),o.jsxs(Se,{xs:4,md:2,children:[o.jsx(U.Label,{children:"Source"}),o.jsxs(U.Select,{value:W,onChange:S=>Y(S.target.value),children:[o.jsx("option",{value:"all",children:"Semua"}),o.jsx("option",{value:"supabase",children:"Supabase"}),o.jsx("option",{value:"local",children:"Lokal (Draft + Offline)"}),o.jsx("option",{value:"draft",children:"Draft Lokal"}),o.jsx("option",{value:"offline",children:"Queue Offline"})]})]}),o.jsxs(Se,{xs:6,md:1,children:[o.jsx(U.Label,{children:"Decision"}),o.jsxs(U.Select,{value:ee,onChange:S=>Q(S.target.value),children:[o.jsx("option",{value:"all",children:"Semua"}),o.jsx("option",{value:"GO",children:"GO"}),o.jsx("option",{value:"REVISE",children:"REVISE"}),o.jsx("option",{value:"BLOCK",children:"BLOCK"})]})]}),o.jsxs(Se,{xs:6,md:2,children:[o.jsx(U.Label,{children:"Sort"}),o.jsxs(U.Select,{value:Oe,onChange:S=>T(S.target.value),children:[o.jsx("option",{value:"created_desc",children:"Created (Newest)"}),o.jsx("option",{value:"created_asc",children:"Created (Oldest)"}),o.jsx("option",{value:"score_desc",children:"Score (Highest)"}),o.jsx("option",{value:"score_asc",children:"Score (Lowest)"}),o.jsx("option",{value:"topic_asc",children:"Topic (A-Z)"}),o.jsx("option",{value:"provider_asc",children:"Provider (A-Z)"}),o.jsx("option",{value:"platform_asc",children:"Platform (A-Z)"})]})]})]}),o.jsxs(Ct,{className:"g-2 mb-2",children:[o.jsxs(Se,{className:"tglDari",xs:6,md:2,children:[o.jsx(U.Label,{children:"Tanggal Dari"}),o.jsx(U.Control,{type:"date",value:X,onChange:S=>fe(S.target.value)})]}),o.jsxs(Se,{className:"tglSampai",xs:6,md:2,children:[o.jsx(U.Label,{children:"Tanggal Sampai"}),o.jsx(U.Control,{type:"date",value:me,onChange:S=>ve(S.target.value)})]}),o.jsx(Se,{xs:6,className:"d-flex align-items-end d-md-none",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",onClick:Dt,children:"Reset Filter"})}),o.jsx(Se,{xs:6,className:"d-flex align-items-end d-md-none",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",onClick:()=>O({maintenance:!0}),disabled:f,children:"Refresh"})}),o.jsx(Se,{md:2,className:"d-none d-md-flex align-items-end",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",onClick:Dt,children:"Reset Filter"})}),o.jsx(Se,{md:2,className:"d-none d-md-flex align-items-end",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",onClick:()=>O({maintenance:!0}),disabled:f,children:"Refresh"})}),o.jsxs(Se,{xs:4,md:2,children:[o.jsx(U.Label,{children:"Page Size"}),o.jsx(U.Select,{value:N,onChange:S=>L(Math.max(1,Number(S.target.value)||25)),children:d4.map(S=>o.jsx("option",{value:S,children:S},S))})]}),o.jsx(Se,{xs:4,md:1,className:"d-flex align-items-end",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",disabled:!J||M<=1||u,onClick:()=>I(S=>Math.max(1,S-1)),children:"Prev"})}),o.jsx(Se,{xs:4,md:1,className:"d-flex align-items-end",children:o.jsx(oe,{variant:"outline-secondary",className:"w-100",disabled:!J||M>=Re||u,onClick:()=>I(S=>Math.min(Re,S+1)),children:"Next"})})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-2",children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o.jsx(U.Check,{type:"checkbox",checked:q,onChange:S=>qe(S.target.checked),label:`Select All (${z.length})`}),o.jsxs(Ue,{bg:"dark",children:["Terpilih: ",h.length]}),o.jsx(oe,{size:"sm",variant:"outline-success",className:"history-icon-btn",disabled:f||!se.some(S=>es(S)!=="supabase"),onClick:()=>Bt(se),title:"Simpan Cloud (Bulk)","aria-label":"Simpan Cloud (Bulk)",children:o.jsx(Qt,{icon:"iconoir:database-tag",width:An,height:An})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"history-icon-btn",disabled:f||!se.length,onClick:()=>Fn(se),title:"Duplikat (Bulk)","aria-label":"Duplikat (Bulk)",children:o.jsx(Qt,{icon:"heroicons:document-duplicate",width:An,height:An})}),o.jsx(oe,{size:"sm",variant:"outline-danger",className:"history-icon-btn",disabled:f||!se.length,onClick:()=>on(se),title:"Hapus (Bulk)","aria-label":"Hapus (Bulk)",children:o.jsx(Qt,{icon:"material-symbols-light:delete-outline",width:An,height:An})}),o.jsxs(U.Select,{size:"sm",value:pe,onChange:S=>ue(S.target.value),style:{width:"10ch"},children:[o.jsx("option",{value:"json",children:"JSON"}),o.jsx("option",{value:"csv",children:"CSV"}),o.jsx("option",{value:"md",children:"MD"})]}),o.jsx(oe,{size:"sm",variant:"outline-primary",className:"history-icon-btn",disabled:!se.length,onClick:Ft,title:"Export (Bulk)","aria-label":"Export (Bulk)",children:o.jsx(Qt,{icon:"token-branded:extra",width:An,height:An})})]}),J&&o.jsxs("small",{className:"text-muted",children:["Page ",M,"/",Re,"  showing ",z.length,"/",ke,"  cloud ",A,W==="all"?`  local ${R}`:""]})]}),u&&o.jsx(Lt,{variant:"info",children:"Loading history..."}),!u&&i.length===0?o.jsx(Lt,{variant:"secondary",children:"Belum ada data sesuai filter. Coba ubah filter atau generate konten baru."}):o.jsxs(o.Fragment,{children:[o.jsxs(ou,{className:"table-history",striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{}),o.jsx("th",{children:"#"}),o.jsx("th",{className:"th-user",children:"User"}),o.jsx("th",{children:"Topic"}),o.jsx("th",{children:"Platform"}),o.jsx("th",{className:"th-provider",children:"Provider"}),o.jsx("th",{className:"th-source",children:"Source"}),o.jsx("th",{children:"Score"}),o.jsx("th",{className:"th-created",children:"Created"}),o.jsx("th",{children:"Action"})]})}),o.jsx("tbody",{children:z.map((S,de)=>{const xe=String(S.id||"").trim(),Je=es(S),Ve=Je!=="supabase"||String((S==null?void 0:S.user_id)||"").trim()===String(l||"").trim();return o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx(U.Check,{type:"checkbox",checked:G.has(xe),onChange:He=>jt(xe,He.target.checked)})}),o.jsx("td",{children:F+de+1}),o.jsx("td",{className:"td-user",children:S.user_display_name||"-"}),o.jsx("td",{className:"td-topic",children:S.topic}),o.jsx("td",{className:"td-platform",children:S.platform}),o.jsx("td",{className:"td-provider",children:S.provider}),o.jsx("td",{className:"td-source",children:o.jsx(Ue,{bg:m4(S),text:Je==="offline"?"dark":void 0,children:p4(S)})}),o.jsx("td",{className:"td-score",children:Number.isFinite(mo(S))?o.jsxs("span",{children:[o.jsxs(Ue,{bg:"primary",className:"me-1",children:[Number(mo(S)).toFixed(1),"%"]}),o.jsx("small",{className:"text-muted",children:Hc(S)||"-"})]}):o.jsx("small",{className:"text-muted",children:"-"})}),o.jsx("td",{className:"td-created",children:new Date(S.created_at).toLocaleString()}),o.jsx("td",{className:"td-action",children:o.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-between",children:[o.jsx(oe,{size:"sm",variant:"outline-primary",className:"history-icon-btn",disabled:f,title:"Gunakan","aria-label":"Gunakan",onClick:()=>e("/generate",{state:{historyItem:S}}),children:o.jsx(Qt,{icon:"material-symbols:select-check-box-rounded",width:An,height:An})}),Je!=="supabase"&&o.jsx(oe,{size:"sm",variant:"outline-success",className:"history-icon-btn",disabled:f,title:"Simpan Cloud","aria-label":"Simpan Cloud",onClick:()=>Bt([S]),children:o.jsx(Qt,{icon:"iconoir:database-tag",width:An,height:An})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"history-icon-btn",disabled:f,title:"Duplikat","aria-label":"Duplikat",onClick:()=>Fn([S]),children:o.jsx(Qt,{icon:"heroicons:document-duplicate",width:An,height:An})}),o.jsxs(Ot,{children:[o.jsx(Ot.Toggle,{size:"sm",variant:"outline-dark",className:"history-icon-btn",disabled:f,title:"Export","aria-label":"Export",children:o.jsx(Qt,{icon:"token-branded:extra",width:An,height:An})}),o.jsxs(Ot.Menu,{children:[o.jsx(Ot.Item,{onClick:()=>fr(S,"json"),children:"JSON"}),o.jsx(Ot.Item,{onClick:()=>fr(S,"csv"),children:"CSV"}),o.jsx(Ot.Item,{onClick:()=>fr(S,"md"),children:"Markdown"})]})]}),o.jsx(oe,{size:"sm",variant:"outline-danger",className:"history-icon-btn",disabled:f||!Ve,title:Ve?"Hapus":"Cloud item milik user lain tidak bisa dihapus","aria-label":"Hapus",onClick:()=>on([S]),children:o.jsx(Qt,{icon:"material-symbols-light:delete-outline",width:An,height:An})}),o.jsx(oe,{size:"sm",className:"history-icon-btn",disabled:f,title:"View","aria-label":"View",onClick:()=>b(S),children:o.jsx(Qt,{icon:"lucide:view",width:An,height:An})})]})})]},xe||de)})})]}),Xn()]}),o.jsxs(or,{show:!!w,onHide:()=>b(null),size:"lg",contentClassName:"modal-desk",children:[o.jsx(or.Header,{closeButton:!0,children:o.jsx(or.Title,{children:"Detail"})}),o.jsx(or.Body,{children:o.jsx("pre",{children:JSON.stringify(w,null,2)})})]}),o.jsx(_p,{position:"middle-center",className:"p-2 templates-toast-center",children:o.jsxs(_s,{show:De.show,bg:De.bg,autohide:De.autohide,delay:De.delay,onClose:Le,children:[o.jsx(_s.Header,{closeButton:!0,children:o.jsx("strong",{className:"me-auto",children:"History"})}),o.jsxs(_s.Body,{className:De.bg==="warning"?"text-dark":"text-white",children:[o.jsx("div",{children:De.message}),De.mode==="confirm-delete"&&j&&o.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-2",children:[o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:Le,children:"Batal"}),o.jsx(oe,{size:"sm",variant:"danger",onClick:En,children:"Hapus"})]})]})]})})]})}function E4(){return o.jsxs("div",{children:[o.jsx("h4",{children:"History"}),o.jsx(j4,{})]})}const ba="avatars";function By(e){const t=String(e||"").trim();return t?t.replace(/^\/+/,""):""}function MO(e,t=ba){const n=String(e||"").trim();if(!n)return"";const r=[`/storage/v1/object/public/${t}/`,`/storage/v1/object/sign/${t}/`,`/storage/v1/object/authenticated/${t}/`];try{const s=new URL(n),i=String(s.pathname||"");for(const a of r){const l=i.indexOf(a);if(l<0)continue;const c=i.slice(l+a.length),u=By(decodeURIComponent(c));if(u)return u}}catch{}return""}function FO(e={},t=ba){const n=By(e==null?void 0:e.avatar_path);if(n)return n;const r=MO(e==null?void 0:e.avatar_url,t);return By(r)}async function DO({supabase:e,metadata:t={},bucket:n=ba,expiresIn:r=3600}={}){var a;const s=String((t==null?void 0:t.avatar_url)||"").trim(),i=FO(t,n);if(i&&((a=e==null?void 0:e.storage)!=null&&a.from))try{const{data:l,error:c}=await e.storage.from(n).createSignedUrl(i,r);if(!c&&(l!=null&&l.signedUrl))return{url:l.signedUrl,path:i,source:"signed"}}catch{}return{url:s||"",path:i||"",source:s?"direct":"none"}}function N4(){var T,M,I,N;const e=["emojione-v1:grinning-cat-face","emojione-monotone:fox","emojione-v1:girl","emojione-v1:monkey-face","ic:baseline-account-circle","emojione-v1:boy","emojione-v1:bear-face","arcticons:pokemon-masters-ex","meteocons:pollen-flower","meteocons:rainbow-clear-fill","meteocons:dust-day-fill","ri:user-smile-line","meteocons:clear-day-fill","svg-spinners:pulse-3","gravity-ui:person","fxemoji:foxcrying","streamline-plump-color:memes-comment-reply","streamline-stickies-color:baby","emojione:baby-angel","logos:panda","openmoji:panda","noto-v1:panda","arcticons:emoji-panda-face","material-symbols:face-outline","mdi:face-man-outline","mdi:face-woman-outline","tabler:mood-smile","fluent:emoji-smile-slight-24-regular","ph:smiley","solar:smile-circle-outline","iconoir:emoji-satisfied","fluent-emoji-flat:woman-white-hair-medium","mdi:robot-outline","emojione:bride-with-veil-light-skin-tone","emojione:flag-for-indonesia","emojione:cat","emojione:girl-light-skin-tone","emojione:boy-light-skin-tone","fluent-emoji-flat:clown-face","noto:boy","noto:child-light-skin-tone","noto:face-with-tongue","noto:bear","noto:grinning-cat-with-smiling-eyes","noto:woman-with-headscarf","noto:woman-with-headscarf-light-skin-tone","noto:woman-wearing-turban"],t=[{fg:"005aff",bg:"eaf1ff"},{fg:"0a7f39",bg:"e8f8ee"},{fg:"6b21a8",bg:"f3e8ff"},{fg:"c2410c",bg:"fff0e5"},{fg:"0369a1",bg:"e6f6ff"},{fg:"b91c1c",bg:"ffeaea"}],n=2,[r,s]=y.useState(null),[i,a]=y.useState(!1),[l,c]=y.useState(""),[u,d]=y.useState(""),[f,g]=y.useState(""),[p,m]=y.useState(""),[w,b]=y.useState(!1),[h,v]=y.useState(null),[x,k]=y.useState(null);function E(L){return L?String(L.type||"").startsWith("image/")?L.size>n*1024*1024?`Ukuran avatar maksimal ${n}MB`:null:"File avatar harus berupa gambar":null}function $(L){const A=String(L||"").trim();return A?/^\+?[0-9][0-9\s-]{6,19}$/.test(A)?null:"Format phone tidak valid":null}function P(L){const A=String((L==null?void 0:L.message)||"").toLowerCase();return Number((L==null?void 0:L.statusCode)||(L==null?void 0:L.status)||0)===400&&A.includes("row-level security")?"Upload avatar ditolak policy Supabase Storage (RLS). Pastikan bucket avatars punya policy INSERT/UPDATE untuk user login pada path folder user masing-masing.":A.includes("bucket")&&A.includes("not found")?`Bucket "${ba}" belum ada di Supabase Storage.`:(L==null?void 0:L.message)||"Gagal upload avatar"}function B(L,A){return!L||typeof L!="object"?L:{...L,user_metadata:{...L.user_metadata||{},...A||{}}}}function W(L,A="005aff",_="eaf1ff"){const R=encodeURIComponent(String(L||"").trim()),K=encodeURIComponent(`#${String(A||"").replace("#","")}`),pe=encodeURIComponent(`#${String(_||"").replace("#","")}`);return`https://api.iconify.design/${R}.svg?color=${K}&background=${pe}&width=96&height=96`}function Y(L){c(String(L||"").trim()),v(null)}if(y.useEffect(()=>{async function L(){const{data:A}=await Pt.auth.getUser();s(A==null?void 0:A.user)}L()},[]),y.useEffect(()=>{let L=!0;async function A(){const _=(r==null?void 0:r.user_metadata)||{},R=String(_.avatar_url||"").trim(),K=_.display_name||"",pe=(r==null?void 0:r.phone)||_.phone||"";if(!L)return;c(R),g(K),m(pe);const ue=await DO({supabase:Pt,metadata:_,bucket:ba});L&&d(ue.url||"")}return A(),()=>{L=!1}},[r==null?void 0:r.id,r==null?void 0:r.phone,(T=r==null?void 0:r.user_metadata)==null?void 0:T.avatar_url,(M=r==null?void 0:r.user_metadata)==null?void 0:M.avatar_path,(I=r==null?void 0:r.user_metadata)==null?void 0:I.display_name,(N=r==null?void 0:r.user_metadata)==null?void 0:N.phone]),!r)return o.jsx("div",{className:"p-4",children:"Loading profile..."});const ee=r.user_metadata||{},Q=r.app_metadata||{},X=(r.email||"U").charAt(0).toUpperCase(),fe=u||null,me=ee.display_name||"-",ve=r.phone||ee.phone||"-",Oe=[`https://api.dicebear.com/6.x/identicon/svg?seed=${encodeURIComponent(r.email+"-a")}`,`https://api.dicebear.com/6.x/avataaars/svg?seed=${encodeURIComponent(r.email+"-b")}`,`https://api.dicebear.com/6.x/micah/svg?seed=${encodeURIComponent(r.email+"-c")}`,`https://api.dicebear.com/6.x/pixel-art/svg?seed=${encodeURIComponent(r.email+"-d")}`,`https://api.dicebear.com/6.x/croodles/svg?seed=${encodeURIComponent(r.email+"-e")}`,`https://api.dicebear.com/6.x/identicon/svg?seed=${encodeURIComponent(r.email+"-f")}&background=%23f3f4f6`];return o.jsxs(o.Fragment,{children:[o.jsx(We,{children:o.jsxs(We.Body,{children:[x&&o.jsx(Lt,{variant:x.variant,className:"mb-3",children:x.message}),o.jsxs(Ct,{children:[o.jsx(Se,{md:3,className:"d-flex justify-content-center",children:fe?o.jsx(to,{src:fe,roundedCircle:!0,style:{width:110,height:110,objectFit:"cover"}}):o.jsx("div",{style:{width:96,height:96,borderRadius:"50%",background:"#f1f3f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,color:"#495057"},children:X})}),o.jsxs(Se,{md:9,children:[o.jsx("h5",{className:"mb-1",children:me}),o.jsx("div",{className:"text-muted small mb-1",children:r.email}),o.jsxs("div",{className:"mb-2",children:[o.jsxs(Ue,{bg:"secondary",className:"me-1",children:["ID: ",r.id]}),Q.provider&&o.jsx(Ue,{bg:"info",className:"me-1",children:Q.provider})]}),o.jsxs(qt,{variant:"flush",children:[o.jsxs(qt.Item,{children:[o.jsx("strong",{children:"Display name:"})," ",me]}),o.jsxs(qt.Item,{children:[o.jsx("strong",{children:"Created:"})," ",new Date(r.created_at).toLocaleString()]}),o.jsxs(qt.Item,{children:[o.jsx("strong",{children:"Phone:"})," ",ve]}),o.jsxs(qt.Item,{children:[o.jsx("strong",{children:"Role/App meta:"})," ",JSON.stringify(Q)]}),o.jsxs(qt.Item,{children:[o.jsx("strong",{children:"User meta:"})," ",Object.keys(ee).length?JSON.stringify(ee):"-"]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx(oe,{size:"sm",variant:"outline-primary",className:"me-2",onClick:()=>navigator.clipboard.writeText(r.id),children:"Copy ID"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:()=>navigator.clipboard.writeText(r.email),children:"Copy Email"}),o.jsx(oe,{size:"sm",variant:"outline-success",onClick:()=>a(!0),children:"Edit Profile"})]})]})]})]})}),o.jsxs(or,{show:i,onHide:()=>a(!1),contentClassName:"modal-desk",children:[o.jsx(or.Header,{closeButton:!0,children:o.jsx(or.Title,{children:"Edit Profile"})}),o.jsx(or.Body,{children:o.jsxs(U,{children:[o.jsxs(U.Group,{className:"mb-3",children:[o.jsx(U.Label,{children:"Display name"}),o.jsx(U.Control,{value:f,onChange:L=>g(L.target.value),placeholder:"Nama tampilan"})]}),o.jsxs(U.Group,{className:"mb-3",children:[o.jsx(U.Label,{children:"Phone"}),o.jsx(U.Control,{value:p,onChange:L=>m(L.target.value),placeholder:"+628..."}),o.jsx(U.Text,{className:"text-muted",children:"Disimpan ke Supabase auth metadata."})]}),o.jsxs(U.Group,{className:"mb-3",children:[o.jsx(U.Label,{children:"Avatar image URL"}),o.jsx(U.Control,{value:l,onChange:L=>Y(L.target.value),placeholder:"https://..."}),o.jsx(U.Text,{className:"text-muted",children:"You can paste an image URL, upload a file, or use a generated avatar below."})]}),o.jsxs(U.Group,{className:"mb-3",children:[o.jsx(U.Label,{children:"Or upload image"}),o.jsx(U.Control,{type:"file",accept:"image/*",onChange:L=>{var R;const A=((R=L.target.files)==null?void 0:R[0])||null,_=E(A);if(_){k({variant:"warning",message:_}),v(null),L.target.value=null;return}v(A)}})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx(U.Label,{children:"Generated avatars"}),o.jsx("div",{className:"d-flex gap-2",children:[1,2,3].map(L=>{const A=`https://api.dicebear.com/6.x/identicon/svg?seed=${encodeURIComponent(r.email+"-"+L)}`;return o.jsx(to,{src:A,style:{width:48,height:48,cursor:"pointer"},onClick:()=>Y(A),rounded:!0},L)})})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx(U.Label,{children:"Sample Avatars"}),o.jsx("div",{className:"d-flex gap-2 flex-wrap",children:Oe.map((L,A)=>o.jsx(to,{src:L,style:{width:48,height:48,cursor:"pointer"},onClick:()=>Y(L),rounded:!0},A))})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx(U.Label,{children:"Iconify Avatars"}),o.jsx("div",{className:"d-flex gap-2 flex-wrap",children:e.map((L,A)=>{const _=t[A%t.length],R=W(L,_.fg,_.bg);return o.jsx(to,{src:R,style:{width:48,height:48,cursor:"pointer",objectFit:"cover"},onClick:()=>Y(R),roundedCircle:!0,title:L},L)})}),o.jsx(U.Text,{className:"text-muted",children:"Avatar icon from Iconify API."})]}),l&&o.jsx("div",{className:"text-center mb-2",children:o.jsx(to,{src:l,style:{width:80,height:80,objectFit:"cover"}})})]})}),o.jsxs(or.Footer,{children:[o.jsx(oe,{variant:"secondary",onClick:()=>a(!1),disabled:w,children:"Cancel"}),o.jsx(oe,{variant:"primary",onClick:async()=>{b(!0),k(null);try{const L=String(p||"").trim(),A=$(L);if(A)throw new Error(A);const _=String(f||"").trim(),R=r.user_metadata||{},K=String(R.avatar_url||"").trim(),pe=FO(R,ba);let ue=K||null,j=pe||null;const $e=String(l||"").trim();if(h){const Re=E(h);if(Re)throw new Error(Re);const J=h.name.includes(".")?h.name.split(".").pop():h.type.split("/")[1]||"png",F=String(J||"png").toLowerCase().replace(/[^a-z0-9]/g,"")||"png",re=`${r.id}/${Date.now()}-${Math.random().toString(36).slice(2,8)}.${F}`,{error:be}=await Pt.storage.from(ba).upload(re,h,{upsert:!1});if(be)throw new Error(P(be));j=re,ue=null}else if($e!==K)if(!$e)ue=null,j=null;else{const J=MO($e,ba);J?(j=J,ue=null):(ue=$e,j=null)}const De={...r.user_metadata||{},avatar_url:ue,avatar_path:j,display_name:_||null,phone:L||null},{data:rt,error:st}=await Pt.auth.updateUser({data:De});if(st)throw st;k({variant:"success",message:"Profil berhasil disimpan ke Supabase."});const ke=(rt==null?void 0:rt.user)||B(r,De);s(ke),c(ue||""),g(_||""),m(L||""),a(!1)}catch(L){console.error("Failed to update profile",L),k({variant:"danger",message:(L==null?void 0:L.message)||"Gagal menyimpan profil"})}finally{b(!1),v(null)}},disabled:w,children:w?"Saving...":"Save"})]})]})]})}var Uy={exports:{}},BO={},Ws={},Jl={},Cd={},St={},Qu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((x,k)=>`${x}${k}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((x,k)=>(k instanceof n&&(x[k.str]=(x[k.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function s(h,...v){const x=[h[0]];let k=0;for(;k<v.length;)l(x,v[k]),x.push(h[++k]);return new r(x)}e._=s;const i=new r("+");function a(h,...v){const x=[p(h[0])];let k=0;for(;k<v.length;)x.push(i),l(x,v[k]),x.push(i,p(h[++k]));return c(x),new r(x)}e.str=a;function l(h,v){v instanceof r?h.push(...v._items):v instanceof n?h.push(v):h.push(f(v))}e.addCodeArg=l;function c(h){let v=1;for(;v<h.length-1;){if(h[v]===i){const x=u(h[v-1],h[v+1]);if(x!==void 0){h.splice(v-1,3,x);continue}h[v++]="+"}v++}}function u(h,v){if(v==='""')return h;if(h==='""')return v;if(typeof h=="string")return v instanceof n||h[h.length-1]!=='"'?void 0:typeof v!="string"?`${h.slice(0,-1)}${v}"`:v[0]==='"'?h.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(h instanceof n))return`"${h}${v.slice(1)}`}function d(h,v){return v.emptyStr()?h:h.emptyStr()?v:a`${h}${v}`}e.strConcat=d;function f(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:p(Array.isArray(h)?h.join(","):h)}function g(h){return new r(p(h))}e.stringify=g;function p(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=p;function m(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new r(`.${h}`):s`[${h}]`}e.getProperty=m;function w(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new r(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=w;function b(h){return new r(h.toString())}e.regexpCode=b})(Qu);var zy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Qu;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,f;if(!((f=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=s;class i extends t.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:f}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(d)}[${f}]`}}e.ValueScopeName=i;const a=(0,t._)`\n`;class l extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?a:t.nil}}get(){return this._scope}name(u){return new i(u,this._newName(u))}value(u,d){var f;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(u),{prefix:p}=g,m=(f=d.key)!==null&&f!==void 0?f:d.ref;let w=this._values[p];if(w){const v=w.get(m);if(v)return v}else w=this._values[p]=new Map;w.set(m,g);const b=this._scope[p]||(this._scope[p]=[]),h=b.length;return b[h]=d.ref,g.setValue(d,{property:p,itemIndex:h}),g}getValue(u,d){const f=this._values[u];if(f)return f.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${u}${f.scopePath}`})}scopeCode(u=this._values,d,f){return this._reduceValues(u,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},d,f)}_reduceValues(u,d,f={},g){let p=t.nil;for(const m in u){const w=u[m];if(!w)continue;const b=f[m]=f[m]||new Map;w.forEach(h=>{if(b.has(h))return;b.set(h,r.Started);let v=d(h);if(v){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;p=(0,t._)`${p}${x} ${h} = ${v};${this.opts._n}`}else if(v=g==null?void 0:g(h))p=(0,t._)`${p}${v}${this.opts._n}`;else throw new n(h);b.set(h,r.Completed)})}return p}}e.ValueScope=l})(zy);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Qu,n=zy;var r=Qu;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var s=zy;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(_,R){return this}}class a extends i{constructor(_,R,K){super(),this.varKind=_,this.name=R,this.rhs=K}render({es5:_,_n:R}){const K=_?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${K} ${this.name}${pe};`+R}optimizeNames(_,R){if(_[this.name.str])return this.rhs&&(this.rhs=fe(this.rhs,_,R)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class l extends i{constructor(_,R,K){super(),this.lhs=_,this.rhs=R,this.sideEffects=K}render({_n:_}){return`${this.lhs} = ${this.rhs};`+_}optimizeNames(_,R){if(!(this.lhs instanceof t.Name&&!_[this.lhs.str]&&!this.sideEffects))return this.rhs=fe(this.rhs,_,R),this}get names(){const _=this.lhs instanceof t.Name?{}:{...this.lhs.names};return X(_,this.rhs)}}class c extends l{constructor(_,R,K,pe){super(_,K,pe),this.op=R}render({_n:_}){return`${this.lhs} ${this.op}= ${this.rhs};`+_}}class u extends i{constructor(_){super(),this.label=_,this.names={}}render({_n:_}){return`${this.label}:`+_}}class d extends i{constructor(_){super(),this.label=_,this.names={}}render({_n:_}){return`break${this.label?` ${this.label}`:""};`+_}}class f extends i{constructor(_){super(),this.error=_}render({_n:_}){return`throw ${this.error};`+_}get names(){return this.error.names}}class g extends i{constructor(_){super(),this.code=_}render({_n:_}){return`${this.code};`+_}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(_,R){return this.code=fe(this.code,_,R),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class p extends i{constructor(_=[]){super(),this.nodes=_}render(_){return this.nodes.reduce((R,K)=>R+K.render(_),"")}optimizeNodes(){const{nodes:_}=this;let R=_.length;for(;R--;){const K=_[R].optimizeNodes();Array.isArray(K)?_.splice(R,1,...K):K?_[R]=K:_.splice(R,1)}return _.length>0?this:void 0}optimizeNames(_,R){const{nodes:K}=this;let pe=K.length;for(;pe--;){const ue=K[pe];ue.optimizeNames(_,R)||(me(_,ue.names),K.splice(pe,1))}return K.length>0?this:void 0}get names(){return this.nodes.reduce((_,R)=>Q(_,R.names),{})}}class m extends p{render(_){return"{"+_._n+super.render(_)+"}"+_._n}}class w extends p{}class b extends m{}b.kind="else";class h extends m{constructor(_,R){super(R),this.condition=_}render(_){let R=`if(${this.condition})`+super.render(_);return this.else&&(R+="else "+this.else.render(_)),R}optimizeNodes(){super.optimizeNodes();const _=this.condition;if(_===!0)return this.nodes;let R=this.else;if(R){const K=R.optimizeNodes();R=this.else=Array.isArray(K)?new b(K):K}if(R)return _===!1?R instanceof h?R:R.nodes:this.nodes.length?this:new h(ve(_),R instanceof h?[R]:R.nodes);if(!(_===!1||!this.nodes.length))return this}optimizeNames(_,R){var K;if(this.else=(K=this.else)===null||K===void 0?void 0:K.optimizeNames(_,R),!!(super.optimizeNames(_,R)||this.else))return this.condition=fe(this.condition,_,R),this}get names(){const _=super.names;return X(_,this.condition),this.else&&Q(_,this.else.names),_}}h.kind="if";class v extends m{}v.kind="for";class x extends v{constructor(_){super(),this.iteration=_}render(_){return`for(${this.iteration})`+super.render(_)}optimizeNames(_,R){if(super.optimizeNames(_,R))return this.iteration=fe(this.iteration,_,R),this}get names(){return Q(super.names,this.iteration.names)}}class k extends v{constructor(_,R,K,pe){super(),this.varKind=_,this.name=R,this.from=K,this.to=pe}render(_){const R=_.es5?n.varKinds.var:this.varKind,{name:K,from:pe,to:ue}=this;return`for(${R} ${K}=${pe}; ${K}<${ue}; ${K}++)`+super.render(_)}get names(){const _=X(super.names,this.from);return X(_,this.to)}}class E extends v{constructor(_,R,K,pe){super(),this.loop=_,this.varKind=R,this.name=K,this.iterable=pe}render(_){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(_)}optimizeNames(_,R){if(super.optimizeNames(_,R))return this.iterable=fe(this.iterable,_,R),this}get names(){return Q(super.names,this.iterable.names)}}class $ extends m{constructor(_,R,K){super(),this.name=_,this.args=R,this.async=K}render(_){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(_)}}$.kind="func";class P extends p{render(_){return"return "+super.render(_)}}P.kind="return";class B extends m{render(_){let R="try"+super.render(_);return this.catch&&(R+=this.catch.render(_)),this.finally&&(R+=this.finally.render(_)),R}optimizeNodes(){var _,R;return super.optimizeNodes(),(_=this.catch)===null||_===void 0||_.optimizeNodes(),(R=this.finally)===null||R===void 0||R.optimizeNodes(),this}optimizeNames(_,R){var K,pe;return super.optimizeNames(_,R),(K=this.catch)===null||K===void 0||K.optimizeNames(_,R),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(_,R),this}get names(){const _=super.names;return this.catch&&Q(_,this.catch.names),this.finally&&Q(_,this.finally.names),_}}class W extends m{constructor(_){super(),this.error=_}render(_){return`catch(${this.error})`+super.render(_)}}W.kind="catch";class Y extends m{render(_){return"finally"+super.render(_)}}Y.kind="finally";class ee{constructor(_,R={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...R,_n:R.lines?`
`:""},this._extScope=_,this._scope=new n.Scope({parent:_}),this._nodes=[new w]}toString(){return this._root.render(this.opts)}name(_){return this._scope.name(_)}scopeName(_){return this._extScope.name(_)}scopeValue(_,R){const K=this._extScope.value(_,R);return(this._values[K.prefix]||(this._values[K.prefix]=new Set)).add(K),K}getScopeValue(_,R){return this._extScope.getValue(_,R)}scopeRefs(_){return this._extScope.scopeRefs(_,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(_,R,K,pe){const ue=this._scope.toName(R);return K!==void 0&&pe&&(this._constants[ue.str]=K),this._leafNode(new a(_,ue,K)),ue}const(_,R,K){return this._def(n.varKinds.const,_,R,K)}let(_,R,K){return this._def(n.varKinds.let,_,R,K)}var(_,R,K){return this._def(n.varKinds.var,_,R,K)}assign(_,R,K){return this._leafNode(new l(_,R,K))}add(_,R){return this._leafNode(new c(_,e.operators.ADD,R))}code(_){return typeof _=="function"?_():_!==t.nil&&this._leafNode(new g(_)),this}object(..._){const R=["{"];for(const[K,pe]of _)R.length>1&&R.push(","),R.push(K),(K!==pe||this.opts.es5)&&(R.push(":"),(0,t.addCodeArg)(R,pe));return R.push("}"),new t._Code(R)}if(_,R,K){if(this._blockNode(new h(_)),R&&K)this.code(R).else().code(K).endIf();else if(R)this.code(R).endIf();else if(K)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(_){return this._elseNode(new h(_))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(h,b)}_for(_,R){return this._blockNode(_),R&&this.code(R).endFor(),this}for(_,R){return this._for(new x(_),R)}forRange(_,R,K,pe,ue=this.opts.es5?n.varKinds.var:n.varKinds.let){const j=this._scope.toName(_);return this._for(new k(ue,j,R,K),()=>pe(j))}forOf(_,R,K,pe=n.varKinds.const){const ue=this._scope.toName(_);if(this.opts.es5){const j=R instanceof t.Name?R:this.var("_arr",R);return this.forRange("_i",0,(0,t._)`${j}.length`,$e=>{this.var(ue,(0,t._)`${j}[${$e}]`),K(ue)})}return this._for(new E("of",pe,ue,R),()=>K(ue))}forIn(_,R,K,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(_,(0,t._)`Object.keys(${R})`,K);const ue=this._scope.toName(_);return this._for(new E("in",pe,ue,R),()=>K(ue))}endFor(){return this._endBlockNode(v)}label(_){return this._leafNode(new u(_))}break(_){return this._leafNode(new d(_))}return(_){const R=new P;if(this._blockNode(R),this.code(_),R.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(P)}try(_,R,K){if(!R&&!K)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new B;if(this._blockNode(pe),this.code(_),R){const ue=this.name("e");this._currNode=pe.catch=new W(ue),R(ue)}return K&&(this._currNode=pe.finally=new Y,this.code(K)),this._endBlockNode(W,Y)}throw(_){return this._leafNode(new f(_))}block(_,R){return this._blockStarts.push(this._nodes.length),_&&this.code(_).endBlock(R),this}endBlock(_){const R=this._blockStarts.pop();if(R===void 0)throw new Error("CodeGen: not in self-balancing block");const K=this._nodes.length-R;if(K<0||_!==void 0&&K!==_)throw new Error(`CodeGen: wrong number of nodes: ${K} vs ${_} expected`);return this._nodes.length=R,this}func(_,R=t.nil,K,pe){return this._blockNode(new $(_,R,K)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode($)}optimize(_=1){for(;_-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(_){return this._currNode.nodes.push(_),this}_blockNode(_){this._currNode.nodes.push(_),this._nodes.push(_)}_endBlockNode(_,R){const K=this._currNode;if(K instanceof _||R&&K instanceof R)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${R?`${_.kind}/${R.kind}`:_.kind}"`)}_elseNode(_){const R=this._currNode;if(!(R instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=R.else=_,this}get _root(){return this._nodes[0]}get _currNode(){const _=this._nodes;return _[_.length-1]}set _currNode(_){const R=this._nodes;R[R.length-1]=_}}e.CodeGen=ee;function Q(A,_){for(const R in _)A[R]=(A[R]||0)+(_[R]||0);return A}function X(A,_){return _ instanceof t._CodeOrName?Q(A,_.names):A}function fe(A,_,R){if(A instanceof t.Name)return K(A);if(!pe(A))return A;return new t._Code(A._items.reduce((ue,j)=>(j instanceof t.Name&&(j=K(j)),j instanceof t._Code?ue.push(...j._items):ue.push(j),ue),[]));function K(ue){const j=R[ue.str];return j===void 0||_[ue.str]!==1?ue:(delete _[ue.str],j)}function pe(ue){return ue instanceof t._Code&&ue._items.some(j=>j instanceof t.Name&&_[j.str]===1&&R[j.str]!==void 0)}}function me(A,_){for(const R in _)A[R]=(A[R]||0)-(_[R]||0)}function ve(A){return typeof A=="boolean"||typeof A=="number"||A===null?!A:(0,t._)`!${L(A)}`}e.not=ve;const Oe=N(e.operators.AND);function T(...A){return A.reduce(Oe)}e.and=T;const M=N(e.operators.OR);function I(...A){return A.reduce(M)}e.or=I;function N(A){return(_,R)=>_===t.nil?R:R===t.nil?_:(0,t._)`${L(_)} ${A} ${L(R)}`}function L(A){return A instanceof t.Name?A:(0,t._)`(${A})`}})(St);var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.checkStrictMode=ze.getErrorPath=ze.Type=ze.useFunc=ze.setEvaluated=ze.evaluatedPropsToName=ze.mergeEvaluated=ze.eachItem=ze.unescapeJsonPointer=ze.escapeJsonPointer=ze.escapeFragment=ze.unescapeFragment=ze.schemaRefOrVal=ze.schemaHasRulesButRef=ze.schemaHasRules=ze.checkUnknownRules=ze.alwaysValidSchema=ze.toHash=void 0;const Gt=St,C4=Qu;function T4(e){const t={};for(const n of e)t[n]=!0;return t}ze.toHash=T4;function $4(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(UO(e,t),!zO(t,e.self.RULES.all))}ze.alwaysValidSchema=$4;function UO(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const s=r.RULES.keywords;for(const i in t)s[i]||qO(e,`unknown keyword: "${i}"`)}ze.checkUnknownRules=UO;function zO(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}ze.schemaHasRules=zO;function O4(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}ze.schemaHasRulesButRef=O4;function R4({topSchemaRef:e,schemaPath:t},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Gt._)`${n}`}return(0,Gt._)`${e}${t}${(0,Gt.getProperty)(r)}`}ze.schemaRefOrVal=R4;function A4(e){return VO(decodeURIComponent(e))}ze.unescapeFragment=A4;function P4(e){return encodeURIComponent(ew(e))}ze.escapeFragment=P4;function ew(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}ze.escapeJsonPointer=ew;function VO(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}ze.unescapeJsonPointer=VO;function I4(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}ze.eachItem=I4;function Sk({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(s,i,a,l)=>{const c=a===void 0?i:a instanceof Gt.Name?(i instanceof Gt.Name?e(s,i,a):t(s,i,a),a):i instanceof Gt.Name?(t(s,a,i),i):n(i,a);return l===Gt.Name&&!(c instanceof Gt.Name)?r(s,c):c}}ze.mergeEvaluated={props:Sk({mergeNames:(e,t,n)=>e.if((0,Gt._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Gt._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Gt._)`${n} || {}`).code((0,Gt._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Gt._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Gt._)`${n} || {}`),tw(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:HO}),items:Sk({mergeNames:(e,t,n)=>e.if((0,Gt._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Gt._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Gt._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Gt._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function HO(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Gt._)`{}`);return t!==void 0&&tw(e,n,t),n}ze.evaluatedPropsToName=HO;function tw(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Gt._)`${t}${(0,Gt.getProperty)(r)}`,!0))}ze.setEvaluated=tw;const _k={};function L4(e,t){return e.scopeValue("func",{ref:t,code:_k[t.code]||(_k[t.code]=new C4._Code(t.code))})}ze.useFunc=L4;var Vy;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Vy||(ze.Type=Vy={}));function M4(e,t,n){if(e instanceof Gt.Name){const r=t===Vy.Num;return n?r?(0,Gt._)`"[" + ${e} + "]"`:(0,Gt._)`"['" + ${e} + "']"`:r?(0,Gt._)`"/" + ${e}`:(0,Gt._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Gt.getProperty)(e).toString():"/"+ew(e)}ze.getErrorPath=M4;function qO(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}ze.checkStrictMode=qO;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});const gr=St,F4={data:new gr.Name("data"),valCxt:new gr.Name("valCxt"),instancePath:new gr.Name("instancePath"),parentData:new gr.Name("parentData"),parentDataProperty:new gr.Name("parentDataProperty"),rootData:new gr.Name("rootData"),dynamicAnchors:new gr.Name("dynamicAnchors"),vErrors:new gr.Name("vErrors"),errors:new gr.Name("errors"),this:new gr.Name("this"),self:new gr.Name("self"),scope:new gr.Name("scope"),json:new gr.Name("json"),jsonPos:new gr.Name("jsonPos"),jsonLen:new gr.Name("jsonLen"),jsonPart:new gr.Name("jsonPart")};mi.default=F4;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=St,n=ze,r=mi;e.keywordError={message:({keyword:b})=>(0,t.str)`must pass "${b}" keyword validation`},e.keyword$DataError={message:({keyword:b,schemaType:h})=>h?(0,t.str)`"${b}" keyword must be ${h} ($data)`:(0,t.str)`"${b}" keyword is invalid ($data)`};function s(b,h=e.keywordError,v,x){const{it:k}=b,{gen:E,compositeRule:$,allErrors:P}=k,B=f(b,h,v);x??($||P)?c(E,B):u(k,(0,t._)`[${B}]`)}e.reportError=s;function i(b,h=e.keywordError,v){const{it:x}=b,{gen:k,compositeRule:E,allErrors:$}=x,P=f(b,h,v);c(k,P),E||$||u(x,r.default.vErrors)}e.reportExtraError=i;function a(b,h){b.assign(r.default.errors,h),b.if((0,t._)`${r.default.vErrors} !== null`,()=>b.if(h,()=>b.assign((0,t._)`${r.default.vErrors}.length`,h),()=>b.assign(r.default.vErrors,null)))}e.resetErrorsCount=a;function l({gen:b,keyword:h,schemaValue:v,data:x,errsCount:k,it:E}){if(k===void 0)throw new Error("ajv implementation error");const $=b.name("err");b.forRange("i",k,r.default.errors,P=>{b.const($,(0,t._)`${r.default.vErrors}[${P}]`),b.if((0,t._)`${$}.instancePath === undefined`,()=>b.assign((0,t._)`${$}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),b.assign((0,t._)`${$}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${h}`),E.opts.verbose&&(b.assign((0,t._)`${$}.schema`,v),b.assign((0,t._)`${$}.data`,x))})}e.extendErrors=l;function c(b,h){const v=b.const("err",h);b.if((0,t._)`${r.default.vErrors} === null`,()=>b.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),b.code((0,t._)`${r.default.errors}++`)}function u(b,h){const{gen:v,validateName:x,schemaEnv:k}=b;k.$async?v.throw((0,t._)`new ${b.ValidationError}(${h})`):(v.assign((0,t._)`${x}.errors`,h),v.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(b,h,v){const{createErrors:x}=b.it;return x===!1?(0,t._)`{}`:g(b,h,v)}function g(b,h,v={}){const{gen:x,it:k}=b,E=[p(k,v),m(b,v)];return w(b,h,E),x.object(...E)}function p({errorPath:b},{instancePath:h}){const v=h?(0,t.str)`${b}${(0,n.getErrorPath)(h,n.Type.Str)}`:b;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function m({keyword:b,it:{errSchemaPath:h}},{schemaPath:v,parentSchema:x}){let k=x?h:(0,t.str)`${h}/${b}`;return v&&(k=(0,t.str)`${k}${(0,n.getErrorPath)(v,n.Type.Str)}`),[d.schemaPath,k]}function w(b,{params:h,message:v},x){const{keyword:k,data:E,schemaValue:$,it:P}=b,{opts:B,propertyName:W,topSchemaRef:Y,schemaPath:ee}=P;x.push([d.keyword,k],[d.params,typeof h=="function"?h(b):h||(0,t._)`{}`]),B.messages&&x.push([d.message,typeof v=="function"?v(b):v]),B.verbose&&x.push([d.schema,$],[d.parentSchema,(0,t._)`${Y}${ee}`],[r.default.data,E]),W&&x.push([d.propertyName,W])}})(Cd);Object.defineProperty(Jl,"__esModule",{value:!0});Jl.boolOrEmptySchema=Jl.topBoolOrEmptySchema=void 0;const D4=Cd,B4=St,U4=mi,z4={message:"boolean schema is false"};function V4(e){const{gen:t,schema:n,validateName:r}=e;n===!1?KO(e,!1):typeof n=="object"&&n.$async===!0?t.return(U4.default.data):(t.assign((0,B4._)`${r}.errors`,null),t.return(!0))}Jl.topBoolOrEmptySchema=V4;function H4(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),KO(e)):n.var(t,!0)}Jl.boolOrEmptySchema=H4;function KO(e,t){const{gen:n,data:r}=e,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,D4.reportError)(s,z4,void 0,t)}var Jn={},Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.getRules=Co.isJSONType=void 0;const q4=["string","number","integer","boolean","null","object","array"],K4=new Set(q4);function W4(e){return typeof e=="string"&&K4.has(e)}Co.isJSONType=W4;function G4(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Co.getRules=G4;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.shouldUseRule=Ai.shouldUseGroup=Ai.schemaHasRulesForType=void 0;function J4({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&WO(e,r)}Ai.schemaHasRulesForType=J4;function WO(e,t){return t.rules.some(n=>GO(e,n))}Ai.shouldUseGroup=WO;function GO(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Ai.shouldUseRule=GO;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.reportTypeError=Jn.checkDataTypes=Jn.checkDataType=Jn.coerceAndCheckDataType=Jn.getJSONTypes=Jn.getSchemaTypes=Jn.DataType=void 0;const Y4=Co,Q4=Ai,X4=Cd,vt=St,JO=ze;var Rl;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Rl||(Jn.DataType=Rl={}));function Z4(e){const t=YO(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Jn.getSchemaTypes=Z4;function YO(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Y4.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Jn.getJSONTypes=YO;function eH(e,t){const{gen:n,data:r,opts:s}=e,i=tH(t,s.coerceTypes),a=t.length>0&&!(i.length===0&&t.length===1&&(0,Q4.schemaHasRulesForType)(e,t[0]));if(a){const l=nw(t,r,s.strictNumbers,Rl.Wrong);n.if(l,()=>{i.length?nH(e,t,i):rw(e)})}return a}Jn.coerceAndCheckDataType=eH;const QO=new Set(["string","number","integer","boolean","null"]);function tH(e,t){return t?e.filter(n=>QO.has(n)||t==="array"&&n==="array"):[]}function nH(e,t,n){const{gen:r,data:s,opts:i}=e,a=r.let("dataType",(0,vt._)`typeof ${s}`),l=r.let("coerced",(0,vt._)`undefined`);i.coerceTypes==="array"&&r.if((0,vt._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,vt._)`${s}[0]`).assign(a,(0,vt._)`typeof ${s}`).if(nw(t,s,i.strictNumbers),()=>r.assign(l,s))),r.if((0,vt._)`${l} !== undefined`);for(const u of n)(QO.has(u)||u==="array"&&i.coerceTypes==="array")&&c(u);r.else(),rw(e),r.endIf(),r.if((0,vt._)`${l} !== undefined`,()=>{r.assign(s,l),rH(e,l)});function c(u){switch(u){case"string":r.elseIf((0,vt._)`${a} == "number" || ${a} == "boolean"`).assign(l,(0,vt._)`"" + ${s}`).elseIf((0,vt._)`${s} === null`).assign(l,(0,vt._)`""`);return;case"number":r.elseIf((0,vt._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(l,(0,vt._)`+${s}`);return;case"integer":r.elseIf((0,vt._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(l,(0,vt._)`+${s}`);return;case"boolean":r.elseIf((0,vt._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(l,!1).elseIf((0,vt._)`${s} === "true" || ${s} === 1`).assign(l,!0);return;case"null":r.elseIf((0,vt._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(l,null);return;case"array":r.elseIf((0,vt._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(l,(0,vt._)`[${s}]`)}}}function rH({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,vt._)`${t} !== undefined`,()=>e.assign((0,vt._)`${t}[${n}]`,r))}function Hy(e,t,n,r=Rl.Correct){const s=r===Rl.Correct?vt.operators.EQ:vt.operators.NEQ;let i;switch(e){case"null":return(0,vt._)`${t} ${s} null`;case"array":i=(0,vt._)`Array.isArray(${t})`;break;case"object":i=(0,vt._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a((0,vt._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return(0,vt._)`typeof ${t} ${s} ${e}`}return r===Rl.Correct?i:(0,vt.not)(i);function a(l=vt.nil){return(0,vt.and)((0,vt._)`typeof ${t} == "number"`,l,n?(0,vt._)`isFinite(${t})`:vt.nil)}}Jn.checkDataType=Hy;function nw(e,t,n,r){if(e.length===1)return Hy(e[0],t,n,r);let s;const i=(0,JO.toHash)(e);if(i.array&&i.object){const a=(0,vt._)`typeof ${t} != "object"`;s=i.null?a:(0,vt._)`!${t} || ${a}`,delete i.null,delete i.array,delete i.object}else s=vt.nil;i.number&&delete i.integer;for(const a in i)s=(0,vt.and)(s,Hy(a,t,n,r));return s}Jn.checkDataTypes=nw;const sH={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,vt._)`{type: ${e}}`:(0,vt._)`{type: ${t}}`};function rw(e){const t=iH(e);(0,X4.reportError)(t,sH)}Jn.reportTypeError=rw;function iH(e){const{gen:t,data:n,schema:r}=e,s=(0,JO.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.assignDefaults=void 0;const Jo=St,aH=ze;function oH(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const s in n)kk(e,s,n[s].default);else t==="array"&&Array.isArray(r)&&r.forEach((s,i)=>kk(e,i,s.default))}Fp.assignDefaults=oH;function kk(e,t,n){const{gen:r,compositeRule:s,data:i,opts:a}=e;if(n===void 0)return;const l=(0,Jo._)`${i}${(0,Jo.getProperty)(t)}`;if(s){(0,aH.checkStrictMode)(e,`default is ignored for: ${l}`);return}let c=(0,Jo._)`${l} === undefined`;a.useDefaults==="empty"&&(c=(0,Jo._)`${c} || ${l} === null || ${l} === ""`),r.if(c,(0,Jo._)`${l} = ${(0,Jo.stringify)(n)}`)}var li={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.validateUnion=xt.validateArray=xt.usePattern=xt.callValidateCode=xt.schemaProperties=xt.allSchemaProperties=xt.noPropertyInData=xt.propertyInData=xt.isOwnProperty=xt.hasPropFunc=xt.reportMissingProp=xt.checkMissingProp=xt.checkReportMissingProp=void 0;const nn=St,sw=ze,na=mi,lH=ze;function cH(e,t){const{gen:n,data:r,it:s}=e;n.if(aw(n,r,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,nn._)`${t}`},!0),e.error()})}xt.checkReportMissingProp=cH;function uH({gen:e,data:t,it:{opts:n}},r,s){return(0,nn.or)(...r.map(i=>(0,nn.and)(aw(e,t,i,n.ownProperties),(0,nn._)`${s} = ${i}`)))}xt.checkMissingProp=uH;function dH(e,t){e.setParams({missingProperty:t},!0),e.error()}xt.reportMissingProp=dH;function XO(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,nn._)`Object.prototype.hasOwnProperty`})}xt.hasPropFunc=XO;function iw(e,t,n){return(0,nn._)`${XO(e)}.call(${t}, ${n})`}xt.isOwnProperty=iw;function fH(e,t,n,r){const s=(0,nn._)`${t}${(0,nn.getProperty)(n)} !== undefined`;return r?(0,nn._)`${s} && ${iw(e,t,n)}`:s}xt.propertyInData=fH;function aw(e,t,n,r){const s=(0,nn._)`${t}${(0,nn.getProperty)(n)} === undefined`;return r?(0,nn.or)(s,(0,nn.not)(iw(e,t,n))):s}xt.noPropertyInData=aw;function ZO(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}xt.allSchemaProperties=ZO;function hH(e,t){return ZO(t).filter(n=>!(0,sw.alwaysValidSchema)(e,t[n]))}xt.schemaProperties=hH;function pH({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:a},l,c,u){const d=u?(0,nn._)`${e}, ${t}, ${r}${s}`:t,f=[[na.default.instancePath,(0,nn.strConcat)(na.default.instancePath,i)],[na.default.parentData,a.parentData],[na.default.parentDataProperty,a.parentDataProperty],[na.default.rootData,na.default.rootData]];a.opts.dynamicRef&&f.push([na.default.dynamicAnchors,na.default.dynamicAnchors]);const g=(0,nn._)`${d}, ${n.object(...f)}`;return c!==nn.nil?(0,nn._)`${l}.call(${c}, ${g})`:(0,nn._)`${l}(${g})`}xt.callValidateCode=pH;const mH=(0,nn._)`new RegExp`;function gH({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(n,r);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,nn._)`${s.code==="new RegExp"?mH:(0,lH.useFunc)(e,s)}(${n}, ${r})`})}xt.usePattern=gH;function yH(e){const{gen:t,data:n,keyword:r,it:s}=e,i=t.name("valid");if(s.allErrors){const l=t.let("valid",!0);return a(()=>t.assign(l,!1)),l}return t.var(i,!0),a(()=>t.break()),i;function a(l){const c=t.const("len",(0,nn._)`${n}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:sw.Type.Num},i),t.if((0,nn.not)(i),l)})}}xt.validateArray=yH;function vH(e){const{gen:t,schema:n,keyword:r,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,sw.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block(()=>n.forEach((c,u)=>{const d=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},l);t.assign(a,(0,nn._)`${a} || ${l}`),e.mergeValidEvaluated(d,l)||t.if((0,nn.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}xt.validateUnion=vH;Object.defineProperty(li,"__esModule",{value:!0});li.validateKeywordUsage=li.validSchemaType=li.funcKeywordCode=li.macroKeywordCode=void 0;const Nr=St,so=mi,bH=xt,wH=Cd;function xH(e,t){const{gen:n,keyword:r,schema:s,parentSchema:i,it:a}=e,l=t.macro.call(a.self,s,i,a),c=eR(n,r,l);a.opts.validateSchema!==!1&&a.self.validateSchema(l,!0);const u=n.name("valid");e.subschema({schema:l,schemaPath:Nr.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}li.macroKeywordCode=xH;function SH(e,t){var n;const{gen:r,keyword:s,schema:i,parentSchema:a,$data:l,it:c}=e;kH(c,t);const u=!l&&t.compile?t.compile.call(c.self,i,a,c):t.validate,d=eR(r,s,u),f=r.let("valid");e.block$data(f,g),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function g(){if(t.errors===!1)w(),t.modifying&&jk(e),b(()=>e.error());else{const h=t.async?p():m();t.modifying&&jk(e),b(()=>_H(e,h))}}function p(){const h=r.let("ruleErrs",null);return r.try(()=>w((0,Nr._)`await `),v=>r.assign(f,!1).if((0,Nr._)`${v} instanceof ${c.ValidationError}`,()=>r.assign(h,(0,Nr._)`${v}.errors`),()=>r.throw(v))),h}function m(){const h=(0,Nr._)`${d}.errors`;return r.assign(h,null),w(Nr.nil),h}function w(h=t.async?(0,Nr._)`await `:Nr.nil){const v=c.opts.passContext?so.default.this:so.default.self,x=!("compile"in t&&!l||t.schema===!1);r.assign(f,(0,Nr._)`${h}${(0,bH.callValidateCode)(e,d,v,x)}`,t.modifying)}function b(h){var v;r.if((0,Nr.not)((v=t.valid)!==null&&v!==void 0?v:f),h)}}li.funcKeywordCode=SH;function jk(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Nr._)`${r.parentData}[${r.parentDataProperty}]`))}function _H(e,t){const{gen:n}=e;n.if((0,Nr._)`Array.isArray(${t})`,()=>{n.assign(so.default.vErrors,(0,Nr._)`${so.default.vErrors} === null ? ${t} : ${so.default.vErrors}.concat(${t})`).assign(so.default.errors,(0,Nr._)`${so.default.vErrors}.length`),(0,wH.extendErrors)(e)},()=>e.error())}function kH({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function eR(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Nr.stringify)(n)})}function jH(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}li.validSchemaType=jH;function EH({schema:e,opts:t,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(l=>!Object.prototype.hasOwnProperty.call(e,l)))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const c=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}li.validateKeywordUsage=EH;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.extendSubschemaMode=La.extendSubschemaData=La.getSubschema=void 0;const oi=St,tR=ze;function NH(e,{keyword:t,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:a}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const l=e.schema[t];return n===void 0?{schema:l,schemaPath:(0,oi._)`${e.schemaPath}${(0,oi.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:l[n],schemaPath:(0,oi._)`${e.schemaPath}${(0,oi.getProperty)(t)}${(0,oi.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,tR.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:a,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}La.getSubschema=NH;function CH(e,t,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:a}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(n!==void 0){const{errorPath:u,dataPathArr:d,opts:f}=t,g=l.let("data",(0,oi._)`${t.data}${(0,oi.getProperty)(n)}`,!0);c(g),e.errorPath=(0,oi.str)`${u}${(0,tR.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,oi._)`${n}`,e.dataPathArr=[...d,e.parentDataProperty]}if(s!==void 0){const u=s instanceof oi.Name?s:l.let("data",s,!0);c(u),a!==void 0&&(e.propertyName=a)}i&&(e.dataTypes=i);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}La.extendSubschemaData=CH;function TH(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(e.compositeRule=r),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=n}La.extendSubschemaMode=TH;var lr={},nR=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var a=i[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},rR={exports:{}},Ea=rR.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};Gf(t,r,s,e,"",e)};Ea.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ea.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ea.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ea.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Gf(e,t,n,r,s,i,a,l,c,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,s,i,a,l,c,u);for(var d in r){var f=r[d];if(Array.isArray(f)){if(d in Ea.arrayKeywords)for(var g=0;g<f.length;g++)Gf(e,t,n,f[g],s+"/"+d+"/"+g,i,s,d,r,g)}else if(d in Ea.propsKeywords){if(f&&typeof f=="object")for(var p in f)Gf(e,t,n,f[p],s+"/"+d+"/"+$H(p),i,s,d,r,p)}else(d in Ea.keywords||e.allKeys&&!(d in Ea.skipKeywords))&&Gf(e,t,n,f,s+"/"+d,i,s,d,r)}n(r,s,i,a,l,c,u)}}function $H(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var OH=rR.exports;Object.defineProperty(lr,"__esModule",{value:!0});lr.getSchemaRefs=lr.resolveUrl=lr.normalizeId=lr._getFullPath=lr.getFullPath=lr.inlineRef=void 0;const RH=ze,AH=nR,PH=OH,IH=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function LH(e,t=!0){return typeof e=="boolean"?!0:t===!0?!qy(e):t?sR(e)<=t:!1}lr.inlineRef=LH;const MH=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function qy(e){for(const t in e){if(MH.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(qy)||typeof n=="object"&&qy(n))return!0}return!1}function sR(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!IH.has(n)&&(typeof e[n]=="object"&&(0,RH.eachItem)(e[n],r=>t+=sR(r)),t===1/0))return 1/0}return t}function iR(e,t="",n){n!==!1&&(t=Al(t));const r=e.parse(t);return aR(e,r)}lr.getFullPath=iR;function aR(e,t){return e.serialize(t).split("#")[0]+"#"}lr._getFullPath=aR;const FH=/#\/?$/;function Al(e){return e?e.replace(FH,""):""}lr.normalizeId=Al;function DH(e,t,n){return n=Al(n),e.resolve(t,n)}lr.resolveUrl=DH;const BH=/^[a-z_][-a-z0-9._]*$/i;function UH(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=Al(e[n]||t),i={"":s},a=iR(r,s,!1),l={},c=new Set;return PH(e,{allKeys:!0},(f,g,p,m)=>{if(m===void 0)return;const w=a+g;let b=i[m];typeof f[n]=="string"&&(b=h.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),i[g]=b;function h(x){const k=this.opts.uriResolver.resolve;if(x=Al(b?k(b,x):x),c.has(x))throw d(x);c.add(x);let E=this.refs[x];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(f,E.schema,x):x!==Al(w)&&(x[0]==="#"?(u(f,l[x],x),l[x]=f):this.refs[x]=w),x}function v(x){if(typeof x=="string"){if(!BH.test(x))throw new Error(`invalid anchor "${x}"`);h.call(this,`#${x}`)}}}),l;function u(f,g,p){if(g!==void 0&&!AH(f,g))throw d(p)}function d(f){return new Error(`reference "${f}" resolves to more than one schema`)}}lr.getSchemaRefs=UH;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.getData=Ws.KeywordCxt=Ws.validateFunctionCode=void 0;const oR=Jl,Ek=Jn,ow=Ai,qh=Jn,zH=Fp,mu=li,Wm=La,tt=St,ft=mi,VH=lr,Pi=ze,Ac=Cd;function HH(e){if(uR(e)&&(dR(e),cR(e))){WH(e);return}lR(e,()=>(0,oR.topBoolOrEmptySchema)(e))}Ws.validateFunctionCode=HH;function lR({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},i){s.code.es5?e.func(t,(0,tt._)`${ft.default.data}, ${ft.default.valCxt}`,r.$async,()=>{e.code((0,tt._)`"use strict"; ${Nk(n,s)}`),KH(e,s),e.code(i)}):e.func(t,(0,tt._)`${ft.default.data}, ${qH(s)}`,r.$async,()=>e.code(Nk(n,s)).code(i))}function qH(e){return(0,tt._)`{${ft.default.instancePath}="", ${ft.default.parentData}, ${ft.default.parentDataProperty}, ${ft.default.rootData}=${ft.default.data}${e.dynamicRef?(0,tt._)`, ${ft.default.dynamicAnchors}={}`:tt.nil}}={}`}function KH(e,t){e.if(ft.default.valCxt,()=>{e.var(ft.default.instancePath,(0,tt._)`${ft.default.valCxt}.${ft.default.instancePath}`),e.var(ft.default.parentData,(0,tt._)`${ft.default.valCxt}.${ft.default.parentData}`),e.var(ft.default.parentDataProperty,(0,tt._)`${ft.default.valCxt}.${ft.default.parentDataProperty}`),e.var(ft.default.rootData,(0,tt._)`${ft.default.valCxt}.${ft.default.rootData}`),t.dynamicRef&&e.var(ft.default.dynamicAnchors,(0,tt._)`${ft.default.valCxt}.${ft.default.dynamicAnchors}`)},()=>{e.var(ft.default.instancePath,(0,tt._)`""`),e.var(ft.default.parentData,(0,tt._)`undefined`),e.var(ft.default.parentDataProperty,(0,tt._)`undefined`),e.var(ft.default.rootData,ft.default.data),t.dynamicRef&&e.var(ft.default.dynamicAnchors,(0,tt._)`{}`)})}function WH(e){const{schema:t,opts:n,gen:r}=e;lR(e,()=>{n.$comment&&t.$comment&&hR(e),XH(e),r.let(ft.default.vErrors,null),r.let(ft.default.errors,0),n.unevaluated&&GH(e),fR(e),tq(e)})}function GH(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,tt._)`${n}.evaluated`),t.if((0,tt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,tt._)`${e.evaluated}.props`,(0,tt._)`undefined`)),t.if((0,tt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,tt._)`${e.evaluated}.items`,(0,tt._)`undefined`))}function Nk(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,tt._)`/*# sourceURL=${n} */`:tt.nil}function JH(e,t){if(uR(e)&&(dR(e),cR(e))){YH(e,t);return}(0,oR.boolOrEmptySchema)(e,t)}function cR({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function uR(e){return typeof e.schema!="boolean"}function YH(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&hR(e),ZH(e),eq(e);const i=r.const("_errs",ft.default.errors);fR(e,i),r.var(t,(0,tt._)`${i} === ${ft.default.errors}`)}function dR(e){(0,Pi.checkUnknownRules)(e),QH(e)}function fR(e,t){if(e.opts.jtd)return Ck(e,[],!1,t);const n=(0,Ek.getSchemaTypes)(e.schema),r=(0,Ek.coerceAndCheckDataType)(e,n);Ck(e,n,!r,t)}function QH(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Pi.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function XH(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Pi.checkStrictMode)(e,"default is ignored in the schema root")}function ZH(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,VH.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function eq(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function hR({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)e.code((0,tt._)`${ft.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const a=(0,tt.str)`${r}/$comment`,l=e.scopeValue("root",{ref:t.root});e.code((0,tt._)`${ft.default.self}.opts.$comment(${i}, ${a}, ${l}.schema)`)}}function tq(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=e;n.$async?t.if((0,tt._)`${ft.default.errors} === 0`,()=>t.return(ft.default.data),()=>t.throw((0,tt._)`new ${s}(${ft.default.vErrors})`)):(t.assign((0,tt._)`${r}.errors`,ft.default.vErrors),i.unevaluated&&nq(e),t.return((0,tt._)`${ft.default.errors} === 0`))}function nq({gen:e,evaluated:t,props:n,items:r}){n instanceof tt.Name&&e.assign((0,tt._)`${t}.props`,n),r instanceof tt.Name&&e.assign((0,tt._)`${t}.items`,r)}function Ck(e,t,n,r){const{gen:s,schema:i,data:a,allErrors:l,opts:c,self:u}=e,{RULES:d}=u;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,Pi.schemaHasRulesButRef)(i,d))){s.block(()=>gR(e,"$ref",d.all.$ref.definition));return}c.jtd||rq(e,t),s.block(()=>{for(const g of d.rules)f(g);f(d.post)});function f(g){(0,ow.shouldUseGroup)(i,g)&&(g.type?(s.if((0,qh.checkDataType)(g.type,a,c.strictNumbers)),Tk(e,g),t.length===1&&t[0]===g.type&&n&&(s.else(),(0,qh.reportTypeError)(e)),s.endIf()):Tk(e,g),l||s.if((0,tt._)`${ft.default.errors} === ${r||0}`))}}function Tk(e,t){const{gen:n,schema:r,opts:{useDefaults:s}}=e;s&&(0,zH.assignDefaults)(e,t.type),n.block(()=>{for(const i of t.rules)(0,ow.shouldUseRule)(r,i)&&gR(e,i.keyword,i.definition,t.type)})}function rq(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(sq(e,t),e.opts.allowUnionTypes||iq(e,t),aq(e,e.dataTypes))}function sq(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{pR(e.dataTypes,n)||lw(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),lq(e,t)}}function iq(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&lw(e,"use allowUnionTypes to allow union type keyword")}function aq(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,ow.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(a=>oq(t,a))&&lw(e,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function oq(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function pR(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function lq(e,t){const n=[];for(const r of e.dataTypes)pR(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function lw(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Pi.checkStrictMode)(e,t,e.opts.strictTypes)}class mR{constructor(t,n,r){if((0,mu.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Pi.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",yR(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mu.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ft.default.errors))}result(t,n,r){this.failResult((0,tt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,tt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,tt._)`${n} !== undefined && (${(0,tt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?Ac.reportExtraError:Ac.reportError)(this,this.def.error,n)}$dataError(){(0,Ac.reportError)(this,this.def.$dataError||Ac.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ac.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=tt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=tt.nil,n=tt.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:a}=this;r.if((0,tt.or)((0,tt._)`${s} === undefined`,n)),t!==tt.nil&&r.assign(t,!0),(i.length||a.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==tt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,tt.or)(a(),l());function a(){if(r.length){if(!(n instanceof tt.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,tt._)`${(0,qh.checkDataTypes)(c,n,i.opts.strictNumbers,qh.DataType.Wrong)}`}return tt.nil}function l(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,tt._)`!${c}(${n})`}return tt.nil}}subschema(t,n){const r=(0,Wm.getSubschema)(this.it,t);(0,Wm.extendSubschemaData)(r,this.it,t),(0,Wm.extendSubschemaMode)(r,t);const s={...this.it,...r,items:void 0,props:void 0};return JH(s,n),s}mergeEvaluated(t,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Pi.mergeEvaluated.props(s,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Pi.mergeEvaluated.items(s,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(t,tt.Name)),!0}}Ws.KeywordCxt=mR;function gR(e,t,n,r){const s=new mR(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,mu.funcKeywordCode)(s,n):"macro"in n?(0,mu.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,mu.funcKeywordCode)(s,n)}const cq=/^\/(?:[^~]|~0|~1)*$/,uq=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function yR(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,i;if(e==="")return ft.default.rootData;if(e[0]==="/"){if(!cq.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=ft.default.rootData}else{const u=uq.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const d=+u[1];if(s=u[2],s==="#"){if(d>=t)throw new Error(c("property/index",d));return r[t-d]}if(d>t)throw new Error(c("data",d));if(i=n[t-d],!s)return i}let a=i;const l=s.split("/");for(const u of l)u&&(i=(0,tt._)`${i}${(0,tt.getProperty)((0,Pi.unescapeJsonPointer)(u))}`,a=(0,tt._)`${a} && ${i}`);return a;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${t}`}}Ws.getData=yR;var Td={};Object.defineProperty(Td,"__esModule",{value:!0});class dq extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Td.default=dq;var fc={};Object.defineProperty(fc,"__esModule",{value:!0});const Gm=lr;class fq extends Error{constructor(t,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Gm.resolveUrl)(t,n,r),this.missingSchema=(0,Gm.normalizeId)((0,Gm.getFullPath)(t,this.missingRef))}}fc.default=fq;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.resolveSchema=Fr.getCompilingSchema=Fr.resolveRef=Fr.compileSchema=Fr.SchemaEnv=void 0;const As=St,hq=Td,Qa=mi,Hs=lr,$k=ze,pq=Ws;class Dp{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Hs.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Fr.SchemaEnv=Dp;function cw(e){const t=vR.call(this,e);if(t)return t;const n=(0,Hs.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,a=new As.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let l;e.$async&&(l=a.scopeValue("Error",{ref:hq.default,code:(0,As._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");e.validateName=c;const u={gen:a,allErrors:this.opts.allErrors,data:Qa.default.data,parentData:Qa.default.parentData,parentDataProperty:Qa.default.parentDataProperty,dataNames:[Qa.default.data],dataPathArr:[As.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,As.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:As.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,As._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,pq.validateFunctionCode)(u),a.optimize(this.opts.code.optimize);const f=a.toString();d=`${a.scopeRefs(Qa.default.scope)}return ${f}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const p=new Function(`${Qa.default.self}`,`${Qa.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:p}),p.errors=null,p.schema=e.schema,p.schemaEnv=e,e.$async&&(p.$async=!0),this.opts.code.source===!0&&(p.source={validateName:c,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:m,items:w}=u;p.evaluated={props:m instanceof As.Name?void 0:m,items:w instanceof As.Name?void 0:w,dynamicProps:m instanceof As.Name,dynamicItems:w instanceof As.Name},p.source&&(p.source.evaluated=(0,As.stringify)(p.evaluated))}return e.validate=p,e}catch(f){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),f}finally{this._compilations.delete(e)}}Fr.compileSchema=cw;function mq(e,t,n){var r;n=(0,Hs.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let i=vq.call(this,e,n);if(i===void 0){const a=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:l}=this.opts;a&&(i=new Dp({schema:a,schemaId:l,root:e,baseId:t}))}if(i!==void 0)return e.refs[n]=gq.call(this,i)}Fr.resolveRef=mq;function gq(e){return(0,Hs.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:cw.call(this,e)}function vR(e){for(const t of this._compilations)if(yq(t,e))return t}Fr.getCompilingSchema=vR;function yq(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function vq(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Bp.call(this,e,t)}function Bp(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Hs._getFullPath)(this.opts.uriResolver,n);let s=(0,Hs.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===s)return Jm.call(this,n,e);const i=(0,Hs.normalizeId)(r),a=this.refs[i]||this.schemas[i];if(typeof a=="string"){const l=Bp.call(this,e,a);return typeof(l==null?void 0:l.schema)!="object"?void 0:Jm.call(this,n,l)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||cw.call(this,a),i===(0,Hs.normalizeId)(t)){const{schema:l}=a,{schemaId:c}=this.opts,u=l[c];return u&&(s=(0,Hs.resolveUrl)(this.opts.uriResolver,s,u)),new Dp({schema:l,schemaId:c,root:e,baseId:s})}return Jm.call(this,n,a)}}Fr.resolveSchema=Bp;const bq=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Jm(e,{baseId:t,schema:n,root:r}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const l of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,$k.unescapeFragment)(l)];if(c===void 0)return;n=c;const u=typeof n=="object"&&n[this.opts.schemaId];!bq.has(l)&&u&&(t=(0,Hs.resolveUrl)(this.opts.uriResolver,t,u))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,$k.schemaHasRulesButRef)(n,this.RULES)){const l=(0,Hs.resolveUrl)(this.opts.uriResolver,t,n.$ref);i=Bp.call(this,r,l)}const{schemaId:a}=this.opts;if(i=i||new Dp({schema:n,schemaId:a,root:r,baseId:t}),i.schema!==i.root.schema)return i}const wq="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",xq="Meta-schema for $data reference (JSON AnySchema extension proposal)",Sq="object",_q=["$data"],kq={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},jq=!1,Eq={$id:wq,description:xq,type:Sq,required:_q,properties:kq,additionalProperties:jq};var uw={},Up={exports:{}};const Nq=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),bR=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function wR(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const Cq=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Ok(e){return e.length=0,!0}function Tq(e,t,n){if(e.length){const r=wR(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function $q(e){let t=0;const n={error:!1,address:"",zone:""},r=[],s=[];let i=!1,a=!1,l=Tq;for(let c=0;c<e.length;c++){const u=e[c];if(!(u==="["||u==="]"))if(u===":"){if(i===!0&&(a=!0),!l(s,r,n))break;if(++t>7){n.error=!0;break}c>0&&e[c-1]===":"&&(i=!0),r.push(":");continue}else if(u==="%"){if(!l(s,r,n))break;l=Ok}else{s.push(u);continue}}return s.length&&(l===Ok?n.zone=s.join(""):a?r.push(s.join("")):r.push(wR(s))),n.address=r.join(""),n}function xR(e){if(Oq(e,":")<2)return{host:e,isIPV6:!1};const t=$q(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function Oq(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function Rq(e){let t=e;const n=[];let r=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(s===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function Aq(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function Pq(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!bR(n)){const r=xR(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var SR={nonSimpleDomain:Cq,recomposeAuthority:Pq,normalizeComponentEncoding:Aq,removeDotSegments:Rq,isIPv4:bR,isUUID:Nq,normalizeIPv6:xR};const{isUUID:Iq}=SR,Lq=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function _R(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function kR(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function jR(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Mq(e){return e.secure=_R(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Fq(e){if((e.port===(_R(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function Dq(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(Lq);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=`${r}:${t.nid||e.nid}`,i=dw(s);e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Bq(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),s=`${n}:${t.nid||r}`,i=dw(s);i&&(e=i.serialize(e,t));const a=e,l=e.nss;return a.path=`${r||t.nid}:${l}`,t.skipEscape=!0,a}function Uq(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!Iq(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function zq(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const ER={scheme:"http",domainHost:!0,parse:kR,serialize:jR},Vq={scheme:"https",domainHost:ER.domainHost,parse:kR,serialize:jR},Jf={scheme:"ws",domainHost:!0,parse:Mq,serialize:Fq},Hq={scheme:"wss",domainHost:Jf.domainHost,parse:Jf.parse,serialize:Jf.serialize},qq={scheme:"urn",parse:Dq,serialize:Bq,skipNormalize:!0},Kq={scheme:"urn:uuid",parse:Uq,serialize:zq,skipNormalize:!0},Kh={http:ER,https:Vq,ws:Jf,wss:Hq,urn:qq,"urn:uuid":Kq};Object.setPrototypeOf(Kh,null);function dw(e){return e&&(Kh[e]||Kh[e.toLowerCase()])||void 0}var Wq={SCHEMES:Kh,getSchemeHandler:dw};const{normalizeIPv6:Gq,removeDotSegments:Wc,recomposeAuthority:Jq,normalizeComponentEncoding:mf,isIPv4:Yq,nonSimpleDomain:Qq}=SR,{SCHEMES:Xq,getSchemeHandler:NR}=Wq;function Zq(e,t){return typeof e=="string"?e=ci(zi(e,t),t):typeof e=="object"&&(e=zi(ci(e,t),t)),e}function eK(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=CR(zi(e,r),zi(t,r),r,!0);return r.skipEscape=!0,ci(s,r)}function CR(e,t,n,r){const s={};return r||(e=zi(ci(e,n),n),t=zi(ci(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Wc(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Wc(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=Wc(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=Wc(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function tK(e,t,n){return typeof e=="string"?(e=unescape(e),e=ci(mf(zi(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=ci(mf(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=ci(mf(zi(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=ci(mf(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function ci(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),s=[],i=NR(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&s.push(n.scheme,":");const a=Jq(n);if(a!==void 0&&(r.reference!=="suffix"&&s.push("//"),s.push(a),n.path&&n.path[0]!=="/"&&s.push("/")),n.path!==void 0){let l=n.path;!r.absolutePath&&(!i||!i.absolutePath)&&(l=Wc(l)),a===void 0&&l[0]==="/"&&l[1]==="/"&&(l="/%2F"+l.slice(2)),s.push(l)}return n.query!==void 0&&s.push("?",n.query),n.fragment!==void 0&&s.push("#",n.fragment),s.join("")}const nK=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function zi(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);const i=e.match(nK);if(i){if(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5]),r.host)if(Yq(r.host)===!1){const c=Gq(r.host);r.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const a=NR(n.scheme||r.scheme);if(!n.unicodeSupport&&(!a||!a.unicodeSupport)&&r.host&&(n.domainHost||a&&a.domainHost)&&s===!1&&Qq(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(l){r.error=r.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),a&&a.parse&&a.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const fw={SCHEMES:Xq,normalize:Zq,resolve:eK,resolveComponent:CR,equal:tK,serialize:ci,parse:zi};Up.exports=fw;Up.exports.default=fw;Up.exports.fastUri=fw;var rK=Up.exports;Object.defineProperty(uw,"__esModule",{value:!0});const TR=rK;TR.code='require("ajv/dist/runtime/uri").default';uw.default=TR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ws;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=St;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Td,s=fc,i=Co,a=Fr,l=St,c=lr,u=Jn,d=ze,f=Eq,g=uw,p=(I,N)=>new RegExp(I,N);p.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],w=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function x(I){var N,L,A,_,R,K,pe,ue,j,$e,De,rt,st,ke,Re,J,F,re,be,Le,O,z,G,se,ne;const q=I.strict,ge=(N=I.code)===null||N===void 0?void 0:N.optimize,Te=ge===!0||ge===void 0?1:ge||0,qe=(A=(L=I.code)===null||L===void 0?void 0:L.regExp)!==null&&A!==void 0?A:p,jt=(_=I.uriResolver)!==null&&_!==void 0?_:g.default;return{strictSchema:(K=(R=I.strictSchema)!==null&&R!==void 0?R:q)!==null&&K!==void 0?K:!0,strictNumbers:(ue=(pe=I.strictNumbers)!==null&&pe!==void 0?pe:q)!==null&&ue!==void 0?ue:!0,strictTypes:($e=(j=I.strictTypes)!==null&&j!==void 0?j:q)!==null&&$e!==void 0?$e:"log",strictTuples:(rt=(De=I.strictTuples)!==null&&De!==void 0?De:q)!==null&&rt!==void 0?rt:"log",strictRequired:(ke=(st=I.strictRequired)!==null&&st!==void 0?st:q)!==null&&ke!==void 0?ke:!1,code:I.code?{...I.code,optimize:Te,regExp:qe}:{optimize:Te,regExp:qe},loopRequired:(Re=I.loopRequired)!==null&&Re!==void 0?Re:v,loopEnum:(J=I.loopEnum)!==null&&J!==void 0?J:v,meta:(F=I.meta)!==null&&F!==void 0?F:!0,messages:(re=I.messages)!==null&&re!==void 0?re:!0,inlineRefs:(be=I.inlineRefs)!==null&&be!==void 0?be:!0,schemaId:(Le=I.schemaId)!==null&&Le!==void 0?Le:"$id",addUsedSchema:(O=I.addUsedSchema)!==null&&O!==void 0?O:!0,validateSchema:(z=I.validateSchema)!==null&&z!==void 0?z:!0,validateFormats:(G=I.validateFormats)!==null&&G!==void 0?G:!0,unicodeRegExp:(se=I.unicodeRegExp)!==null&&se!==void 0?se:!0,int32range:(ne=I.int32range)!==null&&ne!==void 0?ne:!0,uriResolver:jt}}class k{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...x(N)};const{es5:L,lines:A}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:w,es5:L,lines:A}),this.logger=Q(N.logger);const _=N.validateFormats;N.validateFormats=!1,this.RULES=(0,i.getRules)(),E.call(this,b,N,"NOT SUPPORTED"),E.call(this,h,N,"DEPRECATED","warn"),this._metaOpts=Y.call(this),N.formats&&B.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&W.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),P.call(this),N.validateFormats=_}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:L,schemaId:A}=this.opts;let _=f;A==="id"&&(_={...f},_.id=_.$id,delete _.$id),L&&N&&this.addMetaSchema(_,_[A],!1)}defaultMeta(){const{meta:N,schemaId:L}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[L]||N:void 0}validate(N,L){let A;if(typeof N=="string"){if(A=this.getSchema(N),!A)throw new Error(`no schema with key or ref "${N}"`)}else A=this.compile(N);const _=A(L);return"$async"in A||(this.errors=A.errors),_}compile(N,L){const A=this._addSchema(N,L);return A.validate||this._compileSchemaEnv(A)}compileAsync(N,L){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:A}=this.opts;return _.call(this,N,L);async function _($e,De){await R.call(this,$e.$schema);const rt=this._addSchema($e,De);return rt.validate||K.call(this,rt)}async function R($e){$e&&!this.getSchema($e)&&await _.call(this,{$ref:$e},!0)}async function K($e){try{return this._compileSchemaEnv($e)}catch(De){if(!(De instanceof s.default))throw De;return pe.call(this,De),await ue.call(this,De.missingSchema),K.call(this,$e)}}function pe({missingSchema:$e,missingRef:De}){if(this.refs[$e])throw new Error(`AnySchema ${$e} is loaded but ${De} cannot be resolved`)}async function ue($e){const De=await j.call(this,$e);this.refs[$e]||await R.call(this,De.$schema),this.refs[$e]||this.addSchema(De,$e,L)}async function j($e){const De=this._loading[$e];if(De)return De;try{return await(this._loading[$e]=A($e))}finally{delete this._loading[$e]}}}addSchema(N,L,A,_=this.opts.validateSchema){if(Array.isArray(N)){for(const K of N)this.addSchema(K,void 0,A,_);return this}let R;if(typeof N=="object"){const{schemaId:K}=this.opts;if(R=N[K],R!==void 0&&typeof R!="string")throw new Error(`schema ${K} must be string`)}return L=(0,c.normalizeId)(L||R),this._checkUnique(L),this.schemas[L]=this._addSchema(N,A,L,_,!0),this}addMetaSchema(N,L,A=this.opts.validateSchema){return this.addSchema(N,L,!0,A),this}validateSchema(N,L){if(typeof N=="boolean")return!0;let A;if(A=N.$schema,A!==void 0&&typeof A!="string")throw new Error("$schema must be a string");if(A=A||this.opts.defaultMeta||this.defaultMeta(),!A)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const _=this.validate(A,N);if(!_&&L){const R="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(R);else throw new Error(R)}return _}getSchema(N){let L;for(;typeof(L=$.call(this,N))=="string";)N=L;if(L===void 0){const{schemaId:A}=this.opts,_=new a.SchemaEnv({schema:{},schemaId:A});if(L=a.resolveSchema.call(this,_,N),!L)return;this.refs[N]=L}return L.validate||this._compileSchemaEnv(L)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const L=$.call(this,N);return typeof L=="object"&&this._cache.delete(L.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const L=N;this._cache.delete(L);let A=N[this.opts.schemaId];return A&&(A=(0,c.normalizeId)(A),delete this.schemas[A],delete this.refs[A]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const L of N)this.addKeyword(L);return this}addKeyword(N,L){let A;if(typeof N=="string")A=N,typeof L=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),L.keyword=A);else if(typeof N=="object"&&L===void 0){if(L=N,A=L.keyword,Array.isArray(A)&&!A.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(fe.call(this,A,L),!L)return(0,d.eachItem)(A,R=>me.call(this,R)),this;Oe.call(this,L);const _={...L,type:(0,u.getJSONTypes)(L.type),schemaType:(0,u.getJSONTypes)(L.schemaType)};return(0,d.eachItem)(A,_.type.length===0?R=>me.call(this,R,_):R=>_.type.forEach(K=>me.call(this,R,_,K))),this}getKeyword(N){const L=this.RULES.all[N];return typeof L=="object"?L.definition:!!L}removeKeyword(N){const{RULES:L}=this;delete L.keywords[N],delete L.all[N];for(const A of L.rules){const _=A.rules.findIndex(R=>R.keyword===N);_>=0&&A.rules.splice(_,1)}return this}addFormat(N,L){return typeof L=="string"&&(L=new RegExp(L)),this.formats[N]=L,this}errorsText(N=this.errors,{separator:L=", ",dataVar:A="data"}={}){return!N||N.length===0?"No errors":N.map(_=>`${A}${_.instancePath} ${_.message}`).reduce((_,R)=>_+L+R)}$dataMetaSchema(N,L){const A=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const _ of L){const R=_.split("/").slice(1);let K=N;for(const pe of R)K=K[pe];for(const pe in A){const ue=A[pe];if(typeof ue!="object")continue;const{$data:j}=ue.definition,$e=K[pe];j&&$e&&(K[pe]=M($e))}}return N}_removeAllSchemas(N,L){for(const A in N){const _=N[A];(!L||L.test(A))&&(typeof _=="string"?delete N[A]:_&&!_.meta&&(this._cache.delete(_.schema),delete N[A]))}}_addSchema(N,L,A,_=this.opts.validateSchema,R=this.opts.addUsedSchema){let K;const{schemaId:pe}=this.opts;if(typeof N=="object")K=N[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let ue=this._cache.get(N);if(ue!==void 0)return ue;A=(0,c.normalizeId)(K||A);const j=c.getSchemaRefs.call(this,N,A);return ue=new a.SchemaEnv({schema:N,schemaId:pe,meta:L,baseId:A,localRefs:j}),this._cache.set(ue.schema,ue),R&&!A.startsWith("#")&&(A&&this._checkUnique(A),this.refs[A]=ue),_&&this.validateSchema(N,!0),ue}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):a.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const L=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,N)}finally{this.opts=L}}}k.ValidationError=r.default,k.MissingRefError=s.default,e.default=k;function E(I,N,L,A="error"){for(const _ in I){const R=_;R in N&&this.logger[A](`${L}: option ${_}. ${I[R]}`)}}function $(I){return I=(0,c.normalizeId)(I),this.schemas[I]||this.refs[I]}function P(){const I=this.opts.schemas;if(I)if(Array.isArray(I))this.addSchema(I);else for(const N in I)this.addSchema(I[N],N)}function B(){for(const I in this.opts.formats){const N=this.opts.formats[I];N&&this.addFormat(I,N)}}function W(I){if(Array.isArray(I)){this.addVocabulary(I);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in I){const L=I[N];L.keyword||(L.keyword=N),this.addKeyword(L)}}function Y(){const I={...this.opts};for(const N of m)delete I[N];return I}const ee={log(){},warn(){},error(){}};function Q(I){if(I===!1)return ee;if(I===void 0)return console;if(I.log&&I.warn&&I.error)return I;throw new Error("logger must implement log, warn and error methods")}const X=/^[a-z_$][a-z0-9_$:-]*$/i;function fe(I,N){const{RULES:L}=this;if((0,d.eachItem)(I,A=>{if(L.keywords[A])throw new Error(`Keyword ${A} is already defined`);if(!X.test(A))throw new Error(`Keyword ${A} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function me(I,N,L){var A;const _=N==null?void 0:N.post;if(L&&_)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:R}=this;let K=_?R.post:R.rules.find(({type:ue})=>ue===L);if(K||(K={type:L,rules:[]},R.rules.push(K)),R.keywords[I]=!0,!N)return;const pe={keyword:I,definition:{...N,type:(0,u.getJSONTypes)(N.type),schemaType:(0,u.getJSONTypes)(N.schemaType)}};N.before?ve.call(this,K,pe,N.before):K.rules.push(pe),R.all[I]=pe,(A=N.implements)===null||A===void 0||A.forEach(ue=>this.addKeyword(ue))}function ve(I,N,L){const A=I.rules.findIndex(_=>_.keyword===L);A>=0?I.rules.splice(A,0,N):(I.rules.push(N),this.logger.warn(`rule ${L} is not defined`))}function Oe(I){let{metaSchema:N}=I;N!==void 0&&(I.$data&&this.opts.$data&&(N=M(N)),I.validateSchema=this.compile(N,!0))}const T={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function M(I){return{anyOf:[I,T]}}})(BO);var hw={},pw={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});const sK={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};mw.default=sK;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.callRef=To.getValidate=void 0;const iK=fc,Rk=xt,Pr=St,Yo=mi,Ak=Fr,gf=ze,aK={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:s,schemaEnv:i,validateName:a,opts:l,self:c}=r,{root:u}=i;if((n==="#"||n==="#/")&&s===u.baseId)return f();const d=Ak.resolveRef.call(c,u,s,n);if(d===void 0)throw new iK.default(r.opts.uriResolver,s,n);if(d instanceof Ak.SchemaEnv)return g(d);return p(d);function f(){if(i===u)return Yf(e,a,i,i.$async);const m=t.scopeValue("root",{ref:u});return Yf(e,(0,Pr._)`${m}.validate`,u,u.$async)}function g(m){const w=$R(e,m);Yf(e,w,m,m.$async)}function p(m){const w=t.scopeValue("schema",l.code.source===!0?{ref:m,code:(0,Pr.stringify)(m)}:{ref:m}),b=t.name("valid"),h=e.subschema({schema:m,dataTypes:[],schemaPath:Pr.nil,topSchemaRef:w,errSchemaPath:n},b);e.mergeEvaluated(h),e.ok(b)}}};function $R(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Pr._)`${n.scopeValue("wrapper",{ref:t})}.validate`}To.getValidate=$R;function Yf(e,t,n,r){const{gen:s,it:i}=e,{allErrors:a,schemaEnv:l,opts:c}=i,u=c.passContext?Yo.default.this:Pr.nil;r?d():f();function d(){if(!l.$async)throw new Error("async schema referenced by sync schema");const m=s.let("valid");s.try(()=>{s.code((0,Pr._)`await ${(0,Rk.callValidateCode)(e,t,u)}`),p(t),a||s.assign(m,!0)},w=>{s.if((0,Pr._)`!(${w} instanceof ${i.ValidationError})`,()=>s.throw(w)),g(w),a||s.assign(m,!1)}),e.ok(m)}function f(){e.result((0,Rk.callValidateCode)(e,t,u),()=>p(t),()=>g(t))}function g(m){const w=(0,Pr._)`${m}.errors`;s.assign(Yo.default.vErrors,(0,Pr._)`${Yo.default.vErrors} === null ? ${w} : ${Yo.default.vErrors}.concat(${w})`),s.assign(Yo.default.errors,(0,Pr._)`${Yo.default.vErrors}.length`)}function p(m){var w;if(!i.opts.unevaluated)return;const b=(w=n==null?void 0:n.validate)===null||w===void 0?void 0:w.evaluated;if(i.props!==!0)if(b&&!b.dynamicProps)b.props!==void 0&&(i.props=gf.mergeEvaluated.props(s,b.props,i.props));else{const h=s.var("props",(0,Pr._)`${m}.evaluated.props`);i.props=gf.mergeEvaluated.props(s,h,i.props,Pr.Name)}if(i.items!==!0)if(b&&!b.dynamicItems)b.items!==void 0&&(i.items=gf.mergeEvaluated.items(s,b.items,i.items));else{const h=s.var("items",(0,Pr._)`${m}.evaluated.items`);i.items=gf.mergeEvaluated.items(s,h,i.items,Pr.Name)}}}To.callRef=Yf;To.default=aK;Object.defineProperty(pw,"__esModule",{value:!0});const oK=mw,lK=To,cK=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",oK.default,lK.default];pw.default=cK;var gw={},yw={};Object.defineProperty(yw,"__esModule",{value:!0});const Wh=St,ra=Wh.operators,Gh={maximum:{okStr:"<=",ok:ra.LTE,fail:ra.GT},minimum:{okStr:">=",ok:ra.GTE,fail:ra.LT},exclusiveMaximum:{okStr:"<",ok:ra.LT,fail:ra.GTE},exclusiveMinimum:{okStr:">",ok:ra.GT,fail:ra.LTE}},uK={message:({keyword:e,schemaCode:t})=>(0,Wh.str)`must be ${Gh[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Wh._)`{comparison: ${Gh[e].okStr}, limit: ${t}}`},dK={keyword:Object.keys(Gh),type:"number",schemaType:"number",$data:!0,error:uK,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,Wh._)`${n} ${Gh[t].fail} ${r} || isNaN(${n})`)}};yw.default=dK;var vw={};Object.defineProperty(vw,"__esModule",{value:!0});const gu=St,fK={message:({schemaCode:e})=>(0,gu.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,gu._)`{multipleOf: ${e}}`},hK={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:fK,code(e){const{gen:t,data:n,schemaCode:r,it:s}=e,i=s.opts.multipleOfPrecision,a=t.let("res"),l=i?(0,gu._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:(0,gu._)`${a} !== parseInt(${a})`;e.fail$data((0,gu._)`(${r} === 0 || (${a} = ${n}/${r}, ${l}))`)}};vw.default=hK;var bw={},ww={};Object.defineProperty(ww,"__esModule",{value:!0});function OR(e){const t=e.length;let n=0,r=0,s;for(;r<t;)n++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<t&&(s=e.charCodeAt(r),(s&64512)===56320&&r++);return n}ww.default=OR;OR.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(bw,"__esModule",{value:!0});const io=St,pK=ze,mK=ww,gK={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,io.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,io._)`{limit: ${e}}`},yK={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:gK,code(e){const{keyword:t,data:n,schemaCode:r,it:s}=e,i=t==="maxLength"?io.operators.GT:io.operators.LT,a=s.opts.unicode===!1?(0,io._)`${n}.length`:(0,io._)`${(0,pK.useFunc)(e.gen,mK.default)}(${n})`;e.fail$data((0,io._)`${a} ${i} ${r}`)}};bw.default=yK;var xw={};Object.defineProperty(xw,"__esModule",{value:!0});const vK=xt,bK=ze,xl=St,wK={message:({schemaCode:e})=>(0,xl.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,xl._)`{pattern: ${e}}`},xK={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:wK,code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:i,it:a}=e,l=a.opts.unicodeRegExp?"u":"";if(r){const{regExp:c}=a.opts.code,u=c.code==="new RegExp"?(0,xl._)`new RegExp`:(0,bK.useFunc)(t,c),d=t.let("valid");t.try(()=>t.assign(d,(0,xl._)`${u}(${i}, ${l}).test(${n})`),()=>t.assign(d,!1)),e.fail$data((0,xl._)`!${d}`)}else{const c=(0,vK.usePattern)(e,s);e.fail$data((0,xl._)`!${c}.test(${n})`)}}};xw.default=xK;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});const yu=St,SK={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,yu.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,yu._)`{limit: ${e}}`},_K={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:SK,code(e){const{keyword:t,data:n,schemaCode:r}=e,s=t==="maxProperties"?yu.operators.GT:yu.operators.LT;e.fail$data((0,yu._)`Object.keys(${n}).length ${s} ${r}`)}};Sw.default=_K;var _w={};Object.defineProperty(_w,"__esModule",{value:!0});const Pc=xt,vu=St,kK=ze,jK={message:({params:{missingProperty:e}})=>(0,vu.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,vu._)`{missingProperty: ${e}}`},EK={keyword:"required",type:"object",schemaType:"array",$data:!0,error:jK,code(e){const{gen:t,schema:n,schemaCode:r,data:s,$data:i,it:a}=e,{opts:l}=a;if(!i&&n.length===0)return;const c=n.length>=l.loopRequired;if(a.allErrors?u():d(),l.strictRequired){const p=e.parentSchema.properties,{definedProperties:m}=e.it;for(const w of n)if((p==null?void 0:p[w])===void 0&&!m.has(w)){const b=a.schemaEnv.baseId+a.errSchemaPath,h=`required property "${w}" is not defined at "${b}" (strictRequired)`;(0,kK.checkStrictMode)(a,h,a.opts.strictRequired)}}function u(){if(c||i)e.block$data(vu.nil,f);else for(const p of n)(0,Pc.checkReportMissingProp)(e,p)}function d(){const p=t.let("missing");if(c||i){const m=t.let("valid",!0);e.block$data(m,()=>g(p,m)),e.ok(m)}else t.if((0,Pc.checkMissingProp)(e,n,p)),(0,Pc.reportMissingProp)(e,p),t.else()}function f(){t.forOf("prop",r,p=>{e.setParams({missingProperty:p}),t.if((0,Pc.noPropertyInData)(t,s,p,l.ownProperties),()=>e.error())})}function g(p,m){e.setParams({missingProperty:p}),t.forOf(p,r,()=>{t.assign(m,(0,Pc.propertyInData)(t,s,p,l.ownProperties)),t.if((0,vu.not)(m),()=>{e.error(),t.break()})},vu.nil)}}};_w.default=EK;var kw={};Object.defineProperty(kw,"__esModule",{value:!0});const bu=St,NK={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,bu.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,bu._)`{limit: ${e}}`},CK={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:NK,code(e){const{keyword:t,data:n,schemaCode:r}=e,s=t==="maxItems"?bu.operators.GT:bu.operators.LT;e.fail$data((0,bu._)`${n}.length ${s} ${r}`)}};kw.default=CK;var jw={},$d={};Object.defineProperty($d,"__esModule",{value:!0});const RR=nR;RR.code='require("ajv/dist/runtime/equal").default';$d.default=RR;Object.defineProperty(jw,"__esModule",{value:!0});const Ym=Jn,ir=St,TK=ze,$K=$d,OK={message:({params:{i:e,j:t}})=>(0,ir.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ir._)`{i: ${e}, j: ${t}}`},RK={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:OK,code(e){const{gen:t,data:n,$data:r,schema:s,parentSchema:i,schemaCode:a,it:l}=e;if(!r&&!s)return;const c=t.let("valid"),u=i.items?(0,Ym.getSchemaTypes)(i.items):[];e.block$data(c,d,(0,ir._)`${a} === false`),e.ok(c);function d(){const m=t.let("i",(0,ir._)`${n}.length`),w=t.let("j");e.setParams({i:m,j:w}),t.assign(c,!0),t.if((0,ir._)`${m} > 1`,()=>(f()?g:p)(m,w))}function f(){return u.length>0&&!u.some(m=>m==="object"||m==="array")}function g(m,w){const b=t.name("item"),h=(0,Ym.checkDataTypes)(u,b,l.opts.strictNumbers,Ym.DataType.Wrong),v=t.const("indices",(0,ir._)`{}`);t.for((0,ir._)`;${m}--;`,()=>{t.let(b,(0,ir._)`${n}[${m}]`),t.if(h,(0,ir._)`continue`),u.length>1&&t.if((0,ir._)`typeof ${b} == "string"`,(0,ir._)`${b} += "_"`),t.if((0,ir._)`typeof ${v}[${b}] == "number"`,()=>{t.assign(w,(0,ir._)`${v}[${b}]`),e.error(),t.assign(c,!1).break()}).code((0,ir._)`${v}[${b}] = ${m}`)})}function p(m,w){const b=(0,TK.useFunc)(t,$K.default),h=t.name("outer");t.label(h).for((0,ir._)`;${m}--;`,()=>t.for((0,ir._)`${w} = ${m}; ${w}--;`,()=>t.if((0,ir._)`${b}(${n}[${m}], ${n}[${w}])`,()=>{e.error(),t.assign(c,!1).break(h)})))}}};jw.default=RK;var Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});const Ky=St,AK=ze,PK=$d,IK={message:"must be equal to constant",params:({schemaCode:e})=>(0,Ky._)`{allowedValue: ${e}}`},LK={keyword:"const",$data:!0,error:IK,code(e){const{gen:t,data:n,$data:r,schemaCode:s,schema:i}=e;r||i&&typeof i=="object"?e.fail$data((0,Ky._)`!${(0,AK.useFunc)(t,PK.default)}(${n}, ${s})`):e.fail((0,Ky._)`${i} !== ${n}`)}};Ew.default=LK;var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});const Gc=St,MK=ze,FK=$d,DK={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Gc._)`{allowedValues: ${e}}`},BK={keyword:"enum",schemaType:"array",$data:!0,error:DK,code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:i,it:a}=e;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const l=s.length>=a.opts.loopEnum;let c;const u=()=>c??(c=(0,MK.useFunc)(t,FK.default));let d;if(l||r)d=t.let("valid"),e.block$data(d,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const p=t.const("vSchema",i);d=(0,Gc.or)(...s.map((m,w)=>g(p,w)))}e.pass(d);function f(){t.assign(d,!1),t.forOf("v",i,p=>t.if((0,Gc._)`${u()}(${n}, ${p})`,()=>t.assign(d,!0).break()))}function g(p,m){const w=s[m];return typeof w=="object"&&w!==null?(0,Gc._)`${u()}(${n}, ${p}[${m}])`:(0,Gc._)`${n} === ${w}`}}};Nw.default=BK;Object.defineProperty(gw,"__esModule",{value:!0});const UK=yw,zK=vw,VK=bw,HK=xw,qK=Sw,KK=_w,WK=kw,GK=jw,JK=Ew,YK=Nw,QK=[UK.default,zK.default,VK.default,HK.default,qK.default,KK.default,WK.default,GK.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},JK.default,YK.default];gw.default=QK;var Cw={},hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.validateAdditionalItems=void 0;const ao=St,Wy=ze,XK={message:({params:{len:e}})=>(0,ao.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ao._)`{limit: ${e}}`},ZK={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:XK,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Wy.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}AR(e,r)}};function AR(e,t){const{gen:n,schema:r,data:s,keyword:i,it:a}=e;a.items=!0;const l=n.const("len",(0,ao._)`${s}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,ao._)`${l} <= ${t.length}`);else if(typeof r=="object"&&!(0,Wy.alwaysValidSchema)(a,r)){const u=n.var("valid",(0,ao._)`${l} <= ${t.length}`);n.if((0,ao.not)(u),()=>c(u)),e.ok(u)}function c(u){n.forRange("i",t.length,l,d=>{e.subschema({keyword:i,dataProp:d,dataPropType:Wy.Type.Num},u),a.allErrors||n.if((0,ao.not)(u),()=>n.break())})}}hc.validateAdditionalItems=AR;hc.default=ZK;var Tw={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.validateTuple=void 0;const Pk=St,Qf=ze,eW=xt,tW={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return PR(e,"additionalItems",t);n.items=!0,!(0,Qf.alwaysValidSchema)(n,t)&&e.ok((0,eW.validateArray)(e))}};function PR(e,t,n=e.schema){const{gen:r,parentSchema:s,data:i,keyword:a,it:l}=e;d(s),l.opts.unevaluated&&n.length&&l.items!==!0&&(l.items=Qf.mergeEvaluated.items(r,n.length,l.items));const c=r.name("valid"),u=r.const("len",(0,Pk._)`${i}.length`);n.forEach((f,g)=>{(0,Qf.alwaysValidSchema)(l,f)||(r.if((0,Pk._)`${u} > ${g}`,()=>e.subschema({keyword:a,schemaProp:g,dataProp:g},c)),e.ok(c))});function d(f){const{opts:g,errSchemaPath:p}=l,m=n.length,w=m===f.minItems&&(m===f.maxItems||f[t]===!1);if(g.strictTuples&&!w){const b=`"${a}" is ${m}-tuple, but minItems or maxItems/${t} are not specified or different at path "${p}"`;(0,Qf.checkStrictMode)(l,b,g.strictTuples)}}}pc.validateTuple=PR;pc.default=tW;Object.defineProperty(Tw,"__esModule",{value:!0});const nW=pc,rW={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,nW.validateTuple)(e,"items")};Tw.default=rW;var $w={};Object.defineProperty($w,"__esModule",{value:!0});const Ik=St,sW=ze,iW=xt,aW=hc,oW={message:({params:{len:e}})=>(0,Ik.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ik._)`{limit: ${e}}`},lW={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:oW,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:s}=n;r.items=!0,!(0,sW.alwaysValidSchema)(r,t)&&(s?(0,aW.validateAdditionalItems)(e,s):e.ok((0,iW.validateArray)(e)))}};$w.default=lW;var Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});const ys=St,yf=ze,cW={message:({params:{min:e,max:t}})=>t===void 0?(0,ys.str)`must contain at least ${e} valid item(s)`:(0,ys.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ys._)`{minContains: ${e}}`:(0,ys._)`{minContains: ${e}, maxContains: ${t}}`},uW={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:cW,code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;let a,l;const{minContains:c,maxContains:u}=r;i.opts.next?(a=c===void 0?1:c,l=u):a=1;const d=t.const("len",(0,ys._)`${s}.length`);if(e.setParams({min:a,max:l}),l===void 0&&a===0){(0,yf.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&a>l){(0,yf.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,yf.alwaysValidSchema)(i,n)){let w=(0,ys._)`${d} >= ${a}`;l!==void 0&&(w=(0,ys._)`${w} && ${d} <= ${l}`),e.pass(w);return}i.items=!0;const f=t.name("valid");l===void 0&&a===1?p(f,()=>t.if(f,()=>t.break())):a===0?(t.let(f,!0),l!==void 0&&t.if((0,ys._)`${s}.length > 0`,g)):(t.let(f,!1),g()),e.result(f,()=>e.reset());function g(){const w=t.name("_valid"),b=t.let("count",0);p(w,()=>t.if(w,()=>m(b)))}function p(w,b){t.forRange("i",0,d,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:yf.Type.Num,compositeRule:!0},w),b()})}function m(w){t.code((0,ys._)`${w}++`),l===void 0?t.if((0,ys._)`${w} >= ${a}`,()=>t.assign(f,!0).break()):(t.if((0,ys._)`${w} > ${l}`,()=>t.assign(f,!1).break()),a===1?t.assign(f,!0):t.if((0,ys._)`${w} >= ${a}`,()=>t.assign(f,!0)))}}};Ow.default=uW;var IR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=St,n=ze,r=xt;e.error={message:({params:{property:c,depsCount:u,deps:d}})=>{const f=u===1?"property":"properties";return(0,t.str)`must have ${f} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:d,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[u,d]=i(c);a(c,u),l(c,d)}};function i({schema:c}){const u={},d={};for(const f in c){if(f==="__proto__")continue;const g=Array.isArray(c[f])?u:d;g[f]=c[f]}return[u,d]}function a(c,u=c.schema){const{gen:d,data:f,it:g}=c;if(Object.keys(u).length===0)return;const p=d.let("missing");for(const m in u){const w=u[m];if(w.length===0)continue;const b=(0,r.propertyInData)(d,f,m,g.opts.ownProperties);c.setParams({property:m,depsCount:w.length,deps:w.join(", ")}),g.allErrors?d.if(b,()=>{for(const h of w)(0,r.checkReportMissingProp)(c,h)}):(d.if((0,t._)`${b} && (${(0,r.checkMissingProp)(c,w,p)})`),(0,r.reportMissingProp)(c,p),d.else())}}e.validatePropertyDeps=a;function l(c,u=c.schema){const{gen:d,data:f,keyword:g,it:p}=c,m=d.name("valid");for(const w in u)(0,n.alwaysValidSchema)(p,u[w])||(d.if((0,r.propertyInData)(d,f,w,p.opts.ownProperties),()=>{const b=c.subschema({keyword:g,schemaProp:w},m);c.mergeValidEvaluated(b,m)},()=>d.var(m,!0)),c.ok(m))}e.validateSchemaDeps=l,e.default=s})(IR);var Rw={};Object.defineProperty(Rw,"__esModule",{value:!0});const LR=St,dW=ze,fW={message:"property name must be valid",params:({params:e})=>(0,LR._)`{propertyName: ${e.propertyName}}`},hW={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:fW,code(e){const{gen:t,schema:n,data:r,it:s}=e;if((0,dW.alwaysValidSchema)(s,n))return;const i=t.name("valid");t.forIn("key",r,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},i),t.if((0,LR.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};Rw.default=hW;var zp={};Object.defineProperty(zp,"__esModule",{value:!0});const vf=xt,Is=St,pW=mi,bf=ze,mW={message:"must NOT have additional properties",params:({params:e})=>(0,Is._)`{additionalProperty: ${e.additionalProperty}}`},gW={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:mW,code(e){const{gen:t,schema:n,parentSchema:r,data:s,errsCount:i,it:a}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:l,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,bf.alwaysValidSchema)(a,n))return;const u=(0,vf.allSchemaProperties)(r.properties),d=(0,vf.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Is._)`${i} === ${pW.default.errors}`);function f(){t.forIn("key",s,b=>{!u.length&&!d.length?m(b):t.if(g(b),()=>m(b))})}function g(b){let h;if(u.length>8){const v=(0,bf.schemaRefOrVal)(a,r.properties,"properties");h=(0,vf.isOwnProperty)(t,v,b)}else u.length?h=(0,Is.or)(...u.map(v=>(0,Is._)`${b} === ${v}`)):h=Is.nil;return d.length&&(h=(0,Is.or)(h,...d.map(v=>(0,Is._)`${(0,vf.usePattern)(e,v)}.test(${b})`))),(0,Is.not)(h)}function p(b){t.code((0,Is._)`delete ${s}[${b}]`)}function m(b){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){p(b);return}if(n===!1){e.setParams({additionalProperty:b}),e.error(),l||t.break();return}if(typeof n=="object"&&!(0,bf.alwaysValidSchema)(a,n)){const h=t.name("valid");c.removeAdditional==="failing"?(w(b,h,!1),t.if((0,Is.not)(h),()=>{e.reset(),p(b)})):(w(b,h),l||t.if((0,Is.not)(h),()=>t.break()))}}function w(b,h,v){const x={keyword:"additionalProperties",dataProp:b,dataPropType:bf.Type.Str};v===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(x,h)}}};zp.default=gW;var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});const yW=Ws,Lk=xt,Qm=ze,Mk=zp,vW={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Mk.default.code(new yW.KeywordCxt(i,Mk.default,"additionalProperties"));const a=(0,Lk.allSchemaProperties)(n);for(const f of a)i.definedProperties.add(f);i.opts.unevaluated&&a.length&&i.props!==!0&&(i.props=Qm.mergeEvaluated.props(t,(0,Qm.toHash)(a),i.props));const l=a.filter(f=>!(0,Qm.alwaysValidSchema)(i,n[f]));if(l.length===0)return;const c=t.name("valid");for(const f of l)u(f)?d(f):(t.if((0,Lk.propertyInData)(t,s,f,i.opts.ownProperties)),d(f),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function u(f){return i.opts.useDefaults&&!i.compositeRule&&n[f].default!==void 0}function d(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Aw.default=vW;var Pw={};Object.defineProperty(Pw,"__esModule",{value:!0});const Fk=xt,wf=St,Dk=ze,Bk=ze,bW={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:s,it:i}=e,{opts:a}=i,l=(0,Fk.allSchemaProperties)(n),c=l.filter(w=>(0,Dk.alwaysValidSchema)(i,n[w]));if(l.length===0||c.length===l.length&&(!i.opts.unevaluated||i.props===!0))return;const u=a.strictSchema&&!a.allowMatchingProperties&&s.properties,d=t.name("valid");i.props!==!0&&!(i.props instanceof wf.Name)&&(i.props=(0,Bk.evaluatedPropsToName)(t,i.props));const{props:f}=i;g();function g(){for(const w of l)u&&p(w),i.allErrors?m(w):(t.var(d,!0),m(w),t.if(d))}function p(w){for(const b in u)new RegExp(w).test(b)&&(0,Dk.checkStrictMode)(i,`property ${b} matches pattern ${w} (use allowMatchingProperties)`)}function m(w){t.forIn("key",r,b=>{t.if((0,wf._)`${(0,Fk.usePattern)(e,w)}.test(${b})`,()=>{const h=c.includes(w);h||e.subschema({keyword:"patternProperties",schemaProp:w,dataProp:b,dataPropType:Bk.Type.Str},d),i.opts.unevaluated&&f!==!0?t.assign((0,wf._)`${f}[${b}]`,!0):!h&&!i.allErrors&&t.if((0,wf.not)(d),()=>t.break())})})}}};Pw.default=bW;var Iw={};Object.defineProperty(Iw,"__esModule",{value:!0});const wW=ze,xW={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,wW.alwaysValidSchema)(r,n)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Iw.default=xW;var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});const SW=xt,_W={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:SW.validateUnion,error:{message:"must match a schema in anyOf"}};Lw.default=_W;var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});const Xf=St,kW=ze,jW={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Xf._)`{passingSchemas: ${e.passing}}`},EW={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:jW,code(e){const{gen:t,schema:n,parentSchema:r,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,a=t.let("valid",!1),l=t.let("passing",null),c=t.name("_valid");e.setParams({passing:l}),t.block(u),e.result(a,()=>e.reset(),()=>e.error(!0));function u(){i.forEach((d,f)=>{let g;(0,kW.alwaysValidSchema)(s,d)?t.var(c,!0):g=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,Xf._)`${c} && ${a}`).assign(a,!1).assign(l,(0,Xf._)`[${l}, ${f}]`).else(),t.if(c,()=>{t.assign(a,!0),t.assign(l,f),g&&e.mergeEvaluated(g,Xf.Name)})})}}};Mw.default=EW;var Fw={};Object.defineProperty(Fw,"__esModule",{value:!0});const NW=ze,CW={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=t.name("valid");n.forEach((i,a)=>{if((0,NW.alwaysValidSchema)(r,i))return;const l=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(l)})}};Fw.default=CW;var Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});const Jh=St,MR=ze,TW={message:({params:e})=>(0,Jh.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Jh._)`{failingKeyword: ${e.ifClause}}`},$W={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:TW,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,MR.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=Uk(r,"then"),i=Uk(r,"else");if(!s&&!i)return;const a=t.let("valid",!0),l=t.name("_valid");if(c(),e.reset(),s&&i){const d=t.let("ifClause");e.setParams({ifClause:d}),t.if(l,u("then",d),u("else",d))}else s?t.if(l,u("then")):t.if((0,Jh.not)(l),u("else"));e.pass(a,()=>e.error(!0));function c(){const d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(d)}function u(d,f){return()=>{const g=e.subschema({keyword:d},l);t.assign(a,l),e.mergeValidEvaluated(g,a),f?t.assign(f,(0,Jh._)`${d}`):e.setParams({ifClause:d})}}}};function Uk(e,t){const n=e.schema[t];return n!==void 0&&!(0,MR.alwaysValidSchema)(e,n)}Dw.default=$W;var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});const OW=ze,RW={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,OW.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Bw.default=RW;Object.defineProperty(Cw,"__esModule",{value:!0});const AW=hc,PW=Tw,IW=pc,LW=$w,MW=Ow,FW=IR,DW=Rw,BW=zp,UW=Aw,zW=Pw,VW=Iw,HW=Lw,qW=Mw,KW=Fw,WW=Dw,GW=Bw;function JW(e=!1){const t=[VW.default,HW.default,qW.default,KW.default,WW.default,GW.default,DW.default,BW.default,FW.default,UW.default,zW.default];return e?t.push(PW.default,LW.default):t.push(AW.default,IW.default),t.push(MW.default),t}Cw.default=JW;var Uw={},zw={};Object.defineProperty(zw,"__esModule",{value:!0});const Nn=St,YW={message:({schemaCode:e})=>(0,Nn.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Nn._)`{format: ${e}}`},QW={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:YW,code(e,t){const{gen:n,data:r,$data:s,schema:i,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:f}=l;if(!c.validateFormats)return;s?g():p();function g(){const m=n.scopeValue("formats",{ref:f.formats,code:c.code.formats}),w=n.const("fDef",(0,Nn._)`${m}[${a}]`),b=n.let("fType"),h=n.let("format");n.if((0,Nn._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>n.assign(b,(0,Nn._)`${w}.type || "string"`).assign(h,(0,Nn._)`${w}.validate`),()=>n.assign(b,(0,Nn._)`"string"`).assign(h,w)),e.fail$data((0,Nn.or)(v(),x()));function v(){return c.strictSchema===!1?Nn.nil:(0,Nn._)`${a} && !${h}`}function x(){const k=d.$async?(0,Nn._)`(${w}.async ? await ${h}(${r}) : ${h}(${r}))`:(0,Nn._)`${h}(${r})`,E=(0,Nn._)`(typeof ${h} == "function" ? ${k} : ${h}.test(${r}))`;return(0,Nn._)`${h} && ${h} !== true && ${b} === ${t} && !${E}`}}function p(){const m=f.formats[i];if(!m){v();return}if(m===!0)return;const[w,b,h]=x(m);w===t&&e.pass(k());function v(){if(c.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function x(E){const $=E instanceof RegExp?(0,Nn.regexpCode)(E):c.code.formats?(0,Nn._)`${c.code.formats}${(0,Nn.getProperty)(i)}`:void 0,P=n.scopeValue("formats",{key:i,ref:E,code:$});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,Nn._)`${P}.validate`]:["string",E,P]}function k(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!d.$async)throw new Error("async format in sync schema");return(0,Nn._)`await ${h}(${r})`}return typeof b=="function"?(0,Nn._)`${h}(${r})`:(0,Nn._)`${h}.test(${r})`}}}};zw.default=QW;Object.defineProperty(Uw,"__esModule",{value:!0});const XW=zw,ZW=[XW.default];Uw.default=ZW;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.contentVocabulary=Yl.metadataVocabulary=void 0;Yl.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Yl.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(hw,"__esModule",{value:!0});const e5=pw,t5=gw,n5=Cw,r5=Uw,zk=Yl,s5=[e5.default,t5.default,(0,n5.default)(),r5.default,zk.metadataVocabulary,zk.contentVocabulary];hw.default=s5;var Vw={},Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.DiscrError=void 0;var Vk;(function(e){e.Tag="tag",e.Mapping="mapping"})(Vk||(Vp.DiscrError=Vk={}));Object.defineProperty(Vw,"__esModule",{value:!0});const ol=St,Gy=Vp,Hk=Fr,i5=fc,a5=ze,o5={message:({params:{discrError:e,tagName:t}})=>e===Gy.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,ol._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},l5={keyword:"discriminator",type:"object",schemaType:"object",error:o5,code(e){const{gen:t,data:n,schema:r,parentSchema:s,it:i}=e,{oneOf:a}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const l=r.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),u=t.const("tag",(0,ol._)`${n}${(0,ol.getProperty)(l)}`);t.if((0,ol._)`typeof ${u} == "string"`,()=>d(),()=>e.error(!1,{discrError:Gy.DiscrError.Tag,tag:u,tagName:l})),e.ok(c);function d(){const p=g();t.if(!1);for(const m in p)t.elseIf((0,ol._)`${u} === ${m}`),t.assign(c,f(p[m]));t.else(),e.error(!1,{discrError:Gy.DiscrError.Mapping,tag:u,tagName:l}),t.endIf()}function f(p){const m=t.name("valid"),w=e.subschema({keyword:"oneOf",schemaProp:p},m);return e.mergeEvaluated(w,ol.Name),m}function g(){var p;const m={},w=h(s);let b=!0;for(let k=0;k<a.length;k++){let E=a[k];if(E!=null&&E.$ref&&!(0,a5.schemaHasRulesButRef)(E,i.self.RULES)){const P=E.$ref;if(E=Hk.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,P),E instanceof Hk.SchemaEnv&&(E=E.schema),E===void 0)throw new i5.default(i.opts.uriResolver,i.baseId,P)}const $=(p=E==null?void 0:E.properties)===null||p===void 0?void 0:p[l];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);b=b&&(w||h(E)),v($,k)}if(!b)throw new Error(`discriminator: "${l}" must be required`);return m;function h({required:k}){return Array.isArray(k)&&k.includes(l)}function v(k,E){if(k.const)x(k.const,E);else if(k.enum)for(const $ of k.enum)x($,E);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function x(k,E){if(typeof k!="string"||k in m)throw new Error(`discriminator: "${l}" values must be unique strings`);m[k]=E}}}};Vw.default=l5;const c5="http://json-schema.org/draft-07/schema#",u5="http://json-schema.org/draft-07/schema#",d5="Core schema meta-schema",f5={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},h5=["object","boolean"],p5={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},m5={$schema:c5,$id:u5,title:d5,definitions:f5,type:h5,properties:p5,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=BO,r=hw,s=Vw,i=m5,a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(i,a):i;this.addMetaSchema(m,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var u=Ws;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=St;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var f=Td;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var g=fc;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(Uy,Uy.exports);var g5=Uy.exports;const y5=Ql(g5),v5="http://json-schema.org/draft-07/schema#",b5="Master Preset Format v3 (Format 1 - Locked)",w5="Canonical and frozen schema for Master Preset Format v3",x5="object",S5=!1,_5=["id","version","title","label","description","platform","category","tags","engine","strategy","contentStructure","language","keywords","hashtags","cta","audio","constraints","analytics","examples","meta"],k5={id:{type:"string",minLength:1},version:{type:"string",pattern:"^\\d+\\.\\d+\\.\\d+$"},title:{type:"string",minLength:1},label:{type:"string",minLength:1},description:{type:"string"},platform:{type:"string"},category:{type:"string"},tags:{type:"array",items:{type:"string"}},engine:{type:"string"},strategy:{type:"object",additionalProperties:!1,required:["goals"],properties:{goals:{type:"array",minItems:1,items:{type:"string"}},emotionTriggers:{type:"array",items:{type:"string"}},targetAudience:{type:"string"}}},contentStructure:{type:"object",additionalProperties:!1,required:["length","format"],properties:{length:{type:"string",enum:["short","medium","long"]},format:{type:"string"},placeholders:{type:"array",items:{type:"object",additionalProperties:!1,required:["name"],properties:{name:{type:"string"},type:{type:"string"},default:{}}}}}},language:{type:"string"},keywords:{type:"array",items:{type:"string"}},hashtags:{type:"object",additionalProperties:!1,required:["strategy","count"],properties:{strategy:{type:"string"},count:{type:"integer",minimum:0,maximum:30}}},cta:{type:"array",minItems:1,items:{type:"object",additionalProperties:!1,required:["type","text"],properties:{type:{type:"string"},text:{type:"string"}}}},audio:{type:"object",additionalProperties:!1,required:["recommendation","style","mood","lengthSec"],properties:{recommendation:{type:"string"},style:{type:"string"},mood:{type:"string"},lengthSec:{type:"integer",minimum:0}}},constraints:{type:"object",additionalProperties:!1,required:["forbiddenWords","variationCount"],properties:{forbiddenWords:{type:"array",items:{type:"string"}},variationCount:{type:"integer",minimum:1}}},analytics:{type:"object",additionalProperties:!1,required:["trackingEnabled"],properties:{trackingEnabled:{type:"boolean"},expectedKPI:{type:"string"}}},examples:{type:"array",items:{type:"object",additionalProperties:!1,required:["input","output"],properties:{input:{},output:{}}}},meta:{type:"object",additionalProperties:!1,required:["createdAt"],properties:{createdAt:{type:"string"},updatedAt:{type:"string"},createdBy:{type:"string"}}}},j5={$schema:v5,title:b5,description:w5,type:x5,additionalProperties:S5,required:_5,properties:k5},E5=new y5({allErrors:!0,strict:!0}),qk=E5.compile(j5);function FR(e){return qk(e)?[]:(qk.errors||[]).map(n=>`${n.instancePath||n.schemaPath||"/"} ${n.message}`)}function Xm(e){return e?Array.isArray(e)?e:String(e).split(",").map(t=>t.trim()).filter(Boolean):[]}function Bs(e){var r,s,i,a,l,c,u,d,f,g,p,m,w,b,h,v,x,k,E,$,P;if(!e||typeof e!="object")return null;const t={id:e.id||e._id||`tpl-${Date.now()}`,version:e.version||e.ver||"1.0.0",title:e.title||e.name||"Untitled Preset",label:e.label||e.title||e.name||"Preset",description:e.description||e.desc||"",platform:e.platform||e.generation&&e.generation.platform||"TikTok",category:e.category||e.metadata&&e.metadata.category||"",tags:Xm(e.tags||e.labels||e.metadata&&e.metadata.tags),engine:e.engine||e.provider||"generic",strategy:e.strategy||e.strategy||e.generation&&e.generation.strategy||{},contentStructure:e.contentStructure||(e.generation?{length:e.generation.length||"short",format:e.generation.formatOutput||"text",placeholders:e.generation.placeholders||[]}:{length:"short",format:"text"}),language:e.language||e.generation&&e.generation.language||"Indonesia",keywords:Xm(e.keywords||e.metadata&&e.metadata.keywords||((r=e.generation)==null?void 0:r.keywords)),hashtags:e.hashtags||((s=e.generation)==null?void 0:s.hashtags)||{},cta:Array.isArray(e.cta)?e.cta:e.ctas||e.cta?Xm(e.ctas||e.cta).map(B=>({type:"primary",text:B})):e.ctas||[],audio:e.audio||(e.generation?{recommendation:e.generation.audioRecommendation||e.generation.audioStyle||""}:{}),constraints:e.constraints||((i=e.generation)==null?void 0:i.constraints)||{},analytics:e.analytics||{},examples:e.examples||e.examples||[],meta:e.meta||e.metadata||{importedFromLegacy:!!e.generation}};(!t.tags||t.tags.length===0)&&(t.tags=[]),(!t.keywords||t.keywords.length===0)&&(t.keywords=[]),(!t.cta||t.cta.length===0)&&(t.cta=[{type:"primary",text:t.description||"Call to action"}]),(!t.examples||t.examples.length===0)&&(t.examples=[]),(!t.analytics||Object.keys(t.analytics).length===0)&&(t.analytics={trackingEnabled:!1}),(!t.strategy||Object.keys(t.strategy).length===0)&&(t.strategy={goals:["general"]}),t.contentStructure=t.contentStructure||{},t.contentStructure.length=t.contentStructure.length||"short",t.contentStructure.format=t.contentStructure.format||"text",t.contentStructure.placeholders=t.contentStructure.placeholders||[],t.hashtags=t.hashtags||{strategy:"none",count:0},t.audio=t.audio||{recommendation:"",style:"",mood:"",lengthSec:0},t.audio.recommendation=t.audio.recommendation||e.audio&&e.audio.recommendation||t.audio.recommendation||"",t.audio.style=t.audio.style||e.audio&&e.audio.style||"",t.audio.mood=t.audio.mood||e.audio&&e.audio.mood||"",t.audio.lengthSec=typeof t.audio.lengthSec=="number"?t.audio.lengthSec:e.audio&&e.audio.lengthSec||0,t.constraints=t.constraints||{forbiddenWords:[],variationCount:1},t.constraints.forbiddenWords=t.constraints.forbiddenWords||[],t.constraints.variationCount=t.constraints.variationCount||1,t.meta=t.meta||{},t.meta.createdAt=t.meta.createdAt||new Date().toISOString();const n={id:String(t.id),version:String(t.version),title:String(t.title),label:String(t.label),description:String(t.description||""),platform:String(t.platform),category:String(t.category||""),tags:Array.isArray(t.tags)?t.tags.map(String):[],engine:String(t.engine),strategy:{goals:Array.isArray((a=t.strategy)==null?void 0:a.goals)?t.strategy.goals.map(String):["general"],emotionTriggers:Array.isArray((l=t.strategy)==null?void 0:l.emotionTriggers)?t.strategy.emotionTriggers.map(String):[],targetAudience:(c=t.strategy)!=null&&c.targetAudience?String(t.strategy.targetAudience):""},contentStructure:{length:((u=t.contentStructure)==null?void 0:u.length)||"short",format:((d=t.contentStructure)==null?void 0:d.format)||"text",placeholders:Array.isArray((f=t.contentStructure)==null?void 0:f.placeholders)?t.contentStructure.placeholders.map(B=>({name:String(B.name),...B.type?{type:String(B.type)}:{},...B.default!==void 0?{default:B.default}:{}})):[]},language:String(t.language),keywords:Array.isArray(t.keywords)?t.keywords.map(String):[],hashtags:{strategy:String(((g=t.hashtags)==null?void 0:g.strategy)||""),count:Number(((p=t.hashtags)==null?void 0:p.count)||0)},cta:Array.isArray(t.cta)?t.cta.map(B=>({type:String(B.type),text:String(B.text)})):[],audio:{recommendation:String(((m=t.audio)==null?void 0:m.recommendation)||""),style:String(((w=t.audio)==null?void 0:w.style)||""),mood:String(((b=t.audio)==null?void 0:b.mood)||""),lengthSec:Number(((h=t.audio)==null?void 0:h.lengthSec)||0)},constraints:{forbiddenWords:Array.isArray((v=t.constraints)==null?void 0:v.forbiddenWords)?t.constraints.forbiddenWords.map(String):[],variationCount:Number(((x=t.constraints)==null?void 0:x.variationCount)||1)},analytics:{trackingEnabled:!!((k=t.analytics)!=null&&k.trackingEnabled)},examples:Array.isArray(t.examples)?t.examples.map(B=>({input:B.input||{},output:B.output})):[],meta:{createdAt:((E=t.meta)==null?void 0:E.createdAt)||new Date().toISOString(),updatedAt:(($=t.meta)==null?void 0:$.updatedAt)||new Date().toISOString(),createdBy:((P=t.meta)==null?void 0:P.createdBy)||"unknown"}};return t.analytics&&typeof t.analytics.expectedKPI=="string"&&t.analytics.expectedKPI.length&&(n.analytics.expectedKPI=t.analytics.expectedKPI),n}function wa(e){return String(e||"").trim()}function Kk(e,t,n,r){const s=Number(e);return Number.isFinite(s)?Math.min(n,Math.max(t,s)):r}function N5(e){const t=wa(e);return t?t.split(new RegExp("(?<=[.!?])\\s+")).map(n=>wa(n)).filter(Boolean).length:0}const Zm={hookMin:18,hookMax:180,descriptionMinSentences:1,descriptionMaxSentences:3,descriptionMaxChars:260,hashtagMin:3,hashtagMax:8,requireCtaInDescription:!1,ctaStyle:"soft",stage:2},C5={TikTok:{hookMax:130,hashtagMin:4,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"comment_share_save",stage:1},"Instagram Reels":{hookMax:140,hashtagMin:4,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"comment_share",stage:1},"YouTube Short":{hookMax:140,hashtagMin:3,hashtagMax:7,requireCtaInDescription:!0,ctaStyle:"comment_follow",stage:1},Threads:{hookMax:170,descriptionMaxSentences:4,descriptionMaxChars:320,hashtagMin:0,hashtagMax:3,requireCtaInDescription:!0,ctaStyle:"reply_debate",stage:1},"YouTube Long":{hookMax:180,descriptionMaxSentences:4,descriptionMaxChars:360,hashtagMin:2,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"watch_comment",stage:2},"Facebook Reels":{hookMax:150,hashtagMin:3,hashtagMax:7,requireCtaInDescription:!0,ctaStyle:"comment_share",stage:2},"WhatsApp Status":{hookMax:120,descriptionMaxSentences:2,descriptionMaxChars:180,hashtagMin:0,hashtagMax:2,requireCtaInDescription:!1,ctaStyle:"reply_contact",stage:2},"WhatsApp Channel":{hookMax:120,descriptionMaxSentences:2,descriptionMaxChars:170,hashtagMin:0,hashtagMax:1,requireCtaInDescription:!0,ctaStyle:"react_forward",stage:2},Telegram:{hookMax:135,descriptionMaxSentences:3,descriptionMaxChars:240,hashtagMin:0,hashtagMax:3,requireCtaInDescription:!0,ctaStyle:"reply_vote",stage:2},LinkedIn:{hookMax:170,descriptionMaxSentences:4,descriptionMaxChars:340,hashtagMin:1,hashtagMax:5,requireCtaInDescription:!0,ctaStyle:"comment_follow",stage:2},"X (Twitter)":{hookMax:120,descriptionMaxSentences:2,descriptionMaxChars:240,hashtagMin:0,hashtagMax:3,requireCtaInDescription:!0,ctaStyle:"reply_repost",stage:2},SoundCloud:{hookMax:130,descriptionMaxSentences:3,descriptionMaxChars:260,hashtagMin:2,hashtagMax:6,requireCtaInDescription:!0,ctaStyle:"listen_follow",stage:2},"Blog Blogger":{hookMax:180,descriptionMinSentences:1,descriptionMaxSentences:2,descriptionMaxChars:180,hashtagMin:0,hashtagMax:4,requireCtaInDescription:!1,ctaStyle:"read_comment",stage:2},Shopee:{hookMax:130,hashtagMin:3,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"checkout_comment",stage:2},Tokopedia:{hookMax:130,hashtagMin:3,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"checkout_comment",stage:2},Lazada:{hookMax:130,hashtagMin:3,hashtagMax:8,requireCtaInDescription:!0,ctaStyle:"checkout_comment",stage:2},Pinterest:{hookMax:150,hashtagMin:2,hashtagMax:6,requireCtaInDescription:!1,ctaStyle:"save_pin",stage:2}},T5={TikTok:["short","medium"],"Instagram Reels":["short","medium"],"YouTube Short":["short","medium"],Threads:["short","medium"],"YouTube Long":["medium","long"],"Facebook Reels":["short","medium"],"WhatsApp Status":["short"],"WhatsApp Channel":["short","medium"],Telegram:["short","medium","long"],Shopee:["short","medium"],Tokopedia:["short","medium"],Lazada:["short","medium"],LinkedIn:["short","medium","long"],"X (Twitter)":["short","medium"],SoundCloud:["short","medium"],"Blog Blogger":["medium","long"],Pinterest:["short","medium"]},Wk={comment_share_save:["comment","komentar","share","bagikan","save","simpan"],comment_share:["comment","komentar","share","bagikan"],comment_follow:["comment","komentar","follow","ikuti"],reply_debate:["reply","balas","pendapat","diskusi"],watch_comment:["watch","tonton","comment","komentar"],reply_contact:["reply","balas","kontak"],react_forward:["react","reaksi","forward","bagikan"],reply_vote:["reply","balas","vote","poll"],reply_repost:["reply","balas","repost","retweet"],listen_follow:["listen","dengar","follow","stream"],read_comment:["read","baca","comment","komentar"],checkout_comment:["checkout","check out","komentar","comment"],save_pin:["save","simpan","pin"]},$5={short:30,medium:45,long:60};function O5(e){const t=wa(e),n=C5[t]||null,r={...Zm,...n||{}},s=Kk(r.hashtagMin,0,12,Zm.hashtagMin),i=Kk(r.hashtagMax,s,12,Zm.hashtagMax);return{...r,platform:t||"",supported:!!n,hashtagMin:s,hashtagMax:i,stage:Number((n==null?void 0:n.stage)||r.stage||2)}}function Sl(e){var E,$,P;const t=e&&typeof e=="object"?e:{},n=wa(t.platform),r=O5(n),s=[],i=[],a=[];a.push({key:"Platform supported",ok:r.supported}),n?r.supported||s.push(`Platform "${n}" belum didukung kontrak output.`):s.push("Platform wajib diisi.");const l=Number((E=t==null?void 0:t.hashtags)==null?void 0:E.count),c=Number.isInteger(l)&&l>=r.hashtagMin&&l<=r.hashtagMax;a.push({key:`Hashtag count ${r.hashtagMin}-${r.hashtagMax}`,ok:c}),Number.isInteger(l)?c||s.push(`hashtags.count (${l}) harus di rentang ${r.hashtagMin}-${r.hashtagMax} untuk platform ${n||"-"}.`):s.push("hashtags.count wajib berupa angka bulat.");const d=(Array.isArray(t.cta)?t.cta:[]).map(B=>wa(B==null?void 0:B.text)).filter(Boolean),f=d.length>0;a.push({key:"CTA presence",ok:!r.requireCtaInDescription||f}),r.requireCtaInDescription&&!f&&s.push("CTA minimal 1 wajib diisi untuk platform ini.");const g=d.join(" ").toLowerCase(),p=Array.isArray(Wk[r.ctaStyle])?Wk[r.ctaStyle]:[];p.length&&f&&!p.some(B=>g.includes(B))&&i.push(`CTA belum merefleksikan style "${r.ctaStyle}".`);const m=wa(($=t==null?void 0:t.contentStructure)==null?void 0:$.length).toLowerCase(),w=T5[n];w&&m&&!w.includes(m)&&i.push(`Length "${m}" kurang ideal untuk ${n}. Rekomendasi: ${w.join("/")} .`);const b=wa(t.description),h=N5(b);b&&(h>r.descriptionMaxSentences&&i.push(`Description terlalu panjang (${h} kalimat). Maks ${r.descriptionMaxSentences} kalimat.`),h>0&&h<r.descriptionMinSentences&&i.push(`Description terlalu pendek (${h} kalimat). Minimal ${r.descriptionMinSentences} kalimat.`),b.length>r.descriptionMaxChars&&i.push(`Description terlalu panjang (${b.length} chars). Maks ${r.descriptionMaxChars} chars.`));const v=wa(t.hook||t.title);v&&(v.length>r.hookMax&&i.push(`Hook/title panjang (${v.length} chars). Target maks ${r.hookMax} chars.`),v.length<r.hookMin&&i.push(`Hook/title pendek (${v.length} chars). Target min ${r.hookMin} chars.`));const x=Number(((P=t==null?void 0:t.audio)==null?void 0:P.lengthSec)||0),k=$5[m]||30;return Number.isFinite(x)&&x>0&&Math.abs(x-k)>20&&i.push(`Audio length (${x}s) jauh dari target ${k}s untuk length "${m||"-"}".`),{contract:r,checks:a,errors:s,warnings:i}}function xf(e){return JSON.parse(JSON.stringify(e))}function Lr(e){return String(e||"").trim()}function sa(e,t,n,r){const s=Number(e);return Number.isFinite(s)?Math.min(n,Math.max(t,s)):r}function R5(e){const t=Lr(e);return t?t.split(new RegExp("(?<=[.!?])\\s+")).map(n=>Lr(n)).filter(Boolean):[]}function eg(e,t=160){const n=Lr(e);return n.length<=t?n:t<=4?n.slice(0,t):`${n.slice(0,t-3).trim()}...`}function Gk(e,t){const n=Lr(e).toLowerCase();return n?(String(t||"").toLowerCase().startsWith("en")?[/save/i,/comment/i,/share/i,/try/i,/learn more/i,/check/i,/reply/i,/react/i,/vote/i,/follow/i,/forward/i]:[/simpan/i,/komentar/i,/bagikan/i,/coba/i,/cek/i,/lihat/i,/balas/i,/reaksi/i,/vote/i,/ikuti/i,/forward/i]).some(s=>s.test(n)):!1}const tg={TikTok:["short","medium"],"Instagram Reels":["short","medium"],"YouTube Short":["short","medium"],Threads:["short","medium"],"YouTube Long":["medium","long"],"Facebook Reels":["short","medium"],"WhatsApp Status":["short"],"WhatsApp Channel":["short","medium"],Telegram:["short","medium","long"],Shopee:["short","medium"],Tokopedia:["short","medium"],Lazada:["short","medium"],LinkedIn:["short","medium","long"],"X (Twitter)":["short","medium"],SoundCloud:["short","medium"],"Blog Blogger":["medium","long"],Pinterest:["short","medium"]},A5={short:30,medium:45,long:60},Jk={comment_share_save:{id:"Komentar, bagikan, lalu simpan kalau kamu mau lanjutan.",en:"Comment, share, and save if you want the next part."},comment_share:{id:"Komentar pendapatmu dan bagikan jika bermanfaat.",en:"Comment your take and share if this helps."},comment_follow:{id:"Komentar kebutuhanmu dan ikuti untuk update berikutnya.",en:"Comment your need and follow for the next update."},reply_debate:{id:"Balas pendapatmu supaya diskusi makin tajam.",en:"Reply with your perspective so we can compare ideas."},watch_comment:{id:"Tonton sampai selesai lalu tulis komentar versimu.",en:"Watch through and leave your version in the comments."},reply_contact:{id:"Balas status ini kalau kamu mau versi lanjutannya.",en:"Reply to this status if you want the follow-up version."},react_forward:{id:"Beri reaksi jika bermanfaat, lalu forward seperlunya.",en:"React if useful, then forward it where relevant."},reply_vote:{id:"Balas pilihanmu dan vote topik berikutnya.",en:"Reply your choice and vote for the next topic."},reply_repost:{id:"Balas pendapatmu lalu repost jika kamu setuju.",en:"Reply with your take and repost if you agree."},listen_follow:{id:"Dengarkan track ini lalu follow untuk rilisan berikutnya.",en:"Listen to this track and follow for the next release."},read_comment:{id:"Baca artikel lengkapnya lalu tulis komentarmu.",en:"Read the full article and share your comment."},checkout_comment:{id:"Komentar kebutuhanmu dulu sebelum checkout.",en:"Comment your use-case before checking out."},save_pin:{id:"Simpan pin ini supaya gampang dicari lagi.",en:"Save this pin so you can revisit it later."},soft:{id:"Bagikan jika ini bermanfaat untuk kamu.",en:"Share this if it helps you."}};function P5(e,t){const n=Jk[e]||Jk.soft;return String(t||"").toLowerCase().startsWith("en")?n.en:n.id}function Yk(e=[],t=[]){const n=Array.isArray(e)?e:[],r=new Set((Array.isArray(t)?t:[]).map(s=>Lr(s)));return n.filter(s=>!r.has(Lr(s)))}function Sf(e){const t={id:String(e.id),version:String(e.version),title:String(e.title),label:String(e.label),description:String(e.description||""),platform:String(e.platform||""),category:String(e.category||""),tags:Array.isArray(e.tags)?e.tags.map(String):[],engine:String(e.engine||""),strategy:{goals:Array.isArray(e.strategy.goals)?e.strategy.goals.map(String):["general"],emotionTriggers:Array.isArray(e.strategy.emotionTriggers)?e.strategy.emotionTriggers.map(String):[],targetAudience:String(e.strategy.targetAudience||"")},contentStructure:{length:e.contentStructure.length,format:String(e.contentStructure.format||""),placeholders:Array.isArray(e.contentStructure.placeholders)?e.contentStructure.placeholders.map(n=>({name:String(n.name),type:n.type?String(n.type):void 0,default:n.default})):[]},language:String(e.language||""),keywords:Array.isArray(e.keywords)?e.keywords.map(String):[],hashtags:{strategy:String(e.hashtags.strategy||""),count:Number(e.hashtags.count||0)},cta:Array.isArray(e.cta)?e.cta.map(n=>({type:String(n.type),text:String(n.text)})):[],audio:{recommendation:String(e.audio.recommendation||""),style:String(e.audio.style||""),mood:String(e.audio.mood||""),lengthSec:Number(e.audio.lengthSec||0)},constraints:{forbiddenWords:Array.isArray(e.constraints.forbiddenWords)?e.constraints.forbiddenWords.map(String):[],variationCount:Number(e.constraints.variationCount||1)},analytics:{trackingEnabled:!!e.analytics.trackingEnabled,expectedKPI:e.analytics.expectedKPI?String(e.analytics.expectedKPI):void 0},examples:Array.isArray(e.examples)?e.examples.map(n=>({input:n.input||{},output:n.output})):[],meta:{createdAt:e.meta.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:e.meta.createdBy||"unknown"}};return t.analytics.expectedKPI===void 0&&delete t.analytics.expectedKPI,t.contentStructure.placeholders=t.contentStructure.placeholders.map(n=>{const r={name:n.name};return n.type!==void 0&&n.type!==""&&(r.type=n.type),n.default!==void 0&&(r.default=n.default),r}),t}function I5(e){var n,r,s,i,a,l,c,u,d;const t=[{key:"Title",ok:!!((n=e.title)!=null&&n.trim())},{key:"Label",ok:!!((r=e.label)!=null&&r.trim())},{key:"Description",ok:!!((s=e.description)!=null&&s.trim())},{key:"Platform",ok:!!((i=e.platform)!=null&&i.trim())},{key:"Language",ok:!!((a=e.language)!=null&&a.trim())},{key:"Goals",ok:Array.isArray((l=e.strategy)==null?void 0:l.goals)&&e.strategy.goals.length>0&&e.strategy.goals.some(f=>String(f).trim())},{key:"Emotion Triggers",ok:Array.isArray((c=e.strategy)==null?void 0:c.emotionTriggers)&&e.strategy.emotionTriggers.length>0},{key:"Target Audience",ok:!!((d=(u=e.strategy)==null?void 0:u.targetAudience)!=null&&d.trim())},{key:"Keywords",ok:Array.isArray(e.keywords)&&e.keywords.length>0},{key:"CTA",ok:Array.isArray(e.cta)&&e.cta.length>0&&e.cta.some(f=>String(f.text||"").trim())}];return{checks:t,done:t.filter(f=>f.ok).length,total:t.length,missing:t.filter(f=>!f.ok).map(f=>f.key)}}function L5(e,t,n,r){var u,d,f,g,p,m,w,b,h;const s=Array.isArray(r==null?void 0:r.errors)?r.errors:[],i=[{key:"Required Fields",ok:t.missing.length===0,weight:30},{key:"Schema Valid",ok:n.length===0,weight:20},{key:"Platform Contract Lint",ok:s.length===0,weight:15},{key:"Audio 4-field",ok:!!((d=(u=e.audio)==null?void 0:u.recommendation)!=null&&d.trim())&&!!((g=(f=e.audio)==null?void 0:f.style)!=null&&g.trim())&&!!((m=(p=e.audio)==null?void 0:p.mood)!=null&&m.trim())&&Number(((w=e.audio)==null?void 0:w.lengthSec)||0)>0,weight:15},{key:"Keywords >= 3",ok:Array.isArray(e.keywords)&&e.keywords.length>=3,weight:10},{key:"CTA 1-4",ok:Array.isArray(e.cta)&&e.cta.length>=1&&e.cta.length<=4,weight:8},{key:"Forbidden Words >= 3",ok:Array.isArray((b=e.constraints)==null?void 0:b.forbiddenWords)&&e.constraints.forbiddenWords.length>=3,weight:7},{key:"Audience Detail",ok:String(((h=e.strategy)==null?void 0:h.targetAudience)||"").trim().length>=10,weight:5},{key:"Description >= 20 char",ok:String(e.description||"").trim().length>=20,weight:5}],a=i.reduce((v,x)=>v+x.weight,0),l=i.filter(v=>v.ok).reduce((v,x)=>v+x.weight,0),c=Math.round(l/a*100);return{checks:i,score:c,grade:c>=85?"Gold":c>=70?"Good":"Needs Fix"}}function M5({initialData:e={},onSave:t,onCancel:n}){var Y,ee,Q,X,fe,me,ve,Oe;const[r,s]=y.useState(()=>{var T,M,I,N,L,A,_,R;return{id:e.id||`tpl-${Date.now()}`,version:e.version||"1.0.0",title:e.title||"",label:e.label||"",description:e.description||"",platform:e.platform||"",category:e.category||"",tags:Array.isArray(e.tags)?[...e.tags]:[],engine:e.engine||"",strategy:{goals:(T=e.strategy)!=null&&T.goals?[...e.strategy.goals]:["general"],emotionTriggers:(M=e.strategy)!=null&&M.emotionTriggers?[...e.strategy.emotionTriggers]:[],targetAudience:((I=e.strategy)==null?void 0:I.targetAudience)||""},contentStructure:{length:((N=e.contentStructure)==null?void 0:N.length)||"short",format:((L=e.contentStructure)==null?void 0:L.format)||"text",placeholders:Array.isArray((A=e.contentStructure)==null?void 0:A.placeholders)?[...e.contentStructure.placeholders]:[]},language:e.language||"Indonesia",keywords:Array.isArray(e.keywords)?[...e.keywords]:[],hashtags:e.hashtags||{strategy:"none",count:0},cta:Array.isArray(e.cta)&&e.cta.length?[...e.cta]:[{type:"primary",text:"Call to action"}],audio:e.audio||{recommendation:"",style:"",mood:"",lengthSec:0},constraints:e.constraints||{forbiddenWords:[],variationCount:1},analytics:e.analytics||{trackingEnabled:!1},examples:Array.isArray(e.examples)?[...e.examples]:[],meta:e.meta||{createdAt:((_=e.meta)==null?void 0:_.createdAt)||new Date().toISOString(),createdBy:((R=e.meta)==null?void 0:R.createdBy)||"unknown"}}}),[i,a]=y.useState([]),[l,c]=y.useState(!1),[u,d]=y.useState(""),[f,g]=y.useState(null);y.useEffect(()=>{s(T=>({...T,id:e.id||T.id,version:e.version||T.version}))},[e.id,e.version]);function p(T,M){s(I=>{const N=xf(I),L=T.split(".");let A=N;for(let _=0;_<L.length-1;_+=1)A[L[_]]||(A[L[_]]={}),A=A[L[_]];return A[L[L.length-1]]=M,N})}function m(T,M){s(I=>{const N=xf(I),L=T.split(".").reduce((A,_)=>A[_],N);return Array.isArray(L)&&L.push(M),N})}function w(T,M){s(I=>{const N=xf(I),L=T.split(".").reduce((A,_)=>A[_],N);return Array.isArray(L)&&L.splice(M,1),N})}const b=y.useMemo(()=>I5(r),[r]),h=y.useMemo(()=>Sf(r),[r]),v=y.useMemo(()=>FR(h),[h]),x=y.useMemo(()=>Sl(h),[h]),k=y.useMemo(()=>L5(r,b,v,x),[r,b,v,x]),E=b.missing.length===0&&v.length===0&&x.errors.length===0,$=b.missing.length>0||v.length>0||x.errors.length>0||x.warnings.length>0;function P(){var M,I;const T=[];return(!r.id||!r.id.trim())&&T.push("id required"),b.missing.length&&T.push(...b.missing.map(N=>`${N} wajib diisi`)),(!Number.isInteger((M=r.hashtags)==null?void 0:M.count)||r.hashtags.count<0||r.hashtags.count>30)&&T.push("hashtags.count must be 0-30"),(!Number.isInteger((I=r.constraints)==null?void 0:I.variationCount)||r.constraints.variationCount<1)&&T.push("constraints.variationCount >=1"),v.length&&T.push(...v.slice(0,8)),x.errors.length&&T.push(...x.errors.slice(0,8)),a(T),T.length===0}function B(){var ne,q;const T=xf(r),M=[],I=Sl(Sf(T)),N=Array.isArray(I.errors)?I.errors:[],L=Array.isArray(I.warnings)?I.warnings:[],A=String(T.language||"").toLowerCase().startsWith("en");(ne=I.contract)!=null&&ne.supported||(T.platform="TikTok",M.push("Platform diset ke TikTok (default kontrak)."));const _=Sl(Sf(T)).contract,R=sa(_==null?void 0:_.hashtagMin,0,12,3),K=sa(_==null?void 0:_.hashtagMax,R,12,8);if(!T.hashtags||typeof T.hashtags!="object")T.hashtags={strategy:"none",count:R},M.push(`Hashtag count diset ${R}.`);else{const ge=Number.isFinite(Number(T.hashtags.count))?Math.round(Number(T.hashtags.count)):R,Te=sa(ge,R,K,R);Number(T.hashtags.count)!==Te&&(T.hashtags.count=Te,M.push(`Hashtag count disesuaikan ke ${Te} (target ${R}-${K}).`))}const pe=Array.isArray(tg[T.platform])&&tg[T.platform].length?tg[T.platform]:["short","medium","long"];!T.contentStructure||typeof T.contentStructure!="object"?(T.contentStructure={length:pe[0],format:"text",placeholders:[]},M.push(`Content length diset ${pe[0]}.`)):pe.includes(String(T.contentStructure.length||"").toLowerCase())||(T.contentStructure.length=pe[0],M.push(`Content length disesuaikan ke ${pe[0]} untuk ${T.platform}.`));const ue=sa(_==null?void 0:_.hookMin,10,240,18),j=sa(_==null?void 0:_.hookMax,ue,240,180);let $e=Lr(T.title);$e||($e=A?`${T.platform||"Content"} insight for your audience`:`Insight ${T.platform||"konten"} untuk audiens kamu`,M.push("Title dibuat otomatis karena kosong.")),$e.length>j&&($e=eg($e,j),M.push(`Title dipersingkat (maks ${j} chars).`)),$e.length<ue&&($e=A?`Quick reason why ${T.platform||"this content"} matters now`:`Alasan cepat kenapa ${T.platform||"konten ini"} penting sekarang`,$e=eg($e,j),M.push(`Title diperpanjang otomatis (min ${ue} chars).`)),T.title=$e,Lr(T.label)||(T.label=$e,M.push("Label diisi mengikuti title."));const De=sa(_==null?void 0:_.descriptionMinSentences,1,6,1),rt=sa(_==null?void 0:_.descriptionMaxSentences,De,8,3),st=sa(_==null?void 0:_.descriptionMaxChars,80,520,260);let ke=Lr(T.description);ke||(ke=A?`Short description for ${T.platform||"this"} audience.`:`Deskripsi singkat untuk audiens ${T.platform||"ini"}.`,M.push("Description dibuat otomatis karena kosong."));let Re=R5(ke);for(Re.length||(Re=[ke]),Re.length>rt&&(Re=Re.slice(0,rt),M.push(`Description dipadatkan ke maks ${rt} kalimat.`));Re.length<De;)Re.push(A?"Keep it practical and clear.":"Pastikan tetap praktis dan jelas."),M.push(`Description dilengkapi ke minimal ${De} kalimat.`);ke=Lr(Re.join(" "));const J=Lr((_==null?void 0:_.ctaStyle)||"soft"),F=P5(J,T.language);if(_!=null&&_.requireCtaInDescription&&!Gk(ke,T.language)&&(ke=Lr(`${ke} ${F}`),M.push("CTA ditambahkan ke description sesuai kontrak.")),ke.length>st&&(ke=eg(ke,st),M.push(`Description dipersingkat (maks ${st} chars).`)),T.description=ke,Array.isArray(T.cta)||(T.cta=[]),T.cta=T.cta.filter(ge=>ge&&typeof ge=="object").map(ge=>({type:Lr(ge.type||"primary")||"primary",text:Lr(ge.text)})).filter(ge=>ge.text),_!=null&&_.requireCtaInDescription&&T.cta.length===0&&(T.cta.push({type:"primary",text:F}),M.push("CTA utama ditambahkan.")),T.cta.length>4&&(T.cta=T.cta.slice(0,4),M.push("CTA dipangkas ke maksimum 4 item.")),T.cta.length>0){const ge=T.cta.map(Te=>Te.text).join(" ");_!=null&&_.requireCtaInDescription&&!Gk(ge,T.language)&&(T.cta[0]={...T.cta[0],text:F},M.push("CTA text diselaraskan dengan style kontrak."))}(!T.audio||typeof T.audio!="object")&&(T.audio={recommendation:"",style:"",mood:"",lengthSec:0});const re=A5[String(((q=T.contentStructure)==null?void 0:q.length)||"short").toLowerCase()]||30,be=Number(T.audio.lengthSec||0);(!Number.isFinite(be)||be<=0||Math.abs(be-re)>20)&&(T.audio.lengthSec=re,M.push(`Audio length diset ke ${re}s.`));const Le=Sl(Sf(T)),O=Array.isArray(Le.errors)?Le.errors:[],z=Array.isArray(Le.warnings)?Le.warnings:[],G=Yk(N,O),se=Yk(L,z);if(s(T),a([]),g({beforeErrors:N,beforeWarnings:L,afterErrors:O,afterWarnings:z,fixedErrors:G,fixedWarnings:se,changes:M}),!M.length){d("Auto Fix by Contract: tidak ada perubahan, preset sudah sesuai kontrak.");return}d(`Auto Fix by Contract: ${M.length} perubahan diterapkan. ${M.join(" | ")}`)}async function W(){P()&&(d(""),g(null),t&&await t(h))}return o.jsxs("div",{children:[i.length>0&&o.jsx(Lt,{variant:"danger",children:i.join("; ")}),v.length>0&&o.jsxs(Lt,{variant:"warning",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Schema Check:"})," ",v.length," issue"]}),o.jsx("div",{className:"small mt-1",children:v.slice(0,3).join(" | ")})]}),o.jsxs(Lt,{variant:b.missing.length?"warning":"success",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Wajib Diisi:"})," ",b.done,"/",b.total]}),b.missing.length>0&&o.jsxs("div",{className:"mt-1",children:["Kurang: ",b.missing.join(", ")]})]}),o.jsxs(Lt,{variant:k.score>=85?"success":k.score>=70?"warning":"danger",children:[o.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[o.jsxs("strong",{children:["Quality Score: ",k.score,"/100"]}),o.jsx(Ue,{bg:k.score>=85?"success":k.score>=70?"warning":"danger",text:k.score>=70?"dark":void 0,children:k.grade})]}),o.jsx("div",{className:"small mt-2 d-flex flex-wrap gap-1",children:k.checks.map(T=>o.jsx(Ue,{bg:T.ok?"success":"secondary",children:T.key},T.key))})]}),o.jsxs(Lt,{variant:x.errors.length?"danger":x.warnings.length?"warning":"success",children:[o.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[o.jsx("strong",{children:"Platform Contract Lint"}),o.jsxs(Ue,{bg:"dark",children:["Stage ",((Y=x.contract)==null?void 0:Y.stage)||2]}),o.jsx(Ue,{bg:x.errors.length?"danger":"success",children:x.errors.length?`${x.errors.length} error`:"pass"}),x.warnings.length>0&&o.jsxs(Ue,{bg:"warning",text:"dark",children:[x.warnings.length," warning"]})]}),o.jsxs("div",{className:"small mt-1",children:["Hook ",((ee=x.contract)==null?void 0:ee.hookMin)??"-","-",((Q=x.contract)==null?void 0:Q.hookMax)??"-"," char  Desc ",((X=x.contract)==null?void 0:X.descriptionMinSentences)??"-","-",((fe=x.contract)==null?void 0:fe.descriptionMaxSentences)??"-"," kalimat  Hashtag ",((me=x.contract)==null?void 0:me.hashtagMin)??"-","-",((ve=x.contract)==null?void 0:ve.hashtagMax)??"-",typeof((Oe=x.contract)==null?void 0:Oe.requireCtaInDescription)=="boolean"?`  CTA ${x.contract.requireCtaInDescription?"required":"optional"}`:""]}),x.errors.length>0&&o.jsxs("div",{className:"small mt-1",children:["Error: ",x.errors.join(" | ")]}),x.warnings.length>0&&o.jsxs("div",{className:"small mt-1",children:["Warning: ",x.warnings.join(" | ")]}),$&&o.jsx("div",{className:"mt-2",children:o.jsx(oe,{type:"button",size:"sm",variant:"outline-primary",onClick:B,children:"Auto Fix by Contract"})})]}),u&&o.jsx(Lt,{variant:"info",className:"py-2",children:u}),f&&o.jsxs(Lt,{variant:f.afterErrors.length?"danger":f.afterWarnings.length?"warning":"success",className:"py-2",children:[o.jsx("div",{children:o.jsx("strong",{children:"Hasil Auto Fix"})}),o.jsxs("div",{className:"small mt-1",children:["Sebelum: ",f.beforeErrors.length," error, ",f.beforeWarnings.length," warning","  ","Sesudah: ",f.afterErrors.length," error, ",f.afterWarnings.length," warning"]}),f.fixedErrors.length>0&&o.jsxs("div",{className:"small mt-1",children:["Diperbaiki otomatis (error): ",f.fixedErrors.join(" | ")]}),f.fixedWarnings.length>0&&o.jsxs("div",{className:"small mt-1",children:["Diperbaiki otomatis (warning): ",f.fixedWarnings.join(" | ")]}),f.afterErrors.length>0&&o.jsxs("div",{className:"small mt-1",children:["Masih perlu perbaikan manual (error): ",f.afterErrors.join(" | ")]}),f.afterWarnings.length>0&&o.jsxs("div",{className:"small mt-1",children:["Perlu ditinjau manual (warning): ",f.afterWarnings.join(" | ")]})]}),o.jsxs(U,{children:[o.jsx("h6",{children:"Wajib Diisi (untuk hasil tepat sasaran)"}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Title ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.title,onChange:T=>p("title",T.target.value)})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Label ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.label,onChange:T=>p("label",T.target.value)})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Description ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{as:"textarea",rows:2,value:r.description,onChange:T=>p("description",T.target.value)})]}),o.jsxs(Ct,{children:[o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Platform ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.platform,onChange:T=>p("platform",T.target.value)})]})}),o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Language ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsxs(U.Select,{value:r.language,onChange:T=>p("language",T.target.value),children:[o.jsx("option",{value:"Indonesia",children:"Indonesia"}),o.jsx("option",{value:"English",children:"English"})]})]})})]}),o.jsx("h6",{children:"Strategy"}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Goals (enter then press Enter) ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(kS,{className:"mb-2",children:o.jsx(U.Control,{placeholder:"goal",onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const M=T.target.value.trim();M&&(s(I=>({...I,strategy:{...I.strategy,goals:[...I.strategy.goals,M]}})),T.target.value="")}}})}),o.jsx("div",{children:r.strategy.goals.map((T,M)=>o.jsxs(Ue,{bg:"info",className:"me-1",style:{cursor:"pointer"},onClick:()=>w("strategy.goals",M),children:[T," x"]},M))})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Emotion Triggers (comma separated) ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.strategy.emotionTriggers.join(", "),onChange:T=>p("strategy.emotionTriggers",T.target.value.split(",").map(M=>M.trim()).filter(Boolean))})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Target Audience ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.strategy.targetAudience,onChange:T=>p("strategy.targetAudience",T.target.value)})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsxs(U.Label,{children:["Keywords (comma separated) ",o.jsx(Ue,{bg:"danger",children:"Wajib"})]}),o.jsx(U.Control,{value:r.keywords.join(", "),onChange:T=>p("keywords",T.target.value.split(",").map(M=>M.trim()).filter(Boolean))})]}),o.jsx("h6",{children:"CTA"}),r.cta.map((T,M)=>o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsx(U.Control,{value:T.type,placeholder:"type",onChange:I=>p(`cta.${M}.type`,I.target.value)}),o.jsx(U.Control,{value:T.text,placeholder:"text",onChange:I=>p(`cta.${M}.text`,I.target.value)}),o.jsx(oe,{variant:"outline-danger",onClick:()=>w("cta",M),children:"Hapus"})]},M)),o.jsx(oe,{size:"sm",onClick:()=>m("cta",{type:"primary",text:""}),children:"Tambah CTA"}),o.jsx("div",{className:"mt-4",children:o.jsx(oe,{type:"button",variant:"outline-secondary",size:"sm",onClick:()=>c(T=>!T),children:l?"Sembunyikan Lanjutan":"Tampilkan Lanjutan (opsional)"})}),l&&o.jsxs(o.Fragment,{children:[o.jsx("h6",{className:"mt-3",children:"Lanjutan (opsional)"}),o.jsxs(Ct,{children:[o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"ID (teknis)"}),o.jsx(U.Control,{value:r.id,onChange:T=>p("id",T.target.value)})]})}),o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Version (teknis)"}),o.jsx(U.Control,{value:r.version,onChange:T=>p("version",T.target.value)})]})})]}),o.jsxs(Ct,{children:[o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Category"}),o.jsx(U.Control,{value:r.category,onChange:T=>p("category",T.target.value)})]})}),o.jsx(Se,{md:6,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Engine"}),o.jsx(U.Control,{value:r.engine,onChange:T=>p("engine",T.target.value)})]})})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Tags"}),o.jsx(kS,{className:"mb-2",children:o.jsx(U.Control,{placeholder:"Tambahkan tag dan tekan Enter",onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const M=T.target.value.trim();M&&(s(I=>({...I,tags:[...I.tags,M]})),T.target.value="")}}})}),o.jsx("div",{children:r.tags.map((T,M)=>o.jsxs(Ue,{bg:"secondary",className:"me-1",onClick:()=>w("tags",M),style:{cursor:"pointer"},children:[T," x"]},M))})]}),o.jsx("h6",{children:"Content Structure"}),o.jsxs(Ct,{children:[o.jsx(Se,{md:4,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Length"}),o.jsxs(U.Select,{value:r.contentStructure.length,onChange:T=>p("contentStructure.length",T.target.value),children:[o.jsx("option",{value:"short",children:"short"}),o.jsx("option",{value:"medium",children:"medium"}),o.jsx("option",{value:"long",children:"long"})]})]})}),o.jsx(Se,{md:8,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Format"}),o.jsx(U.Control,{value:r.contentStructure.format,onChange:T=>p("contentStructure.format",T.target.value)})]})})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Placeholders"}),r.contentStructure.placeholders.map((T,M)=>o.jsxs("div",{className:"mb-2 d-flex gap-2",children:[o.jsx(U.Control,{placeholder:"name",value:T.name,onChange:I=>p(`contentStructure.placeholders.${M}.name`,I.target.value)}),o.jsx(U.Control,{placeholder:"type",value:T.type||"",onChange:I=>p(`contentStructure.placeholders.${M}.type`,I.target.value)}),o.jsx(U.Control,{placeholder:"default",value:T.default||"",onChange:I=>p(`contentStructure.placeholders.${M}.default`,I.target.value)}),o.jsx(oe,{variant:"outline-danger",onClick:()=>w("contentStructure.placeholders",M),children:"Hapus"})]},M)),o.jsx(oe,{size:"sm",onClick:()=>m("contentStructure.placeholders",{name:"",type:"",default:""}),children:"Tambah Placeholder"})]}),o.jsx("h6",{children:"Hashtags"}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Hashtags Strategy"}),o.jsxs(Ct,{children:[o.jsx(Se,{children:o.jsx(U.Control,{value:r.hashtags.strategy,onChange:T=>p("hashtags.strategy",T.target.value)})}),o.jsx(Se,{md:3,children:o.jsx(U.Control,{type:"number",value:r.hashtags.count,onChange:T=>p("hashtags.count",Number(T.target.value||0))})})]})]}),o.jsx("h6",{children:"Audio"}),o.jsxs(Ct,{children:[o.jsx(Se,{children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Recommendation"}),o.jsx(U.Control,{value:r.audio.recommendation,onChange:T=>p("audio.recommendation",T.target.value)})]})}),o.jsx(Se,{children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Style"}),o.jsx(U.Control,{value:r.audio.style,onChange:T=>p("audio.style",T.target.value)})]})})]}),o.jsxs(Ct,{children:[o.jsx(Se,{children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Mood"}),o.jsx(U.Control,{value:r.audio.mood,onChange:T=>p("audio.mood",T.target.value)})]})}),o.jsx(Se,{md:3,children:o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Length (sec)"}),o.jsx(U.Control,{type:"number",value:r.audio.lengthSec,onChange:T=>p("audio.lengthSec",Number(T.target.value||0))})]})})]}),o.jsx("h6",{children:"Constraints"}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Forbidden Words (comma separated)"}),o.jsx(U.Control,{value:r.constraints.forbiddenWords.join(", "),onChange:T=>p("constraints.forbiddenWords",T.target.value.split(",").map(M=>M.trim()).filter(Boolean))})]}),o.jsxs(U.Group,{className:"mb-2",children:[o.jsx(U.Label,{children:"Variation Count"}),o.jsx(U.Control,{type:"number",value:r.constraints.variationCount,onChange:T=>p("constraints.variationCount",Number(T.target.value||1))})]}),o.jsx("h6",{children:"Analytics"}),o.jsx(U.Check,{type:"checkbox",label:"Tracking Enabled",checked:!!r.analytics.trackingEnabled,onChange:T=>p("analytics.trackingEnabled",T.target.checked)}),o.jsxs(U.Group,{className:"mb-2 mt-2",children:[o.jsx(U.Label,{children:"Expected KPI (optional)"}),o.jsx(U.Control,{value:r.analytics.expectedKPI||"",onChange:T=>p("analytics.expectedKPI",T.target.value)})]}),o.jsx("h6",{children:"Examples"}),r.examples.map((T,M)=>o.jsxs("div",{className:"mb-2",children:[o.jsxs(U.Group,{className:"mb-1",children:[o.jsx(U.Label,{children:"Input (JSON)"}),o.jsx(U.Control,{as:"textarea",rows:2,value:JSON.stringify(T.input||{}),onChange:I=>{try{p(`examples.${M}.input`,JSON.parse(I.target.value))}catch{}}})]}),o.jsxs(U.Group,{children:[o.jsx(U.Label,{children:"Output (string or JSON)"}),o.jsx(U.Control,{as:"textarea",rows:2,value:typeof T.output=="string"?T.output:JSON.stringify(T.output||{}),onChange:I=>{const N=I.target.value;try{p(`examples.${M}.output`,JSON.parse(N))}catch{p(`examples.${M}.output`,N)}}})]}),o.jsx(oe,{variant:"outline-danger",size:"sm",onClick:()=>w("examples",M),children:"Hapus Example"})]},M)),o.jsx(oe,{size:"sm",onClick:()=>m("examples",{input:{},output:""}),children:"Tambah Example"})]}),o.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[o.jsx(oe,{variant:"secondary",onClick:n,children:"Batal"}),o.jsx(oe,{variant:"primary",onClick:W,disabled:!E,children:"Simpan"})]})]})]})}const Zf="templates",Qk="template_versions_v2",F5=20,D5=["_teamVersion","_lastAction","_lastActionAt","_createdAt","_updatedAt","_updatedByUserId","_createdByUserId","_updatedByDisplayName","_createdByDisplayName","_lastClonedFromPresetId"],ng=[{id:"promo-shopee",title:"Promo Shopee Diskon",topic:"Diskon 50% produk X, mulai hari ini",platform:"Shopee",language:"Indonesia",tone:"Urgency",length:"short",audioRecommendation:"Bright promo jingle",description:"Template untuk promo cepat di Shopee."},{id:"tiktok-hook",title:"TikTok Viral Hook",topic:"Trik cepat untuk membuat kopi enak",platform:"TikTok",language:"Indonesia",tone:"Fun",length:"short",audioRecommendation:"Energetic pop beat",description:"Hook singkat untuk TikTok."},{id:"threads-insight-funnel-advanced-001",title:"Threads Advanced - Insight Funnel Engagement",topic:"Opini + insight yang mengundang diskusi sehat",platform:"Threads",language:"Indonesia",tone:"Curious / Bikin Penasaran",length:"medium",audioRecommendation:"No audio focus (text-first)",description:"Starter template Threads untuk growth reply, profile visit, dan followers."},{id:"whatsapp-channel-growth-advanced-001",title:"WhatsApp Channel Advanced - Daily Update Growth",topic:"Update ringkas harian dengan nilai langsung pakai",platform:"WhatsApp Channel",language:"Indonesia",tone:"Friendly / Ramah",length:"short",audioRecommendation:"No audio focus (message-first)",description:"Starter template WhatsApp Channel untuk retention, reaction, dan forward."},{id:"telegram-community-booster-advanced-001",title:"Telegram Advanced - Community Booster",topic:"Konten komunitas yang mendorong komentar berkualitas",platform:"Telegram",language:"Indonesia",tone:"Profesional",length:"medium",audioRecommendation:"Minimal instrumental",description:"Starter template Telegram untuk menjaga engagement komunitas tetap aktif."}];function si(e){const t=Bs(e);if(!t)return null;const n=e&&typeof e=="object"?e:{},r={...t};return D5.forEach(s=>{n[s]!==void 0&&(r[s]=n[s])}),!r._updatedByDisplayName&&n.updated_by_display_name&&(r._updatedByDisplayName=n.updated_by_display_name),!r._createdByDisplayName&&n.created_by_display_name&&(r._createdByDisplayName=n.created_by_display_name),!r._lastAction&&n.last_action&&(r._lastAction=n.last_action),!r._lastActionAt&&n.last_action_at&&(r._lastActionAt=n.last_action_at),r}function B5(){try{const e=localStorage.getItem(Zf);if(!e)return ng.map(n=>si(n));const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>si(n)).filter(Boolean):ng.map(n=>si(n))}catch{return ng.map(t=>si(t))}}function U5(e){try{const t=localStorage.getItem(e);if(!t)return{};const n=JSON.parse(t);return!n||typeof n!="object"||Array.isArray(n)?{}:n}catch{return{}}}function Xk(e,t="save"){const n=Bs(e);return{snapshotId:`ver-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,savedAt:new Date().toISOString(),source:t,version:n.version||"1.0.0",title:n.title||"",hash:JSON.stringify(n),actorDisplayName:"local-fallback",preset:n}}function Zk(e){try{const t=String(e||"1.0.0").split(".").map(n=>parseInt(n||"0",10));for(;t.length<3;)t.push(0);return t[2]+=1,t.join(".")}catch{return"1.0.1"}}function Qo(e,t,n=null){const r=String((t==null?void 0:t.id)||"").trim(),s=String(n||"").trim(),i=(e||[]).filter(a=>{const l=String((a==null?void 0:a.id)||"").trim();return l&&l!==r&&l!==s});return[t,...i]}function z5(e){var i,a;const t=Bs(e),n=Date.now().toString(36),r=String(t.id||"preset").replace(/[^a-zA-Z0-9-_]/g,"-"),s={...t,id:`${r}-clone-${n}`,version:"1.0.0",title:(i=t.title)!=null&&i.endsWith("(Clone)")?t.title:`${t.title||"Untitled"} (Clone)`,label:(a=t.label)!=null&&a.endsWith("Clone")?t.label:`${t.label||t.title||"Preset"} Clone`,meta:{...t.meta||{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"team-clone"}};return Bs(s)}function _f(e){var r,s,i,a;const t=(r=e==null?void 0:e.response)==null?void 0:r.status,n=(a=(i=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:i.error)==null?void 0:a.message;return t===401?"Sesi login tidak valid. Silakan login ulang.":t===503?n||"Konfigurasi server belum siap.":n||(e==null?void 0:e.message)||"Request gagal"}function ej(e){if(!e)return"-";try{return new Date(e).toLocaleString()}catch{return String(e)}}function V5(e){return String((e==null?void 0:e._updatedByDisplayName)||(e==null?void 0:e._createdByDisplayName)||"").trim()||"-"}function Ic(e){var t,n;return(e==null?void 0:e._lastActionAt)||(e==null?void 0:e._updatedAt)||((t=e==null?void 0:e.meta)==null?void 0:t.updatedAt)||((n=e==null?void 0:e.meta)==null?void 0:n.createdAt)||null}function H5(e){const t=String((e==null?void 0:e.id)||(e==null?void 0:e.title)||(e==null?void 0:e.label)||"").toLowerCase();return t.includes("hard-sell")||t.includes("hard sell")?"hard":t.includes("soft-education")||t.includes("soft education")?"soft":"other"}function kf(e){const t=Date.parse(String(e||"").trim());return Number.isFinite(t)?t:0}function q5(){const e=qi(),[t,n]=y.useState(()=>B5()),[r,s]=y.useState(()=>U5(Qk)),[i,a]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(null),[f,g]=y.useState(null),[p,m]=y.useState(null),[w,b]=y.useState(!1),[h,v]=y.useState({id:"",title:""}),[x,k]=y.useState(null),[E,$]=y.useState({show:!1,bg:"secondary",message:"",autohide:!0,delay:2600,mode:"message"}),P=y.useMemo(()=>kO(t),[t]),[B,W]=y.useState(""),[Y,ee]=y.useState(""),[Q,X]=y.useState("all"),[fe,me]=y.useState("recommended"),ve=y.useMemo(()=>{const J=new Set;return P.forEach(F=>{const re=String((F==null?void 0:F.platform)||"").trim();re&&J.add(re)}),Array.from(J).sort((F,re)=>F.localeCompare(re))},[P]),Oe=y.useMemo(()=>{const J=String(B||"").trim().toLowerCase();let F=P.filter(re=>Y&&String((re==null?void 0:re.platform)||"")!==Y||Q!=="all"&&H5(re)!==Q?!1:J?[re==null?void 0:re.title,re==null?void 0:re.id,re==null?void 0:re.label,re==null?void 0:re.description,re==null?void 0:re.topic,re==null?void 0:re.platform].map(Le=>String(Le||"").toLowerCase()).join(" ").includes(J):!0);return fe==="newest"?F=[...F].sort((re,be)=>kf(Ic(be))-kf(Ic(re))):fe==="oldest"?F=[...F].sort((re,be)=>kf(Ic(re))-kf(Ic(be))):fe==="az"?F=[...F].sort((re,be)=>String((re==null?void 0:re.title)||"").localeCompare(String((be==null?void 0:be.title)||""))):fe==="za"&&(F=[...F].sort((re,be)=>String((be==null?void 0:be.title)||"").localeCompare(String((re==null?void 0:re.title)||"")))),F},[Y,B,fe,P,Q]),T=y.useMemo(()=>{if(!(p!=null&&p.id))return[];const J=r==null?void 0:r[p.id];return Array.isArray(J)?J:[]},[r,p]);function M(J,F={}){$({show:!0,bg:F.bg||"secondary",message:J,autohide:F.autohide??!0,delay:F.delay??2600,mode:F.mode||"message"})}async function I(){var J;try{const{data:F}=await Pt.auth.getSession(),re=(J=F==null?void 0:F.session)==null?void 0:J.access_token;return re?{Authorization:`Bearer ${re}`}:{}}catch{return{}}}function N(J,F="save"){if(!(J!=null&&J.id))return;const re=Bs(J),be=String(re.id||"").trim();if(!be)return;const Le=Xk(re,F);s(O=>{var se;const z=Array.isArray(O==null?void 0:O[be])?O[be]:[];if(((se=z[0])==null?void 0:se.hash)===Le.hash)return O;const G=[Le,...z].slice(0,F5);return{...O,[be]:G}})}y.useEffect(()=>{localStorage.setItem(Zf,JSON.stringify(t))},[t]),y.useEffect(()=>{localStorage.setItem(Qk,JSON.stringify(r))},[r]),y.useEffect(()=>{s(J=>{let F=!1;const re={...J};return t.forEach(be=>{const Le=String((be==null?void 0:be.id)||"").trim();Le&&(!Array.isArray(re[Le])||!re[Le].length)&&(re[Le]=[Xk(be,"seed")],F=!0)}),F?re:J})},[t]),y.useEffect(()=>{let J=!0;async function F(){var re;try{const be=await I(),Le=Object.keys(be).length?{headers:be}:{},O=await Rt({method:"get",url:"/api/presets",...Le});if(J&&((re=O.data)!=null&&re.ok)&&Array.isArray(O.data.data)){n(O.data.data.map(z=>si(z)).filter(Boolean));return}}catch(be){J&&M(_f(be),{bg:"warning"})}try{if(!localStorage.getItem(Zf)){const Le=await fetch("/example-format-template-converted-by-script.json");if(Le.ok){const O=await Le.json();if(Array.isArray(O)&&O.length){const z=O.map(G=>si(G)).filter(Boolean);J&&n(z),localStorage.setItem(Zf,JSON.stringify(z))}}}}catch{}}return F(),()=>{J=!1}},[]);function L(J){e("/generate",{state:{preset:`template:${J.id}`}})}function A(){d(null),g(null),v({id:`tpl-${Date.now()}`}),a(!0)}function _(J){const F=z5(J);d(null),g((J==null?void 0:J.id)||null),v(F),a(!0),M("Clone dibuat. Silakan edit lalu simpan.",{bg:"info"})}function R(J){d(J.id),g(null),v(Bs(J)),a(!0)}async function K(J){var O,z,G;if(!J||!J.id)return;const F=Bs(J),re=Sl(F);if(re.errors.length){M(`Preset lint gagal: ${re.errors.join(" | ")}`,{bg:"danger",autohide:!1,delay:0});return}re.warnings.length&&M(`Preset lint warning: ${re.warnings.join(" | ")}`,{bg:"warning"});const be=u?"edit":f?"clone":"create";let Le=F;try{const se=await I(),ne=Object.keys(se).length?{headers:se}:{};if(u){const q=await Rt({method:"patch",url:`/api/presets/${encodeURIComponent(u)}`,data:{preset:F,action:"edit"},...ne});(O=q.data)!=null&&O.ok&&q.data.data&&(Le=si(q.data.data)),n(ge=>Qo(ge,Le,u)),M("Template berhasil diperbarui",{bg:"success"})}else{const q=await Rt({method:"post",url:"/api/presets",data:{preset:F,action:be,cloneFromPresetId:f||null},...ne});(z=q.data)!=null&&z.ok&&q.data.data&&(Le=si(q.data.data)),n(ge=>Qo(ge,Le)),M("Template baru berhasil disimpan",{bg:"success"})}}catch(se){const ne=_f(se);u?(Le=Bs({...F,version:Zk(((G=t.find(q=>q.id===u))==null?void 0:G.version)||F.version),meta:{...F.meta||{},updatedAt:new Date().toISOString()}}),n(q=>Qo(q,Le,u)),M(`${ne}. Template disimpan lokal (fallback).`,{bg:"warning"})):(n(q=>Qo(q,Le)),M(`${ne}. Template dibuat lokal (fallback).`,{bg:"warning"}))}finally{N(Le,be),d(null),g(null),a(!1)}}function pe(J){const F=t.find(re=>re.id===J);F&&(k(F),M(`Hapus template "${F.title}"?`,{bg:"warning",autohide:!1,delay:0,mode:"confirm"}))}function ue(){$(J=>({...J,show:!1})),k(null)}async function j(){if(!x)return;const J=x.id;k(null),$(F=>({...F,show:!1}));try{const F=await I(),re=Object.keys(F).length?{headers:F}:{};await Rt({method:"delete",url:`/api/presets/${encodeURIComponent(J)}`,...re}),M("Template berhasil dihapus",{bg:"success"})}catch(F){M(`${_f(F)}. Template dihapus lokal (fallback).`,{bg:"warning"})}finally{n(F=>F.filter(re=>re.id!==J)),s(F=>{if(!F[J])return F;const re={...F};return delete re[J],re})}}function $e(){const J=JSON.stringify(t,null,2),F=new Blob([J],{type:"application/json"}),re=URL.createObjectURL(F),be=document.createElement("a");be.href=re,be.download=`templates-export-${Date.now()}.json`,be.click(),URL.revokeObjectURL(re)}function De(J){if(!J)return;const F=JSON.stringify(J,null,2),re=String(J.id||"preset").replace(/[^a-zA-Z0-9-_]/g,"_"),be=new Blob([F],{type:"application/json"}),Le=URL.createObjectURL(be),O=document.createElement("a");O.href=Le,O.download=`${re}-${Date.now()}.json`,O.click(),URL.revokeObjectURL(Le)}async function rt(J){var be;const F=(be=J.target.files)==null?void 0:be[0];if(!F)return;const re=new FileReader;re.onload=async()=>{var Le;try{const O=JSON.parse(re.result),z=Array.isArray(O)?O:[O],G=[],se=[];for(let Te=0;Te<z.length;Te+=1){const qe=z[Te],jt=Bs(qe),Dt=FR(jt),Bt=Sl(jt);Dt.length?G.push(`Item ${Te+1}: ${Dt.join("; ")}`):Bt.errors.length?G.push(`Item ${Te+1}: ${Bt.errors.join("; ")}`):se.push(jt)}if(G.length&&M(`Import sebagian gagal: ${G.length} item`,{bg:"warning"}),!se.length)return;const ne=await I(),q=Object.keys(ne).length?{headers:ne}:{},ge=[];for(const Te of se)try{const qe=await Rt({method:"post",url:"/api/presets",data:{preset:Te,action:"import"},...q});(Le=qe.data)!=null&&Le.ok&&qe.data.data?ge.push(si(qe.data.data)):ge.push(Te)}catch{ge.push(Te)}n(Te=>{let qe=[...Te];return ge.forEach(jt=>{qe=Qo(qe,jt)}),qe}),ge.forEach(Te=>N(Te,"import")),M(`Import berhasil: ${ge.length} template`,{bg:"success"})}catch{M("File JSON tidak valid",{bg:"danger"})}},re.readAsText(F),J.target.value=null}async function st(J){var F;if(m(J),c(!0),!!(J!=null&&J.id))try{const re=await I(),be=Object.keys(re).length?{headers:re}:{},Le=await Rt({method:"get",url:`/api/presets/${encodeURIComponent(J.id)}/versions`,...be});(F=Le.data)!=null&&F.ok&&Array.isArray(Le.data.data)&&s(O=>({...O,[J.id]:Le.data.data}))}catch{}}async function ke(J){var Le;if(!J||!(p!=null&&p.id))return;const F=p.id,re=Bs({...J.preset||{},id:F});b(!0);let be=re;try{const O=await I(),z=Object.keys(O).length?{headers:O}:{},G=await Rt({method:"post",url:`/api/presets/${encodeURIComponent(F)}/rollback`,data:{snapshotId:J.snapshotId},...z});(Le=G.data)!=null&&Le.ok&&G.data.data&&(be=si(G.data.data)),M("Rollback berhasil",{bg:"success"})}catch(O){const z=t.find(G=>G.id===F);be=Bs({...re,version:Zk((z==null?void 0:z.version)||re.version),meta:{...re.meta||{},updatedAt:new Date().toISOString()}}),M(`${_f(O)}. Rollback lokal dijalankan.`,{bg:"warning"})}finally{n(O=>Qo(O,be,F)),N(be,"rollback"),m(be),b(!1)}}function Re(){W(""),ee(""),X("all"),me("recommended")}return o.jsxs(We,{children:[o.jsxs(We.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx("h5",{className:"mb-0",children:"Templates & Presets"}),o.jsxs("div",{children:[o.jsx("input",{id:"tmpl-import",type:"file",accept:"application/json",style:{display:"none"},onChange:rt}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:()=>document.getElementById("tmpl-import").click(),children:"Import"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:$e,children:"Export"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"template-create-btn",onClick:A,title:"Buat Template","aria-label":"Buat Template",children:o.jsx(Qt,{icon:"vscode-icons:file-type-libreoffice-writer",width:"32",height:"32",style:{color:"#005aff"}})})]})]}),o.jsxs(Ct,{className:"g-2 mb-2",children:[o.jsx(Se,{xs:12,md:5,children:o.jsx(U.Control,{value:B,onChange:J=>W(J.target.value),placeholder:"Cari title / id / deskripsi / platform..."})}),o.jsx(Se,{xs:12,className:"d-md-none",children:o.jsx("div",{className:"templates-mobile-filter-group",children:o.jsxs("div",{className:"templates-mobile-filter-grid",children:[o.jsxs(U.Select,{value:Y,onChange:J=>ee(J.target.value),children:[o.jsx("option",{value:"",children:"Semua Platform"}),ve.map(J=>o.jsx("option",{value:J,children:J},J))]}),o.jsxs(U.Select,{value:Q,onChange:J=>X(J.target.value),children:[o.jsx("option",{value:"all",children:"Semua Varian"}),o.jsx("option",{value:"hard",children:"Hard Sell"}),o.jsx("option",{value:"soft",children:"Soft Education"}),o.jsx("option",{value:"other",children:"Lainnya"})]}),o.jsxs(U.Select,{value:fe,onChange:J=>me(J.target.value),children:[o.jsx("option",{value:"recommended",children:"Sort: Rekomendasi"}),o.jsx("option",{value:"newest",children:"Sort: Terbaru"}),o.jsx("option",{value:"oldest",children:"Sort: Terlama"}),o.jsx("option",{value:"az",children:"Sort: A-Z"}),o.jsx("option",{value:"za",children:"Sort: Z-A"})]})]})})}),o.jsx(Se,{md:3,className:"d-none d-md-block",children:o.jsxs(U.Select,{value:Y,onChange:J=>ee(J.target.value),children:[o.jsx("option",{value:"",children:"Semua Platform"}),ve.map(J=>o.jsx("option",{value:J,children:J},J))]})}),o.jsx(Se,{md:2,className:"d-none d-md-block",children:o.jsxs(U.Select,{value:Q,onChange:J=>X(J.target.value),children:[o.jsx("option",{value:"all",children:"Semua Varian"}),o.jsx("option",{value:"hard",children:"Hard Sell"}),o.jsx("option",{value:"soft",children:"Soft Education"}),o.jsx("option",{value:"other",children:"Lainnya"})]})}),o.jsx(Se,{md:2,className:"d-none d-md-block",children:o.jsxs(U.Select,{value:fe,onChange:J=>me(J.target.value),children:[o.jsx("option",{value:"recommended",children:"Sort: Rekomendasi"}),o.jsx("option",{value:"newest",children:"Sort: Terbaru"}),o.jsx("option",{value:"oldest",children:"Sort: Terlama"}),o.jsx("option",{value:"az",children:"Sort: A-Z"}),o.jsx("option",{value:"za",children:"Sort: Z-A"})]})}),o.jsx(Se,{xs:12,children:o.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[o.jsxs("small",{className:"text-muted",children:["Menampilkan ",Oe.length," dari ",P.length," template"]}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:Re,children:"Reset Filter"})]})})]}),Oe.length===0&&o.jsx(Lt,{variant:"secondary",className:"mb-2",children:P.length===0?"Belum ada preset. Buat template baru untuk mulai.":"Tidak ada preset yang cocok dengan filter saat ini."}),o.jsx(qt,{children:Oe.map(J=>o.jsx(qt.Item,{children:o.jsxs(Ct,{className:"align-items-center",children:[o.jsxs(Se,{xs:10,children:[o.jsx("div",{children:o.jsx("strong",{children:J.title})}),o.jsx("div",{className:"text-muted small",children:J.description||J.topic||"-"}),o.jsxs("div",{className:"small text-muted",children:["Last action: ",J._lastAction||"edit","  by ",V5(J),"  ",ej(Ic(J))]}),o.jsxs("div",{className:"mt-1",children:[J.platform&&o.jsx(Ue,{bg:"danger",className:"me-1",children:J.platform}),J.language&&o.jsx(Ue,{bg:"warning",text:"dark",className:"me-1",children:J.language==="Indonesia"?"ID":"EN"}),o.jsxs(Ue,{bg:"light",text:"dark",className:"me-1",children:["v",J.version||"1.0.0"]})]})]}),o.jsxs(Se,{xs:2,className:"text-end template-action-col",children:[o.jsx(oe,{size:"sm",variant:"outline-primary",className:"me-1 template-action-btn template-action-export",onClick:()=>De(J),title:"Download preset","aria-label":"Download preset",children:o.jsx(Qt,{icon:"line-md:downloading",width:"22",height:"22"})}),o.jsx(oe,{size:"sm",variant:"success",className:"me-1 template-action-btn template-action-use",onClick:()=>L(J),title:"Gunakan","aria-label":"Gunakan template",children:o.jsx(Qt,{icon:"material-symbols:select-check-box-rounded",width:"22",height:"22"})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-1 template-action-btn template-action-clone",onClick:()=>_(J),title:"Clone template","aria-label":"Clone template",children:o.jsx(Qt,{icon:"material-symbols:content-copy-outline-rounded",width:"22",height:"22"})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-1 template-action-btn template-action-history",onClick:()=>st(J),title:"Riwayat versi","aria-label":"Riwayat versi",children:o.jsx(Qt,{icon:"material-symbols:history-rounded",width:"22",height:"22"})}),o.jsx(oe,{size:"sm",variant:"outline-secondary",className:"me-1 template-action-btn template-action-edit",onClick:()=>R(J),title:"Edit","aria-label":"Edit template",children:o.jsx(Qt,{icon:"raphael:edit",width:"22",height:"22"})}),o.jsx(oe,{size:"sm",variant:"danger",className:"template-action-btn template-action-delete",onClick:()=>pe(J.id),title:"Hapus","aria-label":"Hapus template",children:o.jsx(Qt,{icon:"material-symbols-light:delete-outline",width:"22",height:"22"})})]})]})},J.id))}),o.jsxs(or,{show:i,onHide:()=>a(!1),size:"lg",contentClassName:"modal-desk",children:[o.jsx(or.Header,{closeButton:!0,children:o.jsx(or.Title,{children:u?"Edit Template":"Buat Template"})}),o.jsx(or.Body,{children:o.jsx(M5,{initialData:h,onSave:K,onCancel:()=>a(!1)})})]}),o.jsxs(or,{show:l,onHide:()=>c(!1),size:"lg",contentClassName:"modal-desk",children:[o.jsx(or.Header,{closeButton:!0,children:o.jsxs(or.Title,{children:["Riwayat Versi - ",(p==null?void 0:p.title)||"-"]})}),o.jsx(or.Body,{children:T.length?o.jsx(qt,{children:T.map((J,F)=>o.jsx(qt.Item,{children:o.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-2",children:[o.jsxs("strong",{children:["v",J.version||"-"]}),F===0&&o.jsx(Ue,{bg:"success",children:"Aktif"}),o.jsxs("span",{children:[" ",J.title||"-"]}),o.jsx(Ue,{bg:"secondary",children:J.source||"edit"})]}),o.jsxs("div",{className:"small text-muted",children:[ej(J.savedAt),"  by ",J.actorDisplayName||"-"]})]}),o.jsxs(oe,{size:"sm",variant:F===0?"outline-success":"outline-secondary",disabled:w||F===0,onClick:()=>ke(J),title:F===0?"Versi aktif saat ini":"Rollback ke versi ini",children:[o.jsx(Qt,{icon:"material-symbols:restore-rounded",width:"18",height:"18"}),o.jsx("span",{className:"ms-1",children:F===0?"Aktif":"Rollback"})]})]})},J.snapshotId||`${J.version}-${F}`))}):o.jsx(Lt,{variant:"secondary",className:"mb-0",children:"Belum ada riwayat versi."})})]})]}),o.jsx(_p,{position:"middle-center",className:"p-2 templates-toast-center",children:o.jsxs(_s,{show:E.show,bg:E.bg,autohide:E.autohide,delay:E.delay,onClose:ue,children:[o.jsx(_s.Header,{closeButton:!0,children:o.jsx("strong",{className:"me-auto",children:"Templates"})}),o.jsxs(_s.Body,{className:E.bg==="warning"?"text-dark":"text-white",children:[o.jsx("div",{children:E.message}),E.mode==="confirm"&&x&&o.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-2",children:[o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:ue,children:"Batal"}),o.jsx(oe,{size:"sm",variant:"danger",onClick:j,children:"Hapus"})]})]})]})})]})}const K5=["Gemini","OpenAI","OpenRouter","Groq","Cohere AI","DeepSeek","Hugging Face"],tj="provider_free_only_by_provider_v1",rg={keyName:"tmdb_api_key",configured:!1,keyLast4:null,isActive:!1,updatedAt:null,updatedByDisplayName:null,keySource:"none"},W5={Gemini:["gemini-2.5-flash","gemini-2.5-flash-lite"],OpenAI:["gpt-4o-mini","gpt-3.5-turbo","gpt-4o-mini-2024-07-18"],OpenRouter:["meta-llama/llama-3-8b-instruct","mistralai/mixtral-8x7b-instruct","meta-llama/llama-3.1-8b-instruct","mmeta-llama/llama-3.1-8b-instruct"],Groq:["llama-3.3-70b-versatile","llama-3.1-8b-instant","mixtral-8x7b-32768"],"Cohere AI":["command-a-03-2025","command-r-plus-08-2024","command-r7b-12-2024"],"Hugging Face":["meta-llama/llama-3-70b-chat-hf","mistralai/mixtral-8x7b-instruct-v0.1","qwen/qwen2.5-72b-instruct"],DeepSeek:["deepseek-chat","deepseek-reasoner","deepseek-coder","deepseek-r1-distil-llama-70b"]};function DR(e){return String(e||"").trim().toLowerCase().replace(/^mmeta-/,"meta-")}const G5=Object.fromEntries(Object.entries(W5).map(([e,t])=>[e,new Set((t||[]).map(n=>DR(n)))]));function nj(e,t){const n=G5[String(e||"").trim()];return n?n.has(DR(t)):!1}function Qr(e){return Ay(e,{fallback:"Permintaan gagal. Coba lagi."})}async function ms(){var n;const{data:e}=await Pt.auth.getSession(),t=(n=e==null?void 0:e.session)==null?void 0:n.access_token;if(!t)throw new Error("Sesi login tidak ditemukan");return{Authorization:`Bearer ${t}`}}function J5(e){return String(e||"").trim()==="OpenRouter"?400:80}function Y5(){var Tt,Jt,Ut,ht,Ce,lt,bt,wr,Dn,$n,Bn,Un,ln,mt,nr,Zt,Or,cs,Wr,hr,us,Cs,ds,xr,zn,cn,je,ye;const e=Ry(),[t,n]=y.useState(!0),[r,s]=y.useState(!1),[i,a]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState(!1),[f,g]=y.useState(!1),[p,m]=y.useState(()=>({override:e.override||"",secondary:e.secondary||"",allowLocalFallback:e.allowLocalFallback!==!1})),[w,b]=y.useState(null),[h,v]=y.useState(()=>{try{const V=JSON.parse(localStorage.getItem(tj)||"{}");return V&&typeof V=="object"?V:{}}catch{return{}}}),[x,k]=y.useState([]),[E,$]=y.useState({}),[P,B]=y.useState(rg),[W,Y]=y.useState({apiKey:"",isActive:!0}),[ee,Q]=y.useState(null),[X,fe]=y.useState(!1),[me,ve]=y.useState(!1),[Oe,T]=y.useState(!1),[M,I]=y.useState(!1),[N,L]=y.useState(null),[A,_]=y.useState(null),[R,K]=y.useState(()=>fu()),[pe,ue]=y.useState(!1),[j,$e]=y.useState(!1),[De,rt]=y.useState(""),[st,ke]=y.useState(null),[Re,J]=y.useState(null),[F,re]=y.useState({show:!1,bg:"secondary",message:"",autohide:!0,delay:2600,mode:"message"}),[be,Le]=y.useState({provider:"OpenAI",apiKey:"",isActive:!0});y.useEffect(()=>{b(null)},[p.override,p.secondary,p.allowLocalFallback]);function O(V){const ie=h==null?void 0:h[V];return typeof ie=="boolean"?ie:V!=="OpenRouter"}function z(V,ie){v(Ae=>({...Ae,[V]:!!ie}))}y.useEffect(()=>{try{localStorage.setItem(tj,JSON.stringify(h||{}))}catch{}},[h]);function G(V,ie={}){re({show:!0,bg:ie.bg||"secondary",message:V,autohide:ie.autohide??!0,delay:ie.delay??2600,mode:ie.mode||"message"})}function se(){re(V=>({...V,show:!1})),J(null)}async function ne(){d(!0),ke(null);try{const V={override:er(p.override),secondary:er(p.secondary),allowLocalFallback:!!p.allowLocalFallback},ie=await Hz(V,{timeoutMs:2800,includeLocalFallback:!0});b(ie),ie.ok?ke({variant:"success",message:`Backend aktif terdeteksi di ${ie.activeBase}`}):ke({variant:"warning",message:"Tidak ada endpoint backend yang merespon. Cek URL atau jalankan backend lokal."})}catch(V){b({ok:!1,activeBase:"",checked:[]}),ke({variant:"danger",message:(V==null?void 0:V.message)||"Gagal mengetes endpoint backend"})}finally{d(!1)}}function q(){const V=er(p.override),ie=er(p.secondary);if(!(w!=null&&w.ok)){ke({variant:"warning",message:"Jalankan Test Connection dan pastikan minimal satu endpoint healthy sebelum menyimpan."});return}g(!0);try{Uz({override:V,secondary:ie,allowLocalFallback:!!p.allowLocalFallback}),m({override:V,secondary:ie,allowLocalFallback:!!p.allowLocalFallback}),ke({variant:"success",message:"Konfigurasi backend berhasil disimpan."})}catch(Ae){ke({variant:"danger",message:(Ae==null?void 0:Ae.message)||"Gagal menyimpan konfigurasi backend"})}finally{g(!1)}}function ge(){zz();const V=Ry();m({override:V.override||"",secondary:V.secondary||"",allowLocalFallback:V.allowLocalFallback!==!1}),b(null),ke({variant:"info",message:"Konfigurasi backend dikembalikan ke default env."})}async function Te(){var V,ie;n(!0);try{const Ae=await ms(),H=await Rt({method:"get",url:"/api/settings/provider-keys",headers:Ae});if(!((V=H.data)!=null&&V.ok)||!Array.isArray((ie=H.data)==null?void 0:ie.data))throw new Error("Response provider-keys tidak valid");k(H.data.data),ke(null)}catch(Ae){ke({variant:"danger",message:Qr(Ae)})}finally{n(!1)}}async function qe({silent:V=!1}={}){var ie,Ae;V||fe(!0);try{const H=await ms(),Qe=await Rt({method:"get",url:"/api/settings/tmdb-key",headers:H});if(!((ie=Qe.data)!=null&&ie.ok)||!((Ae=Qe.data)!=null&&Ae.data)||typeof Qe.data.data!="object")throw new Error("Response tmdb-key tidak valid");const Ie={...rg,...Qe.data.data};return B(Ie),Y(_t=>({..._t,isActive:!!Ie.isActive})),V||ke(null),Ie}catch(H){return V||ke({variant:"danger",message:Qr(H)}),null}finally{V||fe(!1)}}async function jt({silent:V=!1}={}){var ie,Ae;V||ue(!0);try{const H=await ms(),Qe=await Rt({method:"get",url:"/api/settings/supabase-profile",headers:H});if(!((ie=Qe.data)!=null&&ie.ok)||!((Ae=Qe.data)!=null&&Ae.data))throw new Error("Response supabase-profile tidak valid");L(Qe.data.data),K(fu())}catch(H){V||ke({variant:"danger",message:Qr(H)})}finally{V||ue(!1)}}async function Dt({silent:V=!1}={}){var ie,Ae;V||$e(!0);try{const H=await ms(),Qe=await Rt({method:"get",url:"/api/settings/security-posture",headers:H});if(!((ie=Qe.data)!=null&&ie.ok)||!((Ae=Qe.data)!=null&&Ae.data))throw new Error("Response security-posture tidak valid");_(Qe.data.data)}catch(H){V||ke({variant:"danger",message:Qr(H)})}finally{V||$e(!1)}}async function Bt(V){var Ae,H,Qe;const ie=String(V||"").trim().toLowerCase();if(ie){rt(ie),ke(null);try{const Ie=await ms(),_t=await Rt({method:"post",url:"/api/settings/supabase-profile/switch",data:{profile:ie},headers:Ie});if(!((Ae=_t.data)!=null&&Ae.ok))throw new Error(((Qe=(H=_t.data)==null?void 0:H.error)==null?void 0:Qe.message)||"Gagal switch Supabase profile");const It=_t.data.data||{},Kt=It.frontendRuntime||{},Gr=String(Kt.url||"").trim(),Ts=String(Kt.anonKey||"").trim();Gr&&Ts?eU({url:Gr,anonKey:Ts}):tU(),K(fu()),L(It.status||null),ke({variant:"success",message:`Supabase profile aktif: ${ie}. Aplikasi akan reload.`}),setTimeout(()=>{window.location.reload()},900)}catch(Ie){ke({variant:"danger",message:Qr(Ie)})}finally{rt("")}}}y.useEffect(()=>{Te(),qe({silent:!0}),jt({silent:!0}),Dt({silent:!0})},[]);async function Fn(V){var H,Qe,Ie;V.preventDefault();const ie=String(be.provider||"").trim(),Ae=String(be.apiKey||"").trim();if(!ie){ke({variant:"warning",message:"Provider wajib dipilih"});return}if(!Ae){ke({variant:"warning",message:"API key wajib diisi"});return}s(!0),ke(null);try{const _t=await ms(),It=await Rt({method:"post",url:"/api/settings/provider-keys",data:{provider:ie,apiKey:Ae,isActive:!!be.isActive},headers:_t});if(!((H=It.data)!=null&&H.ok))throw new Error(((Ie=(Qe=It.data)==null?void 0:Qe.error)==null?void 0:Ie.message)||"Gagal menyimpan key");Le(Kt=>({...Kt,apiKey:""})),ke({variant:"success",message:`API key ${ie} berhasil disimpan`}),await Te()}catch(_t){ke({variant:"danger",message:Qr(_t)})}finally{s(!1)}}async function on(V){var Ae,H,Qe,Ie;V.preventDefault();const ie=String(W.apiKey||"").trim();if(!ie){ke({variant:"warning",message:"TMDB API key wajib diisi"});return}ve(!0),ke(null);try{const _t=await ms(),It=await Rt({method:"post",url:"/api/settings/tmdb-key",data:{apiKey:ie,isActive:!!W.isActive},headers:_t});if(!((Ae=It.data)!=null&&Ae.ok)||!((H=It.data)!=null&&H.data))throw new Error(((Ie=(Qe=It.data)==null?void 0:Qe.error)==null?void 0:Ie.message)||"Gagal menyimpan TMDB key");const Kt={...rg,...It.data.data};B(Kt),Y(Gr=>({...Gr,apiKey:"",isActive:!!Kt.isActive})),Q(null),ke({variant:"success",message:"TMDB API key berhasil disimpan"})}catch(_t){ke({variant:"danger",message:Qr(_t)})}finally{ve(!1)}}async function En(){var V,ie,Ae;T(!0),ke(null);try{const H=await ms(),Qe=await Rt({method:"delete",url:"/api/settings/tmdb-key",headers:H});if(!((V=Qe.data)!=null&&V.ok))throw new Error(((Ae=(ie=Qe.data)==null?void 0:ie.error)==null?void 0:Ae.message)||"Gagal hapus TMDB key");const Ie=await qe({silent:!0});Q(null),Ie!=null&&Ie.configured&&Ie.keySource==="env"?ke({variant:"warning",message:"TMDB key di tabel berhasil dihapus, tapi env fallback TMDB_API_KEY masih aktif."}):ke({variant:"success",message:"TMDB key berhasil dihapus"})}catch(H){ke({variant:"danger",message:Qr(H)})}finally{T(!1)}}async function fr(){var V,ie,Ae,H;I(!0),ke(null),Q(null);try{const Qe=await ms(),Ie=await Rt({method:"post",url:"/api/settings/tmdb-key/test",headers:Qe});if(!((V=Ie.data)!=null&&V.ok)||!((ie=Ie.data)!=null&&ie.data))throw new Error(((H=(Ae=Ie.data)==null?void 0:Ae.error)==null?void 0:H.message)||"Gagal test TMDB key");Q(Ie.data.data),ke({variant:"success",message:"TMDB key valid dan endpoint merespon."})}catch(Qe){Q(null),ke({variant:"danger",message:Qr(Qe)})}finally{I(!1)}}async function Ft(V,ie){var Ae,H,Qe;a(V),ke(null);try{const Ie=await ms(),_t=await Rt({method:"patch",url:`/api/settings/provider-keys/${encodeURIComponent(V)}/active`,data:{isActive:!!ie},headers:Ie});if(!((Ae=_t.data)!=null&&Ae.ok))throw new Error(((Qe=(H=_t.data)==null?void 0:H.error)==null?void 0:Qe.message)||"Gagal update status key");k(It=>It.map(Kt=>Kt.provider!==V?Kt:{...Kt,isActive:!!ie})),ke({variant:"success",message:`Status key ${V} berhasil diperbarui`})}catch(Ie){ke({variant:"danger",message:Qr(Ie)})}finally{a("")}}async function Xn(V){var ie,Ae,H;a(V),ke(null);try{const Qe=await ms(),Ie=await Rt({method:"delete",url:`/api/settings/provider-keys/${encodeURIComponent(V)}`,headers:Qe});if(!((ie=Ie.data)!=null&&ie.ok))throw new Error(((H=(Ae=Ie.data)==null?void 0:Ae.error)==null?void 0:H.message)||"Gagal hapus key");k(_t=>_t.map(It=>It.provider!==V?It:{...It,configured:!1,keyLast4:null,isActive:!1,updatedAt:null})),$(_t=>{const It={..._t};return delete It[V],It}),ke({variant:"success",message:`API key ${V} berhasil dihapus`})}catch(Qe){ke({variant:"danger",message:Qr(Qe)})}finally{a("")}}async function S(V){var Ae,H,Qe;if(!V)return;const ie=O(V);c(V),ke(null),$(Ie=>{var _t;return{...Ie,[V]:{loading:!0,error:null,models:((_t=Ie==null?void 0:Ie[V])==null?void 0:_t.models)||[]}}});try{const Ie=await ms(),_t=await Rt({method:"post",url:`/api/settings/provider-keys/${encodeURIComponent(V)}/test`,data:{freeOnly:ie,limit:J5(V)},headers:Ie});if(!((Ae=_t.data)!=null&&Ae.ok))throw new Error(((Qe=(H=_t.data)==null?void 0:H.error)==null?void 0:Qe.message)||"Gagal test provider key");const It=_t.data.data||{};$(Kt=>({...Kt,[V]:{loading:!1,error:null,models:Array.isArray(It.models)?It.models:[],source:It.source||null,freeFilterApplied:!!It.freeFilterApplied,freeOnlyRequested:!!It.freeOnlyRequested}})),ke({variant:"success",message:`Test ${V} berhasil. Model terdeteksi: ${Number(It.count||0)}`})}catch(Ie){$(_t=>({..._t,[V]:{loading:!1,error:Qr(Ie),models:[]}})),ke({variant:"danger",message:Qr(Ie)})}finally{c("")}}function de(V){V&&(J({type:"provider",provider:V}),G(`Hapus API key provider "${V}"?`,{bg:"warning",autohide:!1,delay:0,mode:"confirm"}))}function xe(){J({type:"tmdb"}),G("Hapus TMDB API key?",{bg:"warning",autohide:!1,delay:0,mode:"confirm"})}async function Je(){if(!Re)return;const V=Re;if(J(null),re(ie=>({...ie,show:!1})),V.type==="provider"&&V.provider){await Xn(V.provider);return}V.type==="tmdb"&&await En()}function Ve(V,ie="ON",Ae="OFF"){return V?o.jsx(Ue,{bg:"success",children:ie}):o.jsx(Ue,{bg:"secondary",children:Ae})}const He=[];return A&&(A.serviceRoleConfigured||He.push("SUPABASE_SERVICE_ROLE_KEY belum terkonfigurasi."),A.providerKeyEncryptionConfigured||He.push("PROVIDER_KEY_ENCRYPTION_KEY belum terkonfigurasi."),A.requireAuthForSensitiveEndpoints||He.push("Auth guard endpoint sensitif sedang OFF."),A.publicSignupEnabled&&He.push("Public signup aktif. Untuk tim internal, sebaiknya OFF."),A.corsAllowAllOrigins&&He.push("CORS_ALLOW_ALL_ORIGINS aktif. Ini membuka semua origin."),A.strictSecretEnvGuard||He.push("STRICT_SECRET_ENV_GUARD sedang OFF."),Array.isArray(A.leakedServiceRoleEnvKeys)&&A.leakedServiceRoleEnvKeys.length>0&&He.push(`Terdeteksi env service role bocor ke VITE_*: ${A.leakedServiceRoleEnvKeys.join(", ")}`),(Tt=A.serviceRoleRotation)!=null&&Tt.stale&&He.push(`Service role key melewati batas rotasi ${((Jt=A.serviceRoleRotation)==null?void 0:Jt.maxAgeDays)||"-"} hari (${((Ut=A.serviceRoleRotation)==null?void 0:Ut.daysSinceRotation)||"-"} hari).`)),o.jsxs(We,{children:[o.jsxs(We.Body,{children:[o.jsx("h4",{className:"mb-3",children:"Settings"}),st&&o.jsx(Lt,{variant:st.variant,children:st.message}),o.jsx(We,{className:"mb-3",children:o.jsxs(We.Body,{className:"py-3",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Security Posture (Bearer Token)"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:j,onClick:()=>Dt(),children:j?"Loading...":"Refresh"})]}),o.jsx("small",{className:"text-muted d-block mb-2",children:"Endpoint ini dibaca via bearer token session aktif. Tanpa Authorization header valid, server akan balas 401."}),!A&&o.jsx(Lt,{variant:"secondary",className:"mb-2",children:j?"Memuat security posture...":"Belum ada data security posture."}),A&&o.jsxs(o.Fragment,{children:[o.jsxs(Ct,{className:"g-2 mb-2 scurity-posture-table",children:[o.jsx(Se,{md:6,children:o.jsx(ou,{responsive:!0,bordered:!0,size:"sm",className:"mb-0",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{style:{width:"56%"},children:"Service role configured"}),o.jsx("td",{children:Ve(!!A.serviceRoleConfigured,"READY","MISSING")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Provider key encryption"}),o.jsx("td",{children:Ve(!!A.providerKeyEncryptionConfigured,"READY","MISSING")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Strict secret env guard"}),o.jsx("td",{children:Ve(!!A.strictSecretEnvGuard,"ON","OFF")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Sensitive endpoint auth guard"}),o.jsx("td",{children:Ve(!!A.requireAuthForSensitiveEndpoints,"ON","OFF")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Public signup"}),o.jsx("td",{children:Ve(!A.publicSignupEnabled,"OFF (AMAN)","ON")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Leaked service-role env keys"}),o.jsx("td",{children:(A.leakedServiceRoleEnvKeys||[]).length>0?o.jsx("small",{className:"text-danger",children:A.leakedServiceRoleEnvKeys.join(", ")}):o.jsx(Ue,{bg:"success",children:"NONE"})})]})]})})}),o.jsx(Se,{md:6,children:o.jsx(ou,{responsive:!0,bordered:!0,size:"sm",className:"mb-0",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{style:{width:"56%"},children:"Email allowlist"}),o.jsxs("td",{children:[Ve(!!A.allowlistEnabled,"ON","OFF")," ",o.jsxs("small",{className:"text-muted",children:["(",Number(A.allowlistCount||0)," email)"]})]})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"CORS allow all origins"}),o.jsx("td",{children:Ve(!A.corsAllowAllOrigins,"OFF (AMAN)","ON")})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Allowed origins"}),o.jsx("td",{children:o.jsx("small",{className:"text-muted",children:Array.isArray(A.corsAllowedOrigins)&&A.corsAllowedOrigins.length>0?A.corsAllowedOrigins.join(", "):"-"})})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Service role rotation"}),o.jsx("td",{children:(ht=A.serviceRoleRotation)!=null&&ht.configured?o.jsxs(o.Fragment,{children:[(Ce=A.serviceRoleRotation)!=null&&Ce.stale?o.jsx(Ue,{bg:"warning",text:"dark",children:"STALE"}):o.jsx(Ue,{bg:"success",children:"OK"})," ",o.jsxs("small",{className:"text-muted",children:[(lt=A.serviceRoleRotation)==null?void 0:lt.daysSinceRotation," hari / max ",(bt=A.serviceRoleRotation)==null?void 0:bt.maxAgeDays," hari"]})]}):o.jsx(Ue,{bg:"secondary",children:"NOT SET"})})]})]})})})]}),He.length>0&&o.jsxs(Lt,{variant:"warning",className:"mb-0 py-2",children:[o.jsx("strong",{children:"Perlu tindakan:"}),o.jsx("ul",{className:"mb-0 mt-1 ps-3",children:He.map(V=>o.jsx("li",{children:V},V))})]})]})]})}),o.jsx(We,{className:"mb-3",children:o.jsxs(We.Body,{className:"py-3",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Backend Routing (Failover)"}),o.jsx("small",{className:"text-muted",children:"Test endpoint sebelum simpan"})]}),o.jsxs("small",{className:"text-muted d-block mb-2",children:["Default env: ",e.envPrimary||"-"]}),o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:5,children:[o.jsx(U.Label,{children:"Primary URL (Override)"}),o.jsx(U.Control,{type:"text",placeholder:e.envPrimary||"https://api-utama.onrender.com",value:p.override,onChange:V=>m(ie=>({...ie,override:V.target.value}))})]}),o.jsxs(Se,{md:5,children:[o.jsx(U.Label,{children:"Secondary URL (Optional)"}),o.jsx(U.Control,{type:"text",placeholder:e.envSecondary||"https://api-cadangan.onrender.com",value:p.secondary,onChange:V=>m(ie=>({...ie,secondary:V.target.value}))})]}),o.jsx(Se,{md:2,children:o.jsx(U.Check,{type:"switch",id:"allow-local-fallback",label:"Local fallback",checked:!!p.allowLocalFallback,onChange:V=>m(ie=>({...ie,allowLocalFallback:V.target.checked}))})})]}),o.jsxs("div",{className:"d-flex gap-2 mt-3 flex-wrap",children:[o.jsx(oe,{size:"sm",variant:"outline-primary",onClick:ne,disabled:u||f,children:u?"Testing...":"Test Connection"}),o.jsx(oe,{size:"sm",variant:"primary",onClick:q,disabled:f||u,children:f?"Saving...":"Save Routing"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:ge,disabled:u||f,children:"Reset"})]}),w&&o.jsxs("div",{className:"mt-2",children:[o.jsx("small",{className:w.ok?"text-success":"text-warning",children:w.ok?`Endpoint aktif: ${w.activeBase}`:"Tidak ada endpoint healthy dari daftar kandidat."}),!!((wr=w==null?void 0:w.checked)!=null&&wr.length)&&o.jsx("div",{className:"mt-1",children:o.jsx("small",{className:"text-muted",children:w.checked.map(V=>`${V.base||"-"} (${V.ok?"OK":V.error||"ERR"})`).join(" | ")})})]})]})}),o.jsx(We,{className:"mb-3",children:o.jsxs(We.Body,{className:"py-3",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Supabase Profile Switch"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:pe||!!De,onClick:()=>jt(),children:pe?"Loading...":"Refresh"})]}),o.jsxs("small",{className:"text-muted d-block",children:["Active profile file: ",(N==null?void 0:N.activeProfile)||"-"]}),o.jsxs("small",{className:"text-muted d-block",children:["Dual-write: ",(Dn=N==null?void 0:N.dualWrite)!=null&&Dn.enabled?($n=N==null?void 0:N.dualWrite)!=null&&$n.mirrorReady?`ON -> mirror ${((Bn=N==null?void 0:N.dualWrite)==null?void 0:Bn.mirrorProfile)||"-"}`:`ON (mirror not ready: ${((Un=N==null?void 0:N.dualWrite)==null?void 0:Un.reason)||"unknown"})`:"OFF"]}),o.jsxs("small",{className:"text-muted d-block mb-2",children:["Frontend client source: ",(R==null?void 0:R.source)||"env"," (",(R==null?void 0:R.url)||"-",")"]}),o.jsxs(Ct,{className:"g-2",children:[o.jsx(Se,{md:6,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{className:"py-2",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[o.jsx("strong",{children:"Primary"}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[(mt=(ln=N==null?void 0:N.profiles)==null?void 0:ln.primary)!=null&&mt.ready?o.jsx(Ue,{bg:"success",children:"Ready"}):(Zt=(nr=N==null?void 0:N.profiles)==null?void 0:nr.primary)!=null&&Zt.exists?o.jsx(Ue,{bg:"warning",text:"dark",children:"Incomplete"}):o.jsx(Ue,{bg:"secondary",children:"Missing"}),(N==null?void 0:N.activeProfile)==="primary"&&o.jsx("span",{title:"Active profile","aria-label":"Active profile",style:{width:10,height:10,borderRadius:"50%",display:"inline-block",backgroundColor:"#22c55e",boxShadow:"0 0 0 2px rgba(34, 197, 94, 0.18)"}})]})]}),o.jsx("small",{className:"text-muted d-block mt-1",children:((cs=(Or=N==null?void 0:N.profiles)==null?void 0:Or.primary)==null?void 0:cs.supabaseUrl)||"-"}),o.jsx(oe,{className:"mt-2",size:"sm",variant:"outline-primary",disabled:!((hr=(Wr=N==null?void 0:N.profiles)==null?void 0:Wr.primary)!=null&&hr.ready)||De==="primary",onClick:()=>Bt("primary"),children:De==="primary"?"Switching...":"Use Primary"})]})})}),o.jsx(Se,{md:6,children:o.jsx(We,{className:"h-100",children:o.jsxs(We.Body,{className:"py-2",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[o.jsx("strong",{children:"Backup"}),o.jsxs("div",{className:"d-flex align-items-center gap-2",children:[(Cs=(us=N==null?void 0:N.profiles)==null?void 0:us.backup)!=null&&Cs.ready?o.jsx(Ue,{bg:"success",children:"Ready"}):(xr=(ds=N==null?void 0:N.profiles)==null?void 0:ds.backup)!=null&&xr.exists?o.jsx(Ue,{bg:"warning",text:"dark",children:"Incomplete"}):o.jsx(Ue,{bg:"secondary",children:"Missing"}),(N==null?void 0:N.activeProfile)==="backup"&&o.jsx("span",{title:"Active profile","aria-label":"Active profile",style:{width:10,height:10,borderRadius:"50%",display:"inline-block",backgroundColor:"#22c55e",boxShadow:"0 0 0 2px rgba(34, 197, 94, 0.18)"}})]})]}),o.jsx("small",{className:"text-muted d-block mt-1",children:((cn=(zn=N==null?void 0:N.profiles)==null?void 0:zn.backup)==null?void 0:cn.supabaseUrl)||"-"}),o.jsx(oe,{className:"mt-2",size:"sm",variant:"outline-primary",disabled:!((ye=(je=N==null?void 0:N.profiles)==null?void 0:je.backup)!=null&&ye.ready)||De==="backup",onClick:()=>Bt("backup"),children:De==="backup"?"Switching...":"Use Backup"})]})})})]})]})}),o.jsx(We,{className:"mb-3",children:o.jsxs(We.Body,{className:"py-3",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[o.jsx("h6",{className:"mb-0",children:"TMDB Key (Movie/TV)"}),o.jsx(oe,{size:"sm",variant:"outline-secondary",disabled:X||me||Oe||M,onClick:()=>qe(),children:X?"Loading...":"Refresh"})]}),o.jsxs("small",{className:"text-muted d-block",children:["Source: ",P.keySource==="table"?"Settings (encrypted)":P.keySource==="env"?"Env fallback":"-"]}),o.jsxs("small",{className:"text-muted d-block mb-2",children:["Status: ",P.configured?"Configured":"Not configured","  Last4: ",P.keyLast4?`****${P.keyLast4}`:"-","  ","Owner: ",P.updatedByDisplayName||"-"]}),o.jsx(U,{onSubmit:on,children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:6,children:[o.jsx(U.Label,{children:"TMDB API Key"}),o.jsx(U.Control,{type:"password",placeholder:"Masukkan TMDB API key",value:W.apiKey,onChange:V=>Y(ie=>({...ie,apiKey:V.target.value})),autoComplete:"off"})]}),o.jsx(Se,{md:2,children:o.jsx(U.Check,{type:"switch",id:"tmdb-key-active",label:"Aktif",checked:!!W.isActive,disabled:P.keySource!=="table"&&P.configured,onChange:V=>Y(ie=>({...ie,isActive:V.target.checked}))})}),o.jsx(Se,{md:4,children:o.jsxs("div",{className:"d-grid d-md-flex gap-2",children:[o.jsx(oe,{type:"submit",disabled:me||X,children:me?o.jsx(Ri,{animation:"border",size:"sm"}):"Simpan TMDB"}),o.jsx(oe,{type:"button",variant:"outline-primary",disabled:M||X,onClick:fr,children:M?"Testing...":"Test"}),o.jsx(oe,{type:"button",variant:"outline-danger",disabled:!P.configured||Oe||me,onClick:xe,children:Oe?"...":"Hapus"})]})})]})}),P.keySource==="env"&&o.jsx("small",{className:"text-warning d-block mt-2",children:"TMDB saat ini dari env fallback. Hapus dari Settings tidak akan menghapus nilai di file env."}),ee&&o.jsxs("small",{className:"text-muted d-block mt-2",children:["Test OK (",ee.keySource||"-",")  secure image base: ",ee.imagesSecureBaseUrl||"-",Array.isArray(ee.posterSizes)&&ee.posterSizes.length>0?`  poster sizes: ${ee.posterSizes.join(", ")}`:""]})]})}),o.jsx(Lt,{variant:"secondary",children:"API key disimpan terenkripsi di server. Nilai full key tidak pernah ditampilkan lagi setelah disimpan."}),o.jsx(U,{className:"mb-4",onSubmit:Fn,children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:3,children:[o.jsx(U.Label,{children:"Provider"}),o.jsx(U.Select,{value:be.provider,onChange:V=>Le(ie=>({...ie,provider:V.target.value})),children:K5.map(V=>o.jsx("option",{value:V,children:V},V))})]}),o.jsxs(Se,{md:5,children:[o.jsx(U.Label,{children:"API Key"}),o.jsx(U.Control,{type:"password",placeholder:"Masukkan API key provider",value:be.apiKey,onChange:V=>Le(ie=>({...ie,apiKey:V.target.value})),autoComplete:"off"})]}),o.jsx(Se,{md:2,children:o.jsx(U.Check,{type:"switch",id:"provider-key-active",label:"Aktif",checked:!!be.isActive,onChange:V=>Le(ie=>({...ie,isActive:V.target.checked}))})}),o.jsx(Se,{md:2,children:o.jsx(oe,{type:"submit",className:"w-100",disabled:r||t,children:r?o.jsx(Ri,{animation:"border",size:"sm"}):"Simpan Key"})})]})}),o.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[o.jsx("h6",{className:"mb-0",children:"Provider Key Status"}),o.jsx("small",{className:"text-muted",children:"Free tier only dapat diatur per provider"})]}),t?o.jsx(Lt,{variant:"info",className:"mb-0",children:"Memuat konfigurasi provider key..."}):o.jsxs(ou,{responsive:!0,bordered:!0,hover:!0,size:"sm",className:"mb-0 align-middle",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Provider"}),o.jsx("th",{children:"Owner"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Last 4"}),o.jsx("th",{children:"Active"}),o.jsx("th",{children:"Free Only"}),o.jsx("th",{children:"Action"})]})}),o.jsx("tbody",{children:x.map(V=>{var Qe;const ie=i===V.provider,Ae=l===V.provider,H=E[V.provider];return o.jsxs(At.Fragment,{children:[o.jsxs("tr",{children:[o.jsx("td",{children:V.provider}),o.jsx("td",{children:V.configured?V.userDisplayName||"-":"Not configured"}),o.jsx("td",{children:V.configured?o.jsx(Ue,{bg:"success",children:"Configured"}):o.jsx(Ue,{bg:"secondary",children:"Not configured"})}),o.jsx("td",{children:V.keyLast4?`****${V.keyLast4}`:"-"}),o.jsx("td",{children:o.jsx(U.Check,{type:"switch",id:`active-${V.provider}`,checked:!!V.isActive,disabled:!V.configured||ie,onChange:Ie=>Ft(V.provider,Ie.target.checked)})}),o.jsx("td",{children:o.jsx(U.Check,{type:"switch",id:`free-only-${V.provider}`,checked:O(V.provider),onChange:Ie=>z(V.provider,Ie.target.checked)})}),o.jsxs("td",{className:"d-flex gap-2",children:[o.jsx(oe,{variant:"outline-primary",size:"sm",disabled:!V.configured||Ae,onClick:()=>S(V.provider),children:Ae?"Testing...":"Test"}),o.jsx(oe,{variant:"outline-danger",size:"sm",disabled:!V.configured||ie,onClick:()=>de(V.provider),children:ie?"...":"Hapus"})]})]}),H&&o.jsx("tr",{children:o.jsxs("td",{colSpan:7,children:[H.loading&&o.jsx("small",{className:"text-muted",children:"Mendeteksi model provider..."}),!H.loading&&H.error&&o.jsx("small",{className:"text-danger",children:H.error}),!H.loading&&!H.error&&o.jsxs("div",{children:[o.jsxs("small",{className:"text-muted d-block mb-1",children:["Terdeteksi ",((Qe=H.models)==null?void 0:Qe.length)||0," model",H.source?` (${H.source})`:"",H.freeOnlyRequested&&H.freeFilterApplied?" - free tier filter aktif":"",Array.isArray(H.models)?` - vision: ${H.models.filter(Ie=>(Ie==null?void 0:Ie.supportsVision)===!0).length}`:""]}),o.jsx("div",{className:"d-flex gap-1 flex-wrap",children:(H.models||[]).map(Ie=>o.jsxs(Ue,{bg:(Ie==null?void 0:Ie.isFeatured)===!0||nj(V.provider,Ie==null?void 0:Ie.id)?"warning":"light",text:"dark",children:[(Ie==null?void 0:Ie.isFeatured)===!0||nj(V.provider,Ie==null?void 0:Ie.id)?`* ${Ie.id}`:Ie.id,Ie.isFree===!0?" (free)":"",Ie.supportsVision===!0?" (vision)":""]},`${V.provider}-${Ie.id}`))})]})]})})]},V.provider)})})]})]}),o.jsx(_p,{position:"middle-center",className:"p-2 templates-toast-center",children:o.jsxs(_s,{show:F.show,bg:F.bg,autohide:F.autohide,delay:F.delay,onClose:se,children:[o.jsx(_s.Header,{closeButton:!0,children:o.jsx("strong",{className:"me-auto",children:"Konfirmasi"})}),o.jsxs(_s.Body,{className:F.bg==="warning"?"text-dark":"text-white",children:[o.jsx("div",{children:F.message}),F.mode==="confirm"&&Re&&o.jsxs("div",{className:"d-flex gap-2 justify-content-end mt-3",children:[o.jsx(oe,{size:"sm",variant:"outline-secondary",onClick:se,children:"Batal"}),o.jsx(oe,{size:"sm",variant:"danger",onClick:Je,children:"Hapus"})]})]})]})})]})}const Q5=["en-US","id-ID","ja-JP","ko-KR"],X5=["ID","US","GB","JP","KR","IN","MY","SG"],Z5={title:"Title",tagline:"Tagline",release_date:"Release Date",runtime:"Runtime",genres:"Genres",director:"Director (Movie) / Creator (TV)",cast_top:"Cast Top",overview:"Overview",keywords:"Keywords",certification_id:"Certification",production_companies:"Production Companies",networks:"Networks",production_countries:"Production Countries",vote_average:"Vote Average",budget:"Budget",revenue:"Revenue",status:"Status",original_language:"Original Language",watch_providers_id:"Watch Providers",trailer:"Trailer"},rj=[{key:"hasPoster",label:"Has Poster"},{key:"hasTrailer",label:"Has Trailer"},{key:"hasWatchProviders",label:"Has Watch Providers"}],e8=["title","release_date","runtime","genres","director","cast_top","overview","keywords","certification_id","watch_providers_id","trailer","production_companies","production_countries","vote_average"],t8=["title","release_date","runtime","genres","creator","cast_top","overview","keywords","certification_id","watch_providers_id","trailer","networks","production_companies","production_countries","vote_average"],sj={series:"Series",season:"Season",episode:"Episode"},ij={no_spoiler:"No Spoiler",light:"Light",full:"Full"},Jy={movie:[{key:"popular",label:"Popular"},{key:"top_rated",label:"Top Rated"},{key:"now_playing",label:"Now Playing"},{key:"upcoming",label:"Upcoming"}],tv:[{key:"popular",label:"Terpopular"},{key:"top_rated",label:"Top Rated"},{key:"airing_today",label:"Airing Today"},{key:"on_tv",label:"On TV"}]},aj={mediaType:"movie",category:"popular"},Xo=5,BR="tmdb_finder_browse_state_v1",UR="tmdb_finder_browse_accordion_state_v1",n8=["Series: membahas seluruh serial (all season), tanpa season/episode spesifik.","Season: membahas 1 season terpilih dan semua episodenya.","Episode: membahas 1 episode spesifik dalam season terpilih."];function kr(e){const t=String((e==null?void 0:e.mediaType)||"").trim().toLowerCase(),n=Number((e==null?void 0:e.tmdbId)||0);return!t||!Number.isInteger(n)||n<=0?"":`${t}:${n}`}function wu(e){if(Array.isArray(e))return String(e.find(s=>String(s||"").trim())||"").trim()||"";const t=String(e||"").trim();return t?t.split(",").map(r=>r.trim()).find(Boolean)||t:""}function r8(e){const t=String(e||"").trim();if(!t)return{query:"",tmdbId:null};const n=/\b(?:tmdb|id)\s*[:#=\-]?\s*(\d{1,12})\b/i,r=t.match(n);if(!r)return{query:t,tmdbId:null};const s=et(r[1]);return{query:t.replace(r[0]," ").replace(/[|,;]+/g," ").replace(/\s{2,}/g," ").trim(),tmdbId:s}}function sg(e,t="Request failed"){var i,a,l,c,u,d,f;const n=Number(((i=e==null?void 0:e.response)==null?void 0:i.status)||0),r=String(((c=(l=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:l.error)==null?void 0:c.code)||"").trim(),s=String(((f=(d=(u=e==null?void 0:e.response)==null?void 0:u.data)==null?void 0:d.error)==null?void 0:f.message)||(e==null?void 0:e.message)||t).trim();return n===401?"Sesi login sudah habis. Silakan login ulang.":r==="KEY_NOT_CONFIGURED"?"TMDB key belum dikonfigurasi. Isi dulu di Settings.":s||t}function oj(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"-":`$${new Intl.NumberFormat("en-US").format(Math.round(t))}`}function s8(e,t="movie-title"){return String(e||"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||t}function i8(e,t="w300"){const n=String(e||"").trim();return n?`https://image.tmdb.org/t/p/${t}${n}`:""}function a8(e="multi"){const t=String(e||"").trim().toLowerCase();return t==="tv"?Ol.filter(n=>n!=="budget"&&n!=="revenue"):t==="movie"?Ol.filter(n=>n!=="networks"):Ol}function jf(e,t="multi"){const n=e&&typeof e=="object"?e:{},r=String(t||"").trim().toLowerCase();return Ol.reduce((s,i)=>(r==="tv"&&(i==="budget"||i==="revenue")||r==="movie"&&i==="networks"||(s[i]=n[i]!==!1),s),{})}function o8(e){return Array.isArray(e)?e.some(t=>String(t||"").trim()):typeof e=="number"?Number.isFinite(e)&&e>0:String(e||"").trim().length>0}function Zo(e){return{hasPoster:!!String((e==null?void 0:e.posterUrl)||"").trim(),hasTrailer:!1,hasWatchProviders:!1,primaryGenre:wu((e==null?void 0:e.primaryGenre)||(e==null?void 0:e.genres)),resolved:!1}}function l8(e,{fallbackMediaType:t="multi",fallbackTitle:n="",tmdbId:r=null}={}){const s=e&&typeof e=="object"?e:{},i=s.movieOrTv&&typeof s.movieOrTv=="object"?s.movieOrTv:{},a=String(s.entityType||t||"movie").trim().toLowerCase()==="tv"?"tv":"movie",l=String(i.release_date||"").trim(),c=/^\d{4}/.test(l)?l.slice(0,4):"",u=Number(i.vote_average||0),d=et(i.tmdb_id||r),f=wu(i.genres),p=(Array.isArray(s.imageOptions)?s.imageOptions:[]).find(w=>String((w==null?void 0:w.source)||"").trim().toLowerCase()==="poster"),m=String((p==null?void 0:p.previewUrl)||(p==null?void 0:p.url)||"").trim();return{tmdbId:d||et(r)||0,mediaType:a,title:String(i.title||n||"").trim()||`TMDB #${d||r||""}`,originalTitle:"",year:c,releaseDate:l,rating:Number.isFinite(u)?Number(u.toFixed(1)):null,posterPath:null,posterUrl:m||null,primaryGenre:f||"",overview:String(i.overview||"").trim()}}function ji(e){return String(e||"").trim().toLowerCase()==="tv"?"tv":"movie"}function ha(e,t){var i;const n=ji(e),r=Jy[n]||[],s=String(t||"").trim().toLowerCase();return r.some(a=>a.key===s)?s:((i=r[0])==null?void 0:i.key)||"popular"}function Ar(e){const t=String(e||"").trim().toLowerCase();return Jb.includes(t)?t:"series"}function la(e){const t=String(e||"").trim().toLowerCase();return Yb.includes(t)?t:"light"}function et(e){const t=Number(e||0);return Number.isInteger(t)&&t>0?t:null}function ia(e={}){const t=e&&typeof e=="object"?e:{},n=Array.isArray(t.seasonOptions)?t.seasonOptions:[],r=Array.isArray(t.episodeOptions)?t.episodeOptions:[],s=t.season&&typeof t.season=="object"?t.season:null,i=t.episode&&typeof t.episode=="object"?t.episode:null;return{referenceScope:Ar(t.referenceScope||"series"),spoilerLevel:la(t.spoilerLevel||"light"),seasonCount:et(t.seasonCount),episodeCount:et(t.episodeCount),episodeType:String(t.episodeType||"").trim().toLowerCase()||null,season:s?{number:et(s.number),name:String(s.name||"").trim(),airDate:String(s.airDate||"").trim(),overview:String(s.overview||"").trim(),episodeCount:et(s.episodeCount)}:null,episode:i?{number:et(i.number),name:String(i.name||"").trim(),airDate:String(i.airDate||"").trim(),overview:String(i.overview||"").trim(),runtime:et(i.runtime),voteAverage:Number.isFinite(Number(i.voteAverage))?Number(Number(i.voteAverage).toFixed(1)):null,episodeType:String(i.episodeType||"").trim().toLowerCase()||null}:null,seasonOptions:n.map(a=>{const l=et(a==null?void 0:a.number);return l?{number:l,name:String((a==null?void 0:a.name)||"").trim(),airDate:String((a==null?void 0:a.airDate)||"").trim(),overview:String((a==null?void 0:a.overview)||"").trim(),episodeCount:et(a==null?void 0:a.episodeCount)}:null}).filter(Boolean),episodeOptions:r.map(a=>{const l=et(a==null?void 0:a.number);return l?{number:l,name:String((a==null?void 0:a.name)||"").trim(),airDate:String((a==null?void 0:a.airDate)||"").trim(),overview:String((a==null?void 0:a.overview)||"").trim(),runtime:et(a==null?void 0:a.runtime),voteAverage:Number.isFinite(Number(a==null?void 0:a.voteAverage))?Number(Number(a.voteAverage).toFixed(1)):null,episodeType:String((a==null?void 0:a.episodeType)||"").trim().toLowerCase()||null}:null}).filter(Boolean)}}function lj({referenceScope:e="series",season:t=null,episode:n=null}={}){const r=Ar(e),s=et(t==null?void 0:t.number),i=String((t==null?void 0:t.name)||"").trim(),a=s?`S${s}${i?`  ${i}`:""}`:"-";if(r==="series")return{season:"All Season",episode:"All Episode"};if(r==="season")return{season:a,episode:a!=="-"?`${a}  All Episode`:"All Episode"};const l=et(n==null?void 0:n.number),c=String((n==null?void 0:n.name)||"").trim(),u=l?`E${l}${c?`  ${c}`:""}`:"-";return{season:a,episode:a!=="-"?`${a}  ${u}`:u}}function c8(e,t,n={}){const r=e&&typeof e=="object"?e:{};if(String(t).trim().toLowerCase()!=="tv"){const m={...r};return delete m.networks,delete m.reference_scope,delete m.season_count,delete m.episode_count,delete m.episode_type,delete m.season_overview,delete m.episode_overview,delete m.season_label,delete m.episode_label,Object.keys(m).length?m:null}const i=Ar(n.referenceScope||r.reference_scope||"series"),a=et(n.seasonCount??r.season_count),l=et(n.episodeCount??r.episode_count),c=String(n.episodeType||r.episode_type||"").trim().toLowerCase()||null,u=String(n.seasonOverview||r.season_overview||"").trim(),d=String(n.episodeOverview||r.episode_overview||"").trim(),f=String(n.seasonLabel||r.season_label||"").trim(),g=String(n.episodeLabel||r.episode_label||"").trim(),p={...r,reference_scope:i,season_count:a??null,episode_count:l??null,episode_type:c||null,season_overview:u,episode_overview:d,season_label:f||"",episode_label:g||""};return delete p.budget,delete p.revenue,Object.keys(p).length?p:null}function u8(){if(typeof window>"u")return null;try{const e=JSON.parse(window.localStorage.getItem(BR)||"null");if(!e||typeof e!="object")return null;const t=ji(e.mediaType),n=ha(t,e.category),r=Number(e.page||1),s=Number.isFinite(r)?Math.max(1,Math.floor(r)):1;return{mediaType:t,category:n,page:s}}catch{return null}}function d8(e){if(!(typeof window>"u"))try{const t=ji(e==null?void 0:e.mediaType),n=ha(t,e==null?void 0:e.category),r=Number((e==null?void 0:e.page)||1),s=Number.isFinite(r)?Math.max(1,Math.floor(r)):1;window.localStorage.setItem(BR,JSON.stringify({mediaType:t,category:n,page:s}))}catch{}}function f8(){if(typeof window>"u")return!0;try{const e=window.localStorage.getItem(UR);return e!=="0"}catch{return!0}}function h8(e){if(!(typeof window>"u"))try{window.localStorage.setItem(UR,e?"1":"0")}catch{}}function p8(){var Gw,Jw,Yw,Qw,Xw,Zw,e0,t0,n0,r0,s0,i0,a0,o0,l0,c0,u0,d0,f0,h0,p0,m0,g0,y0,v0,b0,w0,x0,S0,_0,k0,j0,E0,N0,C0,T0,$0,O0,R0,A0,P0,I0,L0,M0,F0;const e=qi(),t=qa(),n=y.useMemo(()=>Xb(),[]),r=y.useMemo(()=>Wf(),[]),s=y.useMemo(()=>u8(),[]),i=y.useMemo(()=>f8(),[]),a=String(((Gw=t==null?void 0:t.state)==null?void 0:Gw.seedQuery)||"").trim(),[l,c]=y.useState((r==null?void 0:r.entityType)||n.mediaType||"multi"),[u,d]=y.useState(a||n.query||(r==null?void 0:r.query)||""),[f,g]=y.useState(n.year||(r==null?void 0:r.year)||""),[p,m]=y.useState((r==null?void 0:r.region)||n.region||"ID"),[w,b]=y.useState((r==null?void 0:r.language)||n.language||"en-US"),[h,v]=y.useState(Ar((r==null?void 0:r.referenceScope)||n.referenceScope||"series")),[x,k]=y.useState(la(((Jw=r==null?void 0:r.rules)==null?void 0:Jw.spoilerLevel)||n.spoilerLevel||"light")),[E,$]=y.useState(et(((Yw=r==null?void 0:r.season)==null?void 0:Yw.number)||((Xw=(Qw=r==null?void 0:r.tvContext)==null?void 0:Qw.season)==null?void 0:Xw.number))),[P,B]=y.useState(et(((Zw=r==null?void 0:r.episode)==null?void 0:Zw.number)||((t0=(e0=r==null?void 0:r.tvContext)==null?void 0:e0.episode)==null?void 0:t0.number))),[W,Y]=y.useState(()=>ia((r==null?void 0:r.tvContext)||{}).seasonOptions||[]),[ee,Q]=y.useState(()=>ia((r==null?void 0:r.tvContext)||{}).episodeOptions||[]),[X,fe]=y.useState(()=>jf(r==null?void 0:r.factLocks,(r==null?void 0:r.entityType)||(r==null?void 0:r.mediaType)||"multi")),[me,ve]=y.useState(!1),[Oe,T]=y.useState(!1),[M,I]=y.useState([]),[N,L]=y.useState({}),[A,_]=y.useState({hasPoster:!1,hasTrailer:!1,hasWatchProviders:!1}),[R,K]=y.useState(""),[pe,ue]=y.useState(!1),[j,$e]=y.useState(null),[De,rt]=y.useState((r==null?void 0:r.selectedImages)||[]),[st,ke]=y.useState((r==null?void 0:r.searchMeta)||null),[Re,J]=y.useState(""),[F,re]=y.useState(""),[be,Le]=y.useState(!1),[O,z]=y.useState([]),G=y.useRef(0),se=y.useRef(new Map),ne=y.useRef(0),q=y.useRef({}),ge=y.useRef(!1),[Te,qe]=y.useState(!1),[jt,Dt]=y.useState([]),Bt=ji((s==null?void 0:s.mediaType)||(r==null?void 0:r.entityType)||aj.mediaType),Fn=ha(Bt,(s==null?void 0:s.category)||aj.category),on=Math.max(1,Number((s==null?void 0:s.page)||1)||1),[En,fr]=y.useState({mediaType:Bt,category:Fn}),[Ft,Xn]=y.useState({mediaType:Bt,category:Fn}),[S,de]=y.useState({page:on,totalPages:1,totalResults:0,maxPage:500}),[xe,Je]=y.useState("poster"),[Ve,He]=y.useState("strict"),[Tt,Jt]=y.useState(i),[Ut,ht]=y.useState("browse"),[Ce,lt]=y.useState({page:1,totalPages:1,totalResults:0,maxPage:500});y.useEffect(()=>{Vh({enabled:!0,mediaType:l,query:u,year:f,region:p,language:w,referenceScope:h,spoilerLevel:x})},[w,l,u,h,p,x,f]),y.useEffect(()=>{const C=t!=null&&t.state&&typeof t.state=="object"?t.state:null;if(!C||!Object.prototype.hasOwnProperty.call(C,"seedQuery"))return;const te={...C};delete te.seedQuery,e(t.pathname,{replace:!0,state:Object.keys(te).length?te:null})},[t.pathname,t.state,e]);async function bt(){var C;try{const{data:te}=await Pt.auth.getSession(),we=(C=te==null?void 0:te.session)==null?void 0:C.access_token;return we?{Authorization:`Bearer ${we}`}:{}}catch{return{}}}function wr({tmdbId:C,seasonNumber:te,languageCode:we,regionCode:he}){const Ee=et(C),Be=et(te),nt=String(we||w||"").trim().toLowerCase(),Fe=String(he||p||"").trim().toUpperCase();return!Ee||!Be||!nt||!Fe?"":`${Ee}:${nt}:${Fe}:S${Be}`}function Dn({tmdbId:C,seasonNumber:te,languageCode:we,regionCode:he}){const Ee=wr({tmdbId:C,seasonNumber:te,languageCode:we,regionCode:he});if(!Ee)return[];const Be=se.current.get(Ee);return!Array.isArray(Be)||!Be.length?[]:Be.map(nt=>({...nt}))}function $n({tmdbId:C,seasonNumber:te,episodeOptions:we,languageCode:he,regionCode:Ee}){const Be=wr({tmdbId:C,seasonNumber:te,languageCode:he,regionCode:Ee});if(!Be)return;const nt=ia({episodeOptions:we}).episodeOptions||[];se.current.set(Be,nt.map(Fe=>({...Fe})))}function Bn({tmdbId:C,seasonNumber:te}){const we=et(C),he=et(te);if(!we||!he)return[];const Ee=Dn({tmdbId:we,seasonNumber:he});return Ee.length&&Q(Ee),Ee}function Un(C){const te=Number(C||0);if(!te)return;z(he=>he.filter(Ee=>Ee.id!==te));const we=q.current[te];we&&(clearTimeout(we),delete q.current[te])}function ln(C,te="warning",we=3600){const he=String(C||"").trim();if(!he)return;const Ee=ne.current+1;if(ne.current=Ee,z(Be=>[...Be,{id:Ee,message:he,variant:te}].slice(-4)),we>0){const Be=setTimeout(()=>{Un(Ee)},we);q.current[Ee]=Be}}function mt(){Le(!0)}function nr(){var nt,Fe,yt,gt;const C=Ar(h),te=String((j==null?void 0:j.entityType)||"").trim().toLowerCase(),we=String((ce==null?void 0:ce.entityType)||"").trim().toLowerCase();if(!(te==="tv"||we==="tv"))return null;const Ee=et(E||((Fe=(nt=j==null?void 0:j.tvContext)==null?void 0:nt.season)==null?void 0:Fe.number)),Be=et(P||((gt=(yt=j==null?void 0:j.tvContext)==null?void 0:yt.episode)==null?void 0:gt.number));return(C==="season"||C==="episode")&&!Ee?"Pilih Season dulu sebelum gunakan data TMDB.":C==="episode"&&!Be?"Pilih Episode dulu sebelum gunakan data TMDB.":null}y.useEffect(()=>()=>{Object.values(q.current).forEach(C=>{clearTimeout(C)}),q.current={}},[]);async function Zt(C,te={}){var gt,Ge,bn,Vt,Ht,wn,pt,dn;if(!(C!=null&&C.tmdbId))return;const we=String(C.mediaType||l||"multi").trim().toLowerCase(),he=we==="tv",Ee=Ar(te.referenceScope??h),Be=la(te.spoilerLevel??x),nt=Object.prototype.hasOwnProperty.call(te,"seasonNumber")?et(te.seasonNumber):et(E),Fe=Object.prototype.hasOwnProperty.call(te,"episodeNumber")?et(te.episodeNumber):et(P),yt={};he&&(yt.referenceScope=Ee,yt.rules={factual_only_from_tmdb:!0,no_hallucination:!0,spoilerLevel:Be},(Ee==="season"||Ee==="episode")&&nt&&(yt.seasonNumber=nt),Ee==="episode"&&Fe&&(yt.episodeNumber=Fe)),ue(!0),J("");try{const Wt=await bt(),xn=Object.keys(Wt).length?{headers:Wt}:{},qn=await Rt({method:"post",url:"/api/tmdb/detail",data:{tmdbId:Number(C.tmdbId),mediaType:we,region:p,language:w,...yt},...xn});if(!((gt=qn.data)!=null&&gt.ok)||!((Ge=qn.data)!=null&&Ge.data))throw new Error(((Vt=(bn=qn.data)==null?void 0:bn.error)==null?void 0:Vt.message)||"Gagal memuat detail TMDB");const Et=qn.data.data,Nt=ia((Et==null?void 0:Et.tvContext)||{});if(String((Et==null?void 0:Et.entityType)||"").trim().toLowerCase()==="tv"){const hn=et(((Ht=Et==null?void 0:Et.movieOrTv)==null?void 0:Ht.tmdb_id)||(C==null?void 0:C.tmdbId)),On=et(((wn=Nt.season)==null?void 0:wn.number)||nt);hn&&On&&$n({tmdbId:hn,seasonNumber:On,episodeOptions:Nt.episodeOptions||[],languageCode:w,regionCode:p}),v(Nt.referenceScope||Ee),k(Nt.spoilerLevel||Be),$(et((pt=Nt.season)==null?void 0:pt.number)),B(et((dn=Nt.episode)==null?void 0:dn.number)),Y(Nt.seasonOptions||[]),Q(Nt.episodeOptions||[])}else Y([]),Q([]),$(null),B(null);$e(Et);const fn=Array.isArray(Et.imageOptions)?Et.imageOptions:[],Sr=new Set(fn.map(hn=>String((hn==null?void 0:hn.url)||"").trim()).filter(Boolean));return rt(hn=>(Array.isArray(hn)?hn:[]).filter(hs=>Sr.has(String((hs==null?void 0:hs.url)||"").trim())).slice(0,aa)),Et}catch(Wt){return J(sg(Wt,"Gagal memuat detail TMDB")),$e(null),null}finally{ue(!1)}}async function Or(C,te){const we=Array.isArray(C)?C:[];if(!we.length){G.current===te&&L({});return}T(!0);try{const he=await bt(),Ee=Object.keys(he).length?{headers:he}:{},Be=await Promise.all(we.map(async Fe=>{var Ge,bn,Vt,Ht;const yt=kr(Fe),gt=Zo(Fe);if(!yt)return null;if(!Number.isInteger(Number(Fe==null?void 0:Fe.tmdbId)))return{key:yt,...gt,resolved:!0};try{const wn=await Rt({method:"post",url:"/api/tmdb/detail",data:{tmdbId:Number(Fe.tmdbId),mediaType:String(Fe.mediaType||l||"multi").trim().toLowerCase(),region:p,language:w},...Ee}),pt=(Ge=wn==null?void 0:wn.data)==null?void 0:Ge.data,dn=Array.isArray((bn=pt==null?void 0:pt.movieOrTv)==null?void 0:bn.watch_providers_id)?pt.movieOrTv.watch_providers_id.filter(Nt=>String(Nt||"").trim()):[],Wt=String(((Vt=pt==null?void 0:pt.movieOrTv)==null?void 0:Vt.trailer)||"").trim(),qn=(Array.isArray(pt==null?void 0:pt.imageOptions)?pt.imageOptions:[]).some(Nt=>String((Nt==null?void 0:Nt.url)||"").trim()),Et=wu((Ht=pt==null?void 0:pt.movieOrTv)==null?void 0:Ht.genres);return{key:yt,hasPoster:gt.hasPoster||qn,hasTrailer:!!Wt,hasWatchProviders:dn.length>0,primaryGenre:Et||gt.primaryGenre||"",resolved:!0}}catch{return{key:yt,...gt,resolved:!0}}}));if(G.current!==te)return;const nt={};Be.forEach(Fe=>{Fe!=null&&Fe.key&&(nt[Fe.key]={hasPoster:!!Fe.hasPoster,hasTrailer:!!Fe.hasTrailer,hasWatchProviders:!!Fe.hasWatchProviders,resolved:Fe.resolved!==!1})}),L(nt)}finally{G.current===te&&T(!1)}}function cs(C){rj.some(te=>te.key===C)&&_(te=>({...te,[C]:!te[C]}))}function Wr(C){Ol.includes(C)&&fe(te=>({...te,[C]:!te[C]}))}async function hr(C={}){var yt,gt,Ge,bn,Vt;const te=M.find(Ht=>kr(Ht)===R)||null;if(!te||String(te.mediaType||(j==null?void 0:j.entityType)||l||"").trim().toLowerCase()!=="tv")return;let he=Ar(Object.prototype.hasOwnProperty.call(C,"referenceScope")?C.referenceScope:h);const Ee=la(Object.prototype.hasOwnProperty.call(C,"spoilerLevel")?C.spoilerLevel:x);let Be=Object.prototype.hasOwnProperty.call(C,"seasonNumber")?et(C.seasonNumber):et(E),nt=Object.prototype.hasOwnProperty.call(C,"episodeNumber")?et(C.episodeNumber):et(P);const Fe=et(((yt=j==null?void 0:j.movieOrTv)==null?void 0:yt.tmdb_id)||(te==null?void 0:te.tmdbId));if(he==="series")Be=null,nt=null;else if(he==="season"){if(Be||(Be=et((gt=W==null?void 0:W[0])==null?void 0:gt.number)),!Be){ln("Season tidak tersedia untuk scope Season. Pilih kandidat TV lain atau ganti language/region.","warning");return}Bn({tmdbId:Fe,seasonNumber:Be}),nt=null}else if(he==="episode"){if(Be||(Be=et((Ge=W==null?void 0:W[0])==null?void 0:Ge.number)),!Be){ln("Pilih Season dulu sebelum masuk ke scope Episode.","warning");return}const Ht=Bn({tmdbId:Fe,seasonNumber:Be});if(!nt&&Ht.length&&(nt=et((bn=Ht[0])==null?void 0:bn.number)),nt||(nt=et((Vt=ee==null?void 0:ee[0])==null?void 0:Vt.number)),!nt){ln("Episode belum tersedia. Pilih Season yang punya episode, lalu pilih Episode.","warning");return}}v(he),k(Ee),$(Be),B(nt),await Zt(te,{referenceScope:he,spoilerLevel:Ee,seasonNumber:Be,episodeNumber:nt})}async function us(C){var Ee;const te=Ar(C),we=et(((Ee=j==null?void 0:j.movieOrTv)==null?void 0:Ee.tmdb_id)||(ae==null?void 0:ae.tmdbId)),he=et(E);te==="episode"&&we&&he&&Bn({tmdbId:we,seasonNumber:he}),await hr({referenceScope:C})}async function Cs(C){var he;const te=et(C);if(!te){ln("Pilih Season yang valid.","warning");return}const we=et(((he=j==null?void 0:j.movieOrTv)==null?void 0:he.tmdb_id)||(ae==null?void 0:ae.tmdbId));we&&(Bn({tmdbId:we,seasonNumber:te}).length||Q([])),B(null),await hr({referenceScope:"season",seasonNumber:te,episodeNumber:null})}async function ds(C){const te=et(C);if(!te){ln("Pilih Episode yang valid.","warning");return}await hr({referenceScope:"episode",episodeNumber:te})}const xr=y.useMemo(()=>!Array.isArray(M)||!M.length?[]:M.filter(C=>{const te=kr(C),he=(te?N[te]:null)||Zo(C);return!(A.hasPoster&&!he.hasPoster||A.hasTrailer&&he.resolved&&!he.hasTrailer||A.hasWatchProviders&&he.resolved&&!he.hasWatchProviders)}),[N,A,M]),zn=Ut==="search",cn=xr,je=y.useMemo(()=>{const C=j==null?void 0:j.movieOrTv,we=String((j==null?void 0:j.entityType)||"").trim().toLowerCase()==="tv"?t8:e8,he=we.length;if(!C||typeof C!="object")return{total:he,filled:0,percent:0,variant:"secondary"};const Ee=we.reduce((Fe,yt)=>Fe+(o8(C[yt])?1:0),0),Be=he>0?Math.round(Ee/he*100):0,nt=Be>=85?"success":Be>=60?"warning":"danger";return{total:he,filled:Ee,percent:Be,variant:nt}},[j==null?void 0:j.entityType,j==null?void 0:j.movieOrTv]),ye=y.useMemo(()=>{var he;const C=ji(En.mediaType),te=ha(C,En.category);return((he=(Jy[C]||[]).find(Ee=>Ee.key===te))==null?void 0:he.label)||te},[En.category,En.mediaType]),V=y.useMemo(()=>{const C=Math.max(1,Number((S==null?void 0:S.totalPages)||1)),te=Math.max(1,Math.min(Number((S==null?void 0:S.page)||1),C)),we=Math.floor(Xo/2);let he=Math.max(1,te-we),Ee=Math.min(C,he+Xo-1);he=Math.max(1,Ee-Xo+1);const Be=[];for(let nt=he;nt<=Ee;nt+=1)Be.push(nt);return Be},[S==null?void 0:S.page,S==null?void 0:S.totalPages]),ie=y.useMemo(()=>{const C=Math.max(1,Number((Ce==null?void 0:Ce.totalPages)||1)),te=Math.max(1,Math.min(Number((Ce==null?void 0:Ce.page)||1),C)),we=Math.floor(Xo/2);let he=Math.max(1,te-we),Ee=Math.min(C,he+Xo-1);he=Math.max(1,Ee-Xo+1);const Be=[];for(let nt=he;nt<=Ee;nt+=1)Be.push(nt);return Be},[Ce==null?void 0:Ce.page,Ce==null?void 0:Ce.totalPages]),Ae=y.useMemo(()=>{const C=Math.max(1,Number((S==null?void 0:S.totalPages)||1)),te=V[V.length-1]||0,we=Math.max(1,C-1),he=[];for(let Ee=we;Ee<=C;Ee+=1)Ee<=te||V.includes(Ee)||he.push(Ee);return he},[V,S==null?void 0:S.totalPages]),H=y.useMemo(()=>{const C=Math.max(1,Number((Ce==null?void 0:Ce.totalPages)||1)),te=ie[ie.length-1]||0,we=Math.max(1,C-1),he=[];for(let Ee=we;Ee<=C;Ee+=1)Ee<=te||ie.includes(Ee)||he.push(Ee);return he},[ie,Ce==null?void 0:Ce.totalPages]),Qe=y.useMemo(()=>{if(!Ae.length)return!1;const C=V[V.length-1]||0;return Ae[0]>C+1},[V,Ae]),Ie=y.useMemo(()=>{if(!H.length)return!1;const C=ie[ie.length-1]||0;return H[0]>C+1},[ie,H]);y.useEffect(()=>{var Fe,yt,gt,Ge,bn,Vt,Ht,wn,pt,dn,Wt,xn,qn;if(!(r!=null&&r.tmdbId))return;const C={tmdbId:Number(r.tmdbId),mediaType:String(r.entityType||r.mediaType||l||"multi").trim().toLowerCase()},te=Ar((r==null?void 0:r.referenceScope)||((Fe=r==null?void 0:r.tvContext)==null?void 0:Fe.referenceScope)||"series"),we=la(((yt=r==null?void 0:r.rules)==null?void 0:yt.spoilerLevel)||((gt=r==null?void 0:r.tvContext)==null?void 0:gt.spoilerLevel)||"light"),he=et(((Ge=r==null?void 0:r.season)==null?void 0:Ge.number)||((Vt=(bn=r==null?void 0:r.tvContext)==null?void 0:bn.season)==null?void 0:Vt.number)),Ee=et(((Ht=r==null?void 0:r.episode)==null?void 0:Ht.number)||((pt=(wn=r==null?void 0:r.tvContext)==null?void 0:wn.episode)==null?void 0:pt.number));fe(jf(r==null?void 0:r.factLocks,(r==null?void 0:r.entityType)||(r==null?void 0:r.mediaType)||l)),v(te),k(we),$(he),B(Ee);const Be=ia((r==null?void 0:r.tvContext)||{});Y(Be.seasonOptions||[]),Q(Be.episodeOptions||[]),K(kr(C)),rt(Array.isArray(r.selectedImages)?r.selectedImages.slice(0,aa):[]),Zt(C,{referenceScope:te,spoilerLevel:we,seasonNumber:he,episodeNumber:Ee});const nt=kr(C);nt&&L({[nt]:{hasPoster:!!String(((dn=r==null?void 0:r.candidate)==null?void 0:dn.posterUrl)||"").trim(),hasTrailer:!!String(((Wt=r==null?void 0:r.movieOrTv)==null?void 0:Wt.trailer)||"").trim(),hasWatchProviders:Array.isArray((xn=r==null?void 0:r.movieOrTv)==null?void 0:xn.watch_providers_id)&&r.movieOrTv.watch_providers_id.some(Et=>String(Et||"").trim()),primaryGenre:wu((qn=r==null?void 0:r.movieOrTv)==null?void 0:qn.genres),resolved:!0}})},[]),y.useEffect(()=>{ge.current||(ge.current=!0,Kt(Bt,Fn,{silent:!0,autoSelect:!1,page:on}))},[r==null?void 0:r.tmdbId]),y.useEffect(()=>{d8({mediaType:Ft.mediaType,category:Ft.category,page:S.page})},[S.page,Ft.category,Ft.mediaType]),y.useEffect(()=>{h8(Tt)},[Tt]);function _t(C){Jt(String(C||"")==="tmdb-browse")}async function It(C={}){var nt,Fe,yt,gt,Ge,bn,Vt,Ht,wn,pt,dn,Wt,xn,qn;const te=r8(u),we=String(te.query||"").trim(),he=et(te.tmdbId),Ee=Math.max(1,Number((C==null?void 0:C.page)||1)||1);if(!we&&!he){J("Judul Film/Series wajib diisi sebelum cari TMDB.");return}const Be=G.current+1;G.current=Be,ht("search"),ve(!0),J(""),re(""),I([]),L({}),T(!1),K(""),$e(null),rt([]),ke(null),lt(Et=>({...Et,page:Ee,totalPages:1,totalResults:0}));try{const Et=await bt(),Nt=Object.keys(Et).length?{headers:Et}:{};if(he){const Rn=await Rt({method:"post",url:"/api/tmdb/detail",data:{tmdbId:he,mediaType:l,region:p,language:w},...Nt});if(!((nt=Rn.data)!=null&&nt.ok)||!((Fe=Rn.data)!=null&&Fe.data))throw new Error(((gt=(yt=Rn.data)==null?void 0:yt.error)==null?void 0:gt.message)||"Gagal memuat detail TMDB dari ID");const Yr=Rn.data.data,Lo=[l8(Yr,{fallbackMediaType:l,fallbackTitle:we||`TMDB #${he}`,tmdbId:he})].filter(_r=>Number.isFinite(Number(_r==null?void 0:_r.tmdbId))&&Number(_r.tmdbId)>0);ke({count:Lo.length,query:we?`${we}  id:${he}`:`id:${he}`,languageCode:String(((bn=(Ge=Rn.data.data)==null?void 0:Ge.debug)==null?void 0:bn.languageCode)||w).trim(),region:String(p||"").trim(),keySource:String(((Ht=(Vt=Rn.data.data)==null?void 0:Vt.debug)==null?void 0:Ht.keySource)||"").trim()||null}),lt({page:1,totalPages:1,totalResults:Lo.length,maxPage:1}),I(Lo);const VR=Lo.reduce((_r,Wp)=>{const Fo=kr(Wp);return Fo&&(_r[Fo]=Zo(Wp)),_r},{});if(L(VR),!Lo.length){re("ID TMDB valid tetapi kandidat tidak bisa dipetakan.");return}const HR=Lo[0],qR=kr(HR);K(qR),$e(Yr);const Mo=ia((Yr==null?void 0:Yr.tvContext)||{});String((Yr==null?void 0:Yr.entityType)||"").trim().toLowerCase()==="tv"?(v(Mo.referenceScope||Ar(h)),k(Mo.spoilerLevel||la(x)),$(et((wn=Mo.season)==null?void 0:wn.number)),B(et((pt=Mo.episode)==null?void 0:pt.number)),Y(Mo.seasonOptions||[]),Q(Mo.episodeOptions||[])):(Y([]),Q([]),$(null),B(null));const KR=Array.isArray(Yr.imageOptions)?Yr.imageOptions:[],WR=new Set(KR.map(_r=>String((_r==null?void 0:_r.url)||"").trim()).filter(Boolean));rt(_r=>(Array.isArray(_r)?_r:[]).filter(Fo=>WR.has(String((Fo==null?void 0:Fo.url)||"").trim())).slice(0,aa));return}const fn=await Rt({method:"post",url:"/api/tmdb/search",data:{query:we,mediaType:l,...f?{year:f}:{},region:p,language:w,page:Ee,limit:14},...Nt});if(!((dn=fn.data)!=null&&dn.ok)||!((Wt=fn.data)!=null&&Wt.data))throw new Error(((qn=(xn=fn.data)==null?void 0:xn.error)==null?void 0:qn.message)||"Gagal mencari TMDB");const Sr=Array.isArray(fn.data.data.candidates)?fn.data.data.candidates:[];ke({count:Number(fn.data.data.count||Sr.length||0),query:String(fn.data.data.query||we).trim(),languageCode:String(fn.data.data.languageCode||w).trim(),region:String(fn.data.data.region||p).trim(),keySource:String(fn.data.data.keySource||"").trim()||null});const hn=Math.max(1,Number(fn.data.data.page||Ee)||Ee),On=Math.max(1,Number(fn.data.data.maxPage||500)||500),hs=Math.max(1,Math.min(Number(fn.data.data.totalPages||1)||1,On)),Rd=Math.max(0,Number(fn.data.data.totalResults||0)||0);lt({page:Math.min(hn,hs),totalPages:hs,totalResults:Rd,maxPage:On}),I(Sr);const Ad=Sr.reduce((Rn,Yr)=>{const Kp=kr(Yr);return Kp&&(Rn[Kp]=Zo(Yr)),Rn},{});if(L(Ad),!Sr.length){re("TMDB tidak menemukan kandidat untuk query ini.");return}Or(Sr,Be);const gc=Sr[0],Pd=kr(gc);K(Pd),await Zt(gc)}catch(Et){J(sg(Et,"Gagal mencari TMDB"))}finally{ve(!1)}}async function Kt(C,te,we={}){var gt,Ge,bn,Vt;const he=ji(C),Ee=ha(he,te),Be=Math.max(1,Number((we==null?void 0:we.page)||1)||1),nt=G.current+1;G.current=nt;const Fe=we&&we.silent===!0,yt=!we||we.autoSelect!==!1;ht("browse"),qe(!0),J(""),Fe||re(""),fr({mediaType:he,category:Ee}),Xn({mediaType:he,category:Ee});try{const Ht=await bt(),wn=Object.keys(Ht).length?{headers:Ht}:{},pt=await Rt({method:"post",url:"/api/tmdb/browse",data:{mediaType:he,category:Ee,page:Be,language:w,region:p,limit:14},...wn});if(!((gt=pt.data)!=null&&gt.ok)||!((Ge=pt.data)!=null&&Ge.data))throw new Error(((Vt=(bn=pt.data)==null?void 0:bn.error)==null?void 0:Vt.message)||"Gagal memuat kategori TMDB");const dn=Array.isArray(pt.data.data.candidates)?pt.data.data.candidates:[],Wt=String(pt.data.data.mediaType||he).trim().toLowerCase()==="tv"?"tv":"movie",xn=ha(Wt,String(pt.data.data.category||Ee).trim().toLowerCase()),qn=Math.max(1,Number(pt.data.data.page||Be)||Be),Et=Math.max(1,Number(pt.data.data.maxPage||500)||500),Nt=Math.max(1,Math.min(Number(pt.data.data.totalPages||1)||1,Et)),fn=Math.max(0,Number(pt.data.data.totalResults||0)||0);Dt(dn),fr({mediaType:Wt,category:xn}),Xn({mediaType:Wt,category:xn}),de({page:Math.min(qn,Nt),totalPages:Nt,totalResults:fn,maxPage:Et});const Sr=dn.reduce((hn,On)=>{const hs=kr(On);return hs&&(hn[hs]=Zo(On)),hn},{});if(L(Sr),T(!1),I(dn),ke({count:Number(pt.data.data.count||dn.length||0),query:`[${Wt.toUpperCase()}] ${xn}  page ${Math.min(qn,Nt)}`,languageCode:String(pt.data.data.languageCode||w).trim(),region:String(pt.data.data.region||p).trim(),keySource:String(pt.data.data.keySource||"").trim()||null}),!dn.length){K(""),$e(null),rt([]),Fe||re("Kategori TMDB ini belum punya hasil untuk language/region saat ini.");return}if(Or(dn,nt),yt){const hn=dn[0],On=kr(hn);K(On),rt([]),await Zt(hn)}}catch(Ht){J(sg(Ht,"Gagal memuat kategori TMDB"))}finally{qe(!1)}}function Gr(C){const te=ji(C),we=ha(te,"");Xn({mediaType:te,category:we}),Kt(te,we,{autoSelect:!1,page:1})}function Ts(C){const te=ji((Ft==null?void 0:Ft.mediaType)||"movie"),we=ha(te,C);Xn({mediaType:te,category:we}),Kt(te,we,{autoSelect:!1,page:1})}function $s(C){const te=Math.max(1,Number((S==null?void 0:S.totalPages)||1)),we=Math.max(1,Math.min(Number(C||1)||1,te)),he=Math.max(1,Math.min(Number((S==null?void 0:S.page)||1)||1,te));we===he||Te||Kt(Ft.mediaType,Ft.category,{autoSelect:!1,page:we,silent:!0})}function fs(C){const te=Math.max(1,Number((Ce==null?void 0:Ce.totalPages)||1)),we=Math.max(1,Math.min(Number(C||1)||1,te)),he=Math.max(1,Math.min(Number((Ce==null?void 0:Ce.page)||1)||1,te));we===he||me||It({page:we})}function mc(){Kt(Ft.mediaType,Ft.category,{autoSelect:!1,page:Math.max(1,Number((S==null?void 0:S.page)||1)||1),silent:!0})}async function Wa(C){const te=kr(C);K(te),rt([]),await Zt(C)}function Gi(C){const te=String(C||"").trim();te&&(J(""),rt(we=>{const he=Array.isArray(we)?we:[];return he.some(Be=>String((Be==null?void 0:Be.url)||"")===te)?he.filter(Be=>String((Be==null?void 0:Be.url)||"")!==te):he.length>=aa?(J(`Maksimal ${aa} gambar TMDB yang bisa dipakai.`),he):[...he,{type:"url",url:te,source:"tmdb"}]}))}function Rr(){var hn,On,hs,Rd,Ad,gc,Pd;const C=M.find(Rn=>kr(Rn)===R)||null,te=Number(((hn=j==null?void 0:j.movieOrTv)==null?void 0:hn.tmdb_id)||(C==null?void 0:C.tmdbId)||(r==null?void 0:r.tmdbId)||0);if(!Number.isInteger(te)||te<=0)return null;const we=String(((On=j==null?void 0:j.movieOrTv)==null?void 0:On.release_date)||(C==null?void 0:C.releaseDate)||(r==null?void 0:r.releaseDate)||"").trim(),he=String(((hs=j==null?void 0:j.movieOrTv)==null?void 0:hs.title)||(C==null?void 0:C.title)||(r==null?void 0:r.title)||u||"").trim(),Ee=String((C==null?void 0:C.year)||"").trim(),Be=/^\d{4}/.test(we)?we.slice(0,4):"",nt=/^\d{4}$/.test(Ee)?Ee:Be||(/^\d{4}$/.test(String(f||"").trim())?String(f||"").trim():""),Fe=C?{tmdbId:Number(C.tmdbId||te),mediaType:String(C.mediaType||(j==null?void 0:j.entityType)||l||"multi").trim().toLowerCase(),title:String(C.title||((Rd=j==null?void 0:j.movieOrTv)==null?void 0:Rd.title)||"").trim(),year:String(C.year||"").trim(),rating:Number.isFinite(Number(C.rating))?Number(C.rating):null,posterUrl:String(C.posterUrl||"").trim()}:(r==null?void 0:r.candidate)||null,yt=String((j==null?void 0:j.entityType)||(C==null?void 0:C.mediaType)||(r==null?void 0:r.entityType)||l||"movie").trim().toLowerCase()==="tv"?"tv":"movie",gt=yt==="tv",Ge=gt?ia((j==null?void 0:j.tvContext)||(r==null?void 0:r.tvContext)||{}):null,bn={factual_only_from_tmdb:((Ad=j==null?void 0:j.rules)==null?void 0:Ad.factual_only_from_tmdb)!==!1,no_hallucination:((gc=j==null?void 0:j.rules)==null?void 0:gc.no_hallucination)!==!1,spoilerLevel:la(((Pd=j==null?void 0:j.rules)==null?void 0:Pd.spoilerLevel)||(Ge==null?void 0:Ge.spoilerLevel)||x||"light")},Vt=gt?Ar((Ge==null?void 0:Ge.referenceScope)||h||"series"):null,Ht=et(E),wn=et(P),pt=Ge!=null&&Ge.season&&et(Ge.season.number)?Ge.season:null,dn=Array.isArray(Ge==null?void 0:Ge.seasonOptions)&&Ge.seasonOptions.find(Rn=>et(Rn==null?void 0:Rn.number)===Ht)||null,Wt=gt&&(Vt==="season"||Vt==="episode")?pt||dn||(Ht?{number:Ht}:null):null,xn=Ge!=null&&Ge.episode&&et(Ge.episode.number)?Ge.episode:null,qn=Array.isArray(Ge==null?void 0:Ge.episodeOptions)&&Ge.episodeOptions.find(Rn=>et(Rn==null?void 0:Rn.number)===wn)||null,Et=gt&&Vt==="episode"?xn||qn||(wn?{number:wn}:null):null,Nt=gt?lj({referenceScope:Vt,season:Wt,episode:Et}):null,fn=(j==null?void 0:j.movieOrTv)||(r==null?void 0:r.movieOrTv)||null,Sr=c8(fn,yt,gt?{referenceScope:Vt,seasonCount:Ge==null?void 0:Ge.seasonCount,episodeCount:Ge==null?void 0:Ge.episodeCount,episodeType:Ge==null?void 0:Ge.episodeType,seasonOverview:Wt==null?void 0:Wt.overview,episodeOverview:Et==null?void 0:Et.overview,seasonLabel:Nt==null?void 0:Nt.season,episodeLabel:Nt==null?void 0:Nt.episode}:{});return{tmdbId:te,entityType:yt,title:he,query:he,year:nt,releaseDate:we,region:p,language:w,rules:bn,...gt?{referenceScope:Vt}:{},...gt&&Wt?{season:Wt}:{},...gt&&Et?{episode:Et}:{},...gt&&Nt?{scopeLabels:Nt}:{},factLocks:jf(X,yt),selectedImages:De,candidate:Fe,searchMeta:st||(r==null?void 0:r.searchMeta)||null,movieOrTv:Sr,...gt?{tvContext:(j==null?void 0:j.tvContext)||(r==null?void 0:r.tvContext)||null}:{},debug:(j==null?void 0:j.debug)||null}}function Ji({navigateBack:C=!1}={}){const te=nr();if(te)return ln(te,"warning"),!1;const we=Rr();return we?RO(we)?C?(e("/generate",{state:{tmdbSelectionUpdatedAt:Date.now()}}),!0):(re("Data TMDB sudah diterapkan ke Generate. Anda bisa lanjut eksplor kandidat lain."),!0):(ln("Gagal menyimpan pilihan TMDB ke local storage.","danger"),!1):(ln("Pilih kandidat TMDB terlebih dulu.","warning"),!1)}function vn(){Ji({navigateBack:!0})}function D(){Ji({navigateBack:!1})}function le(){AO(),Vh({query:"",year:""}),rt([]),$e(null),fe(jf(null,l)),d(""),g(""),v("series"),k("light"),$(null),B(null),Y([]),Q([]),K(""),ht("browse"),lt({page:1,totalPages:1,totalResults:0,maxPage:500}),re("Pilihan TMDB dihapus dari Generate.")}const ce=Rr(),ae=M.find(C=>kr(C)===R)||null,Me=y.useMemo(()=>(Array.isArray(j==null?void 0:j.imageOptions)?j.imageOptions:[]).filter(C=>String((C==null?void 0:C.url)||"").trim()),[j==null?void 0:j.imageOptions]),Ye=y.useMemo(()=>Me.filter(C=>String((C==null?void 0:C.source)||"").trim().toLowerCase()==="poster"),[Me]),ct=y.useMemo(()=>Me.filter(C=>String((C==null?void 0:C.source)||"").trim().toLowerCase()==="backdrop"),[Me]);y.useEffect(()=>{if(!(xe==="poster"&&Ye.length>0)&&!(xe==="backdrop"&&ct.length>0)){if(Ye.length>0){Je("poster");return}if(ct.length>0){Je("backdrop");return}Je("poster")}},[xe,ct.length,Ye.length]);const ot=y.useMemo(()=>{var Be,nt;if(String((j==null?void 0:j.entityType)||(ae==null?void 0:ae.mediaType)||"").trim().toLowerCase()==="tv"){const Fe=String(((nt=(Be=j==null?void 0:j.tvContext)==null?void 0:Be.season)==null?void 0:nt.posterPath)||"").trim(),yt=Fe?i8(Fe,"w300"):"";if(yt)return yt}const te=String((ae==null?void 0:ae.posterUrl)||"").trim();if(te)return te;const we=Me,he=we.find(Fe=>{const yt=String((Fe==null?void 0:Fe.source)||"").trim().toLowerCase(),gt=String((Fe==null?void 0:Fe.previewUrl)||(Fe==null?void 0:Fe.url)||"").trim();return yt==="poster"&&gt});if(he)return String(he.previewUrl||he.url||"").trim();const Ee=we.find(Fe=>String((Fe==null?void 0:Fe.previewUrl)||(Fe==null?void 0:Fe.url)||"").trim());return Ee?String(Ee.previewUrl||Ee.url||"").trim():""},[j==null?void 0:j.entityType,(r0=(n0=j==null?void 0:j.tvContext)==null?void 0:n0.season)==null?void 0:r0.posterPath,Me,ae==null?void 0:ae.mediaType,ae==null?void 0:ae.posterUrl]),wt=String((j==null?void 0:j.entityType)||(ae==null?void 0:ae.mediaType)||(ce==null?void 0:ce.entityType)||l||"multi").trim().toLowerCase(),dt=wt==="tv",Vn=y.useMemo(()=>a8(wt),[wt]),un=Vn.reduce((C,te)=>C+(X[te]!==!1?1:0),0),Yi=ce?OO(ce):null,Io=y.useMemo(()=>ce?{selection:ce,debug:(j==null?void 0:j.debug)||null}:null,[j==null?void 0:j.debug,ce]),gi=Ve==="debug"?Io:Yi,$t=y.useMemo(()=>ia((j==null?void 0:j.tvContext)||{}),[j==null?void 0:j.tvContext]),Jr=y.useMemo(()=>Ar($t.referenceScope||h),[h,$t.referenceScope]),Ga=sj[$t.referenceScope]||$t.referenceScope||"-",Qi=ij[$t.spoilerLevel]||$t.spoilerLevel||"-",Xi=y.useMemo(()=>{var he,Ee;if(!dt)return{season:"-",episode:"-"};const C=lj({referenceScope:$t.referenceScope||h,season:$t.season,episode:$t.episode}),te=String(((he=j==null?void 0:j.movieOrTv)==null?void 0:he.season_label)||"").trim(),we=String(((Ee=j==null?void 0:j.movieOrTv)==null?void 0:Ee.episode_label)||"").trim();return{season:te||C.season||"-",episode:we||C.episode||"-"}},[(s0=j==null?void 0:j.movieOrTv)==null?void 0:s0.episode_label,(i0=j==null?void 0:j.movieOrTv)==null?void 0:i0.season_label,dt,h,$t.episode,$t.referenceScope,$t.season]),Od=y.useMemo(()=>{if(!dt)return"";if(Jr==="episode"){const C=String(Xi.episode||"").trim();return`Scope: Episode  ${C&&C!=="-"?C:"Pilih Episode"}`}if(Jr==="season"){const C=String(Xi.season||"").trim();return`Scope: Season  ${C&&C!=="-"?C:"Pilih Season"}`}return"Scope: Series  All Season"},[dt,Jr,Xi.episode,Xi.season]),yi=dt?"Creator":"Director",Hp=dt?((a0=j==null?void 0:j.movieOrTv)==null?void 0:a0.creator)||(Array.isArray((o0=j==null?void 0:j.movieOrTv)==null?void 0:o0.creator_list)?j.movieOrTv.creator_list[0]:"")||((l0=j==null?void 0:j.movieOrTv)==null?void 0:l0.director)||"-":((c0=j==null?void 0:j.movieOrTv)==null?void 0:c0.director)||(Array.isArray((u0=j==null?void 0:j.movieOrTv)==null?void 0:u0.director_list)?j.movieOrTv.director_list[0]:"")||"-",Hn=y.useMemo(()=>dt&&E?String(E):"",[dt,E]),Zi=y.useMemo(()=>dt&&P?String(P):"",[dt,P]),Os=y.useMemo(()=>Ar(h),[h]),Hw=dt&&(Os==="season"||Os==="episode"),qw=dt&&Os==="episode",Kw=dt&&(Jr==="season"||Jr==="episode"),qp=dt&&Jr==="episode",zR=async(C,te)=>{var wn,pt,dn,Wt;(wn=te==null?void 0:te.preventDefault)==null||wn.call(te),(pt=te==null?void 0:te.stopPropagation)==null||pt.call(te);const he=String((j==null?void 0:j.entityType)||(ae==null?void 0:ae.mediaType)||(ce==null?void 0:ce.entityType)||"movie").trim().toLowerCase()==="tv"?"tv":"movie",Ee=String(((dn=j==null?void 0:j.movieOrTv)==null?void 0:dn.title)||(ae==null?void 0:ae.title)||"").trim(),Be=s8(Ee,"title"),nt=String(((Wt=j==null?void 0:j.movieOrTv)==null?void 0:Wt.release_date)||"").trim(),Fe=String((ae==null?void 0:ae.year)||"").trim(),yt=/^\d{4}$/.test(Fe)?Fe:/^\d{4}/.test(nt)?nt.slice(0,4):"unknown-year",gt=[he,Be,yt].filter(Boolean).join("-"),Ge=String((C==null?void 0:C.downloadUrl)||"").trim(),bn=String((C==null?void 0:C.downloadFallbackUrl)||(C==null?void 0:C.url)||"").trim(),Vt=Array.from(new Set([Ge,bn].filter(Boolean)));if(!Vt.length)return;let Ht=!1;for(let xn=0;xn<Vt.length;xn+=1){const qn=Vt[xn],Et=xn>0;try{const Nt=await fetch(qn);if(!Nt.ok)throw new Error(`HTTP ${Nt.status}`);const fn=await Nt.blob(),Sr=window.URL.createObjectURL(fn),hn=String(fn.type||"").toLowerCase().includes("png")?"png":"jpg",On=document.createElement("a");On.href=Sr,On.download=`${gt}.${hn}`,document.body.appendChild(On),On.click(),On.remove(),window.URL.revokeObjectURL(Sr),Et&&re("w1280 tidak tersedia. File diunduh menggunakan fallback original."),Ht=!0;break}catch{continue}}if(!Ht){const xn=bn||Ge;xn&&window.open(xn,"_blank","noopener,noreferrer"),re("Gagal download otomatis. Gambar dibuka di tab baru, lalu simpan manual.")}},Ww=(C,te,we)=>!Array.isArray(C)||!C.length?o.jsx("small",{className:"text-muted tmdb-image-tab-empty",children:we}):o.jsx("div",{className:"tmdb-image-group-scroll",children:o.jsx("div",{className:`tmdb-image-grid ${te==="backdrop"?"is-backdrop-grid":"is-poster-grid"}`,children:C.map((he,Ee)=>{const nt=String((he==null?void 0:he.source)||"").trim().toLowerCase()==="backdrop"?"is-backdrop":"is-poster",Fe=String((he==null?void 0:he.url)||"").trim(),yt=String((he==null?void 0:he.previewUrl)||Fe).trim(),gt=De.some(Ge=>String((Ge==null?void 0:Ge.url)||"")===Fe);return o.jsxs("div",{className:`tmdb-image-item ${nt} ${gt?"is-active":""}`,role:"button",tabIndex:0,onClick:()=>Gi(Fe),onKeyDown:Ge=>{(Ge.key==="Enter"||Ge.key===" ")&&(Ge.preventDefault(),Gi(Fe))},title:gt?"Hapus dari pilihan":"Pilih gambar ini",children:[yt?o.jsx("img",{src:yt,alt:`${te}-${Ee+1}`}):o.jsx("span",{children:"No Image"}),o.jsx("button",{type:"button",className:"tmdb-image-download",onClick:Ge=>zR(he,Ge),title:"Download 1280p",children:o.jsx(Qt,{icon:"line-md:downloading",width:"20",height:"20"})}),gt&&o.jsx("span",{className:"tmdb-image-check",children:o.jsx(Qt,{icon:"material-symbols:check-circle",width:"16",height:"16"})})]},`${te}-${Fe}-${Ee}`)})})});return o.jsxs("div",{className:"tmdb-finder-page",children:[o.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"mb-0",children:"TMDB Finder"}),o.jsx("small",{className:"text-muted",children:"Cari Movie/TV, pilih detail + gambar, lalu kirim ke Generate."})]}),o.jsx("div",{className:"d-flex gap-2",children:o.jsx(oe,{type:"button",variant:"outline-secondary",size:"sm",onClick:()=>e("/generate"),children:"Kembali ke Generate"})})]}),Re&&o.jsx(Lt,{variant:"danger",className:"py-2",children:Re}),F&&o.jsx(Lt,{variant:"info",className:"py-2",children:F}),!!O.length&&o.jsx("div",{className:"tmdb-floating-alerts","aria-live":"polite","aria-atomic":"true",children:O.map(C=>o.jsx(Lt,{variant:C.variant||"warning",dismissible:!0,onClose:()=>Un(C.id),className:"tmdb-floating-alert py-2 px-3 mb-2",children:C.message},C.id))}),o.jsx(ka,{className:"mb-3",activeKey:Tt?"tmdb-browse":null,onSelect:_t,children:o.jsxs(ka.Item,{eventKey:"tmdb-browse",children:[o.jsx(ka.Header,{children:o.jsxs("div",{className:"tmdb-browse-accordion-header",children:[o.jsx("span",{children:"Kartu Movie/TV"}),o.jsx("small",{className:"text-muted",children:zn?`Search: ${String((st==null?void 0:st.query)||u||"-").trim()||"-"}`:`Aktif: ${String(En.mediaType||"movie").toUpperCase()}  ${ye}`})]})}),o.jsxs(ka.Body,{children:[o.jsx("div",{className:"tmdb-search-controls mb-3",children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:2,className:"tmdb-search-type-col",children:[o.jsx(U.Label,{children:"Tipe"}),o.jsxs(U.Select,{size:"sm",value:l,onChange:C=>c(String(C.target.value||"multi")),children:[o.jsx("option",{value:"multi",children:"Multi"}),o.jsx("option",{value:"movie",children:"Movie"}),o.jsx("option",{value:"tv",children:"TV"})]})]}),o.jsxs(Se,{md:4,className:"tmdb-search-query-col",children:[o.jsx(U.Label,{children:"Judul Film/Series"}),o.jsx(U.Control,{size:"sm",type:"text",placeholder:"Masukkan judul... atau id:27205 / tmdb:27205",value:u,onChange:C=>d(String(C.target.value||""))})]}),o.jsxs(Se,{md:1,className:"tmdb-search-year-col",children:[o.jsx(U.Label,{children:"Tahun"}),o.jsx(U.Control,{size:"sm",type:"text",maxLength:4,inputMode:"numeric",value:f,onChange:C=>g(String(C.target.value||"").replace(/[^\d]/g,"").slice(0,4))})]}),o.jsxs(Se,{md:2,className:"tmdb-search-language-col",children:[o.jsx(U.Label,{children:"Language"}),o.jsx(U.Select,{size:"sm",value:w,onChange:C=>b(String(C.target.value||"en-US")),children:Q5.map(C=>o.jsx("option",{value:C,children:C},C))})]}),o.jsxs(Se,{md:1,className:"tmdb-search-region-col",children:[o.jsx(U.Label,{children:"Region"}),o.jsx(U.Select,{size:"sm",value:p,onChange:C=>m(String(C.target.value||"ID")),children:X5.map(C=>o.jsx("option",{value:C,children:C},C))})]}),o.jsx(Se,{md:2,className:"d-grid tmdb-search-submit-col",children:o.jsx(oe,{type:"button",variant:"primary",size:"sm",onClick:It,disabled:me,children:me?o.jsx(Ri,{animation:"border",size:"sm"}):"Cari TMDB"})})]})}),!zn&&o.jsx("div",{className:"tmdb-browse-actions mb-2",children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:3,className:"tmdb-browse-type-col",children:[o.jsx(U.Label,{className:"mb-1",children:"Tipe"}),o.jsxs(U.Select,{size:"sm",value:Ft.mediaType,onChange:C=>Gr(C.target.value),children:[o.jsx("option",{value:"movie",children:"Movie"}),o.jsx("option",{value:"tv",children:"TV"})]})]}),o.jsxs(Se,{md:5,className:"tmdb-browse-category-col",children:[o.jsx(U.Label,{className:"mb-1",children:"Kategori"}),o.jsx(U.Select,{size:"sm",value:Ft.category,onChange:C=>Ts(C.target.value),children:(Jy[ji(Ft.mediaType)]||[]).map(C=>o.jsx("option",{value:C.key,children:C.label},`${Ft.mediaType}-${C.key}`))})]})]})}),zn&&o.jsxs("div",{className:"tmdb-search-card-toolbar mb-2",children:[o.jsx("small",{className:"text-muted",children:"Mode pencarian aktif. Hasil kartu mengikuti input `Cari TMDB`."}),o.jsx(oe,{type:"button",size:"sm",variant:"outline-secondary",onClick:mc,disabled:Te,children:"Kembali ke Browse"})]}),o.jsx("div",{className:"tmdb-candidate-quick-filter mb-2",children:rj.map(C=>o.jsx(U.Check,{type:"switch",id:`tmdb-card-filter-${C.key}`,label:C.label,checked:!!A[C.key],onChange:()=>cs(C.key)},`tmdb-card-filter-${C.key}`))}),o.jsx("div",{className:"tmdb-candidate-filter-meta mb-2",children:o.jsxs("small",{className:"text-muted",children:["Tampil ",cn.length,"/",M.length," kandidat",Oe?"  mengecek trailer/provider...":""]})}),(Te||me)&&o.jsxs("div",{className:"py-2 text-muted",children:[o.jsx(Ri,{animation:"border",size:"sm",className:"me-2"}),zn?"Mencari kartu TMDB...":"Memuat kartu TMDB..."]}),!Te&&!me&&!cn.length&&!M.length&&o.jsx("small",{className:"text-muted",children:zn?"Belum ada hasil search. Jalankan Cari TMDB untuk menampilkan kartu.":"Belum ada kartu kategori. Pilih salah satu kategori di atas."}),!Te&&!me&&!cn.length&&!!M.length&&o.jsx("small",{className:"text-muted",children:"Tidak ada kandidat yang sesuai filter aktif."}),!Te&&!me&&!!cn.length&&o.jsx("div",{className:"tmdb-browse-grid",children:cn.map((C,te)=>{const we=kr(C)||`${C.mediaType||"x"}-${C.tmdbId||te}`,he=R===we,Ee=N[we]||Zo(C),Be=String(C.mediaType||"-").toUpperCase(),nt=Number.isFinite(Number(C.rating))?` ${Number(C.rating).toFixed(1)}`:"NR",Fe=wu((C==null?void 0:C.primaryGenre)||(Ee==null?void 0:Ee.primaryGenre));return o.jsx("button",{type:"button",className:`tmdb-browse-card ${he?"is-active":""}`,onClick:()=>Wa(C),title:C.title||"-",children:o.jsxs("div",{className:"tmdb-browse-poster",children:[C.posterUrl?o.jsx("img",{src:C.posterUrl,alt:C.title||`browse-${te+1}`}):o.jsx("span",{children:"No Poster"}),o.jsx("span",{className:"tmdb-browse-chip tmdb-browse-chip-type",children:Be}),o.jsx("span",{className:"tmdb-browse-chip tmdb-browse-chip-rating",children:nt}),he&&o.jsx("span",{className:"tmdb-browse-chip tmdb-browse-chip-active",children:o.jsx(Qt,{icon:"material-symbols:check-circle",width:"14",height:"14"})}),o.jsxs("div",{className:"tmdb-browse-overlay",children:[o.jsx("div",{className:"tmdb-browse-title",children:C.title||"-"}),o.jsxs("div",{className:"tmdb-browse-sub",children:[C.year||"-","  ",Fe||"-"]})]})]})},we)})}),zn?o.jsxs("div",{className:"tmdb-browse-pagination-wrap mt-2",children:[o.jsxs("small",{className:"text-muted",children:["Halaman ",Math.max(1,Number(Ce.page||1)),"/",Math.max(1,Number(Ce.totalPages||1)),"  ","Total hasil: ",Math.max(0,Number(Ce.totalResults||0)),"  ","Max TMDB: ",Math.max(1,Number(Ce.maxPage||500))]}),Math.max(1,Number(Ce.totalPages||1))>1&&o.jsxs(tn,{size:"sm",className:"tmdb-browse-pagination mb-0",children:[o.jsx(tn.First,{disabled:me||Number(Ce.page||1)<=1,onClick:()=>fs(1)}),o.jsx(tn.Prev,{disabled:me||Number(Ce.page||1)<=1,onClick:()=>fs(Number(Ce.page||1)-1)}),ie[0]>1&&o.jsx(tn.Ellipsis,{disabled:!0}),ie.map(C=>o.jsx(tn.Item,{active:Number(Ce.page||1)===C,disabled:me,onClick:()=>fs(C),children:C},`search-page-${C}`)),!!H.length&&Ie&&o.jsx(tn.Ellipsis,{disabled:!0}),H.map(C=>o.jsx(tn.Item,{active:Number(Ce.page||1)===C,disabled:me,onClick:()=>fs(C),children:C},`search-page-tail-${C}`)),o.jsx(tn.Next,{disabled:me||Number(Ce.page||1)>=Number(Ce.totalPages||1),onClick:()=>fs(Number(Ce.page||1)+1)}),o.jsx(tn.Last,{disabled:me||Number(Ce.page||1)>=Number(Ce.totalPages||1),onClick:()=>fs(Number(Ce.totalPages||1))})]})]}):o.jsxs("div",{className:"tmdb-browse-pagination-wrap mt-2",children:[o.jsxs("small",{className:"text-muted",children:["Halaman ",Math.max(1,Number(S.page||1)),"/",Math.max(1,Number(S.totalPages||1)),"  ","Total hasil: ",Math.max(0,Number(S.totalResults||0)),"  ","Max TMDB: ",Math.max(1,Number(S.maxPage||500))]}),Math.max(1,Number(S.totalPages||1))>1&&o.jsxs(tn,{size:"sm",className:"tmdb-browse-pagination mb-0",children:[o.jsx(tn.First,{disabled:Te||Number(S.page||1)<=1,onClick:()=>$s(1)}),o.jsx(tn.Prev,{disabled:Te||Number(S.page||1)<=1,onClick:()=>$s(Number(S.page||1)-1)}),V[0]>1&&o.jsx(tn.Ellipsis,{disabled:!0}),V.map(C=>o.jsx(tn.Item,{active:Number(S.page||1)===C,disabled:Te,onClick:()=>$s(C),children:C},`browse-page-${C}`)),!!Ae.length&&Qe&&o.jsx(tn.Ellipsis,{disabled:!0}),Ae.map(C=>o.jsx(tn.Item,{active:Number(S.page||1)===C,disabled:Te,onClick:()=>$s(C),children:C},`browse-page-tail-${C}`)),o.jsx(tn.Next,{disabled:Te||Number(S.page||1)>=Number(S.totalPages||1),onClick:()=>$s(Number(S.page||1)+1)}),o.jsx(tn.Last,{disabled:Te||Number(S.page||1)>=Number(S.totalPages||1),onClick:()=>$s(Number(S.totalPages||1))})]})]})]})]})}),o.jsx(Ct,{className:"g-3",children:o.jsx(Se,{lg:12,children:o.jsxs(We,{className:"h-100",children:[o.jsxs(We.Header,{className:"py-2 d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:"Detail TMDB"}),o.jsxs("div",{className:"tmdb-detail-header-tools",children:[o.jsxs("div",{className:"tmdb-detail-header-badges",children:[o.jsx(Ue,{bg:"secondary",children:String((j==null?void 0:j.entityType)||l||"multi").toUpperCase()}),o.jsxs(Ue,{bg:je.variant,children:["Kelengkapan ",je.filled,"/",je.total," (",je.percent,"%)"]}),dt&&o.jsx(Ue,{bg:"info",children:Od}),o.jsxs(Ue,{bg:"dark",children:["Lock ",un,"/",Vn.length]})]}),o.jsxs("div",{className:"tmdb-detail-header-actions",children:[o.jsx(oe,{type:"button",variant:"outline-primary",size:"sm",onClick:D,disabled:!ce,children:"Apply & Hold"}),o.jsx(oe,{type:"button",variant:"primary",size:"sm",onClick:vn,disabled:!ce,children:"Use Data"}),o.jsx(oe,{type:"button",variant:"outline-danger",size:"sm",onClick:le,children:"Reset TMDB"})]})]})]}),o.jsxs(We.Body,{children:[pe&&o.jsxs("div",{className:"py-4 text-center text-muted",children:[o.jsx(Ri,{animation:"border",size:"sm",className:"me-2"}),"Memuat detail TMDB..."]}),!pe&&!j&&o.jsx("small",{className:"text-muted",children:"Pilih salah satu kandidat untuk memuat detail."}),!pe&&j&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`tmdb-tv-overview-group mb-3${dt?" is-tv":""}`,children:[dt&&o.jsx("div",{className:"tmdb-tv-scope-card mb-0",children:o.jsxs("div",{className:"tmdb-tv-scope-groups",children:[o.jsx("div",{className:"tmdb-tv-scope-group tmdb-tv-scope-group-primary",children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:6,className:"tmdb-tv-scope-reference-col",children:[o.jsxs("div",{className:"tmdb-scope-label-row mb-1",children:[o.jsx(U.Label,{className:"mb-0",children:"Reference Scope"}),o.jsxs("div",{className:"tmdb-scope-help-wrap",children:[o.jsx(oe,{type:"button",variant:"link",size:"sm",className:"tmdb-scope-help-btn p-0",onClick:mt,title:"Bantuan scope",children:o.jsx(Qt,{icon:"material-symbols:help-outline",width:"18",height:"18"})}),!!be&&o.jsx("div",{className:"tmdb-scope-help-toast-wrap",children:o.jsxs(_s,{show:be,onClose:()=>Le(!1),bg:"dark",className:"tmdb-help-toast tmdb-scope-help-toast",children:[o.jsx(_s.Header,{closeButton:!0,children:o.jsx("strong",{className:"me-auto",children:"Bantuan Reference Scope"})}),o.jsx(_s.Body,{className:"text-white",children:n8.map(C=>o.jsx("div",{className:"tmdb-help-line",children:C},C))})]})})]})]}),o.jsx(U.Select,{size:"sm",value:Ar(h),onChange:C=>us(C.target.value),children:Jb.map(C=>o.jsx("option",{value:C,children:sj[C]||C},`scope-${C}`))})]}),o.jsxs(Se,{md:6,className:"tmdb-tv-scope-spoiler-col",children:[o.jsx(U.Label,{className:"mb-1",children:"Spoiler Level"}),o.jsx(U.Select,{size:"sm",value:la(x),onChange:C=>hr({spoilerLevel:C.target.value}),children:Yb.map(C=>o.jsx("option",{value:C,children:ij[C]||C},`spoiler-${C}`))})]})]})}),o.jsx("div",{className:"tmdb-tv-scope-group tmdb-tv-scope-group-season",children:o.jsxs(Ct,{className:"g-2 align-items-end",children:[o.jsxs(Se,{md:6,className:"tmdb-tv-scope-season-col",children:[o.jsx(U.Label,{className:"mb-1",children:"Season"}),o.jsxs(U.Select,{size:"sm",value:Hn,disabled:!Hw,onChange:C=>Cs(C.target.value),children:[o.jsx("option",{value:"",children:Hw?"Pilih Season":"All Season (Scope: Series)"}),W.map(C=>o.jsxs("option",{value:C.number,children:["S",C.number,C.name?`  ${C.name}`:""]},`season-opt-${C.number}`))]})]}),o.jsxs(Se,{md:6,className:"tmdb-tv-scope-episode-col",children:[o.jsx(U.Label,{className:"mb-1",children:"Episode"}),o.jsxs(U.Select,{size:"sm",value:Zi,disabled:!qw||!W.length,onChange:C=>ds(C.target.value),children:[o.jsx("option",{value:"",children:qw?"Pilih Episode":"All Episode (Scope: Season/Series)"}),ee.map(C=>o.jsxs("option",{value:C.number,children:["E",C.number,C.name?`  ${C.name}`:""]},`episode-opt-${C.number}`))]})]})]})})]})}),o.jsxs("div",{className:"tmdb-detail-overview-grid mb-0",children:[o.jsx("div",{className:"tmdb-detail-overview-poster-wrap",children:ot?o.jsx("img",{className:"tmdb-detail-overview-poster",src:ot,alt:((d0=j==null?void 0:j.movieOrTv)==null?void 0:d0.title)||(ae==null?void 0:ae.title)||"tmdb-poster"}):o.jsx("div",{className:"tmdb-detail-overview-poster tmdb-detail-overview-poster-empty",children:"No Poster"})}),o.jsxs("div",{className:"tmdb-detail-overview-meta",children:[o.jsxs("div",{className:"tmdb-detail-overview-title",children:[o.jsx("strong",{children:"Title:"})," ",o.jsx("span",{children:((f0=j==null?void 0:j.movieOrTv)==null?void 0:f0.title)||"-"})]}),o.jsxs("div",{className:"tmdb-detail-overview-text",children:[o.jsx("strong",{children:"Overview:"})," ",o.jsx("span",{children:String(((h0=j==null?void 0:j.movieOrTv)==null?void 0:h0.overview)||"").trim()||"-"})]})]})]})]}),o.jsxs("div",{className:"tmdb-fact-grid mb-3",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Tagline:"})," ",((p0=j==null?void 0:j.movieOrTv)==null?void 0:p0.tagline)||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Release:"})," ",((m0=j==null?void 0:j.movieOrTv)==null?void 0:m0.release_date)||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Runtime:"})," ",((g0=j==null?void 0:j.movieOrTv)==null?void 0:g0.runtime)||"-"," menit"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Certification:"})," ",((y0=j==null?void 0:j.movieOrTv)==null?void 0:y0.certification_id)||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Genres:"})," ",Array.isArray((v0=j==null?void 0:j.movieOrTv)==null?void 0:v0.genres)&&j.movieOrTv.genres.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsxs("strong",{children:[yi,":"]})," ",Hp]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Cast Top:"})," ",Array.isArray((b0=j==null?void 0:j.movieOrTv)==null?void 0:b0.cast_top)&&j.movieOrTv.cast_top.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Keywords:"})," ",Array.isArray((w0=j==null?void 0:j.movieOrTv)==null?void 0:w0.keywords)&&j.movieOrTv.keywords.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Production Companies:"})," ",Array.isArray((x0=j==null?void 0:j.movieOrTv)==null?void 0:x0.production_companies)&&j.movieOrTv.production_companies.join(", ")||"-"]}),dt&&o.jsxs("div",{children:[o.jsx("strong",{children:"Networks:"})," ",Array.isArray((S0=j==null?void 0:j.movieOrTv)==null?void 0:S0.networks)&&j.movieOrTv.networks.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Production Countries:"})," ",Array.isArray((_0=j==null?void 0:j.movieOrTv)==null?void 0:_0.production_countries)&&j.movieOrTv.production_countries.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Vote Average:"})," ",Number.isFinite(Number((k0=j==null?void 0:j.movieOrTv)==null?void 0:k0.vote_average))?Number(j.movieOrTv.vote_average).toFixed(1):"-"]}),!dt&&o.jsxs("div",{children:[o.jsx("strong",{children:"Budget:"})," ",oj((j0=j==null?void 0:j.movieOrTv)==null?void 0:j0.budget)]}),!dt&&o.jsxs("div",{children:[o.jsx("strong",{children:"Revenue:"})," ",oj((E0=j==null?void 0:j.movieOrTv)==null?void 0:E0.revenue)]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Watch Providers:"})," ",Array.isArray((N0=j==null?void 0:j.movieOrTv)==null?void 0:N0.watch_providers_id)&&j.movieOrTv.watch_providers_id.join(", ")||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status:"})," ",((C0=j==null?void 0:j.movieOrTv)==null?void 0:C0.status)||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Original Language:"})," ",((T0=j==null?void 0:j.movieOrTv)==null?void 0:T0.original_language)||"-"]}),dt&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Reference Scope:"})," ",Ga]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Spoiler Level:"})," ",Qi]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Season:"})," ",Xi.season||"-"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Season Count:"})," ",(($0=j==null?void 0:j.movieOrTv)==null?void 0:$0.season_count)||($t==null?void 0:$t.seasonCount)||"-"]}),Kw&&o.jsxs("div",{children:[o.jsx("strong",{children:"Episode Count:"})," ",((O0=j==null?void 0:j.movieOrTv)==null?void 0:O0.episode_count)||($t==null?void 0:$t.episodeCount)||"-"]}),Kw&&o.jsxs("div",{children:[o.jsx("strong",{children:"Season Overview:"})," ",((R0=j==null?void 0:j.movieOrTv)==null?void 0:R0.season_overview)||((A0=$t==null?void 0:$t.season)==null?void 0:A0.overview)||"-"]}),qp&&o.jsxs("div",{children:[o.jsx("strong",{children:"Episode:"})," ",Xi.episode||"-"]}),qp&&o.jsxs("div",{children:[o.jsx("strong",{children:"Episode Type:"})," ",((P0=j==null?void 0:j.movieOrTv)==null?void 0:P0.episode_type)||($t==null?void 0:$t.episodeType)||"-"]}),qp&&o.jsxs("div",{children:[o.jsx("strong",{children:"Episode Overview:"})," ",((I0=j==null?void 0:j.movieOrTv)==null?void 0:I0.episode_overview)||((L0=$t==null?void 0:$t.episode)==null?void 0:L0.overview)||"-"]})]})]}),((M0=j==null?void 0:j.movieOrTv)==null?void 0:M0.trailer)&&o.jsxs("div",{className:"mb-2",children:[o.jsx("strong",{children:"Trailer:"})," ",o.jsx("a",{href:j.movieOrTv.trailer,target:"_blank",rel:"noreferrer",children:j.movieOrTv.trailer})]}),!((F0=j==null?void 0:j.movieOrTv)!=null&&F0.trailer)&&o.jsxs("div",{className:"mb-2",children:[o.jsx("strong",{children:"Trailer:"})," -"]}),o.jsxs("div",{className:"tmdb-fact-lock-card mb-3",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx("strong",{children:"Fact Locks (Lock/Unlock per Field)"}),o.jsxs("small",{className:"text-muted",children:[un,"/",Vn.length," aktif"]})]}),o.jsx("div",{className:"tmdb-fact-lock-grid",children:Vn.map(C=>o.jsx(U.Check,{type:"switch",id:`tmdb-fact-lock-${C}`,label:C==="director"?yi:Z5[C]||C,checked:X[C]!==!1,onChange:()=>Wr(C)},C))}),o.jsx("small",{className:"text-muted d-block mt-1",children:"Field yang ON dipaksa mengikuti fakta TMDB saat generate."})]}),o.jsxs("div",{className:"mb-2 d-flex justify-content-between align-items-center",children:[o.jsxs("strong",{children:["Pilih Referensi Gambar (max ",aa,")"]}),o.jsxs("small",{className:"text-muted",children:[De.length,"/",aa," dipilih  Poster ",Ye.length,"  Backdrop ",ct.length]})]}),o.jsx("div",{className:"tmdb-image-tabs",children:o.jsx(rf.Container,{activeKey:xe,onSelect:C=>Je(C==="backdrop"?"backdrop":"poster"),children:o.jsxs(o.Fragment,{children:[o.jsxs(ai,{variant:"tabs",className:"tmdb-image-tabs-nav mb-2",children:[o.jsx(ai.Item,{children:o.jsxs(ai.Link,{eventKey:"poster",children:["Poster",o.jsx("span",{className:"tmdb-image-tab-count",children:Ye.length})]})}),o.jsx(ai.Item,{children:o.jsxs(ai.Link,{eventKey:"backdrop",children:["Backdrop",o.jsx("span",{className:"tmdb-image-tab-count",children:ct.length})]})})]}),o.jsxs(rf.Content,{children:[o.jsx(rf.Pane,{eventKey:"poster",children:Ww(Ye,"poster","Tidak ada poster.")}),o.jsx(rf.Pane,{eventKey:"backdrop",children:Ww(ct,"backdrop","Tidak ada backdrop.")})]})]})})}),o.jsxs("div",{className:"tmdb-payload-preview mt-3",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[o.jsx("strong",{children:"Payload Preview"}),o.jsx("small",{className:"text-muted",children:Ve==="debug"?"Debug internal (selection + debug)":"Request strict (akan dikirim ke Generate)"})]}),o.jsxs("div",{className:"tmdb-payload-mode-toggle mb-2",children:[o.jsx(oe,{type:"button",size:"sm",variant:Ve==="strict"?"primary":"outline-secondary",onClick:()=>He("strict"),children:"Request (Strict)"}),o.jsx(oe,{type:"button",size:"sm",variant:Ve==="debug"?"primary":"outline-secondary",onClick:()=>He("debug"),children:"Debug (Full)"})]}),o.jsx("pre",{className:"tmdb-payload-preview-json",children:gi?JSON.stringify(gi,null,2):`{
  "tmdb": null
}`})]})]})]})]})})})]})}function m8(){var g,p;const e="ui-theme",[t,n]=y.useState(!0),[r,s]=y.useState(null),[i,a]=y.useState(""),[l,c]=y.useState(()=>{if(typeof window>"u")return"light";const m=window.localStorage.getItem(e);return m==="light"||m==="dark"?m:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),u=qi();y.useEffect(()=>{let m=!0;async function w(){const{data:h}=await Pt.auth.getSession();m&&(h!=null&&h.session?(s(h.session.user||null),n(!1)):u("/auth"))}w();const{data:b}=Pt.auth.onAuthStateChange((h,v)=>{v?s(v.user||null):(s(null),u("/auth"))});return()=>{var h;m=!1,(h=b==null?void 0:b.subscription)==null||h.unsubscribe()}},[u]),y.useEffect(()=>{document.documentElement.setAttribute("data-bs-theme",l),window.localStorage.setItem(e,l)},[l]),y.useEffect(()=>{let m=!0;async function w(){const b=(r==null?void 0:r.user_metadata)||{},h=await DO({supabase:Pt,metadata:b});m&&a(h.url||"")}return w(),()=>{m=!1}},[r==null?void 0:r.id,(g=r==null?void 0:r.user_metadata)==null?void 0:g.avatar_url,(p=r==null?void 0:r.user_metadata)==null?void 0:p.avatar_path]);async function d(){await Pt.auth.signOut(),u("/auth")}if(t)return o.jsx("div",{className:"p-4",children:"Loading..."});const f=((r==null?void 0:r.email)||"U").charAt(0).toUpperCase();return o.jsxs(o.Fragment,{children:[o.jsx(tf,{bg:l==="dark"?"dark":"light","data-bs-theme":l,expand:"lg",className:"mb-3",collapseOnSelect:!0,children:o.jsxs(Eh,{children:[o.jsxs(tf.Brand,{as:ni,to:"/dashboard",className:"app-brand",children:[o.jsx("img",{src:"/brand-icon.svg",alt:"AI Content",className:"app-brand-icon"}),o.jsx("span",{className:"app-brand-text",children:"AI Content"})]}),o.jsx(tf.Toggle,{"aria-controls":"main-navbar-offcanvas"}),o.jsxs(tf.Offcanvas,{id:"main-navbar-offcanvas","aria-labelledby":"main-navbar-offcanvas-label",placement:"end",children:[o.jsx(Bf.Header,{closeButton:!0,children:o.jsx(Bf.Title,{id:"main-navbar-offcanvas-label",children:"Menu"})}),o.jsxs(Bf.Body,{children:[o.jsxs(ai,{className:"me-auto",children:[o.jsx(ai.Link,{as:ni,to:"/dashboard",children:"Dashboard"}),o.jsx(ai.Link,{as:ni,to:"/generate",children:"Generate"}),o.jsx(ai.Link,{as:ni,to:"/history",children:"History"}),o.jsx(ai.Link,{as:ni,to:"/templates",children:"Templates"})]}),o.jsxs(Ot,{align:"end",children:[o.jsx(Ot.Toggle,{as:oe,variant:"light",className:"p-0 border-0 bg-transparent nav-avatar-toggle",children:i?o.jsx(to,{src:i,roundedCircle:!0,className:"nav-avatar-image"}):o.jsx("span",{className:"nav-avatar-fallback",children:f})}),o.jsxs(Ot.Menu,{children:[o.jsx(Ot.Item,{as:ni,to:"/profile",children:"Profile"}),o.jsx(Ot.Item,{as:ni,to:"/settings",children:"Settings"}),o.jsx(Ot.Divider,{}),o.jsxs(Ot.ItemText,{className:"nav-theme-item",children:[o.jsx("span",{children:l==="dark"?"Dark Mode":"Light Mode"}),o.jsx(U.Check,{type:"switch",id:"theme-switch",className:"m-0 nav-theme-switch",checked:l==="dark",onChange:m=>c(m.target.checked?"dark":"light"),"aria-label":"Toggle light and dark mode"})]}),o.jsx(Ot.Divider,{}),o.jsx(Ot.Item,{className:"text-danger",onClick:d,children:"Logout"})]})]})]})]})]})}),o.jsx(Eh,{children:o.jsx(hI,{})})]})}function g8(){return o.jsxs(mI,{children:[o.jsx(gs,{path:"/auth",element:o.jsx(Kz,{})}),o.jsx(gs,{path:"/",element:o.jsx(eS,{to:"/dashboard",replace:!0})}),o.jsxs(gs,{element:o.jsx(m8,{}),children:[o.jsx(gs,{path:"/dashboard",element:o.jsx(T3,{})}),o.jsx(gs,{path:"/generate",element:o.jsx(u4,{})}),o.jsx(gs,{path:"/history",element:o.jsx(E4,{})}),o.jsx(gs,{path:"/templates",element:o.jsx(q5,{})}),o.jsx(gs,{path:"/profile",element:o.jsx(N4,{})}),o.jsx(gs,{path:"/settings",element:o.jsx(Y5,{})}),o.jsx(gs,{path:"/tmdb-finder",element:o.jsx(p8,{})})]}),o.jsx(gs,{path:"*",element:o.jsx(eS,{to:"/dashboard",replace:!0})})]})}SN(document.getElementById("root")).render(o.jsx(At.StrictMode,{children:o.jsx(SI,{children:o.jsx(g8,{})})}));
