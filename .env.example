# Template ini dipakai untuk:
# - .env (aktif)
# - .env.primary (akun utama)
# - .env.backup (akun cadangan)
# Isi semua variabel penting di ketiga file tersebut sesuai kebutuhan.
#
# Wajib diisi KHUSUS untuk akun backup (di file .env.backup):
# 1) SUPABASE_URL                -> URL project Supabase backup
# 2) VITE_SUPABASE_URL           -> URL project Supabase backup (sama dengan SUPABASE_URL)
# 3) SUPABASE_SERVICE_ROLE_KEY   -> service role key project backup
# 4) VITE_SUPABASE_ANON_KEY      -> anon key project backup
# 5) AUTH_ALLOWED_EMAILS         -> samakan dengan primary (4 email tim yang boleh login)
# 6) ENFORCE_AUTH_EMAIL_ALLOWLIST=true
# 7) MAX_SIGNUP_USERS=4
# 8) PROVIDER_KEYS_ENC_KEY_B64   -> WAJIB SAMA dengan primary (agar key user tetap bisa didecrypt setelah switch)

# Supabase (autentikasi + penyimpanan history)
# Sisi backend (disarankan)
SUPABASE_URL=https://your-supabase-url.supabase.co
# Sisi frontend
VITE_SUPABASE_URL=https://your-supabase-url.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key
ADMIN_INTERNAL_TOKEN=some-secret-token-for-internal-api

# Batas jumlah user internal
MAX_SIGNUP_USERS=4
# Matikan pendaftaran publik. Untuk internal team: disarankan false (akun dibuat manual/invite).
ENABLE_PUBLIC_SIGNUP=false
# Proteksi endpoint sensitif (generate + history user display names). Disarankan true.
# Untuk integration test lokal bisa di-set false.
REQUIRE_AUTH_FOR_SENSITIVE_ENDPOINTS=true
# Guard agar service-role key tidak pernah masuk env frontend (VITE_*).
STRICT_SECRET_ENV_GUARD=true
# Metadata rotasi service-role key (untuk monitoring keamanan).
SERVICE_ROLE_ROTATION_DAYS=30
SUPABASE_SERVICE_ROLE_ROTATED_AT=2026-02-22

# Allowlist login tim internal (pisahkan dengan koma)
# Disarankan isi tepat 4 email tim yang boleh login.
ENFORCE_AUTH_EMAIL_ALLOWLIST=true
AUTH_ALLOWED_EMAILS=owner@example.com,user2@example.com,user3@example.com,user4@example.com

# URL backend utama untuk frontend (dev/prod sesuai kebutuhan)
VITE_API_URL=http://localhost:3000
# URL backend sekunder (failover), opsional
VITE_API_URL_SECONDARY=
# URL backend lokal darurat, opsional
# Hanya dipakai jika browser mengizinkan fallback localhost/127.0.0.1
VITE_LOCAL_API_URL=http://localhost:3000

# CORS backend:
# Daftar origin frontend yang diizinkan akses API (pisahkan dengan koma).
# Untuk fase dev lokal, contoh default:
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://localhost:5174,http://127.0.0.1:5174
# Sangat tidak disarankan true di production.
CORS_ALLOW_ALL_ORIGINS=false


# Kunci AI provider (WAJIB di backend, jangan di expose ke frontend)
GEMINI_API_KEY=YOUR_GEMINI_API_KEY
OPENAI_API_KEY=YOUR_OPENAI_API_KEY
OPENROUTER_API_KEY=YOUR_OPENROUTER_API_KEY
GROQ_API_KEY=YOUR_GROQ_API_KEY
COHERE_API_KEY=YOUR_COHERE_API_KEY
DEEPSEEK_API_KEY=YOUR_DEEPSEEK_API_KEY
HUGGINGFACE_API_KEY=YOUR_HUGGINGFACE_API_KEY

# Integrasi referensi Movie/TV (TMDB)
# Dipakai untuk fitur konten movie/tv agar metadata lebih akurat.
# Bisa diisi via Settings (terenkripsi di database) atau fallback dari env ini.
TMDB_API_KEY=YOUR_TMDB_API_KEY
# Auto-enrich prompt generate dengan data TMDB saat topik terdeteksi movie/TV.
TMDB_AUTO_ENRICH_ENABLED=true
# Batas panjang ringkasan overview TMDB yang dimasukkan ke prompt.
TMDB_OVERVIEW_MAX_CHARS=360

# Enkripsi API key per-user (server-only)
# Buat key 32-byte lalu simpan dalam format base64.
# Contoh PowerShell:
# [Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))
PROVIDER_KEYS_ENC_KEY_B64=YOUR_BASE64_32_BYTE_KEY

# true: jika user belum set key pribadi, backend boleh pakai key server
# false: user wajib set key pribadi
ALLOW_SERVER_PROVIDER_KEY_FALLBACK=true

# Switch utama panggilan provider nyata pada endpoint /api/generate
ENABLE_REAL_PROVIDER_CALLS=true

# Opsional: jika provider gagal, pakai mock response (bukan 502)
# Disarankan false untuk produksi.
ALLOW_MOCK_FALLBACK_ON_PROVIDER_ERROR=false

# Reliability generate ke provider:
# - Timeout per request provider (ms)
# - Retry saat timeout / rate-limit / 5xx (jumlah percobaan ulang)
# - Backoff antar retry (ms)
PROVIDER_REQUEST_TIMEOUT_MS=28000
PROVIDER_REQUEST_RETRY_COUNT=1
PROVIDER_REQUEST_RETRY_BACKOFF_MS=650

# Override per-provider (opsional, jika kosong maka pakai nilai global di atas)
# Format:
# PROVIDER_<NAMA_PROVIDER>_TIMEOUT_MS
# PROVIDER_<NAMA_PROVIDER>_RETRY_COUNT
# PROVIDER_<NAMA_PROVIDER>_RETRY_BACKOFF_MS
#
# Nama provider yang dipakai:
# - GEMINI
# - OPENAI
# - OPENROUTER
# - GROQ
# - COHERE_AI
# - DEEPSEEK
# - HUGGING_FACE
#
# Rekomendasi awal:
PROVIDER_GEMINI_TIMEOUT_MS=22000
PROVIDER_GEMINI_RETRY_COUNT=1
PROVIDER_GEMINI_RETRY_BACKOFF_MS=500

PROVIDER_OPENAI_TIMEOUT_MS=22000
PROVIDER_OPENAI_RETRY_COUNT=1
PROVIDER_OPENAI_RETRY_BACKOFF_MS=500

PROVIDER_OPENROUTER_TIMEOUT_MS=38000
PROVIDER_OPENROUTER_RETRY_COUNT=2
PROVIDER_OPENROUTER_RETRY_BACKOFF_MS=900

PROVIDER_GROQ_TIMEOUT_MS=22000
PROVIDER_GROQ_RETRY_COUNT=1
PROVIDER_GROQ_RETRY_BACKOFF_MS=450

PROVIDER_COHERE_AI_TIMEOUT_MS=30000
PROVIDER_COHERE_AI_RETRY_COUNT=1
PROVIDER_COHERE_AI_RETRY_BACKOFF_MS=700

PROVIDER_DEEPSEEK_TIMEOUT_MS=32000
PROVIDER_DEEPSEEK_RETRY_COUNT=1
PROVIDER_DEEPSEEK_RETRY_BACKOFF_MS=800

PROVIDER_HUGGING_FACE_TIMEOUT_MS=35000
PROVIDER_HUGGING_FACE_RETRY_COUNT=2
PROVIDER_HUGGING_FACE_RETRY_BACKOFF_MS=900

# true: write mutation di-mirror ke profil Supabase lain (primary <-> backup)
# Tujuan: data backup hampir real-time.
ENABLE_SUPABASE_DUAL_WRITE=true

# true: provider tanpa adapter vision tetap menerima referensi gambar
# lalu diproses sebagai fallback konteks teks.
# false: request ditolak dengan validation error.
ALLOW_TEXT_FALLBACK_ON_UNSUPPORTED_VISION_PROVIDER=true
